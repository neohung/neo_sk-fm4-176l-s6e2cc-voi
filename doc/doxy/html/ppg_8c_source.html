<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>PDL for FM Family: C:/Users/chzhang/Desktop/FM0 MCU/universial PDL/release_v11f_doxy/driver/ppg/ppg.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="products_site_image.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">PDL for FM Family
   &#160;<span id="projectnumber">Version2.0.0</span>
   </div>
   <div id="projectbrief">FM Peripheral Driver Library</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('ppg_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">C:/Users/chzhang/Desktop/FM0 MCU/universial PDL/release_v11f_doxy/driver/ppg/ppg.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ppg_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*******************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (C) 2013 Spansion LLC. All Rights Reserved. </span>
<a name="l00003"></a>00003 <span class="comment">*</span>
<a name="l00004"></a>00004 <span class="comment">* This software is owned and published by: </span>
<a name="l00005"></a>00005 <span class="comment">* Spansion LLC, 915 DeGuigne Dr. Sunnyvale, CA  94088-3453 (&quot;Spansion&quot;).</span>
<a name="l00006"></a>00006 <span class="comment">*</span>
<a name="l00007"></a>00007 <span class="comment">* BY DOWNLOADING, INSTALLING OR USING THIS SOFTWARE, YOU AGREE TO BE BOUND </span>
<a name="l00008"></a>00008 <span class="comment">* BY ALL THE TERMS AND CONDITIONS OF THIS AGREEMENT.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* This software contains source code for use with Spansion </span>
<a name="l00011"></a>00011 <span class="comment">* components. This software is licensed by Spansion to be adapted only </span>
<a name="l00012"></a>00012 <span class="comment">* for use in systems utilizing Spansion components. Spansion shall not be </span>
<a name="l00013"></a>00013 <span class="comment">* responsible for misuse or illegal use of this software for devices not </span>
<a name="l00014"></a>00014 <span class="comment">* supported herein.  Spansion is providing this software &quot;AS IS&quot; and will </span>
<a name="l00015"></a>00015 <span class="comment">* not be responsible for issues arising from incorrect user implementation </span>
<a name="l00016"></a>00016 <span class="comment">* of the software.  </span>
<a name="l00017"></a>00017 <span class="comment">*</span>
<a name="l00018"></a>00018 <span class="comment">* SPANSION MAKES NO WARRANTY, EXPRESS OR IMPLIED, ARISING BY LAW OR OTHERWISE,</span>
<a name="l00019"></a>00019 <span class="comment">* REGARDING THE SOFTWARE (INCLUDING ANY ACOOMPANYING WRITTEN MATERIALS), </span>
<a name="l00020"></a>00020 <span class="comment">* ITS PERFORMANCE OR SUITABILITY FOR YOUR INTENDED USE, INCLUDING, </span>
<a name="l00021"></a>00021 <span class="comment">* WITHOUT LIMITATION, THE IMPLIED WARRANTY OF MERCHANTABILITY, THE IMPLIED </span>
<a name="l00022"></a>00022 <span class="comment">* WARRANTY OF FITNESS FOR A PARTICULAR PURPOSE OR USE, AND THE IMPLIED </span>
<a name="l00023"></a>00023 <span class="comment">* WARRANTY OF NONINFRINGEMENT.  </span>
<a name="l00024"></a>00024 <span class="comment">* SPANSION SHALL HAVE NO LIABILITY (WHETHER IN CONTRACT, WARRANTY, TORT, </span>
<a name="l00025"></a>00025 <span class="comment">* NEGLIGENCE OR OTHERWISE) FOR ANY DAMAGES WHATSOEVER (INCLUDING, WITHOUT </span>
<a name="l00026"></a>00026 <span class="comment">* LIMITATION, DAMAGES FOR LOSS OF BUSINESS PROFITS, BUSINESS INTERRUPTION, </span>
<a name="l00027"></a>00027 <span class="comment">* LOSS OF BUSINESS INFORMATION, OR OTHER PECUNIARY LOSS) ARISING FROM USE OR </span>
<a name="l00028"></a>00028 <span class="comment">* INABILITY TO USE THE SOFTWARE, INCLUDING, WITHOUT LIMITATION, ANY DIRECT, </span>
<a name="l00029"></a>00029 <span class="comment">* INDIRECT, INCIDENTAL, SPECIAL OR CONSEQUENTIAL DAMAGES OR LOSS OF DATA, </span>
<a name="l00030"></a>00030 <span class="comment">* SAVINGS OR PROFITS, </span>
<a name="l00031"></a>00031 <span class="comment">* EVEN IF SPANSION HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. </span>
<a name="l00032"></a>00032 <span class="comment">* YOU ASSUME ALL RESPONSIBILITIES FOR SELECTION OF THE SOFTWARE TO ACHIEVE YOUR</span>
<a name="l00033"></a>00033 <span class="comment">* INTENDED RESULTS, AND FOR THE INSTALLATION OF, USE OF, AND RESULTS OBTAINED </span>
<a name="l00034"></a>00034 <span class="comment">* FROM, THE SOFTWARE.  </span>
<a name="l00035"></a>00035 <span class="comment">*</span>
<a name="l00036"></a>00036 <span class="comment">* This software may be replicated in part or whole for the licensed use, </span>
<a name="l00037"></a>00037 <span class="comment">* with the restriction that this Disclaimer and Copyright notice must be </span>
<a name="l00038"></a>00038 <span class="comment">* included with each copy of this software, whether used in part or whole, </span>
<a name="l00039"></a>00039 <span class="comment">* at all times.  </span>
<a name="l00040"></a>00040 <span class="comment">*/</span>
<a name="l00041"></a>00041 <span class="comment">/******************************************************************************/</span>
<a name="l00052"></a>00052 <span class="comment">/******************************************************************************/</span>
<a name="l00053"></a>00053 <span class="comment">/* Include files                                                              */</span>
<a name="l00054"></a>00054 <span class="comment">/******************************************************************************/</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="ppg_8h.html">ppg.h</a>&quot;</span>
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 <span class="preprocessor">#if (defined(PDL_PERIPHERAL_PPG_ACTIVE))</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span>
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_PPG == PDL_ON)</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span><span class="comment">/******************************************************************************/</span>
<a name="l00067"></a>00067 <span class="comment">/* Static variable definitions                                                */</span>
<a name="l00068"></a>00068 <span class="comment">/******************************************************************************/</span>
<a name="l00069"></a><a class="code" href="group___ppg_group.html#gad9a0f8dcf62e382eafd049e08f5ecdde">00069</a> <span class="keyword">static</span> func_ptr_t  <a class="code" href="group___ppg_group.html#gad9a0f8dcf62e382eafd049e08f5ecdde" title="Callback function pointer of PPG interrupt.">afnPpgCallback</a>[<a class="code" href="group___ppg_group.html#gaba91ce23a9835320db53492b7942251d">PPG_INT_MAX_CH</a>];      
<a name="l00070"></a>00070 
<a name="l00078"></a><a class="code" href="group___ppg_group.html#ga813794e6d835c6dd41a9f8793b247a4d">00078</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="group___ppg_group.html#ga813794e6d835c6dd41a9f8793b247a4d" title="Set NVIC Interrupt depending on PPG channel.">PpgInitNvic</a>(uint8_t u8CoupleCh)
<a name="l00079"></a>00079 {
<a name="l00080"></a>00080 <span class="preprocessor">#if (PDL_MCU_CORE == PDL_FM4_CORE)</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span>    <span class="keywordflow">if</span>((<a class="code" href="group___ppg_group.html#ga5fd263d5f5c271bc0f1507b29925639e">PPG_COUPLE_CH01</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#gae0aaf608036fa9bc8fc730594a87a1fc">PPG_COUPLE_CH23</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#ga60552e34b960e3c32263fb088df56d23">PPG_COUPLE_CH45</a> == u8CoupleCh))
<a name="l00082"></a>00082     {
<a name="l00083"></a>00083         NVIC_ClearPendingIRQ(PPG00_02_04_IRQn);
<a name="l00084"></a>00084         NVIC_EnableIRQ(PPG00_02_04_IRQn);
<a name="l00085"></a>00085         NVIC_SetPriority(PPG00_02_04_IRQn, PDL_IRQ_LEVEL_PPG00_02_04);  
<a name="l00086"></a>00086     }
<a name="l00087"></a>00087     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="group___ppg_group.html#gaa708057e5abcd3c15fc7afd5578071b2">PPG_COUPLE_CH89</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#gac1ef4218053a0ab361cc3bf82a6b235a">PPG_COUPLE_CH1011</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#gadea9d2742e3e1fcf76d6f54e2f3fc62d">PPG_COUPLE_CH1213</a> == u8CoupleCh))
<a name="l00088"></a>00088     {
<a name="l00089"></a>00089         NVIC_ClearPendingIRQ(PPG08_10_12_IRQn);
<a name="l00090"></a>00090         NVIC_EnableIRQ(PPG08_10_12_IRQn);
<a name="l00091"></a>00091         NVIC_SetPriority(PPG08_10_12_IRQn, PDL_IRQ_LEVEL_PPG08_10_12);  
<a name="l00092"></a>00092     }
<a name="l00093"></a>00093     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="group___ppg_group.html#ga0a504f29f8de7ef663aee20fdabcede0">PPG_COUPLE_CH1617</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#ga34ac2470b7cc99634330388f6ed5827b">PPG_COUPLE_CH1819</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#gaba5fee9d4ce1bc3dc67570b30c3d00d2">PPG_COUPLE_CH2021</a> == u8CoupleCh))
<a name="l00094"></a>00094     {
<a name="l00095"></a>00095         NVIC_ClearPendingIRQ(PPG16_18_20_IRQn);
<a name="l00096"></a>00096         NVIC_EnableIRQ(PPG16_18_20_IRQn);
<a name="l00097"></a>00097         NVIC_SetPriority(PPG16_18_20_IRQn, PDL_IRQ_LEVEL_PPG16_18_20);
<a name="l00098"></a>00098     }
<a name="l00099"></a>00099 <span class="preprocessor">#elif (PDL_MCU_CORE == PDL_FM0P_CORE)</span>
<a name="l00100"></a>00100 <span class="preprocessor"></span>    NVIC_ClearPendingIRQ(DSTC_ICC0_HDMICEC0_PPG_IRQn);
<a name="l00101"></a>00101     NVIC_EnableIRQ(DSTC_ICC0_HDMICEC0_PPG_IRQn);
<a name="l00102"></a>00102     NVIC_SetPriority(DSTC_ICC0_HDMICEC0_PPG_IRQn, PDL_IRQ_LEVEL_PPG_CEC0_ICC0_DSTC);  
<a name="l00103"></a>00103 <span class="preprocessor">#else</span>
<a name="l00104"></a>00104 <span class="preprocessor"></span>    NVIC_ClearPendingIRQ(PPG_IRQn);
<a name="l00105"></a>00105     NVIC_EnableIRQ(PPG_IRQn);
<a name="l00106"></a>00106     NVIC_SetPriority(PPG_IRQn, PDL_IRQ_LEVEL_PPG);  
<a name="l00107"></a>00107 <span class="preprocessor">#endif    </span>
<a name="l00108"></a>00108 <span class="preprocessor"></span>}
<a name="l00109"></a>00109 
<a name="l00117"></a><a class="code" href="group___ppg_group.html#ga8c07525f1283dd89ae92d989050fe73c">00117</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="group___ppg_group.html#ga8c07525f1283dd89ae92d989050fe73c" title="Clear NVIC Interrupt depending on PPG channel.">PpgDeInitNvic</a>(uint8_t u8CoupleCh)
<a name="l00118"></a>00118 {
<a name="l00119"></a>00119 <span class="preprocessor">#if (PDL_MCU_CORE == PDL_FM4_CORE)</span>
<a name="l00120"></a>00120 <span class="preprocessor"></span>    <span class="keywordflow">if</span>((<a class="code" href="group___ppg_group.html#ga5fd263d5f5c271bc0f1507b29925639e">PPG_COUPLE_CH01</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#gae0aaf608036fa9bc8fc730594a87a1fc">PPG_COUPLE_CH23</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#ga60552e34b960e3c32263fb088df56d23">PPG_COUPLE_CH45</a> == u8CoupleCh))
<a name="l00121"></a>00121     {
<a name="l00122"></a>00122         NVIC_ClearPendingIRQ(PPG00_02_04_IRQn);
<a name="l00123"></a>00123         NVIC_DisableIRQ(PPG00_02_04_IRQn);
<a name="l00124"></a>00124         NVIC_SetPriority(PPG00_02_04_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);   
<a name="l00125"></a>00125     }
<a name="l00126"></a>00126     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="group___ppg_group.html#gaa708057e5abcd3c15fc7afd5578071b2">PPG_COUPLE_CH89</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#gac1ef4218053a0ab361cc3bf82a6b235a">PPG_COUPLE_CH1011</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#gadea9d2742e3e1fcf76d6f54e2f3fc62d">PPG_COUPLE_CH1213</a> == u8CoupleCh))
<a name="l00127"></a>00127     {
<a name="l00128"></a>00128         NVIC_ClearPendingIRQ(PPG08_10_12_IRQn);
<a name="l00129"></a>00129         NVIC_DisableIRQ(PPG08_10_12_IRQn);
<a name="l00130"></a>00130         NVIC_SetPriority(PPG08_10_12_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);   
<a name="l00131"></a>00131     }
<a name="l00132"></a>00132     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="group___ppg_group.html#ga0a504f29f8de7ef663aee20fdabcede0">PPG_COUPLE_CH1617</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#ga34ac2470b7cc99634330388f6ed5827b">PPG_COUPLE_CH1819</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#gaba5fee9d4ce1bc3dc67570b30c3d00d2">PPG_COUPLE_CH2021</a> == u8CoupleCh))
<a name="l00133"></a>00133     {
<a name="l00134"></a>00134         NVIC_ClearPendingIRQ(PPG16_18_20_IRQn);
<a name="l00135"></a>00135         NVIC_DisableIRQ(PPG16_18_20_IRQn);
<a name="l00136"></a>00136         NVIC_SetPriority(PPG16_18_20_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);   
<a name="l00137"></a>00137     }
<a name="l00138"></a>00138 <span class="preprocessor">#elif (PDL_MCU_CORE == PDL_FM0P_CORE)</span>
<a name="l00139"></a>00139 <span class="preprocessor"></span>    NVIC_ClearPendingIRQ(DSTC_ICC0_HDMICEC0_PPG_IRQn);
<a name="l00140"></a>00140     NVIC_DisableIRQ(DSTC_ICC0_HDMICEC0_PPG_IRQn);
<a name="l00141"></a>00141     NVIC_SetPriority(DSTC_ICC0_HDMICEC0_PPG_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);   
<a name="l00142"></a>00142 <span class="preprocessor">#else</span>
<a name="l00143"></a>00143 <span class="preprocessor"></span>    NVIC_ClearPendingIRQ(PPG_IRQn);
<a name="l00144"></a>00144     NVIC_DisableIRQ(PPG_IRQn);
<a name="l00145"></a>00145     NVIC_SetPriority(PPG_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);   
<a name="l00146"></a>00146 <span class="preprocessor">#endif</span>
<a name="l00147"></a>00147 <span class="preprocessor"></span>}
<a name="l00148"></a>00148 
<a name="l00153"></a><a class="code" href="group___ppg_group.html#ga16f11dc5c865fb99e31ec31798ed513e">00153</a> <span class="keywordtype">void</span> <a class="code" href="group___ppg_group.html#ga16f11dc5c865fb99e31ec31798ed513e" title="PPG interrupt service routine.">Ppg_IrqHandler</a>(<span class="keywordtype">void</span>) 
<a name="l00154"></a>00154 {     
<a name="l00155"></a>00155     <span class="keywordflow">if</span>(1u == bFM_MFT_PPG_PPGC0_PUF) <span class="comment">// IRQ triggered by ch.0?</span>
<a name="l00156"></a>00156     {
<a name="l00157"></a>00157         bFM_MFT_PPG_PPGC0_PUF = 0u;
<a name="l00158"></a>00158         bFM_MFT_PPG_PPGC1_PUF = 0u;
<a name="l00159"></a>00159         <a class="code" href="group___ppg_group.html#gad9a0f8dcf62e382eafd049e08f5ecdde" title="Callback function pointer of PPG interrupt.">afnPpgCallback</a>[0u]();
<a name="l00160"></a>00160     }
<a name="l00161"></a>00161 
<a name="l00162"></a>00162     <span class="keywordflow">if</span>(1u == bFM_MFT_PPG_PPGC2_PUF) <span class="comment">// IRQ triggered by ch.2? </span>
<a name="l00163"></a>00163     {
<a name="l00164"></a>00164         bFM_MFT_PPG_PPGC2_PUF = 0u;
<a name="l00165"></a>00165         bFM_MFT_PPG_PPGC3_PUF = 0u;
<a name="l00166"></a>00166         <a class="code" href="group___ppg_group.html#gad9a0f8dcf62e382eafd049e08f5ecdde" title="Callback function pointer of PPG interrupt.">afnPpgCallback</a>[1u]();
<a name="l00167"></a>00167     }
<a name="l00168"></a>00168 
<a name="l00169"></a>00169     <span class="keywordflow">if</span>(1u == bFM_MFT_PPG_PPGC4_PUF) <span class="comment">// IRQ triggered by ch.4? </span>
<a name="l00170"></a>00170     {
<a name="l00171"></a>00171         bFM_MFT_PPG_PPGC4_PUF = 0u;
<a name="l00172"></a>00172         bFM_MFT_PPG_PPGC5_PUF = 0u;
<a name="l00173"></a>00173         <a class="code" href="group___ppg_group.html#gad9a0f8dcf62e382eafd049e08f5ecdde" title="Callback function pointer of PPG interrupt.">afnPpgCallback</a>[2u]();
<a name="l00174"></a>00174     }
<a name="l00175"></a>00175 
<a name="l00176"></a>00176     <span class="keywordflow">if</span>(1u == bFM_MFT_PPG_PPGC8_PUF) <span class="comment">// IRQ triggered by ch.8?</span>
<a name="l00177"></a>00177     {
<a name="l00178"></a>00178         bFM_MFT_PPG_PPGC8_PUF = 0u;
<a name="l00179"></a>00179         bFM_MFT_PPG_PPGC9_PUF = 0u;
<a name="l00180"></a>00180         <a class="code" href="group___ppg_group.html#gad9a0f8dcf62e382eafd049e08f5ecdde" title="Callback function pointer of PPG interrupt.">afnPpgCallback</a>[3u]();
<a name="l00181"></a>00181     }
<a name="l00182"></a>00182     
<a name="l00183"></a>00183     <span class="keywordflow">if</span>(1u == bFM_MFT_PPG_PPGC10_PUF) <span class="comment">// IRQ triggered by ch.10? </span>
<a name="l00184"></a>00184     {
<a name="l00185"></a>00185         bFM_MFT_PPG_PPGC10_PUF = 0u;
<a name="l00186"></a>00186         bFM_MFT_PPG_PPGC11_PUF = 0u;
<a name="l00187"></a>00187         <a class="code" href="group___ppg_group.html#gad9a0f8dcf62e382eafd049e08f5ecdde" title="Callback function pointer of PPG interrupt.">afnPpgCallback</a>[4u]();
<a name="l00188"></a>00188     }
<a name="l00189"></a>00189     
<a name="l00190"></a>00190     <span class="keywordflow">if</span>(1u == bFM_MFT_PPG_PPGC12_PUF) <span class="comment">// IRQ triggered by ch.12? </span>
<a name="l00191"></a>00191     {
<a name="l00192"></a>00192         bFM_MFT_PPG_PPGC12_PUF = 0u;
<a name="l00193"></a>00193         bFM_MFT_PPG_PPGC13_PUF = 0u;
<a name="l00194"></a>00194         <a class="code" href="group___ppg_group.html#gad9a0f8dcf62e382eafd049e08f5ecdde" title="Callback function pointer of PPG interrupt.">afnPpgCallback</a>[5u]();
<a name="l00195"></a>00195     }
<a name="l00196"></a>00196 
<a name="l00197"></a>00197     <span class="keywordflow">if</span>(1u == bFM_MFT_PPG_PPGC16_PUF) <span class="comment">// IRQ triggered by ch.16?</span>
<a name="l00198"></a>00198     {
<a name="l00199"></a>00199         bFM_MFT_PPG_PPGC16_PUF = 0u;
<a name="l00200"></a>00200         bFM_MFT_PPG_PPGC17_PUF = 0u;
<a name="l00201"></a>00201         <a class="code" href="group___ppg_group.html#gad9a0f8dcf62e382eafd049e08f5ecdde" title="Callback function pointer of PPG interrupt.">afnPpgCallback</a>[6u]();
<a name="l00202"></a>00202     }
<a name="l00203"></a>00203     
<a name="l00204"></a>00204     <span class="keywordflow">if</span>(1u == bFM_MFT_PPG_PPGC18_PUF) <span class="comment">// IRQ triggered by ch.18? </span>
<a name="l00205"></a>00205     {
<a name="l00206"></a>00206         bFM_MFT_PPG_PPGC18_PUF = 0u;
<a name="l00207"></a>00207         bFM_MFT_PPG_PPGC19_PUF = 0u;
<a name="l00208"></a>00208         <a class="code" href="group___ppg_group.html#gad9a0f8dcf62e382eafd049e08f5ecdde" title="Callback function pointer of PPG interrupt.">afnPpgCallback</a>[7u]();
<a name="l00209"></a>00209     }
<a name="l00210"></a>00210     
<a name="l00211"></a>00211     <span class="keywordflow">if</span>(1u == bFM_MFT_PPG_PPGC20_PUF) <span class="comment">// IRQ triggered by ch.20? </span>
<a name="l00212"></a>00212     {
<a name="l00213"></a>00213         bFM_MFT_PPG_PPGC20_PUF = 0u;
<a name="l00214"></a>00214         bFM_MFT_PPG_PPGC21_PUF = 0u;
<a name="l00215"></a>00215         <a class="code" href="group___ppg_group.html#gad9a0f8dcf62e382eafd049e08f5ecdde" title="Callback function pointer of PPG interrupt.">afnPpgCallback</a>[8u]();
<a name="l00216"></a>00216     }
<a name="l00217"></a>00217 }   
<a name="l00218"></a>00218 
<a name="l00219"></a>00219 <span class="preprocessor">#endif</span>
<a name="l00220"></a>00220 <span class="preprocessor"></span>
<a name="l00236"></a><a class="code" href="group___ppg_group.html#ga175efe5259d6372d528f24861dbfb39e">00236</a> en_result_t <a class="code" href="group___ppg_group.html#ga175efe5259d6372d528f24861dbfb39e" title="Initialize PPG.">Ppg_Init</a>( uint8_t u8CoupleCh, 
<a name="l00237"></a>00237                       <a class="code" href="structstc__ppg__config.html" title="Structure to config PPG.">stc_ppg_config_t</a> *pstcConfig)
<a name="l00238"></a>00238 {
<a name="l00239"></a>00239     <span class="keyword">volatile</span> stc_mft_ppg_ppgc0_field_t *pstcPpgc0;
<a name="l00240"></a>00240     <span class="keyword">volatile</span> stc_mft_ppg_ppgc1_field_t *pstcPpgc1; 
<a name="l00241"></a>00241     <span class="keyword">volatile</span> uint16_t *pu16Revc0, *pu16Revc1;
<a name="l00242"></a>00242     <span class="keyword">volatile</span> uint8_t *pu8Gatec;
<a name="l00243"></a>00243     uint8_t u8Offset, u8Gap;
<a name="l00244"></a>00244     <span class="keywordflow">if</span>( (0u != (u8CoupleCh%2))            ||
<a name="l00245"></a>00245         (u8CoupleCh &gt; <a class="code" href="group___ppg_group.html#ga81a6e7f38446ea61861a66f3537e687a">PPG_COUPLE_CH2223</a>) )
<a name="l00246"></a>00246     {
<a name="l00247"></a>00247         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00248"></a>00248     }
<a name="l00249"></a>00249     u8Offset = u8CoupleCh%4u;
<a name="l00250"></a>00250     u8Gap    = u8CoupleCh/4u;
<a name="l00251"></a>00251     pstcPpgc1 = (stc_mft_ppg_ppgc1_field_t*)((uint8_t*)&amp;FM_MFT_PPG-&gt;PPGC1 + u8Gap*0x40u + u8Offset*2u);
<a name="l00252"></a>00252     pstcPpgc0 = (stc_mft_ppg_ppgc0_field_t*)((uint8_t*)&amp;FM_MFT_PPG-&gt;PPGC0 + u8Gap*0x40u + u8Offset*2u);  
<a name="l00253"></a>00253     pu16Revc0    = (uint16_t*)((uint8_t*)&amp;FM_MFT_PPG-&gt;REVC0);
<a name="l00254"></a>00254     pu16Revc1    = (uint16_t*)((uint8_t*)&amp;FM_MFT_PPG-&gt;REVC1); 
<a name="l00255"></a>00255     pu8Gatec     = (uint8_t*)((uint8_t*)&amp;FM_MFT_PPG-&gt;GATEC0 + u8Gap*0x40u);
<a name="l00256"></a>00256     
<a name="l00257"></a>00257     <span class="comment">// set mode</span>
<a name="l00258"></a>00258     <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__ppg__config.html#a2dffc125160ad113b435dee1391cc852" title="PPG mode configuration.">enMode</a>)
<a name="l00259"></a>00259     {
<a name="l00260"></a>00260         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#gga8db0dd5e090f0c4577fcce57a877fa58ab055ea07da545c99a6f7870f2f8a9e2e" title="Even channel: 8bit PPG, odd channel: 8bit PPG.">Ppg8Bit8Bit</a>:
<a name="l00261"></a>00261             pstcPpgc0-&gt;MD = 0u;
<a name="l00262"></a>00262             <span class="keywordflow">break</span>;
<a name="l00263"></a>00263         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#gga8db0dd5e090f0c4577fcce57a877fa58aaa65f4760fce9cc62d4d77840751db46" title="Even channel: 8bit PPG, odd channel: 8bit prescaler.">Ppg8Bit8Pres</a>:
<a name="l00264"></a>00264             pstcPpgc0-&gt;MD = 1u;
<a name="l00265"></a>00265             <span class="keywordflow">break</span>;
<a name="l00266"></a>00266         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#gga8db0dd5e090f0c4577fcce57a877fa58a959c11a288f5127e56c68ac48ec7b0fd" title="16bit PPG">Ppg16Bit</a>:
<a name="l00267"></a>00267             pstcPpgc0-&gt;MD = 2u;
<a name="l00268"></a>00268             <span class="keywordflow">break</span>;
<a name="l00269"></a>00269         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#gga8db0dd5e090f0c4577fcce57a877fa58ab46571c3d37d93d40f7f6f8d7ca92b73" title="16bit PPG + 16 prescaler (provided by next couple channel)">Ppg16Bit16Pres</a>:
<a name="l00270"></a>00270             pstcPpgc0-&gt;MD = 3u;
<a name="l00271"></a>00271             <span class="keywordflow">break</span>;
<a name="l00272"></a>00272         <span class="keywordflow">default</span>:
<a name="l00273"></a>00273             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00274"></a>00274     }
<a name="l00275"></a>00275     
<a name="l00276"></a>00276     <span class="comment">// set even channel clock, level</span>
<a name="l00277"></a>00277     <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__ppg__config.html#a36fadb48a2edc3a5e441ab0583885527" title="Clock prescaler of even channel.">enEvenClock</a>)
<a name="l00278"></a>00278     {
<a name="l00279"></a>00279         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#ggad9cfc8e7b19da306089095594637517ca4a8b842ffed45a39542bb34bd1987c27" title="PPG count clock prescaler: 1.">PpgPclkDiv1</a>:
<a name="l00280"></a>00280             pstcPpgc0-&gt;PCS = 0u;
<a name="l00281"></a>00281             <span class="keywordflow">break</span>;
<a name="l00282"></a>00282         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#ggad9cfc8e7b19da306089095594637517ca6e66e0045e677254835256a4faa7ebec" title="PPG count clock prescaler: 1/4.">PpgPclkDiv4</a>:
<a name="l00283"></a>00283             pstcPpgc0-&gt;PCS = 1u;
<a name="l00284"></a>00284             <span class="keywordflow">break</span>;
<a name="l00285"></a>00285         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#ggad9cfc8e7b19da306089095594637517cae3497dbb6f1b8e4d81625f34392432cb" title="PPG count clock prescaler: 1/16.">PpgPclkDiv16</a>:
<a name="l00286"></a>00286             pstcPpgc0-&gt;PCS = 2u;
<a name="l00287"></a>00287             <span class="keywordflow">break</span>;
<a name="l00288"></a>00288         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#ggad9cfc8e7b19da306089095594637517ca949ea28524e433edca21cf2e1df469b4" title="PPG count clock prescaler: 1/64.">PpgPclkDiv64</a>:
<a name="l00289"></a>00289             pstcPpgc0-&gt;PCS = 3u;
<a name="l00290"></a>00290             <span class="keywordflow">break</span>;
<a name="l00291"></a>00291         <span class="keywordflow">default</span>:
<a name="l00292"></a>00292             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00293"></a>00293     }
<a name="l00294"></a>00294     
<a name="l00295"></a>00295     <span class="keywordflow">if</span>(u8CoupleCh &lt; <a class="code" href="group___ppg_group.html#ga6afc85143ca5b7553b17c335f6c03c0a">PPG_CH16</a>)
<a name="l00296"></a>00296     {
<a name="l00297"></a>00297         <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__ppg__config.html#ad8a8cfceef644491fc8b425f2de3b7d1" title="Output level of even channel.">enEvenLevel</a>)
<a name="l00298"></a>00298         {
<a name="l00299"></a>00299             <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#ggac97e2dc7e7338c3543b0335edf7a28c9a147c720e53623c9e9c97aa6f60715e77" title="Initial level: Low.">PpgNormalLevel</a>:
<a name="l00300"></a>00300                 *pu16Revc0 &amp;= ~(1ul&lt;&lt;u8CoupleCh);
<a name="l00301"></a>00301                 <span class="keywordflow">break</span>;
<a name="l00302"></a>00302             <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#ggac97e2dc7e7338c3543b0335edf7a28c9acc5e4fcf7dd7e3aa75bd61fcc97f4be1" title="Initial level: High.">PpgReverseLevel</a>:
<a name="l00303"></a>00303                 *pu16Revc0 |= (1ul&lt;&lt;u8CoupleCh);
<a name="l00304"></a>00304                 <span class="keywordflow">break</span>;
<a name="l00305"></a>00305             <span class="keywordflow">default</span>:
<a name="l00306"></a>00306                 <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00307"></a>00307         }
<a name="l00308"></a>00308     }
<a name="l00309"></a>00309     <span class="keywordflow">else</span>
<a name="l00310"></a>00310     {
<a name="l00311"></a>00311         <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__ppg__config.html#ad8a8cfceef644491fc8b425f2de3b7d1" title="Output level of even channel.">enEvenLevel</a>)
<a name="l00312"></a>00312         {
<a name="l00313"></a>00313             <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#ggac97e2dc7e7338c3543b0335edf7a28c9a147c720e53623c9e9c97aa6f60715e77" title="Initial level: Low.">PpgNormalLevel</a>:
<a name="l00314"></a>00314                 *pu16Revc1 &amp;= ~(1ul&lt;&lt;(u8CoupleCh-<a class="code" href="group___ppg_group.html#ga6afc85143ca5b7553b17c335f6c03c0a">PPG_CH16</a>));
<a name="l00315"></a>00315                 <span class="keywordflow">break</span>;
<a name="l00316"></a>00316             <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#ggac97e2dc7e7338c3543b0335edf7a28c9acc5e4fcf7dd7e3aa75bd61fcc97f4be1" title="Initial level: High.">PpgReverseLevel</a>:
<a name="l00317"></a>00317                 *pu16Revc1 |= (1ul&lt;&lt;(u8CoupleCh-<a class="code" href="group___ppg_group.html#ga6afc85143ca5b7553b17c335f6c03c0a">PPG_CH16</a>));
<a name="l00318"></a>00318                 <span class="keywordflow">break</span>;
<a name="l00319"></a>00319             <span class="keywordflow">default</span>:
<a name="l00320"></a>00320                 <span class="keywordflow">return</span> ErrorInvalidParameter ;                
<a name="l00321"></a>00321         }
<a name="l00322"></a>00322     }
<a name="l00323"></a>00323     
<a name="l00324"></a>00324     <span class="comment">// set odd channel clock, level    </span>
<a name="l00325"></a>00325     <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__ppg__config.html#a80f3c8244ca2bb8976316d5f8390b7a1" title="Clock prescaler of odd channel.">enOddClock</a>)
<a name="l00326"></a>00326     {
<a name="l00327"></a>00327         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#ggad9cfc8e7b19da306089095594637517ca4a8b842ffed45a39542bb34bd1987c27" title="PPG count clock prescaler: 1.">PpgPclkDiv1</a>:
<a name="l00328"></a>00328             pstcPpgc1-&gt;PCS = 0u;
<a name="l00329"></a>00329             <span class="keywordflow">break</span>;
<a name="l00330"></a>00330         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#ggad9cfc8e7b19da306089095594637517ca6e66e0045e677254835256a4faa7ebec" title="PPG count clock prescaler: 1/4.">PpgPclkDiv4</a>:
<a name="l00331"></a>00331             pstcPpgc1-&gt;PCS = 1u;
<a name="l00332"></a>00332             <span class="keywordflow">break</span>;
<a name="l00333"></a>00333         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#ggad9cfc8e7b19da306089095594637517cae3497dbb6f1b8e4d81625f34392432cb" title="PPG count clock prescaler: 1/16.">PpgPclkDiv16</a>:
<a name="l00334"></a>00334             pstcPpgc1-&gt;PCS = 2u;
<a name="l00335"></a>00335             <span class="keywordflow">break</span>;
<a name="l00336"></a>00336         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#ggad9cfc8e7b19da306089095594637517ca949ea28524e433edca21cf2e1df469b4" title="PPG count clock prescaler: 1/64.">PpgPclkDiv64</a>:
<a name="l00337"></a>00337             pstcPpgc1-&gt;PCS = 3u;
<a name="l00338"></a>00338             <span class="keywordflow">break</span>;
<a name="l00339"></a>00339         <span class="keywordflow">default</span>:
<a name="l00340"></a>00340             <span class="keywordflow">return</span> ErrorInvalidParameter ;                
<a name="l00341"></a>00341     }
<a name="l00342"></a>00342     
<a name="l00343"></a>00343     <span class="keywordflow">if</span>(u8CoupleCh &lt; <a class="code" href="group___ppg_group.html#ga6afc85143ca5b7553b17c335f6c03c0a">PPG_CH16</a>)
<a name="l00344"></a>00344     {
<a name="l00345"></a>00345         <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__ppg__config.html#aa4dc55d2944d78bfe114d37e9dbd3d17" title="Output level of odd channel.">enOddLevel</a>)
<a name="l00346"></a>00346         {
<a name="l00347"></a>00347             <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#ggac97e2dc7e7338c3543b0335edf7a28c9a147c720e53623c9e9c97aa6f60715e77" title="Initial level: Low.">PpgNormalLevel</a>:
<a name="l00348"></a>00348                 *pu16Revc0 &amp;= ~(1ul&lt;&lt;(u8CoupleCh+1));
<a name="l00349"></a>00349                 <span class="keywordflow">break</span>;
<a name="l00350"></a>00350             <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#ggac97e2dc7e7338c3543b0335edf7a28c9acc5e4fcf7dd7e3aa75bd61fcc97f4be1" title="Initial level: High.">PpgReverseLevel</a>:
<a name="l00351"></a>00351                 *pu16Revc0 |= (1ul&lt;&lt;(u8CoupleCh+1));
<a name="l00352"></a>00352                 <span class="keywordflow">break</span>;
<a name="l00353"></a>00353             <span class="keywordflow">default</span>:
<a name="l00354"></a>00354                 <span class="keywordflow">return</span> ErrorInvalidParameter ;                
<a name="l00355"></a>00355         }
<a name="l00356"></a>00356     }
<a name="l00357"></a>00357     <span class="keywordflow">else</span>
<a name="l00358"></a>00358     {
<a name="l00359"></a>00359         <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__ppg__config.html#aa4dc55d2944d78bfe114d37e9dbd3d17" title="Output level of odd channel.">enOddLevel</a>)
<a name="l00360"></a>00360         {
<a name="l00361"></a>00361             <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#ggac97e2dc7e7338c3543b0335edf7a28c9a147c720e53623c9e9c97aa6f60715e77" title="Initial level: Low.">PpgNormalLevel</a>:
<a name="l00362"></a>00362                 *pu16Revc1 &amp;= ~(1ul&lt;&lt;(u8CoupleCh+1-<a class="code" href="group___ppg_group.html#ga6afc85143ca5b7553b17c335f6c03c0a">PPG_CH16</a>));
<a name="l00363"></a>00363                 <span class="keywordflow">break</span>;
<a name="l00364"></a>00364             <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#ggac97e2dc7e7338c3543b0335edf7a28c9acc5e4fcf7dd7e3aa75bd61fcc97f4be1" title="Initial level: High.">PpgReverseLevel</a>:
<a name="l00365"></a>00365                 *pu16Revc1 |= (1ul&lt;&lt;(u8CoupleCh+1-<a class="code" href="group___ppg_group.html#ga6afc85143ca5b7553b17c335f6c03c0a">PPG_CH16</a>));
<a name="l00366"></a>00366                 <span class="keywordflow">break</span>;
<a name="l00367"></a>00367             <span class="keywordflow">default</span>:
<a name="l00368"></a>00368                 <span class="keywordflow">return</span> ErrorInvalidParameter ;      
<a name="l00369"></a>00369         }
<a name="l00370"></a>00370     }
<a name="l00371"></a>00371     
<a name="l00372"></a>00372     <span class="comment">// set PPG mode</span>
<a name="l00373"></a>00373     <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__ppg__config.html#ae2db6ea0b3ee6d47126469ddaa83e6d3" title="PPG trigger mode configuration.">enTrig</a>)
<a name="l00374"></a>00374     {
<a name="l00375"></a>00375         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#gga4695c4acc1f07ed43671c20788c12de6aa0f3c89555822003330cd8ea5c3e58fd" title="Use software to trigger PPG.">PpgSoftwareTrig</a>:
<a name="l00376"></a>00376             pstcPpgc0-&gt;TTRG = 0u;
<a name="l00377"></a>00377             <span class="keywordflow">if</span>((u8CoupleCh%4) == 0u)
<a name="l00378"></a>00378             {
<a name="l00379"></a>00379                 *pu8Gatec &amp;= ~(1ul&lt;&lt;1);
<a name="l00380"></a>00380             }
<a name="l00381"></a>00381             <span class="keywordflow">else</span>
<a name="l00382"></a>00382             {
<a name="l00383"></a>00383                 *pu8Gatec &amp;= ~(1ul&lt;&lt;5);
<a name="l00384"></a>00384             }
<a name="l00385"></a>00385             <span class="keywordflow">break</span>;  
<a name="l00386"></a>00386         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#gga4695c4acc1f07ed43671c20788c12de6ac65082f2064467d79db0dbacfd83f99f" title="Use GATE signal from MFT to trigger PPG.">PpgMftGateTrig</a>:
<a name="l00387"></a>00387             pstcPpgc0-&gt;TTRG = 0u;
<a name="l00388"></a>00388             <span class="keywordflow">if</span>((u8CoupleCh%4) == 0)
<a name="l00389"></a>00389             {
<a name="l00390"></a>00390                 *pu8Gatec |= (1ul&lt;&lt;1);
<a name="l00391"></a>00391             }
<a name="l00392"></a>00392             <span class="keywordflow">else</span>
<a name="l00393"></a>00393             {
<a name="l00394"></a>00394                 *pu8Gatec |= (1ul&lt;&lt;5);
<a name="l00395"></a>00395             }
<a name="l00396"></a>00396             <span class="keywordflow">break</span>; 
<a name="l00397"></a>00397         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#gga4695c4acc1f07ed43671c20788c12de6a9c0eea817d2db6f1bed9f2e2d27a956f" title="Use Timing Generator to trigger PPG.">PpgTimingGenTrig</a>:
<a name="l00398"></a>00398             pstcPpgc0-&gt;TTRG = 1u;
<a name="l00399"></a>00399             <span class="keywordflow">break</span>; 
<a name="l00400"></a>00400         <span class="keywordflow">default</span>:
<a name="l00401"></a>00401             <span class="keywordflow">return</span> ErrorInvalidParameter ;      
<a name="l00402"></a>00402     }
<a name="l00403"></a>00403     
<a name="l00404"></a>00404     <span class="comment">// Set interrupt mode</span>
<a name="l00405"></a>00405     <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__ppg__config.html#a1cf1dfe9cb860a3bf14187d2ab283460" title="PPG interrupt mode.">enIrqMode</a>)
<a name="l00406"></a>00406     {
<a name="l00407"></a>00407         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#gga04c3256221b7a99e20f981098e20d6faa9571acf0e6cf1af6d20395ce1649bb9b" title="Generate interrupt when high or low width count underflows.">PpgIrqHighOrLowUnderflow</a>:
<a name="l00408"></a>00408             pstcPpgc0-&gt;INTM = 0u;
<a name="l00409"></a>00409             <span class="keywordflow">break</span>;
<a name="l00410"></a>00410         <span class="keywordflow">case</span> <a class="code" href="group___ppg_group.html#gga04c3256221b7a99e20f981098e20d6faa4c65bf8c6a6f606b22a2942e01745a9c" title="Generate interrupt when high width count underflows.">PpgIrqHighUnderflow</a>:
<a name="l00411"></a>00411             pstcPpgc0-&gt;INTM = 1u;
<a name="l00412"></a>00412             <span class="keywordflow">break</span>;
<a name="l00413"></a>00413         <span class="keywordflow">default</span>:
<a name="l00414"></a>00414             <span class="keywordflow">return</span> ErrorInvalidParameter ;      
<a name="l00415"></a>00415     }
<a name="l00416"></a>00416 
<a name="l00417"></a>00417 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_PPG == PDL_ON)   </span>
<a name="l00418"></a>00418 <span class="preprocessor"></span>    <span class="comment">// Set interrupt enable </span>
<a name="l00419"></a>00419     <span class="keywordflow">if</span>(pstcConfig-&gt;<a class="code" href="structstc__ppg__config.html#ae471f2142a6d3a29df38a59427450622" title="TRUE: enable IRQ, FALSE: don&#39;t enable IRQ.">bIrqEnable</a> == TRUE)
<a name="l00420"></a>00420     {
<a name="l00421"></a>00421         pstcPpgc0-&gt;PIE = 1u;
<a name="l00422"></a>00422     }
<a name="l00423"></a>00423     
<a name="l00424"></a>00424     <span class="comment">// Set interrupt callback function</span>
<a name="l00425"></a>00425     <span class="keywordflow">if</span>((<a class="code" href="group___ppg_group.html#ga5fd263d5f5c271bc0f1507b29925639e">PPG_COUPLE_CH01</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#gae0aaf608036fa9bc8fc730594a87a1fc">PPG_COUPLE_CH23</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#ga60552e34b960e3c32263fb088df56d23">PPG_COUPLE_CH45</a> == u8CoupleCh))
<a name="l00426"></a>00426     {
<a name="l00427"></a>00427         <a class="code" href="group___ppg_group.html#gad9a0f8dcf62e382eafd049e08f5ecdde" title="Callback function pointer of PPG interrupt.">afnPpgCallback</a>[u8CoupleCh/2u] = pstcConfig-&gt;<a class="code" href="structstc__ppg__config.html#a10d787535f833c2ade9978ec548ced7f" title="Pointer to PPG interrupt callback function.">pfnIrqCallback</a>;
<a name="l00428"></a>00428     }
<a name="l00429"></a>00429     <span class="keywordflow">else</span> <span class="keywordflow">if</span>((<a class="code" href="group___ppg_group.html#gaa708057e5abcd3c15fc7afd5578071b2">PPG_COUPLE_CH89</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#gac1ef4218053a0ab361cc3bf82a6b235a">PPG_COUPLE_CH1011</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#gadea9d2742e3e1fcf76d6f54e2f3fc62d">PPG_COUPLE_CH1213</a> == u8CoupleCh))
<a name="l00430"></a>00430     {
<a name="l00431"></a>00431         <a class="code" href="group___ppg_group.html#gad9a0f8dcf62e382eafd049e08f5ecdde" title="Callback function pointer of PPG interrupt.">afnPpgCallback</a>[(u8CoupleCh-2u)/2u] = pstcConfig-&gt;<a class="code" href="structstc__ppg__config.html#a10d787535f833c2ade9978ec548ced7f" title="Pointer to PPG interrupt callback function.">pfnIrqCallback</a>;
<a name="l00432"></a>00432     }
<a name="l00433"></a>00433     <span class="keywordflow">else</span> <span class="keywordflow">if</span>((<a class="code" href="group___ppg_group.html#ga0a504f29f8de7ef663aee20fdabcede0">PPG_COUPLE_CH1617</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#ga34ac2470b7cc99634330388f6ed5827b">PPG_COUPLE_CH1819</a> == u8CoupleCh) || (<a class="code" href="group___ppg_group.html#gaba5fee9d4ce1bc3dc67570b30c3d00d2">PPG_COUPLE_CH2021</a> == u8CoupleCh))
<a name="l00434"></a>00434     {
<a name="l00435"></a>00435         <a class="code" href="group___ppg_group.html#gad9a0f8dcf62e382eafd049e08f5ecdde" title="Callback function pointer of PPG interrupt.">afnPpgCallback</a>[(u8CoupleCh-4u)/2u] = pstcConfig-&gt;<a class="code" href="structstc__ppg__config.html#a10d787535f833c2ade9978ec548ced7f" title="Pointer to PPG interrupt callback function.">pfnIrqCallback</a>;
<a name="l00436"></a>00436     }
<a name="l00437"></a>00437     
<a name="l00438"></a>00438     <span class="comment">// Set NVIC</span>
<a name="l00439"></a>00439     <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__ppg__config.html#a18b9c6a82679466e066894a2b65f0d13" title="TRUE: enable NVIC, FALSE: don&#39;t enable NVIC.">bTouchNvic</a>)
<a name="l00440"></a>00440     {
<a name="l00441"></a>00441         <a class="code" href="group___ppg_group.html#ga813794e6d835c6dd41a9f8793b247a4d" title="Set NVIC Interrupt depending on PPG channel.">PpgInitNvic</a>(u8CoupleCh);
<a name="l00442"></a>00442     }
<a name="l00443"></a>00443 <span class="preprocessor">#endif </span>
<a name="l00444"></a>00444 <span class="preprocessor"></span>    
<a name="l00445"></a>00445     <span class="keywordflow">return</span> Ok;
<a name="l00446"></a>00446 }
<a name="l00447"></a>00447 
<a name="l00462"></a><a class="code" href="group___ppg_group.html#ga042d79efb0d3898d14d48f86fa9f8a8a">00462</a> en_result_t <a class="code" href="group___ppg_group.html#ga042d79efb0d3898d14d48f86fa9f8a8a" title="De-Initialize PPG.">Ppg_DeInit</a>(uint8_t u8CoupleCh, boolean_t bTouchNvic)
<a name="l00463"></a>00463 {
<a name="l00464"></a>00464     <span class="keyword">volatile</span> uint8_t *pu8Ppgc0;
<a name="l00465"></a>00465     <span class="keyword">volatile</span> uint8_t *pu8Ppgc1; 
<a name="l00466"></a>00466     uint8_t u8Offset, u8Gap;
<a name="l00467"></a>00467     <span class="keywordflow">if</span>( (0u != (u8CoupleCh%2u))            ||
<a name="l00468"></a>00468         (u8CoupleCh &gt; <a class="code" href="group___ppg_group.html#ga81a6e7f38446ea61861a66f3537e687a">PPG_COUPLE_CH2223</a>) )
<a name="l00469"></a>00469     {
<a name="l00470"></a>00470         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00471"></a>00471     }
<a name="l00472"></a>00472     u8Offset = u8CoupleCh%4u;
<a name="l00473"></a>00473     u8Gap    = u8CoupleCh/4u;
<a name="l00474"></a>00474     pu8Ppgc1 = (uint8_t*)((uint8_t*)&amp;FM_MFT_PPG-&gt;PPGC1 + u8Gap*0x40u + u8Offset*2u);
<a name="l00475"></a>00475     pu8Ppgc0 = (uint8_t*)((uint8_t*)&amp;FM_MFT_PPG-&gt;PPGC0 + u8Gap*0x40u + u8Offset*2u + 1u);  
<a name="l00476"></a>00476     
<a name="l00477"></a>00477     *pu8Ppgc0 = 0u;
<a name="l00478"></a>00478     *pu8Ppgc1 = 0u;
<a name="l00479"></a>00479 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_PPG == PDL_ON)    </span>
<a name="l00480"></a>00480 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(TRUE == bTouchNvic)
<a name="l00481"></a>00481     {
<a name="l00482"></a>00482         <a class="code" href="group___ppg_group.html#ga8c07525f1283dd89ae92d989050fe73c" title="Clear NVIC Interrupt depending on PPG channel.">PpgDeInitNvic</a>(u8CoupleCh);
<a name="l00483"></a>00483     }
<a name="l00484"></a>00484 <span class="preprocessor">#endif    </span>
<a name="l00485"></a>00485 <span class="preprocessor"></span>    
<a name="l00486"></a>00486     <span class="keywordflow">return</span> Ok;
<a name="l00487"></a>00487 }
<a name="l00488"></a>00488 
<a name="l00501"></a><a class="code" href="group___ppg_group.html#gada75a2ae9704b4fcf338b1f903eb3bc9">00501</a> en_result_t <a class="code" href="group___ppg_group.html#gada75a2ae9704b4fcf338b1f903eb3bc9" title="Start PPG by software trigger.">Ppg_StartSoftwareTrig</a>(uint8_t u8Ch)
<a name="l00502"></a>00502 {
<a name="l00503"></a>00503     <span class="keywordflow">if</span>((u8Ch &gt; <a class="code" href="group___ppg_group.html#ga5d7c32c6b14233d4cd697f2c054a376c">PPG_CH23</a>))
<a name="l00504"></a>00504     {
<a name="l00505"></a>00505         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00506"></a>00506     }
<a name="l00507"></a>00507     
<a name="l00508"></a>00508     <span class="keywordflow">if</span>(u8Ch &lt; <a class="code" href="group___ppg_group.html#ga6afc85143ca5b7553b17c335f6c03c0a">PPG_CH16</a>)
<a name="l00509"></a>00509     {
<a name="l00510"></a>00510         FM_MFT_PPG-&gt;TRG0 |= (uint16_t)(1ul&lt;&lt;u8Ch);
<a name="l00511"></a>00511     }
<a name="l00512"></a>00512     <span class="keywordflow">else</span>
<a name="l00513"></a>00513     {
<a name="l00514"></a>00514         FM_MFT_PPG-&gt;TRG1 |= (uint16_t)(1ul&lt;&lt;(u8Ch-<a class="code" href="group___ppg_group.html#ga6afc85143ca5b7553b17c335f6c03c0a">PPG_CH16</a>));
<a name="l00515"></a>00515     }
<a name="l00516"></a>00516     
<a name="l00517"></a>00517     <span class="keywordflow">return</span> Ok;
<a name="l00518"></a>00518 }
<a name="l00519"></a>00519 
<a name="l00532"></a><a class="code" href="group___ppg_group.html#gaf1e6657fb5205abc6dead395125aa8ee">00532</a> en_result_t <a class="code" href="group___ppg_group.html#gaf1e6657fb5205abc6dead395125aa8ee" title="Stop PPG software trigger.">Ppg_StopSoftwareTrig</a>(uint8_t u8Ch)
<a name="l00533"></a>00533 {
<a name="l00534"></a>00534     <span class="keywordflow">if</span>((u8Ch &gt; <a class="code" href="group___ppg_group.html#ga5d7c32c6b14233d4cd697f2c054a376c">PPG_CH23</a>))
<a name="l00535"></a>00535     {
<a name="l00536"></a>00536         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00537"></a>00537     }
<a name="l00538"></a>00538     
<a name="l00539"></a>00539     <span class="keywordflow">if</span>(u8Ch &lt; <a class="code" href="group___ppg_group.html#ga6afc85143ca5b7553b17c335f6c03c0a">PPG_CH16</a>)
<a name="l00540"></a>00540     {
<a name="l00541"></a>00541         FM_MFT_PPG-&gt;TRG0 &amp;= (uint16_t)(~(1ul&lt;&lt;u8Ch));
<a name="l00542"></a>00542     }
<a name="l00543"></a>00543     <span class="keywordflow">else</span>
<a name="l00544"></a>00544     {
<a name="l00545"></a>00545         FM_MFT_PPG-&gt;TRG1 &amp;= (uint16_t)(~(1ul&lt;&lt;(u8Ch-<a class="code" href="group___ppg_group.html#ga6afc85143ca5b7553b17c335f6c03c0a">PPG_CH16</a>)));
<a name="l00546"></a>00546     }
<a name="l00547"></a>00547     
<a name="l00548"></a>00548     <span class="keywordflow">return</span> Ok;
<a name="l00549"></a>00549 }
<a name="l00550"></a>00550 
<a name="l00566"></a><a class="code" href="group___ppg_group.html#gaf19ddcfdaaf51fe185d9d15ea0f03678">00566</a> en_result_t <a class="code" href="group___ppg_group.html#gaf19ddcfdaaf51fe185d9d15ea0f03678" title="Set the valid level of GATE signal.">Ppg_SelGateLevel</a>(uint8_t u8EvenCh, <a class="code" href="group___ppg_group.html#gac832c820688e1b5a0964121e64a43ad4" title="Enumeration to define valid level of GATE signal from MFT.">en_ppg_gate_level_t</a> enLevel)
<a name="l00567"></a>00567 {
<a name="l00568"></a>00568     <span class="keyword">volatile</span> uint8_t *pu8Gatec;
<a name="l00569"></a>00569     <span class="keywordflow">if</span>( (0u != (u8EvenCh%2u))      ||
<a name="l00570"></a>00570         (u8EvenCh &gt; <a class="code" href="group___ppg_group.html#gadd57667002ec981203c19998f1edf3d3">PPG_CH22</a>)      ||
<a name="l00571"></a>00571         (enLevel &gt; <a class="code" href="group___ppg_group.html#ggaacc1803c146c84c398011e29a5f40524a67c89c51898f0c446735ee0ffe3a69b0" title="GATE valid level: Low.">PpgGateLowActive</a>)  )
<a name="l00572"></a>00572     {
<a name="l00573"></a>00573         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00574"></a>00574     }
<a name="l00575"></a>00575     
<a name="l00576"></a>00576     pu8Gatec     = (uint8_t*)FM_MFT_PPG_BASE + 0x218u + 0x40u*(u8EvenCh/4);
<a name="l00577"></a>00577     
<a name="l00578"></a>00578     <span class="keywordflow">if</span>(0u == (u8EvenCh%4u))
<a name="l00579"></a>00579     {
<a name="l00580"></a>00580         *pu8Gatec &amp;= ~(1ul);
<a name="l00581"></a>00581         *pu8Gatec |= enLevel;
<a name="l00582"></a>00582     }
<a name="l00583"></a>00583     <span class="keywordflow">else</span>
<a name="l00584"></a>00584     {
<a name="l00585"></a>00585         *pu8Gatec &amp;= ~(1ul&lt;&lt;4u);
<a name="l00586"></a>00586         *pu8Gatec |= (uint8_t)((uint8_t)enLevel&lt;&lt;4u);
<a name="l00587"></a>00587     }
<a name="l00588"></a>00588     
<a name="l00589"></a>00589     <span class="keywordflow">return</span> Ok;
<a name="l00590"></a>00590 }
<a name="l00591"></a>00591 
<a name="l00604"></a><a class="code" href="group___ppg_group.html#gafec8d91bdbc99ea3e440e796b77bb3be">00604</a> en_result_t  <a class="code" href="group___ppg_group.html#gafec8d91bdbc99ea3e440e796b77bb3be" title="Configure the up counter of Timing Generator 0.">Ppg_ConfigUpCnt0</a>(<a class="code" href="structstc__ppg__upcnt0__config.html" title="Up counter0 configuration.">stc_ppg_upcnt0_config_t</a>* pstcConfig)
<a name="l00605"></a>00605 {
<a name="l00606"></a>00606     <span class="keywordflow">if</span>((NULL != pstcConfig) || 
<a name="l00607"></a>00607        (pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt0__config.html#a17be94f0645adc7fc9a0cf480d89bebe" title="Up counter clock prescaler.">enClk</a> &gt; <a class="code" href="group___ppg_group.html#gga42f925d72bf34ac0b1064578e42a3970a08d47cc289a3f2d9094d0e09e9c82248" title="Up counter clock prescaler: 1/64.">PpgUpCntPclkDiv64</a> ))
<a name="l00608"></a>00608     {
<a name="l00609"></a>00609         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00610"></a>00610     }
<a name="l00611"></a>00611     
<a name="l00612"></a>00612     FM_MFT_PPG-&gt;TTCR0 &amp;= ~(3ul&lt;&lt;2u);
<a name="l00613"></a>00613     FM_MFT_PPG-&gt;TTCR0 |= (uint16_t)((uint16_t)pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt0__config.html#a17be94f0645adc7fc9a0cf480d89bebe" title="Up counter clock prescaler.">enClk</a>&lt;&lt;2u);
<a name="l00614"></a>00614     FM_MFT_PPG-&gt;COMP0 = pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt0__config.html#a5f514f9b1503f0f8ff6295b268f86626" title="Up counter compare value for Ch0.">u8CmpValue0</a>;
<a name="l00615"></a>00615     FM_MFT_PPG-&gt;COMP2 = pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt0__config.html#a294b5abb6f711d8bbe077b26af970cb0" title="Up counter compare value for Ch2.">u8CmpValue2</a>;
<a name="l00616"></a>00616     FM_MFT_PPG-&gt;COMP4 = pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt0__config.html#adf79066916ea16f167b87ad1b76a3782" title="Up counter compare value for Ch4.">u8CmpValue4</a>;
<a name="l00617"></a>00617     FM_MFT_PPG-&gt;COMP6 = pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt0__config.html#a8e038c0ff2a420052787ad49052b7b80" title="Up counter compare value for Ch6.">u8CmpValue6</a>;
<a name="l00618"></a>00618     <span class="keywordflow">return</span> Ok;
<a name="l00619"></a>00619 }
<a name="l00620"></a>00620 
<a name="l00625"></a><a class="code" href="group___ppg_group.html#gaa046f1c3ffc3ae8569e888ddf36a39a6">00625</a> <span class="keywordtype">void</span> <a class="code" href="group___ppg_group.html#gaa046f1c3ffc3ae8569e888ddf36a39a6" title="Start the up counter of Timing Generator 0.">Ppg_StartUpCnt0</a>(<span class="keywordtype">void</span>)
<a name="l00626"></a>00626 {
<a name="l00627"></a>00627     bFM_MFT_PPG_TTCR0_STR0 = 1u;
<a name="l00628"></a>00628 }
<a name="l00629"></a>00629 
<a name="l00638"></a><a class="code" href="group___ppg_group.html#gacb6394568d2305d8a287a581b876199f">00638</a> <a class="code" href="pdl_8h.html#a0a606b7a8836c8e5b0ef0626fd0413fe" title="Generic Flag Code.">en_stat_flag_t</a>  <a class="code" href="group___ppg_group.html#gacb6394568d2305d8a287a581b876199f" title="Get the work status of up counter of Timing Generator 0.">Ppg_GetUpCnt0Status</a>(<span class="keywordtype">void</span>)
<a name="l00639"></a>00639 {
<a name="l00640"></a>00640     <a class="code" href="pdl_8h.html#a0a606b7a8836c8e5b0ef0626fd0413fe" title="Generic Flag Code.">en_stat_flag_t</a> enRet;
<a name="l00641"></a>00641   
<a name="l00642"></a>00642     (1u == bFM_MFT_PPG_TTCR0_MONI0) ? (enRet = <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40faf92d27fee3a9901962a3571a496f5229" title="Flag set &#39;1&#39;.">PdlSet</a>) : (enRet = <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40fa441c7b7046867e503a40d3c52a237e6b" title="Flag clr &#39;0&#39;.">PdlClr</a>);
<a name="l00643"></a>00643   
<a name="l00644"></a>00644     <span class="keywordflow">return</span> enRet;
<a name="l00645"></a>00645 }
<a name="l00646"></a>00646 
<a name="l00659"></a><a class="code" href="group___ppg_group.html#ga7b9595e8114e35a30df604b4a54e369c">00659</a> en_result_t  <a class="code" href="group___ppg_group.html#ga7b9595e8114e35a30df604b4a54e369c" title="Disable start trigger of Timing Generator 0.">Ppg_DisableTimerGen0StartTrig</a>(<a class="code" href="structstc__timer0__gen__ch.html" title="Up counter0 stop channels selection.">stc_timer0_gen_ch_t</a>* pstcTimer0GenCh)
<a name="l00660"></a>00660 {
<a name="l00661"></a>00661     <span class="keywordflow">if</span>((pstcTimer0GenCh-&gt;<a class="code" href="structstc__timer0__gen__ch.html#a7d8d897d67780f00423e05d53356d370" title="1: select Ch.0, 0: not selected">bPpgCh0</a> &gt; 1u) || 
<a name="l00662"></a>00662        (pstcTimer0GenCh-&gt;<a class="code" href="structstc__timer0__gen__ch.html#acaa6a97e213382d77547818389a17c2e" title="1: select Ch.2, 0: not selected">bPpgCh2</a> &gt; 1u) ||
<a name="l00663"></a>00663        (pstcTimer0GenCh-&gt;<a class="code" href="structstc__timer0__gen__ch.html#a0c50737aaa7f070bf652123411b76b3f" title="1: select Ch.4, 0: not selected">bPpgCh4</a> &gt; 1u) || 
<a name="l00664"></a>00664        (pstcTimer0GenCh-&gt;<a class="code" href="structstc__timer0__gen__ch.html#a1ed54120f7e4087cb70597cac71cfce9" title="1: select Ch.6, 0: not selected">bPpgCh6</a> &gt; 1u)  )
<a name="l00665"></a>00665     {
<a name="l00666"></a>00666         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l00667"></a>00667     }
<a name="l00668"></a>00668     
<a name="l00669"></a>00669     bFM_MFT_PPG_TTCR0_TRG0O = ((pstcTimer0GenCh-&gt;<a class="code" href="structstc__timer0__gen__ch.html#a7d8d897d67780f00423e05d53356d370" title="1: select Ch.0, 0: not selected">bPpgCh0</a> == 1u) ? 1u : 0u);
<a name="l00670"></a>00670     bFM_MFT_PPG_TTCR0_TRG2O = ((pstcTimer0GenCh-&gt;<a class="code" href="structstc__timer0__gen__ch.html#acaa6a97e213382d77547818389a17c2e" title="1: select Ch.2, 0: not selected">bPpgCh2</a> == 1u) ? 1u : 0u);
<a name="l00671"></a>00671     bFM_MFT_PPG_TTCR0_TRG4O = ((pstcTimer0GenCh-&gt;<a class="code" href="structstc__timer0__gen__ch.html#a0c50737aaa7f070bf652123411b76b3f" title="1: select Ch.4, 0: not selected">bPpgCh4</a> == 1u) ? 1u : 0u);
<a name="l00672"></a>00672     bFM_MFT_PPG_TTCR0_TRG6O = ((pstcTimer0GenCh-&gt;<a class="code" href="structstc__timer0__gen__ch.html#a1ed54120f7e4087cb70597cac71cfce9" title="1: select Ch.6, 0: not selected">bPpgCh6</a> == 1u) ? 1u : 0u);
<a name="l00673"></a>00673     <span class="keywordflow">return</span> Ok;
<a name="l00674"></a>00674 }
<a name="l00675"></a>00675 
<a name="l00688"></a><a class="code" href="group___ppg_group.html#gac3946c903d9bcb49cf862d853302655c">00688</a> en_result_t  <a class="code" href="group___ppg_group.html#gac3946c903d9bcb49cf862d853302655c" title="Configure the up counter of Timing Generator 1.">Ppg_ConfigUpCnt1</a>(<a class="code" href="structstc__ppg__upcnt1__config.html" title="Up counter1 configuration.">stc_ppg_upcnt1_config_t</a>* pstcConfig)
<a name="l00689"></a>00689 {
<a name="l00690"></a>00690     <span class="keywordflow">if</span>(pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt1__config.html#a17be94f0645adc7fc9a0cf480d89bebe" title="Up counter clock prescaler.">enClk</a> &gt; <a class="code" href="group___ppg_group.html#gga42f925d72bf34ac0b1064578e42a3970a08d47cc289a3f2d9094d0e09e9c82248" title="Up counter clock prescaler: 1/64.">PpgUpCntPclkDiv64</a> )
<a name="l00691"></a>00691     {
<a name="l00692"></a>00692         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00693"></a>00693     }
<a name="l00694"></a>00694     
<a name="l00695"></a>00695     FM_MFT_PPG-&gt;TTCR1 &amp;= ~(3ul&lt;&lt;2u);
<a name="l00696"></a>00696     FM_MFT_PPG-&gt;TTCR1 |= (uint16_t)((uint16_t)pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt1__config.html#a17be94f0645adc7fc9a0cf480d89bebe" title="Up counter clock prescaler.">enClk</a>&lt;&lt;2u);
<a name="l00697"></a>00697     FM_MFT_PPG-&gt;COMP1 = pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt1__config.html#a80c48141e93ba100fa6c51e4a34d2d31" title="Up counter compare value for Ch8.">u8CmpValue8</a>;
<a name="l00698"></a>00698     FM_MFT_PPG-&gt;COMP3 = pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt1__config.html#a2b98988e9d2e9f0e0587a027a51dccca" title="Up counter compare value for Ch10.">u8CmpValue10</a>;
<a name="l00699"></a>00699     FM_MFT_PPG-&gt;COMP5 = pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt1__config.html#abbfc024cbb64df4f861a7000e566e8dc" title="Up counter compare value for Ch12.">u8CmpValue12</a>;
<a name="l00700"></a>00700     FM_MFT_PPG-&gt;COMP7 = pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt1__config.html#ace1d2e53c4145aa21ae3b90dfaa13c22" title="Up counter compare value for Ch14.">u8CmpValue14</a>;
<a name="l00701"></a>00701     <span class="keywordflow">return</span> Ok;
<a name="l00702"></a>00702 }
<a name="l00703"></a>00703 
<a name="l00708"></a><a class="code" href="group___ppg_group.html#ga5d2e22d3f9e8219bd9e8146ac11e525c">00708</a> <span class="keywordtype">void</span>  <a class="code" href="group___ppg_group.html#ga5d2e22d3f9e8219bd9e8146ac11e525c" title="Start the up counter of Timing Generator 1.">Ppg_StartUpCnt1</a>(<span class="keywordtype">void</span>)
<a name="l00709"></a>00709 {
<a name="l00710"></a>00710     bFM_MFT_PPG_TTCR1_STR1 = 1u;
<a name="l00711"></a>00711 }
<a name="l00712"></a>00712 
<a name="l00721"></a><a class="code" href="group___ppg_group.html#ga8e49146cc1d27f7acda5423cf55114ba">00721</a> <a class="code" href="pdl_8h.html#a0a606b7a8836c8e5b0ef0626fd0413fe" title="Generic Flag Code.">en_stat_flag_t</a>  <a class="code" href="group___ppg_group.html#ga8e49146cc1d27f7acda5423cf55114ba" title="Get the work status of up counter of Timing Generator 1.">Ppg_GetUpCnt1Status</a>(<span class="keywordtype">void</span>)
<a name="l00722"></a>00722 {
<a name="l00723"></a>00723     <a class="code" href="pdl_8h.html#a0a606b7a8836c8e5b0ef0626fd0413fe" title="Generic Flag Code.">en_stat_flag_t</a> enRet;
<a name="l00724"></a>00724     
<a name="l00725"></a>00725     (bFM_MFT_PPG_TTCR1_MONI1 == 1u) ? (enRet = <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40faf92d27fee3a9901962a3571a496f5229" title="Flag set &#39;1&#39;.">PdlSet</a>) : (enRet = <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40fa441c7b7046867e503a40d3c52a237e6b" title="Flag clr &#39;0&#39;.">PdlClr</a>);
<a name="l00726"></a>00726   
<a name="l00727"></a>00727     <span class="keywordflow">return</span> enRet;
<a name="l00728"></a>00728 }
<a name="l00729"></a>00729 
<a name="l00742"></a><a class="code" href="group___ppg_group.html#ga1ec470bb566cd5a2a62eac6368cbc59f">00742</a> en_result_t  <a class="code" href="group___ppg_group.html#ga1ec470bb566cd5a2a62eac6368cbc59f" title="Disable start trigger of Timing Generator 1.">Ppg_DisableTimerGen1StartTrig</a>(<a class="code" href="structstc__timer1__gen__ch.html" title="Up counter1 stop channels selection.">stc_timer1_gen_ch_t</a>* pstcTimer1GenCh)
<a name="l00743"></a>00743 {
<a name="l00744"></a>00744     <span class="keywordflow">if</span>((pstcTimer1GenCh-&gt;<a class="code" href="structstc__timer1__gen__ch.html#ac3e9a84a2f531c53c82da16a6fd89ed6" title="1: select Ch.8, 0: not selected">bPpgCh8</a> &gt; 1u)  || 
<a name="l00745"></a>00745        (pstcTimer1GenCh-&gt;<a class="code" href="structstc__timer1__gen__ch.html#a522fface92b4050cd0e69f8f79de266f" title="1: select Ch.10, 0: not selected">bPpgCh10</a> &gt; 1u) ||
<a name="l00746"></a>00746        (pstcTimer1GenCh-&gt;<a class="code" href="structstc__timer1__gen__ch.html#a3481481ea734ece08635f8db18c6ea8e" title="1: select Ch.12, 0: not selected">bPpgCh12</a> &gt; 1u) || 
<a name="l00747"></a>00747        (pstcTimer1GenCh-&gt;<a class="code" href="structstc__timer1__gen__ch.html#a00cb425d0c800af79f2547d197fb30c9" title="1: select Ch.14, 0: not selected">bPpgCh14</a> &gt; 1u)  )
<a name="l00748"></a>00748     {
<a name="l00749"></a>00749         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l00750"></a>00750     }
<a name="l00751"></a>00751     
<a name="l00752"></a>00752     bFM_MFT_PPG_TTCR1_TRG1O = ((pstcTimer1GenCh-&gt;<a class="code" href="structstc__timer1__gen__ch.html#ac3e9a84a2f531c53c82da16a6fd89ed6" title="1: select Ch.8, 0: not selected">bPpgCh8</a> == 1u) ? 1u : 0u);
<a name="l00753"></a>00753     bFM_MFT_PPG_TTCR1_TRG3O = ((pstcTimer1GenCh-&gt;<a class="code" href="structstc__timer1__gen__ch.html#a522fface92b4050cd0e69f8f79de266f" title="1: select Ch.10, 0: not selected">bPpgCh10</a> == 1u) ? 1u : 0u);
<a name="l00754"></a>00754     bFM_MFT_PPG_TTCR1_TRG5O = ((pstcTimer1GenCh-&gt;<a class="code" href="structstc__timer1__gen__ch.html#a3481481ea734ece08635f8db18c6ea8e" title="1: select Ch.12, 0: not selected">bPpgCh12</a> == 1u) ? 1u : 0u);
<a name="l00755"></a>00755     bFM_MFT_PPG_TTCR1_TRG7O = ((pstcTimer1GenCh-&gt;<a class="code" href="structstc__timer1__gen__ch.html#a00cb425d0c800af79f2547d197fb30c9" title="1: select Ch.14, 0: not selected">bPpgCh14</a> == 1u) ? 1u : 0u);
<a name="l00756"></a>00756     <span class="keywordflow">return</span> Ok;
<a name="l00757"></a>00757 }
<a name="l00758"></a>00758 
<a name="l00771"></a><a class="code" href="group___ppg_group.html#ga7ede24936f0af88b9d767a1014fc739b">00771</a> en_result_t  <a class="code" href="group___ppg_group.html#ga7ede24936f0af88b9d767a1014fc739b" title="Configure the up counter of Timing Generator 2.">Ppg_ConfigUpCnt2</a>(<a class="code" href="structstc__ppg__upcnt2__config.html" title="Up counter2 configuration.">stc_ppg_upcnt2_config_t</a>* pstcConfig)
<a name="l00772"></a>00772 {
<a name="l00773"></a>00773     <span class="keywordflow">if</span>(pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt2__config.html#a17be94f0645adc7fc9a0cf480d89bebe" title="Up counter clock prescaler.">enClk</a> &gt; <a class="code" href="group___ppg_group.html#gga42f925d72bf34ac0b1064578e42a3970a08d47cc289a3f2d9094d0e09e9c82248" title="Up counter clock prescaler: 1/64.">PpgUpCntPclkDiv64</a> )
<a name="l00774"></a>00774     {
<a name="l00775"></a>00775         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00776"></a>00776     }
<a name="l00777"></a>00777     
<a name="l00778"></a>00778     FM_MFT_PPG-&gt;TTCR1 &amp;= ~(3ul&lt;&lt;2u);
<a name="l00779"></a>00779     FM_MFT_PPG-&gt;TTCR1 |= (uint16_t)((uint16_t)pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt2__config.html#a17be94f0645adc7fc9a0cf480d89bebe" title="Up counter clock prescaler.">enClk</a>&lt;&lt;2u);
<a name="l00780"></a>00780     FM_MFT_PPG-&gt;COMP8 = pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt2__config.html#aa6252e683eab8a0a05ac6aa410226dff" title="Up counter compare value for Ch16.">u8CmpValue16</a>;
<a name="l00781"></a>00781     FM_MFT_PPG-&gt;COMP10 = pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt2__config.html#ac5b474be68422a4367a66e60b0c976ed" title="Up counter compare value for Ch18.">u8CmpValue18</a>;
<a name="l00782"></a>00782     FM_MFT_PPG-&gt;COMP12 = pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt2__config.html#a4eba7312376966859b0d760b29154504" title="Up counter compare value for Ch20.">u8CmpValue20</a>;
<a name="l00783"></a>00783     FM_MFT_PPG-&gt;COMP14 = pstcConfig-&gt;<a class="code" href="structstc__ppg__upcnt2__config.html#a93fb23e181bd12cd1bf63706aeff8800" title="Up counter compare value for Ch22.">u8CmpValue22</a>;
<a name="l00784"></a>00784     <span class="keywordflow">return</span> Ok;
<a name="l00785"></a>00785 }
<a name="l00786"></a>00786 
<a name="l00791"></a><a class="code" href="group___ppg_group.html#ga00fd18d5cba0baf62f7877f7c75e292f">00791</a> <span class="keywordtype">void</span>  <a class="code" href="group___ppg_group.html#ga00fd18d5cba0baf62f7877f7c75e292f" title="Start the up counter of Timing Generator 2.">Ppg_StartUpCnt2</a>(<span class="keywordtype">void</span>)
<a name="l00792"></a>00792 {
<a name="l00793"></a>00793     bFM_MFT_PPG_TTCR2_STR2 = 1u;
<a name="l00794"></a>00794 }
<a name="l00795"></a>00795 
<a name="l00804"></a><a class="code" href="group___ppg_group.html#ga994bd3ec34f70f1a2d786bd68a92d3e7">00804</a> <a class="code" href="pdl_8h.html#a0a606b7a8836c8e5b0ef0626fd0413fe" title="Generic Flag Code.">en_stat_flag_t</a>  <a class="code" href="group___ppg_group.html#ga994bd3ec34f70f1a2d786bd68a92d3e7" title="Get the work status of up counter of Timing Generator 2.">Ppg_GetUpCnt2Status</a>(<span class="keywordtype">void</span>)
<a name="l00805"></a>00805 {
<a name="l00806"></a>00806     <a class="code" href="pdl_8h.html#a0a606b7a8836c8e5b0ef0626fd0413fe" title="Generic Flag Code.">en_stat_flag_t</a> enRet;
<a name="l00807"></a>00807     (bFM_MFT_PPG_TTCR2_MONI2 == 1u) ? (enRet = <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40faf92d27fee3a9901962a3571a496f5229" title="Flag set &#39;1&#39;.">PdlSet</a>) : (enRet = <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40fa441c7b7046867e503a40d3c52a237e6b" title="Flag clr &#39;0&#39;.">PdlClr</a>);
<a name="l00808"></a>00808     <span class="keywordflow">return</span> enRet;
<a name="l00809"></a>00809 }
<a name="l00810"></a>00810 
<a name="l00823"></a><a class="code" href="group___ppg_group.html#ga48c96b26e1da0f2f6d6b5576b517eba1">00823</a> en_result_t  <a class="code" href="group___ppg_group.html#ga48c96b26e1da0f2f6d6b5576b517eba1" title="Disable start trigger of Timing Generator 2.">Ppg_DisableTimerGen2StartTrig</a>(<a class="code" href="structstc__timer2__gen__ch.html" title="Up counter2 stop channels selection.">stc_timer2_gen_ch_t</a>* pstcTimer2GenCh)
<a name="l00824"></a>00824 {
<a name="l00825"></a>00825     <span class="keywordflow">if</span>((pstcTimer2GenCh-&gt;<a class="code" href="structstc__timer2__gen__ch.html#a8e922b9388e04efd1b8c77e8f6fd97ba" title="1: select Ch.16, 0: not selected">bPpgCh16</a> &gt; 1u)  || 
<a name="l00826"></a>00826        (pstcTimer2GenCh-&gt;<a class="code" href="structstc__timer2__gen__ch.html#a1ebd39e9dc72425c7edf0505b118dffd" title="1: select Ch.18, 0: not selected">bPpgCh18</a> &gt; 1u) ||
<a name="l00827"></a>00827        (pstcTimer2GenCh-&gt;<a class="code" href="structstc__timer2__gen__ch.html#a7e58f9ffe2d1389423d2fec125644c2d" title="1: select Ch.20, 0: not selected">bPpgCh20</a> &gt; 1u) || 
<a name="l00828"></a>00828        (pstcTimer2GenCh-&gt;<a class="code" href="structstc__timer2__gen__ch.html#a87d6caec1e179a71488afcbb37b5cae1" title="1: select Ch.22, 0: not selected">bPpgCh22</a> &gt; 1u)  )
<a name="l00829"></a>00829     {
<a name="l00830"></a>00830         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l00831"></a>00831     }
<a name="l00832"></a>00832     
<a name="l00833"></a>00833     bFM_MFT_PPG_TTCR2_TRG16O = ((pstcTimer2GenCh-&gt;<a class="code" href="structstc__timer2__gen__ch.html#a8e922b9388e04efd1b8c77e8f6fd97ba" title="1: select Ch.16, 0: not selected">bPpgCh16</a> == 1u) ? 1u : 0u);
<a name="l00834"></a>00834     bFM_MFT_PPG_TTCR2_TRG18O = ((pstcTimer2GenCh-&gt;<a class="code" href="structstc__timer2__gen__ch.html#a1ebd39e9dc72425c7edf0505b118dffd" title="1: select Ch.18, 0: not selected">bPpgCh18</a> == 1u) ? 1u : 0u);
<a name="l00835"></a>00835     bFM_MFT_PPG_TTCR2_TRG20O = ((pstcTimer2GenCh-&gt;<a class="code" href="structstc__timer2__gen__ch.html#a7e58f9ffe2d1389423d2fec125644c2d" title="1: select Ch.20, 0: not selected">bPpgCh20</a> == 1u) ? 1u : 0u);
<a name="l00836"></a>00836     bFM_MFT_PPG_TTCR2_TRG22O = ((pstcTimer2GenCh-&gt;<a class="code" href="structstc__timer2__gen__ch.html#a87d6caec1e179a71488afcbb37b5cae1" title="1: select Ch.22, 0: not selected">bPpgCh22</a> == 1u) ? 1u : 0u);
<a name="l00837"></a>00837     <span class="keywordflow">return</span> Ok;
<a name="l00838"></a>00838 }
<a name="l00839"></a>00839 
<a name="l00840"></a>00840 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_PPG == PDL_ON) </span>
<a name="l00841"></a>00841 <span class="preprocessor"></span>
<a name="l00853"></a><a class="code" href="group___ppg_group.html#gaa27e259cb9101f2a0e5749a3794b05f9">00853</a> en_result_t  <a class="code" href="group___ppg_group.html#gaa27e259cb9101f2a0e5749a3794b05f9" title="Enable PPG interrupt.">Ppg_EnableIrq</a>(uint8_t u8CoupleCh)
<a name="l00854"></a>00854 {
<a name="l00855"></a>00855     <span class="keyword">volatile</span> stc_mft_ppg_ppgc0_field_t *pstcPpgc0;
<a name="l00856"></a>00856     uint8_t u8Offset, u8Gap;
<a name="l00857"></a>00857     <span class="keywordflow">if</span>( (0u != (u8CoupleCh%2u))            ||
<a name="l00858"></a>00858         (u8CoupleCh &gt; <a class="code" href="group___ppg_group.html#ga81a6e7f38446ea61861a66f3537e687a">PPG_COUPLE_CH2223</a>) )
<a name="l00859"></a>00859     {
<a name="l00860"></a>00860         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00861"></a>00861     }
<a name="l00862"></a>00862     
<a name="l00863"></a>00863     u8Offset = u8CoupleCh%4u;
<a name="l00864"></a>00864     u8Gap    = u8CoupleCh/4u;
<a name="l00865"></a>00865     pstcPpgc0 = (stc_mft_ppg_ppgc0_field_t*)((uint8_t*)&amp;FM_MFT_PPG-&gt;PPGC0 + u8Gap*0x40u + u8Offset*2u);  
<a name="l00866"></a>00866     
<a name="l00867"></a>00867     pstcPpgc0-&gt;PIE = 1u;
<a name="l00868"></a>00868     
<a name="l00869"></a>00869     <span class="keywordflow">return</span> Ok;
<a name="l00870"></a>00870 }
<a name="l00871"></a>00871 
<a name="l00884"></a><a class="code" href="group___ppg_group.html#ga3f140d3963eedfdd522430e418658cb2">00884</a> en_result_t  <a class="code" href="group___ppg_group.html#ga3f140d3963eedfdd522430e418658cb2" title="Disable PPG interrupt.">Ppg_DisableIrq</a>(uint8_t u8CoupleCh)
<a name="l00885"></a>00885 {
<a name="l00886"></a>00886     <span class="keyword">volatile</span> stc_mft_ppg_ppgc0_field_t *pstcPpgc0;
<a name="l00887"></a>00887     uint8_t u8Offset, u8Gap;
<a name="l00888"></a>00888     <span class="keywordflow">if</span>( (0u != (u8CoupleCh%2u))            ||
<a name="l00889"></a>00889         (u8CoupleCh &gt; <a class="code" href="group___ppg_group.html#ga81a6e7f38446ea61861a66f3537e687a">PPG_COUPLE_CH2223</a>) )
<a name="l00890"></a>00890     {
<a name="l00891"></a>00891         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00892"></a>00892     }
<a name="l00893"></a>00893     
<a name="l00894"></a>00894     u8Offset = u8CoupleCh%4u;
<a name="l00895"></a>00895     u8Gap    = u8CoupleCh/4u;
<a name="l00896"></a>00896     pstcPpgc0 = (stc_mft_ppg_ppgc0_field_t*)((uint8_t*)&amp;FM_MFT_PPG-&gt;PPGC0 + u8Gap*0x40u + u8Offset*2u);  
<a name="l00897"></a>00897     
<a name="l00898"></a>00898     pstcPpgc0-&gt;PIE = 0u;
<a name="l00899"></a>00899     
<a name="l00900"></a>00900     <span class="keywordflow">return</span> Ok;
<a name="l00901"></a>00901 }
<a name="l00902"></a>00902 
<a name="l00903"></a>00903 <span class="preprocessor">#endif</span>
<a name="l00904"></a>00904 <span class="preprocessor"></span>
<a name="l00916"></a><a class="code" href="group___ppg_group.html#ga963bbbaf7fa5262446fe7a3cb44fa74f">00916</a> <a class="code" href="pdl_8h.html#a96065793ad0b302b28c5ccdee2253418">en_irq_flag_t</a>  <a class="code" href="group___ppg_group.html#ga963bbbaf7fa5262446fe7a3cb44fa74f" title="Get the interrupt flag of PPG.">Ppg_GetIrqFlag</a>(uint8_t u8CoupleCh)
<a name="l00917"></a>00917 {
<a name="l00918"></a>00918     <span class="keyword">volatile</span> uint8_t *pu8Ppgc0Addr;
<a name="l00919"></a>00919     uint8_t u8Offset, u8Gap;
<a name="l00920"></a>00920     <a class="code" href="pdl_8h.html#a96065793ad0b302b28c5ccdee2253418">en_irq_flag_t</a> enFlag;
<a name="l00921"></a>00921     <span class="comment">// Only Ch.0,2,4,8,10,12,16,18,20 can produce interrupt request</span>
<a name="l00922"></a>00922     <span class="keywordflow">if</span>( (0u != (u8CoupleCh%2u))            ||
<a name="l00923"></a>00923         (u8CoupleCh &gt; <a class="code" href="group___ppg_group.html#ga81a6e7f38446ea61861a66f3537e687a">PPG_COUPLE_CH2223</a>) )
<a name="l00924"></a>00924     {
<a name="l00925"></a>00925         <span class="keywordflow">return</span> <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40fa441c7b7046867e503a40d3c52a237e6b" title="Flag clr &#39;0&#39;.">PdlClr</a> ;
<a name="l00926"></a>00926     }
<a name="l00927"></a>00927     
<a name="l00928"></a>00928     u8Offset = u8CoupleCh%4u;
<a name="l00929"></a>00929     u8Gap    = u8CoupleCh/4u;
<a name="l00930"></a>00930     pu8Ppgc0Addr = (uint8_t*)FM_MFT_PPG_BASE + 0x200u + u8Gap*0x40u + u8Offset*2 + 1u;  
<a name="l00931"></a>00931     
<a name="l00932"></a>00932     <span class="keywordflow">if</span>(0x40u == (*pu8Ppgc0Addr &amp; 0x40u))
<a name="l00933"></a>00933     {
<a name="l00934"></a>00934         enFlag = <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40faf92d27fee3a9901962a3571a496f5229" title="Flag set &#39;1&#39;.">PdlSet</a>;
<a name="l00935"></a>00935     }
<a name="l00936"></a>00936     <span class="keywordflow">else</span>
<a name="l00937"></a>00937     {
<a name="l00938"></a>00938         enFlag = <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40fa441c7b7046867e503a40d3c52a237e6b" title="Flag clr &#39;0&#39;.">PdlClr</a>;
<a name="l00939"></a>00939     }
<a name="l00940"></a>00940     
<a name="l00941"></a>00941     <span class="keywordflow">return</span> enFlag;
<a name="l00942"></a>00942 }
<a name="l00943"></a>00943 
<a name="l00956"></a><a class="code" href="group___ppg_group.html#gae3b3ee6db880bc70336970b6bcc1b444">00956</a> en_result_t  <a class="code" href="group___ppg_group.html#gae3b3ee6db880bc70336970b6bcc1b444" title="Clear PPG interrupt flag.">Ppg_ClrIrqFlag</a>(uint8_t u8CoupleCh)
<a name="l00957"></a>00957 {
<a name="l00958"></a>00958     <span class="keyword">volatile</span> uint8_t *pu8Ppgc0Addr, *pu8Ppgc1Addr;
<a name="l00959"></a>00959     uint8_t u8Offset, u8Gap;
<a name="l00960"></a>00960     <span class="comment">// Only Ch.0,2,4,8,10,12,16,18,20 can produce interrupt request</span>
<a name="l00961"></a>00961     <span class="keywordflow">if</span>( (0u != (u8CoupleCh%2u))            ||
<a name="l00962"></a>00962         (u8CoupleCh &gt; <a class="code" href="group___ppg_group.html#ga81a6e7f38446ea61861a66f3537e687a">PPG_COUPLE_CH2223</a>) )
<a name="l00963"></a>00963     {
<a name="l00964"></a>00964         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00965"></a>00965     }
<a name="l00966"></a>00966     
<a name="l00967"></a>00967     u8Offset = u8CoupleCh%4u;
<a name="l00968"></a>00968     u8Gap    = u8CoupleCh/4u;
<a name="l00969"></a>00969     pu8Ppgc0Addr = (uint8_t*)FM_MFT_PPG_BASE + 0x200u + u8Gap*0x40u + u8Offset*2u + 1u; 
<a name="l00970"></a>00970     pu8Ppgc1Addr = (uint8_t*)FM_MFT_PPG_BASE + 0x200u + u8Gap*0x40u + u8Offset*2u ; 
<a name="l00971"></a>00971         
<a name="l00972"></a>00972     <span class="comment">// Clear interrupt flag of both even and odd channel </span>
<a name="l00973"></a>00973     *pu8Ppgc0Addr &amp;= ~(1ul&lt;&lt;6u);
<a name="l00974"></a>00974     *pu8Ppgc1Addr &amp;= ~(1ul&lt;&lt;6u);
<a name="l00975"></a>00975     
<a name="l00976"></a>00976     <span class="keywordflow">return</span> Ok;
<a name="l00977"></a>00977 }
<a name="l00978"></a>00978 
<a name="l00993"></a><a class="code" href="group___ppg_group.html#ga80e3acb03a135de427a36c363b3d02db">00993</a> en_result_t  <a class="code" href="group___ppg_group.html#ga80e3acb03a135de427a36c363b3d02db" title="Set the pulse width of PPG.">Ppg_SetLevelWidth</a>(uint8_t u8Ch, uint8_t u8LowWidth, uint8_t u8HighWidth)
<a name="l00994"></a>00994 {
<a name="l00995"></a>00995     <span class="keyword">volatile</span> uint8_t *pu8Prll0Addr, *pu8Prlh0Addr;
<a name="l00996"></a>00996     uint8_t u8Offset, u8Gap;
<a name="l00997"></a>00997     
<a name="l00998"></a>00998     <span class="keywordflow">if</span>(u8Ch &gt; <a class="code" href="group___ppg_group.html#ga5d7c32c6b14233d4cd697f2c054a376c">PPG_CH23</a>)
<a name="l00999"></a>00999     {
<a name="l01000"></a>01000         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01001"></a>01001     }
<a name="l01002"></a>01002     
<a name="l01003"></a>01003     u8Offset = u8Ch%4u;
<a name="l01004"></a>01004     u8Gap    = u8Ch/4u;
<a name="l01005"></a>01005     pu8Prll0Addr = (uint8_t*)FM_MFT_PPG_BASE + 0x208u + u8Gap*0x40u + u8Offset*4u;
<a name="l01006"></a>01006     pu8Prlh0Addr = (uint8_t*)FM_MFT_PPG_BASE + 0x208u + u8Gap*0x40u + u8Offset*4u + 1u;
<a name="l01007"></a>01007     *pu8Prll0Addr = u8LowWidth;
<a name="l01008"></a>01008     *pu8Prlh0Addr = u8HighWidth;
<a name="l01009"></a>01009     <span class="keywordflow">return</span> Ok;
<a name="l01010"></a>01010 }
<a name="l01011"></a>01011 
<a name="l01023"></a><a class="code" href="group___ppg_group.html#gafdc6a6accbab51be71ad936297d430f4">01023</a> en_result_t  <a class="code" href="group___ppg_group.html#gafdc6a6accbab51be71ad936297d430f4" title="Initialize IGBT mode.">Ppg_InitIgbt</a>(<a class="code" href="structstc__ppg__igbt__config.html" title="structure of PPG IGBT configuration">stc_ppg_igbt_config_t</a>* pstcPpgIgbt)
<a name="l01024"></a>01024 {
<a name="l01025"></a>01025     <span class="keywordflow">if</span>((NULL == pstcPpgIgbt) ||
<a name="l01026"></a>01026        (pstcPpgIgbt-&gt;<a class="code" href="structstc__ppg__igbt__config.html#ab079debec58a3f48af0dd3968ffd083f" title="prohibition mode">enMode</a> &gt; <a class="code" href="group___ppg_group.html#ggaced7c90ecb2bfce00c327c7471d5d094a59d649568632f1d1bd76bb9fcfdfc0d4" title="Stop prohibition mode in output active.">IgbtStopProhibitionMode</a>) ||
<a name="l01027"></a>01027        (pstcPpgIgbt-&gt;<a class="code" href="structstc__ppg__igbt__config.html#a6cee7a40d4898a8d051309461c9b606c" title="noise filter width">enWidth</a> &gt; <a class="code" href="group___ppg_group.html#ggae4b60ec6fd6291fd38e08a7f7fe5c6b8a3f98eb0412934c526a77498d8052db91" title="noise filter width: 32PCLK">IgbtFilter32Pclk</a>) ||
<a name="l01028"></a>01028        (pstcPpgIgbt-&gt;<a class="code" href="structstc__ppg__igbt__config.html#a35fe7342edb8fe66ca978fd5e0cf106f" title="Trigger input level.">enTrigInputLevel</a>  &gt; <a class="code" href="group___ppg_group.html#ggab2f6694faee8cbbdbc248fa0aef96e91a98c0aced3db8c46098c72f7b3c9cc233" title="Invert.">IgbtLevelInvert</a>)  ||
<a name="l01029"></a>01029        (pstcPpgIgbt-&gt;<a class="code" href="structstc__ppg__igbt__config.html#aa651e94a832ee9c5eb8ebec2ee3b5e5b" title="IGBT0 output level (PPG0)">enIgbt0OutputLevel</a> &gt; <a class="code" href="group___ppg_group.html#ggab2f6694faee8cbbdbc248fa0aef96e91a98c0aced3db8c46098c72f7b3c9cc233" title="Invert.">IgbtLevelInvert</a>) ||
<a name="l01030"></a>01030        (pstcPpgIgbt-&gt;<a class="code" href="structstc__ppg__igbt__config.html#a3967c6d5bcf6595db41558ddf9c374c3" title="IGBT1 output level (PPG4)">enIgbt1OutputLevel</a> &gt; <a class="code" href="group___ppg_group.html#ggab2f6694faee8cbbdbc248fa0aef96e91a98c0aced3db8c46098c72f7b3c9cc233" title="Invert.">IgbtLevelInvert</a>)   )
<a name="l01031"></a>01031     {
<a name="l01032"></a>01032         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01033"></a>01033     }
<a name="l01034"></a>01034     <span class="comment">// Prohibition mode setting  </span>
<a name="l01035"></a>01035     FM_MFT_PPG-&gt;IGBTC &amp;= ~(1ul&lt;&lt;7u); 
<a name="l01036"></a>01036     FM_MFT_PPG-&gt;IGBTC |= (uint8_t)((uint8_t)pstcPpgIgbt-&gt;<a class="code" href="structstc__ppg__igbt__config.html#ab079debec58a3f48af0dd3968ffd083f" title="prohibition mode">enMode</a>&lt;&lt;7);
<a name="l01037"></a>01037     <span class="comment">// Filter width setting</span>
<a name="l01038"></a>01038     FM_MFT_PPG-&gt;IGBTC &amp;= ~(7ul&lt;&lt;4u);
<a name="l01039"></a>01039     FM_MFT_PPG-&gt;IGBTC |= (uint8_t)((uint8_t)pstcPpgIgbt-&gt;<a class="code" href="structstc__ppg__igbt__config.html#a6cee7a40d4898a8d051309461c9b606c" title="noise filter width">enWidth</a>&lt;&lt;4);
<a name="l01040"></a>01040     <span class="comment">// Trigger input level setting</span>
<a name="l01041"></a>01041     FM_MFT_PPG-&gt;IGBTC &amp;= ~(1ul&lt;&lt;1u); 
<a name="l01042"></a>01042     FM_MFT_PPG-&gt;IGBTC |= (uint8_t)((uint8_t)pstcPpgIgbt-&gt;<a class="code" href="structstc__ppg__igbt__config.html#a35fe7342edb8fe66ca978fd5e0cf106f" title="Trigger input level.">enTrigInputLevel</a>&lt;&lt;1); 
<a name="l01043"></a>01043     <span class="comment">// IGBT output level setting</span>
<a name="l01044"></a>01044     FM_MFT_PPG-&gt;IGBTC &amp;= ~(1ul&lt;&lt;2u); 
<a name="l01045"></a>01045     FM_MFT_PPG-&gt;IGBTC |= (uint8_t)((uint8_t)pstcPpgIgbt-&gt;<a class="code" href="structstc__ppg__igbt__config.html#aa651e94a832ee9c5eb8ebec2ee3b5e5b" title="IGBT0 output level (PPG0)">enIgbt0OutputLevel</a>&lt;&lt;2); 
<a name="l01046"></a>01046     FM_MFT_PPG-&gt;IGBTC &amp;= ~(1ul&lt;&lt;3u); 
<a name="l01047"></a>01047     FM_MFT_PPG-&gt;IGBTC |= (uint8_t)((uint8_t)pstcPpgIgbt-&gt;<a class="code" href="structstc__ppg__igbt__config.html#aa651e94a832ee9c5eb8ebec2ee3b5e5b" title="IGBT0 output level (PPG0)">enIgbt0OutputLevel</a>&lt;&lt;3); 
<a name="l01048"></a>01048     
<a name="l01049"></a>01049     <span class="keywordflow">return</span> Ok;
<a name="l01050"></a>01050     
<a name="l01051"></a>01051 }
<a name="l01052"></a>01052 
<a name="l01059"></a><a class="code" href="group___ppg_group.html#ga46571c7b9d831ec1b7ca0928362f86a4">01059</a> <span class="keywordtype">void</span> <a class="code" href="group___ppg_group.html#ga46571c7b9d831ec1b7ca0928362f86a4" title="Enable IGBT mode.">Ppg_EnableIgbtMode</a>(<span class="keywordtype">void</span>)
<a name="l01060"></a>01060 {
<a name="l01061"></a>01061     FM_MFT_PPG-&gt;IGBTC |= 1ul;
<a name="l01062"></a>01062 }
<a name="l01063"></a>01063 
<a name="l01068"></a><a class="code" href="group___ppg_group.html#ga4ded643b195a7091080c05c4244a40f4">01068</a> <span class="keywordtype">void</span> <a class="code" href="group___ppg_group.html#ga4ded643b195a7091080c05c4244a40f4" title="Disable IGBT mode.">Ppg_DisableIgbtMode</a>(<span class="keywordtype">void</span>)
<a name="l01069"></a>01069 {
<a name="l01070"></a>01070     FM_MFT_PPG-&gt;IGBTC &amp;= ~1ul;
<a name="l01071"></a>01071 }
<a name="l01072"></a>01072          
<a name="l01074"></a>01074 
<a name="l01075"></a>01075 <span class="preprocessor">#endif</span>
<a name="l01076"></a>01076 <span class="preprocessor"></span><span class="comment">/******************************************************************************/</span>
<a name="l01077"></a>01077 <span class="comment">/* EOF (not truncated)                                                        */</span>
<a name="l01078"></a>01078 <span class="comment">/******************************************************************************/</span>
</pre></div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="ppg_8c.html">ppg.c</a>      </li>

    <li class="footer">Generated on Tue Sep 29 2015 15:06:45 for PDL for FM Family by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
