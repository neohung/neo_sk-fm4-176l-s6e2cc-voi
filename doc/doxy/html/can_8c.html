<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>PDL for FM Family: C:/Users/chzhang/Desktop/FM0 MCU/universial PDL/release_v11f_doxy/driver/can/can.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="products_site_image.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">PDL for FM Family
   &#160;<span id="projectnumber">Version2.0.0</span>
   </div>
   <div id="projectbrief">FM Peripheral Driver Library</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('can_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">C:/Users/chzhang/Desktop/FM0 MCU/universial PDL/release_v11f_doxy/driver/can/can.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="can_8h_source.html">can.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for can.c:</div>
<div class="dyncontent">
<div class="center"><img src="can_8c__incl.png" border="0" usemap="#_c_1_2_users_2chzhang_2_desktop_2_f_m0_01_m_c_u_2universial_01_p_d_l_2release__v11f__doxy_2driver_2can_2can_8c" alt=""/></div>
<map name="_c_1_2_users_2chzhang_2_desktop_2_f_m0_01_m_c_u_2universial_01_p_d_l_2release__v11f__doxy_2driver_2can_2can_8c" id="_c_1_2_users_2chzhang_2_desktop_2_f_m0_01_m_c_u_2universial_01_p_d_l_2release__v11f__doxy_2driver_2can_2can_8c">
<area shape="rect" id="node2" href="can_8h.html" title="can.h" alt="" coords="241,80,295,107"/><area shape="rect" id="node3" href="pdl__user_8h.html" title="pdl_user.h" alt="" coords="180,155,263,181"/><area shape="rect" id="node4" href="pdl_8h.html" title="pdl.h" alt="" coords="196,229,247,256"/><area shape="rect" id="node6" href="pdl__device_8h.html" title="pdl_device.h" alt="" coords="235,304,328,331"/></map>
</div>
</div>
<p><a href="can_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#gafd01fb85304b17e511f1f581b1eaffbd">CAN_INSTANCE_COUNT</a>&#160;&#160;&#160;(uint32_t)(sizeof(<a class="el" href="group___can_group.html#gac8f9fe4091e478b60b8cc06110397f64">m_astcCanInstanceDataLut</a>) / sizeof(<a class="el" href="group___can_group.html#gac8f9fe4091e478b60b8cc06110397f64">m_astcCanInstanceDataLut</a>[0]))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro to return the number of enabled CAN instances.  <a href="group___can_group.html#gafd01fb85304b17e511f1f581b1eaffbd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#gaad0f8a76201b3432396d16b5ae60b407">CAN_STATUS_INTERRUPT</a>&#160;&#160;&#160;(1 &lt;&lt; 15)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Status interrupt detected.  <a href="group___can_group.html#gaad0f8a76201b3432396d16b5ae60b407"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#ga65a523cf55f31f39b86d3c5572af2bf2">CAN_NO_LEC_CHANGE</a>&#160;&#160;&#160;7</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#ga2f8c55d8fd6a39062524ac6f078df2c6">CAN_MSG_DIR_RX</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">WRRD bit indicating read direction.  <a href="group___can_group.html#ga2f8c55d8fd6a39062524ac6f078df2c6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#gac3596b4cc7ce5cd7e3099be070846702">CAN_MSG_DIR_TX</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">WRRD bit indicating write direction.  <a href="group___can_group.html#gac3596b4cc7ce5cd7e3099be070846702"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#ga91cfd80ff4f83ed741159af27eb13a58">CAN_MSG_ID_EXTENDED</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Extended msg id is used.  <a href="group___can_group.html#ga91cfd80ff4f83ed741159af27eb13a58"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___can_group.html#gabd886dc35366fa4a3cad7c7a8ee6a101">stc_can_intern_data_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#ga8f7a239e9bfb7520a2d9a4d5fcda4021">CanGetInternDataPtr</a> (volatile FM_CAN_TypeDef *pstcCan)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the internal data for a certain CAN instance.  <a href="group___can_group.html#ga8f7a239e9bfb7520a2d9a4d5fcda4021"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#ga0549be72672363402ab433cdd0dd5979">Can_InitInterrupt</a> (volatile FM_CAN_TypeDef *pstcCan)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set NVIC Interrupt depending on CAN instance.  <a href="group___can_group.html#ga0549be72672363402ab433cdd0dd5979"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#ga0f4083e090566f41216b77b1232536fb">Can_DeInitInterrupt</a> (volatile FM_CAN_TypeDef *pstcCan)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear NVIC Interrupt depending on CAN instance.  <a href="group___can_group.html#ga0f4083e090566f41216b77b1232536fb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#ga9794ba1b6c28deab25cffb789edbdc9a">CanIrqHandler</a> (volatile FM_CAN_TypeDef *pstcCan, <a class="el" href="group___can_group.html#gabd886dc35366fa4a3cad7c7a8ee6a101">stc_can_intern_data_t</a> *pstcCanInternData)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">CAN (Status/Error/Rx/Tx) interrupt ISR.  <a href="group___can_group.html#ga9794ba1b6c28deab25cffb789edbdc9a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#ga72dc16106dd10c7ce0863996053b01f0">Can_Init</a> (volatile FM_CAN_TypeDef *pstcCan, const <a class="el" href="group___can_group.html#ga277daed65ba6d25baf7280ebac918007">stc_can_config_t</a> *pstcConfig)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the CAN module.  <a href="group___can_group.html#ga72dc16106dd10c7ce0863996053b01f0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#ga457758addbdb8281b0bb9af306fa6815">Can_DeInit</a> (volatile FM_CAN_TypeDef *pstcCan)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Deinitializes the CAN module. Any pending transmission or receiption will be aborted and all CAN related registers are reset to their default values.  <a href="group___can_group.html#ga457758addbdb8281b0bb9af306fa6815"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#ga5d20f8298ba318b2bb092d7e4d48caac">CanIsMbUpdatePossible</a> (volatile FM_CAN_TypeDef *pstcCan, uint8_t u8MsgBuf)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the given Message Buffer can be updated.  <a href="group___can_group.html#ga5d20f8298ba318b2bb092d7e4d48caac"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#gadd7db261d564541d858756c169f5bd71">Can_SetTransmitMsgBuffer</a> (volatile FM_CAN_TypeDef *pstcCan, uint8_t u8MsgBuf, const <a class="el" href="group___can_group.html#ga64b0a4b8e4a9d3272497d2a665a5dfe8">stc_can_msg_id_t</a> *pstcMsgId, <a class="el" href="group___can_group.html#gad3129ea7b91b794ddd67e50cddfa5fec">can_tx_msg_func_ptr_t</a> pfnCallback)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures a message buffer for transmission. Setting of new values is not possible if a transmission is pending, except remote transmission mode. The callback function pfnCallback can be NULL, but there will be no notification of a successful transmission. This function has to be called at least once before function <a class="el" href="group___can_group.html#gac2dfa65e0a9a2137f75d3ebbf257789b" title="Updates the message data of a message buffer and/or start transmission. Transmits the message immedia...">Can_UpdateAndTransmitMsgBuffer()</a> can be used with the same message buffer index.  <a href="group___can_group.html#gadd7db261d564541d858756c169f5bd71"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#gac2dfa65e0a9a2137f75d3ebbf257789b">Can_UpdateAndTransmitMsgBuffer</a> (volatile FM_CAN_TypeDef *pstcCan, uint8_t u8MsgBuf, const <a class="el" href="group___can_group.html#gab1193fe5bf45510b5a265c3fdf045b1b">stc_can_msg_data_t</a> *pstcMsgData, <a class="el" href="group___can_group.html#ga97ee1fabed71b037afafe23971600b3b">en_can_tx_mode_t</a> enTxMode)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the message data of a message buffer and/or start transmission. Transmits the message immediately (immediate transmission mode) or on reception of a matching remote frame (remote transmission mode). Function <a class="el" href="group___can_group.html#gadd7db261d564541d858756c169f5bd71" title="Configures a message buffer for transmission. Setting of new values is not possible if a transmission...">Can_SetTransmitMsgBuffer()</a> must be called before setup the identifier and enable this message buffer.  <a href="group___can_group.html#gac2dfa65e0a9a2137f75d3ebbf257789b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#ga7398532897b21d25c53be9f8e4d820f4">Can_UpdateAndTransmitFifoMsgBuffer</a> (volatile FM_CAN_TypeDef *pstcCan, uint8_t u8MsgBuf, const <a class="el" href="group___can_group.html#gab1193fe5bf45510b5a265c3fdf045b1b">stc_can_msg_data_t</a> *pstcMsgData, <a class="el" href="group___can_group.html#ga97ee1fabed71b037afafe23971600b3b">en_can_tx_mode_t</a> enTxMode)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the message data of a message buffer and/or start with EOB = 0 (Msg Buffer as FIFO) transmission. The function calls <a class="el" href="group___can_group.html#gac2dfa65e0a9a2137f75d3ebbf257789b" title="Updates the message data of a message buffer and/or start transmission. Transmits the message immedia...">Can_UpdateAndTransmitMsgBuffer()</a>  <a href="group___can_group.html#ga7398532897b21d25c53be9f8e4d820f4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#ga0f98da3c105c7eaa3cf9c604850ff36c">Can_SetReceiveMsgBuffer</a> (volatile FM_CAN_TypeDef *pstcCan, uint8_t u8MsgBuf, <a class="el" href="group___can_group.html#ga24a73e75a3c3dab9ebcf6cc3d032b346">stc_can_msg_t</a> *pstcMsgBuffer, uint32_t u32MsgIdMask, <a class="el" href="group___can_group.html#ga5f161f9581fcc3faf4d523d74036210c">can_rx_msg_func_ptr_t</a> pfnCallback)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure a message buffer for reception. Configure and enable a message buffer for reception. The acceptance filter is set by pstcMsgBuffer-&gt;stcIdentifier and u32MsgIdMask. Each '0' bit in u32MsgIdMask masks the corresponding bit of the received message ID before comparing it to the configured identifier (set by pstcMsgBuffer-&gt;stcIdentifier). This allows receiving messages with different identifier. Setting all bits of u32MsgIdMask to '1' will only accept messages that match the configured identifier. If extended identifier is used, the u32MsgIdMask will also be interpreted as extended mask identifier. If 11 bit identifier is used, than u32MsgIdMask will be used as 11 bit mask identifier. The application must provide a message buffer object (pstcMsgBuffer) to be filled with received data. After reception of a message that passed the acceptance filter, the message's identifier, data and data length is copied into the provided message buffer and its bNew flag is set to TRUE. The message buffer has to be kept valid until this message buffer is reset (<a class="el" href="group___can_group.html#ga323d4f4f4b68a2eb1fa7adc0c49ae5ff" title="Stop any message buffer operation i.e. disable it.">Can_ResetMsgBuffer()</a>).  <a href="group___can_group.html#ga0f98da3c105c7eaa3cf9c604850ff36c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#ga48c8e747902799e410377d4b39915d3e">Can_SetReceiveFifoMsgBuffer</a> (volatile FM_CAN_TypeDef *pstcCan, uint8_t u8MsgBuf, <a class="el" href="group___can_group.html#ga24a73e75a3c3dab9ebcf6cc3d032b346">stc_can_msg_t</a> *pstcMsgBuffer, uint32_t u32MsgIdMask, <a class="el" href="group___can_group.html#ga5f161f9581fcc3faf4d523d74036210c">can_rx_msg_func_ptr_t</a> pfnCallback)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure a message buffer for reception with EOB = 0 (FIFO mode). This function calls <a class="el" href="group___can_group.html#ga0f98da3c105c7eaa3cf9c604850ff36c" title="Configure a message buffer for reception. Configure and enable a message buffer for reception...">Can_SetReceiveMsgBuffer()</a>  <a href="group___can_group.html#ga48c8e747902799e410377d4b39915d3e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">en_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#ga323d4f4f4b68a2eb1fa7adc0c49ae5ff">Can_ResetMsgBuffer</a> (volatile FM_CAN_TypeDef *pstcCan, uint8_t u8MsgBuf)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop any message buffer operation i.e. disable it.  <a href="group___can_group.html#ga323d4f4f4b68a2eb1fa7adc0c49ae5ff"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___can_group.html#ga5a9fa1e036c0eeeef5d7b2f8732465b1">stc_can_instance_data_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___can_group.html#gac8f9fe4091e478b60b8cc06110397f64">m_astcCanInstanceDataLut</a> []</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Look-up table for all enabled CAN instances and their internal data.  <a href="group___can_group.html#gac8f9fe4091e478b60b8cc06110397f64"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A detailed description is available at <a class="el" href="group___can_group.html">CAN Module description </a></p>
<p>History:</p>
<ul>
<li>2013-08-21 1.0 MWi First version.</li>
<li>2015-03-06 1.1 EZh Port to FM universal PDL structure. </li>
</ul>

<p>Definition in file <a class="el" href="can_8c_source.html">can.c</a>.</p>
</div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="can_8c.html">can.c</a>      </li>

    <li class="footer">Generated on Tue Sep 29 2015 15:06:48 for PDL for FM Family by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
