<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>PDL for FM Family: C:/Users/chzhang/Desktop/FM0 MCU/universial PDL/release_v11f_doxy/driver/mfs/mfs.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="products_site_image.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">PDL for FM Family
   &#160;<span id="projectnumber">Version2.0.0</span>
   </div>
   <div id="projectbrief">FM Peripheral Driver Library</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('mfs_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">C:/Users/chzhang/Desktop/FM0 MCU/universial PDL/release_v11f_doxy/driver/mfs/mfs.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="mfs_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*******************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (C) 2013 Spansion LLC. All Rights Reserved. </span>
<a name="l00003"></a>00003 <span class="comment">*</span>
<a name="l00004"></a>00004 <span class="comment">* This software is owned and published by: </span>
<a name="l00005"></a>00005 <span class="comment">* Spansion LLC, 915 DeGuigne Dr. Sunnyvale, CA  94088-3453 (&quot;Spansion&quot;).</span>
<a name="l00006"></a>00006 <span class="comment">*</span>
<a name="l00007"></a>00007 <span class="comment">* BY DOWNLOADING, INSTALLING OR USING THIS SOFTWARE, YOU AGREE TO BE BOUND </span>
<a name="l00008"></a>00008 <span class="comment">* BY ALL THE TERMS AND CONDITIONS OF THIS AGREEMENT.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* This software contains source code for use with Spansion </span>
<a name="l00011"></a>00011 <span class="comment">* components. This software is licensed by Spansion to be adapted only </span>
<a name="l00012"></a>00012 <span class="comment">* for use in systems utilizing Spansion components. Spansion shall not be </span>
<a name="l00013"></a>00013 <span class="comment">* responsible for misuse or illegal use of this software for devices not </span>
<a name="l00014"></a>00014 <span class="comment">* supported herein.  Spansion is providing this software &quot;AS IS&quot; and will </span>
<a name="l00015"></a>00015 <span class="comment">* not be responsible for issues arising from incorrect user implementation </span>
<a name="l00016"></a>00016 <span class="comment">* of the software.  </span>
<a name="l00017"></a>00017 <span class="comment">*</span>
<a name="l00018"></a>00018 <span class="comment">* SPANSION MAKES NO WARRANTY, EXPRESS OR IMPLIED, ARISING BY LAW OR OTHERWISE,</span>
<a name="l00019"></a>00019 <span class="comment">* REGARDING THE SOFTWARE (INCLUDING ANY ACOOMPANYING WRITTEN MATERIALS), </span>
<a name="l00020"></a>00020 <span class="comment">* ITS PERFORMANCE OR SUITABILITY FOR YOUR INTENDED USE, INCLUDING, </span>
<a name="l00021"></a>00021 <span class="comment">* WITHOUT LIMITATION, THE IMPLIED WARRANTY OF MERCHANTABILITY, THE IMPLIED </span>
<a name="l00022"></a>00022 <span class="comment">* WARRANTY OF FITNESS FOR A PARTICULAR PURPOSE OR USE, AND THE IMPLIED </span>
<a name="l00023"></a>00023 <span class="comment">* WARRANTY OF NONINFRINGEMENT.  </span>
<a name="l00024"></a>00024 <span class="comment">* SPANSION SHALL HAVE NO LIABILITY (WHETHER IN CONTRACT, WARRANTY, TORT, </span>
<a name="l00025"></a>00025 <span class="comment">* NEGLIGENCE OR OTHERWISE) FOR ANY DAMAGES WHATSOEVER (INCLUDING, WITHOUT </span>
<a name="l00026"></a>00026 <span class="comment">* LIMITATION, DAMAGES FOR LOSS OF BUSINESS PROFITS, BUSINESS INTERRUPTION, </span>
<a name="l00027"></a>00027 <span class="comment">* LOSS OF BUSINESS INFORMATION, OR OTHER PECUNIARY LOSS) ARISING FROM USE OR </span>
<a name="l00028"></a>00028 <span class="comment">* INABILITY TO USE THE SOFTWARE, INCLUDING, WITHOUT LIMITATION, ANY DIRECT, </span>
<a name="l00029"></a>00029 <span class="comment">* INDIRECT, INCIDENTAL, SPECIAL OR CONSEQUENTIAL DAMAGES OR LOSS OF DATA, </span>
<a name="l00030"></a>00030 <span class="comment">* SAVINGS OR PROFITS, </span>
<a name="l00031"></a>00031 <span class="comment">* EVEN IF SPANSION HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. </span>
<a name="l00032"></a>00032 <span class="comment">* YOU ASSUME ALL RESPONSIBILITIES FOR SELECTION OF THE SOFTWARE TO ACHIEVE YOUR</span>
<a name="l00033"></a>00033 <span class="comment">* INTENDED RESULTS, AND FOR THE INSTALLATION OF, USE OF, AND RESULTS OBTAINED </span>
<a name="l00034"></a>00034 <span class="comment">* FROM, THE SOFTWARE.  </span>
<a name="l00035"></a>00035 <span class="comment">*</span>
<a name="l00036"></a>00036 <span class="comment">* This software may be replicated in part or whole for the licensed use, </span>
<a name="l00037"></a>00037 <span class="comment">* with the restriction that this Disclaimer and Copyright notice must be </span>
<a name="l00038"></a>00038 <span class="comment">* included with each copy of this software, whether used in part or whole, </span>
<a name="l00039"></a>00039 <span class="comment">* at all times.  </span>
<a name="l00040"></a>00040 <span class="comment">*/</span>
<a name="l00041"></a>00041 <span class="comment">/******************************************************************************/</span>
<a name="l00052"></a>00052 <span class="comment">/******************************************************************************/</span>
<a name="l00053"></a>00053 <span class="comment">/* Include files                                                              */</span>
<a name="l00054"></a>00054 <span class="comment">/******************************************************************************/</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="mfs_8h.html">mfs.h</a>&quot;</span>
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 <span class="preprocessor">#if (defined(PDL_PERIPHERAL_MFS_ACTIVE))</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span>
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="comment">/******************************************************************************/</span>
<a name="l00066"></a>00066 <span class="comment">/* Local pre-processor symbols/macros (&#39;#define&#39;)                             */</span>
<a name="l00067"></a>00067 <span class="comment">/******************************************************************************/</span>
<a name="l00068"></a><a class="code" href="group___mfs_group.html#ga245161ba0819a002a21bb9be662761bd">00068</a> <span class="preprocessor">#define UartInstanceToIndex(Instance) ((uint32_t)Instance - (uint32_t)&amp;UART0)/0x100u</span>
<a name="l00069"></a><a class="code" href="group___mfs_group.html#ga25d4c0b8542b70b05e26c58e7bde5221">00069</a> <span class="preprocessor"></span><span class="preprocessor">#define CsioInstanceToIndex(Instance) ((uint32_t)Instance - (uint32_t)&amp;CSIO0)/0x100u</span>
<a name="l00070"></a><a class="code" href="group___mfs_group.html#gafe613239d638d6d45ffff97fd5d1a6bb">00070</a> <span class="preprocessor"></span><span class="preprocessor">#define I2cInstanceToIndex(Instance)  ((uint32_t)Instance - (uint32_t)&amp;I2C0)/0x100u</span>
<a name="l00071"></a><a class="code" href="group___mfs_group.html#ga040818003f6dcfbfdd3e3195dfc36db4">00071</a> <span class="preprocessor"></span><span class="preprocessor">#define LinInstanceToIndex(Instance)  ((uint32_t)Instance - (uint32_t)&amp;LIN0)/0x100u</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span>
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 <span class="comment">/******************************************************************************/</span>
<a name="l00075"></a>00075 <span class="comment">/* Global variable definitions (declared in header file with &#39;extern&#39;)        */</span>
<a name="l00076"></a>00076 <span class="comment">/******************************************************************************/</span>
<a name="l00077"></a>00077 
<a name="l00079"></a><a class="code" href="group___mfs_group.html#gac131d67c177550a11d8dff85079d40f1">00079</a> <a class="code" href="structstc__mfs__instance__data.html" title="MFS instance data type.">stc_mfs_instance_data_t</a> <a class="code" href="group___mfs_group.html#gac131d67c177550a11d8dff85079d40f1" title="Look-up table for all enabled MFS instances and their internal data.">m_astcMfsInstanceDataLut</a>[<a class="code" href="group___mfs_group.html#ga9b82de24f2f7a557528d5b7cbc73c646">MFS_INSTANCE_COUNT</a>] =
<a name="l00080"></a>00080 {
<a name="l00081"></a>00081 <span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS0 == PDL_ON)</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span>    {
<a name="l00083"></a>00083         {&amp;<a class="code" href="group___mfs_group.html#ga0508661f121639ffdee7de2353a0def2">UART0</a>, &amp;<a class="code" href="group___mfs_group.html#ga122e495b021abf0512e0de411092c7a0">CSIO0</a>, &amp;<a class="code" href="group___mfs_group.html#ga86abb2e8858d177c04e60c41e9242045">I2C0</a>, &amp;<a class="code" href="group___mfs_group.html#ga78848fd0e6d2bb3bf8e00f22b1a8748f">LIN0</a>}, <span class="comment">// pstcInstance </span>
<a name="l00084"></a>00084         {
<a name="l00085"></a>00085             <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a707c8865c28ea11bfe399422a4e010de" title="MFS initial mode.">MfsInitMode</a>,            <span class="comment">// MFS initial mode </span>
<a name="l00086"></a>00086             0u,                     <span class="comment">// stcInternData (not initialized yet) </span>
<a name="l00087"></a>00087         }  
<a name="l00088"></a>00088     },
<a name="l00089"></a>00089 <span class="preprocessor">#endif</span>
<a name="l00090"></a>00090 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS1 == PDL_ON)</span>
<a name="l00091"></a>00091 <span class="preprocessor"></span>    {
<a name="l00092"></a>00092         {&amp;<a class="code" href="group___mfs_group.html#ga8d69bf04d07af4fbbab5a8bd291f65ff">UART1</a>, &amp;<a class="code" href="group___mfs_group.html#ga3f05cab348d766e7e7a41212ab78496a">CSIO1</a>, &amp;<a class="code" href="group___mfs_group.html#gab45d257574da6fe1f091cc45b7eda6cc">I2C1</a>, &amp;<a class="code" href="group___mfs_group.html#ga385b84107ced60a3cabfd29adda3c4bd">LIN1</a>}, <span class="comment">/* pstcInstance */</span>
<a name="l00093"></a>00093         {
<a name="l00094"></a>00094             <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a707c8865c28ea11bfe399422a4e010de" title="MFS initial mode.">MfsInitMode</a>,           <span class="comment">//  MFS initial mode </span>
<a name="l00095"></a>00095             0u,                    <span class="comment">// stcInternData (not initialized yet) </span>
<a name="l00096"></a>00096         }  
<a name="l00097"></a>00097     },
<a name="l00098"></a>00098 <span class="preprocessor">#endif</span>
<a name="l00099"></a>00099 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS2 == PDL_ON)</span>
<a name="l00100"></a>00100 <span class="preprocessor"></span>    {
<a name="l00101"></a>00101         {&amp;<a class="code" href="group___mfs_group.html#ga7f6bd6eb89ae2eeae97af4207ebe3cde">UART2</a>, &amp;<a class="code" href="group___mfs_group.html#gae953a3862d0e49ef47ebccb8c1f60566">CSIO2</a>, &amp;<a class="code" href="group___mfs_group.html#gafa60ac20c1921ef1002083bb3e1f5d16">I2C2</a>, &amp;<a class="code" href="group___mfs_group.html#gaa633116a9f8beaf67730201cfbad32dd">LIN2</a>}, <span class="comment">// pstcInstance </span>
<a name="l00102"></a>00102         {
<a name="l00103"></a>00103             <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a707c8865c28ea11bfe399422a4e010de" title="MFS initial mode.">MfsInitMode</a>,            <span class="comment">// MFS initial mode </span>
<a name="l00104"></a>00104             0u,                     <span class="comment">// stcInternData (not initialized yet) </span>
<a name="l00105"></a>00105         } 
<a name="l00106"></a>00106     },
<a name="l00107"></a>00107 <span class="preprocessor">#endif</span>
<a name="l00108"></a>00108 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS3 == PDL_ON)</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span>    {
<a name="l00110"></a>00110         {&amp;<a class="code" href="group___mfs_group.html#ga961726a611b38bcaf61f3d598b0a59ec">UART3</a>, &amp;<a class="code" href="group___mfs_group.html#ga84d08243e06c4cd1f9cf833847347316">CSIO3</a>, &amp;<a class="code" href="group___mfs_group.html#ga1489b37ed2bca9d9c659119590583bda">I2C3</a>, &amp;<a class="code" href="group___mfs_group.html#ga4767efb29d3be1c73c6544c10f1810ad">LIN3</a>}, <span class="comment">// pstcInstance </span>
<a name="l00111"></a>00111         {
<a name="l00112"></a>00112             <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a707c8865c28ea11bfe399422a4e010de" title="MFS initial mode.">MfsInitMode</a>,            <span class="comment">// MFS initial mode </span>
<a name="l00113"></a>00113             0u,                     <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00114"></a>00114             
<a name="l00115"></a>00115         } 
<a name="l00116"></a>00116     },
<a name="l00117"></a>00117 <span class="preprocessor">#endif</span>
<a name="l00118"></a>00118 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS4 == PDL_ON)</span>
<a name="l00119"></a>00119 <span class="preprocessor"></span>    {
<a name="l00120"></a>00120         {&amp;<a class="code" href="group___mfs_group.html#ga7c035f6f443c999fc043b2b7fb598800">UART4</a>, &amp;<a class="code" href="group___mfs_group.html#ga30debcd5a14518c076997a769c1e26d5">CSIO4</a>, &amp;<a class="code" href="group___mfs_group.html#ga6ad965bc77e04c8f4d47d8867f2b75d8">I2C4</a>, &amp;<a class="code" href="group___mfs_group.html#ga6ed694c033f8ee3f800b86363a10ef58">LIN4</a>}, <span class="comment">// pstcInstance</span>
<a name="l00121"></a>00121         {
<a name="l00122"></a>00122             <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a707c8865c28ea11bfe399422a4e010de" title="MFS initial mode.">MfsInitMode</a>,            <span class="comment">// MFS initial mode </span>
<a name="l00123"></a>00123             0u,                     <span class="comment">// stcInternData (not initialized yet) </span>
<a name="l00124"></a>00124         } 
<a name="l00125"></a>00125     },
<a name="l00126"></a>00126 <span class="preprocessor">#endif</span>
<a name="l00127"></a>00127 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS5 == PDL_ON)</span>
<a name="l00128"></a>00128 <span class="preprocessor"></span>    {
<a name="l00129"></a>00129         {&amp;<a class="code" href="group___mfs_group.html#ga9274e37cf5e8a174fc5dd627b98ec0fe">UART5</a>, &amp;<a class="code" href="group___mfs_group.html#ga5a9e78e9431b379824fea618f762c9cb">CSIO5</a>, &amp;<a class="code" href="group___mfs_group.html#ga6089bb584c425e74827e4d59ae1f7cd7">I2C5</a>, &amp;<a class="code" href="group___mfs_group.html#gaab2bc73232f022d438dd0da95ab97bb1">LIN5</a>}, <span class="comment">// pstcInstance </span>
<a name="l00130"></a>00130         {
<a name="l00131"></a>00131             <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a707c8865c28ea11bfe399422a4e010de" title="MFS initial mode.">MfsInitMode</a>,            <span class="comment">// MFS initial mode </span>
<a name="l00132"></a>00132             0u,                     <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00133"></a>00133         } 
<a name="l00134"></a>00134     },
<a name="l00135"></a>00135 <span class="preprocessor">#endif</span>
<a name="l00136"></a>00136 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS6 == PDL_ON)</span>
<a name="l00137"></a>00137 <span class="preprocessor"></span>    {
<a name="l00138"></a>00138         {&amp;<a class="code" href="group___mfs_group.html#ga61531d783c55be06875e7029331ffd67">UART6</a>, &amp;<a class="code" href="group___mfs_group.html#ga298ab4cd2e0f10dbc38b52c52bb8471b">CSIO6</a>, &amp;<a class="code" href="group___mfs_group.html#ga1ad05151650b8507e8f0cb7ef9a69cae">I2C6</a>, &amp;<a class="code" href="group___mfs_group.html#ga6948ae0e357231461d1f55e3b91ce8df">LIN6</a>}, <span class="comment">// pstcInstance </span>
<a name="l00139"></a>00139         {
<a name="l00140"></a>00140             <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a707c8865c28ea11bfe399422a4e010de" title="MFS initial mode.">MfsInitMode</a>,                <span class="comment">// MFS initial mode</span>
<a name="l00141"></a>00141             0u,                         <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00142"></a>00142         } 
<a name="l00143"></a>00143     },
<a name="l00144"></a>00144 <span class="preprocessor">#endif</span>
<a name="l00145"></a>00145 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS7 == PDL_ON)</span>
<a name="l00146"></a>00146 <span class="preprocessor"></span>    {
<a name="l00147"></a>00147         {&amp;<a class="code" href="group___mfs_group.html#ga20bc10f5b73e8b51724b2f23c5b2e785">UART7</a>, &amp;<a class="code" href="group___mfs_group.html#ga7282a135aabdec5a5453f91d6fec166c">CSIO7</a>, &amp;<a class="code" href="group___mfs_group.html#ga35d2742b2cc6e8ecc481e3048cdea994">I2C7</a>, &amp;<a class="code" href="group___mfs_group.html#ga742d85b0309862a85ea07e590f432ad0">LIN7</a>}, <span class="comment">// pstcInstance </span>
<a name="l00148"></a>00148         {
<a name="l00149"></a>00149             <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a707c8865c28ea11bfe399422a4e010de" title="MFS initial mode.">MfsInitMode</a>,            <span class="comment">// MFS initial mode </span>
<a name="l00150"></a>00150             0u,                     <span class="comment">// stcInternData (not initialized yet) </span>
<a name="l00151"></a>00151         } 
<a name="l00152"></a>00152     },
<a name="l00153"></a>00153 <span class="preprocessor">#endif</span>
<a name="l00154"></a>00154 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS8 == PDL_ON)</span>
<a name="l00155"></a>00155 <span class="preprocessor"></span>    {
<a name="l00156"></a>00156         {&amp;<a class="code" href="group___mfs_group.html#ga2fe70804956e53dcbdc82dbacbbbfabc">UART8</a>, &amp;<a class="code" href="group___mfs_group.html#ga4e18850b4be1bfbe3ca3dd2524dccb04">CSIO8</a>, &amp;<a class="code" href="group___mfs_group.html#ga0e0b41f5b52e4b55d04dc7a7e4323c1a">I2C8</a>, &amp;<a class="code" href="group___mfs_group.html#gaa8ed3ecef764cf2d7dfc110e97af5660">LIN8</a>}, <span class="comment">// pstcInstance</span>
<a name="l00157"></a>00157         {
<a name="l00158"></a>00158             <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a707c8865c28ea11bfe399422a4e010de" title="MFS initial mode.">MfsInitMode</a>,            <span class="comment">// MFS initial mode</span>
<a name="l00159"></a>00159             0u,                     <span class="comment">// stcInternData (not initialized yet) </span>
<a name="l00160"></a>00160         } 
<a name="l00161"></a>00161     },
<a name="l00162"></a>00162 <span class="preprocessor">#endif</span>
<a name="l00163"></a>00163 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS9 == PDL_ON)</span>
<a name="l00164"></a>00164 <span class="preprocessor"></span>    {
<a name="l00165"></a>00165         {&amp;<a class="code" href="group___mfs_group.html#ga71a1040f1375b0c4963cb4502de1de09">UART9</a>, &amp;<a class="code" href="group___mfs_group.html#gaa06225546ec1cef0afc8b92e924e0de0">CSIO9</a>, &amp;<a class="code" href="group___mfs_group.html#ga0b7d5276aa2f13772cad2978079c286a">I2C9</a>, &amp;<a class="code" href="group___mfs_group.html#gab84a5153fb0077df6611eda877c00c7a">LIN9</a>}, <span class="comment">// pstcInstance </span>
<a name="l00166"></a>00166         {
<a name="l00167"></a>00167             <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a707c8865c28ea11bfe399422a4e010de" title="MFS initial mode.">MfsInitMode</a>,            <span class="comment">// MFS initial mode</span>
<a name="l00168"></a>00168             0u,                     <span class="comment">// stcInternData (not initialized yet) </span>
<a name="l00169"></a>00169         } 
<a name="l00170"></a>00170     },
<a name="l00171"></a>00171 <span class="preprocessor">#endif</span>
<a name="l00172"></a>00172 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS10 == PDL_ON)</span>
<a name="l00173"></a>00173 <span class="preprocessor"></span>    {
<a name="l00174"></a>00174         {&amp;<a class="code" href="group___mfs_group.html#ga0e7fc8acff8e61a31e0c93170dd81d5f">UART10</a>, &amp;<a class="code" href="group___mfs_group.html#ga8e8914e87d2b7711eb9abf7578d5115b">CSIO10</a>, &amp;<a class="code" href="group___mfs_group.html#ga09c3a60de3c23697137932647f5e492d">I2C10</a>, &amp;<a class="code" href="group___mfs_group.html#ga1a8f909522433b0973f2c1587a3895bb">LIN10</a>}, <span class="comment">// pstcInstance </span>
<a name="l00175"></a>00175         {
<a name="l00176"></a>00176             <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a707c8865c28ea11bfe399422a4e010de" title="MFS initial mode.">MfsInitMode</a>,            <span class="comment">// MFS initial mode </span>
<a name="l00177"></a>00177             0u,                     <span class="comment">// stcInternData (not initialized yet) </span>
<a name="l00178"></a>00178         } 
<a name="l00179"></a>00179     },
<a name="l00180"></a>00180 <span class="preprocessor">#endif</span>
<a name="l00181"></a>00181 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS11 == PDL_ON)</span>
<a name="l00182"></a>00182 <span class="preprocessor"></span>    {
<a name="l00183"></a>00183         {&amp;<a class="code" href="group___mfs_group.html#gae4cdf67593617cf31a6f5244e3101983">UART11</a>, &amp;<a class="code" href="group___mfs_group.html#ga526515f394ec5429e9b1274ed239f0e1">CSIO11</a>, &amp;<a class="code" href="group___mfs_group.html#ga2278eaef9e45188cd1b880a6cca82f18">I2C11</a>, &amp;<a class="code" href="group___mfs_group.html#ga5ed92b941547c4f038535df1401dda1f">LIN11</a>}, <span class="comment">// pstcInstance </span>
<a name="l00184"></a>00184         {
<a name="l00185"></a>00185             <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a707c8865c28ea11bfe399422a4e010de" title="MFS initial mode.">MfsInitMode</a>,            <span class="comment">// MFS initial mode </span>
<a name="l00186"></a>00186             0u,                     <span class="comment">// stcInternData (not initialized yet) </span>
<a name="l00187"></a>00187         } 
<a name="l00188"></a>00188     },
<a name="l00189"></a>00189 <span class="preprocessor">#endif</span>
<a name="l00190"></a>00190 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS12 == PDL_ON)</span>
<a name="l00191"></a>00191 <span class="preprocessor"></span>    {
<a name="l00192"></a>00192         {&amp;<a class="code" href="group___mfs_group.html#gab4ce89e3a864b3ab56760a197839bf39">UART12</a>, &amp;<a class="code" href="group___mfs_group.html#ga7ef9c88ee9142db9d04614884b78e645">CSIO12</a>, &amp;<a class="code" href="group___mfs_group.html#gad7926220b4b2679bab7e62c264943275">I2C12</a>, &amp;<a class="code" href="group___mfs_group.html#ga2dc8d646dd39d4943b183e4d53f2982b">LIN12</a>}, <span class="comment">// pstcInstance </span>
<a name="l00193"></a>00193         {
<a name="l00194"></a>00194             <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a707c8865c28ea11bfe399422a4e010de" title="MFS initial mode.">MfsInitMode</a>,            <span class="comment">// MFS initial mode </span>
<a name="l00195"></a>00195             0u,                     <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00196"></a>00196         } 
<a name="l00197"></a>00197     },
<a name="l00198"></a>00198 <span class="preprocessor">#endif</span>
<a name="l00199"></a>00199 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS13 == PDL_ON)</span>
<a name="l00200"></a>00200 <span class="preprocessor"></span>    {
<a name="l00201"></a>00201         {&amp;<a class="code" href="group___mfs_group.html#ga444e4182e4642211e9ebfa227ad15e08">UART13</a>, &amp;<a class="code" href="group___mfs_group.html#gad7e662f131b958fb20cf1320c0a38e3b">CSIO13</a>, &amp;<a class="code" href="group___mfs_group.html#ga637726d424d46dd150e0ed09a164e28a">I2C13</a>, &amp;<a class="code" href="group___mfs_group.html#ga037b704b5e0f245d312505276846b9be">LIN13</a>}, <span class="comment">// pstcInstance </span>
<a name="l00202"></a>00202         {
<a name="l00203"></a>00203             <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a707c8865c28ea11bfe399422a4e010de" title="MFS initial mode.">MfsInitMode</a>,            <span class="comment">// MFS initial mode </span>
<a name="l00204"></a>00204             0u,                     <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00205"></a>00205         } 
<a name="l00206"></a>00206     },
<a name="l00207"></a>00207 <span class="preprocessor">#endif</span>
<a name="l00208"></a>00208 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS14 == PDL_ON)</span>
<a name="l00209"></a>00209 <span class="preprocessor"></span>    {
<a name="l00210"></a>00210         {&amp;<a class="code" href="group___mfs_group.html#gafef80ade71ce65d529eaffd7cbea338e">UART14</a>, &amp;<a class="code" href="group___mfs_group.html#gadf33ea5dab0ae2ea5338ac4c56fbc627">CSIO14</a>, &amp;<a class="code" href="group___mfs_group.html#ga830bc8d07794783a7e2df8f75e5105da">I2C14</a>, &amp;<a class="code" href="group___mfs_group.html#ga652371a50a1f07becbafb6fed2abd99f">LIN14</a>}, <span class="comment">// pstcInstance </span>
<a name="l00211"></a>00211         {
<a name="l00212"></a>00212             <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a707c8865c28ea11bfe399422a4e010de" title="MFS initial mode.">MfsInitMode</a>,            <span class="comment">// MFS initial mode </span>
<a name="l00213"></a>00213             0u,                     <span class="comment">// stcInternData (not initialized yet) </span>
<a name="l00214"></a>00214         } 
<a name="l00215"></a>00215     },
<a name="l00216"></a>00216 <span class="preprocessor">#endif</span>
<a name="l00217"></a>00217 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS15 == PDL_ON)</span>
<a name="l00218"></a>00218 <span class="preprocessor"></span>    {
<a name="l00219"></a>00219         {&amp;<a class="code" href="group___mfs_group.html#ga58ac65d629ca3dfd9c642ca54e773e14">UART15</a>, &amp;<a class="code" href="group___mfs_group.html#ga4bf99f6ea08919e686ef00b0aeaeb6d4">CSIO15</a>, &amp;<a class="code" href="group___mfs_group.html#gaebaebe165030b3fc190df375abc6416b">I2C15</a>, &amp;<a class="code" href="group___mfs_group.html#gaf41e7d3ff27c3e581dce7f168da26c56">LIN15</a>}, <span class="comment">// pstcInstance</span>
<a name="l00220"></a>00220         {
<a name="l00221"></a>00221             <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a707c8865c28ea11bfe399422a4e010de" title="MFS initial mode.">MfsInitMode</a>,            <span class="comment">// MFS initial mode </span>
<a name="l00222"></a>00222             0u,                     <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00223"></a>00223         } 
<a name="l00224"></a>00224     },
<a name="l00225"></a>00225 <span class="preprocessor">#endif</span>
<a name="l00226"></a>00226 <span class="preprocessor"></span>};
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 <span class="comment">/******************************************************************************/</span>
<a name="l00229"></a>00229 <span class="comment">/* Local type definitions (&#39;typedef&#39;)                                         */</span>
<a name="l00230"></a>00230 <span class="comment">/******************************************************************************/</span>
<a name="l00231"></a>00231 
<a name="l00232"></a>00232 <span class="comment">/******************************************************************************/</span>
<a name="l00233"></a>00233 <span class="comment">/* Local function prototypes (&#39;static&#39;)                                       */</span>
<a name="l00234"></a>00234 <span class="comment">/******************************************************************************/</span>
<a name="l00235"></a>00235 <span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS_UART_MODE == PDL_ON)  </span>
<a name="l00236"></a>00236 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* <a class="code" href="group___mfs_group.html#ga40fb7c5c444cd035117696953cb49b33" title="Return the internal data for a certain UART instance.">MfsUartGetInternDataPtr</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>* pstcMfs);
<a name="l00237"></a>00237 <span class="preprocessor">#endif</span>
<a name="l00238"></a>00238 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS_CSIO_MODE == PDL_ON)</span>
<a name="l00239"></a>00239 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* <a class="code" href="group___mfs_group.html#gac79c84b0a45258223a917b61d6ae2e7f" title="Return the internal data for a certain CSIO instance.">MfsCsioGetInternDataPtr</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcMfs);
<a name="l00240"></a>00240 <span class="preprocessor">#endif</span>
<a name="l00241"></a>00241 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS_I2C_MODE == PDL_ON)</span>
<a name="l00242"></a>00242 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* <a class="code" href="group___mfs_group.html#gabe41825cea71550bd7b2f36b812cc681" title="Return the internal data for a certain I2C instance.">MfsI2cGetInternDataPtr</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>* pstcMfs);
<a name="l00243"></a>00243 <span class="preprocessor">#endif</span>
<a name="l00244"></a>00244 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS_LIN_MODE == PDL_ON)</span>
<a name="l00245"></a>00245 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* <a class="code" href="group___mfs_group.html#gafb06f7e35238637a0447924a15a25334" title="Return the internal data for a certain MFS instance.">MfsLinGetInternDataPtr</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>* pstcMfs);
<a name="l00246"></a>00246 <span class="preprocessor">#endif</span>
<a name="l00247"></a>00247 <span class="preprocessor"></span><span class="comment">/******************************************************************************/</span>
<a name="l00248"></a>00248 <span class="comment">/* Local variable definitions (&#39;static&#39;)                                      */</span>
<a name="l00249"></a>00249 <span class="comment">/******************************************************************************/</span>
<a name="l00250"></a>00250 
<a name="l00251"></a>00251 <span class="comment">/******************************************************************************/</span>
<a name="l00252"></a>00252 <span class="comment">/* Function implementation - global (&#39;extern&#39;) and local (&#39;static&#39;)           */</span>
<a name="l00253"></a>00253 <span class="comment">/******************************************************************************/</span>
<a name="l00254"></a>00254 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_MFS0 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS8 == PDL_ON) ||  \</span>
<a name="l00255"></a>00255 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS1 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS9 == PDL_ON) ||  \</span>
<a name="l00256"></a>00256 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS2 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS10 == PDL_ON) || \</span>
<a name="l00257"></a>00257 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS3 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS11 == PDL_ON) || \</span>
<a name="l00258"></a>00258 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS4 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS12 == PDL_ON) || \</span>
<a name="l00259"></a>00259 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS5 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS13 == PDL_ON) || \</span>
<a name="l00260"></a>00260 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS6 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS14 == PDL_ON) || \</span>
<a name="l00261"></a>00261 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS7 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS15 == PDL_ON) </span>
<a name="l00262"></a>00262 <span class="preprocessor"></span>
<a name="l00271"></a><a class="code" href="group___mfs_group.html#ga8cf89127037324ffc519f97b5312be9c">00271</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="group___mfs_group.html#ga8cf89127037324ffc519f97b5312be9c" title="Device dependent initialization of transmit interrupts according CMSIS with level defined in pdl...">MfsInitNvic</a>(uint8_t u8Ch, boolean_t bRxTx)
<a name="l00272"></a>00272 {
<a name="l00273"></a>00273     IRQn_Type enIrqIndex; 
<a name="l00274"></a>00274     
<a name="l00275"></a>00275 <span class="preprocessor">#if (PDL_MCU_CORE == PDL_FM0P_CORE)    </span>
<a name="l00276"></a>00276 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_MCU_TYPE == PDL_FM0P_TYPE3)</span>
<a name="l00277"></a>00277 <span class="preprocessor"></span>    uint8_t au8PrioLevel[8] = 
<a name="l00278"></a>00278     {
<a name="l00279"></a>00279         <a class="code" href="pdl__user_8h.html#afc769b4b7b4d1735dd1086ad5082491f">PDL_IRQ_LEVEL_MFS0</a>,
<a name="l00280"></a>00280         <a class="code" href="pdl__user_8h.html#a903f9a2bf6a3b9be9f7b66549fa7dd3d">PDL_IRQ_LEVEL_MFS1</a>,
<a name="l00281"></a>00281         0u,
<a name="l00282"></a>00282         <a class="code" href="pdl__user_8h.html#a6efe1b03bb198de8214d6f2a8919f97e">PDL_IRQ_LEVEL_MFS3</a>,
<a name="l00283"></a>00283         <a class="code" href="pdl__user_8h.html#a2a35cf2f7b0f7c0e8ecf6db05e39223f">PDL_IRQ_LEVEL_MFS4</a>,
<a name="l00284"></a>00284         0u,
<a name="l00285"></a>00285         <a class="code" href="pdl__user_8h.html#af889306318c9fa28e49190c2bafffc14">PDL_IRQ_LEVEL_MFS6_I2CS0</a>,
<a name="l00286"></a>00286         <a class="code" href="pdl__user_8h.html#ad480c47d148bba7239de42be8d6b51f4">PDL_IRQ_LEVEL_MFS7</a>,
<a name="l00287"></a>00287     };
<a name="l00288"></a>00288     
<a name="l00289"></a>00289     enIrqIndex = (IRQn_Type)(MFS0_IRQn + u8Ch);
<a name="l00290"></a>00290 
<a name="l00291"></a>00291     NVIC_ClearPendingIRQ(enIrqIndex);
<a name="l00292"></a>00292     NVIC_SetPriority(enIrqIndex, au8PrioLevel[u8Ch]);
<a name="l00293"></a>00293     NVIC_EnableIRQ(enIrqIndex);
<a name="l00294"></a>00294     
<a name="l00295"></a>00295 <span class="preprocessor">#else    </span>
<a name="l00296"></a>00296 <span class="preprocessor"></span>    uint8_t au8PrioLevel[16] = 
<a name="l00297"></a>00297     {
<a name="l00298"></a>00298         PDL_IRQ_LEVEL_MFS0_8_RX,  PDL_IRQ_LEVEL_MFS0_8_TX,
<a name="l00299"></a>00299         PDL_IRQ_LEVEL_MFS1_9_RX,  PDL_IRQ_LEVEL_MFS1_9_TX,
<a name="l00300"></a>00300         PDL_IRQ_LEVEL_MFS2_10_RX, PDL_IRQ_LEVEL_MFS2_10_TX,
<a name="l00301"></a>00301         PDL_IRQ_LEVEL_MFS3_11_RX, PDL_IRQ_LEVEL_MFS3_11_TX,
<a name="l00302"></a>00302         PDL_IRQ_LEVEL_MFS4_12_RX, PDL_IRQ_LEVEL_MFS4_12_TX,
<a name="l00303"></a>00303         PDL_IRQ_LEVEL_MFS5_13_RX, PDL_IRQ_LEVEL_MFS5_13_TX,
<a name="l00304"></a>00304         PDL_IRQ_LEVEL_MFS6_14_RX_DMA0, PDL_IRQ_LEVEL_MFS6_14_TX_DMA1,
<a name="l00305"></a>00305         PDL_IRQ_LEVEL_MFS7_15_RX_DMA2, PDL_IRQ_LEVEL_MFS7_15_TX_DMA3,
<a name="l00306"></a>00306     };
<a name="l00307"></a>00307 
<a name="l00308"></a>00308     <span class="keywordflow">if</span>(FALSE == bRxTx)
<a name="l00309"></a>00309     {
<a name="l00310"></a>00310         enIrqIndex = (IRQn_Type)(MFS0_8_RX_IRQn + u8Ch*2u);
<a name="l00311"></a>00311 
<a name="l00312"></a>00312         NVIC_ClearPendingIRQ(enIrqIndex);
<a name="l00313"></a>00313         NVIC_SetPriority(enIrqIndex, au8PrioLevel[u8Ch*2u]);
<a name="l00314"></a>00314         NVIC_EnableIRQ(enIrqIndex);
<a name="l00315"></a>00315     }
<a name="l00316"></a>00316     <span class="keywordflow">else</span>
<a name="l00317"></a>00317     {
<a name="l00318"></a>00318         enIrqIndex = (IRQn_Type)(MFS0_8_TX_IRQn + u8Ch*2u );
<a name="l00319"></a>00319 
<a name="l00320"></a>00320         NVIC_ClearPendingIRQ(enIrqIndex);
<a name="l00321"></a>00321         NVIC_SetPriority(enIrqIndex, au8PrioLevel[u8Ch*2u+1]);
<a name="l00322"></a>00322         NVIC_EnableIRQ(enIrqIndex);
<a name="l00323"></a>00323     }
<a name="l00324"></a>00324 <span class="preprocessor">#endif                         </span>
<a name="l00325"></a>00325 <span class="preprocessor"></span><span class="preprocessor">#elif (PDL_MCU_CORE == PDL_FM3_CORE)</span>
<a name="l00326"></a>00326 <span class="preprocessor"></span>    uint8_t au8PrioLevel[16] = 
<a name="l00327"></a>00327     {
<a name="l00328"></a>00328         PDL_IRQ_LEVEL_MFS0_8_RX,  PDL_IRQ_LEVEL_MFS0_8_TX,
<a name="l00329"></a>00329         PDL_IRQ_LEVEL_MFS1_9_RX,  PDL_IRQ_LEVEL_MFS1_9_TX,
<a name="l00330"></a>00330         PDL_IRQ_LEVEL_MFS2_10_RX, PDL_IRQ_LEVEL_MFS2_10_TX,
<a name="l00331"></a>00331         PDL_IRQ_LEVEL_MFS3_11_RX, PDL_IRQ_LEVEL_MFS3_11_TX,
<a name="l00332"></a>00332         PDL_IRQ_LEVEL_MFS4_12_RX, PDL_IRQ_LEVEL_MFS4_12_TX,
<a name="l00333"></a>00333         PDL_IRQ_LEVEL_MFS5_13_RX, PDL_IRQ_LEVEL_MFS5_13_TX,
<a name="l00334"></a>00334         PDL_IRQ_LEVEL_MFS6_14_RX, PDL_IRQ_LEVEL_MFS6_14_TX,
<a name="l00335"></a>00335         PDL_IRQ_LEVEL_MFS7_15_RX, PDL_IRQ_LEVEL_MFS7_15_TX,
<a name="l00336"></a>00336     };
<a name="l00337"></a>00337                          
<a name="l00338"></a>00338     <span class="keywordflow">if</span>(FALSE == bRxTx)
<a name="l00339"></a>00339     {
<a name="l00340"></a>00340         enIrqIndex = (IRQn_Type)(MFS0_8_RX_IRQn + u8Ch*2u );
<a name="l00341"></a>00341 
<a name="l00342"></a>00342         NVIC_ClearPendingIRQ(enIrqIndex);
<a name="l00343"></a>00343         NVIC_SetPriority(enIrqIndex, au8PrioLevel[u8Ch*2u]);
<a name="l00344"></a>00344         NVIC_EnableIRQ(enIrqIndex);
<a name="l00345"></a>00345     }
<a name="l00346"></a>00346     <span class="keywordflow">else</span>
<a name="l00347"></a>00347     {
<a name="l00348"></a>00348         enIrqIndex = (IRQn_Type)(MFS0_8_TX_IRQn + u8Ch*2u );
<a name="l00349"></a>00349 
<a name="l00350"></a>00350         NVIC_ClearPendingIRQ(enIrqIndex);
<a name="l00351"></a>00351         NVIC_SetPriority(enIrqIndex, au8PrioLevel[u8Ch*2u+1]);
<a name="l00352"></a>00352         NVIC_EnableIRQ(enIrqIndex);
<a name="l00353"></a>00353     } 
<a name="l00354"></a>00354 <span class="preprocessor">#elif (PDL_MCU_CORE == PDL_FM4_CORE)</span>
<a name="l00355"></a>00355 <span class="preprocessor"></span>    uint8_t au8PrioLevel0[16] = 
<a name="l00356"></a>00356     {
<a name="l00357"></a>00357         PDL_IRQ_LEVEL_MFS0_RX,  PDL_IRQ_LEVEL_MFS0_TX,
<a name="l00358"></a>00358         PDL_IRQ_LEVEL_MFS1_RX,  PDL_IRQ_LEVEL_MFS1_TX,
<a name="l00359"></a>00359         PDL_IRQ_LEVEL_MFS2_RX,  PDL_IRQ_LEVEL_MFS2_TX,
<a name="l00360"></a>00360         PDL_IRQ_LEVEL_MFS3_RX,  PDL_IRQ_LEVEL_MFS3_TX,
<a name="l00361"></a>00361         PDL_IRQ_LEVEL_MFS4_RX,  PDL_IRQ_LEVEL_MFS4_TX,
<a name="l00362"></a>00362         PDL_IRQ_LEVEL_MFS5_RX,  PDL_IRQ_LEVEL_MFS5_TX,
<a name="l00363"></a>00363         PDL_IRQ_LEVEL_MFS6_RX,  PDL_IRQ_LEVEL_MFS6_TX,
<a name="l00364"></a>00364         PDL_IRQ_LEVEL_MFS7_RX,  PDL_IRQ_LEVEL_MFS7_TX,
<a name="l00365"></a>00365 
<a name="l00366"></a>00366     }; 
<a name="l00367"></a>00367 <span class="preprocessor">#if (PDL_MCU_TYPE == PDL_FM4_TYPE1) || (PDL_MCU_TYPE == PDL_FM4_TYPE2) || \</span>
<a name="l00368"></a>00368 <span class="preprocessor">    (PDL_MCU_TYPE == PDL_FM4_TYPE3)</span>
<a name="l00369"></a>00369 <span class="preprocessor"></span>    uint8_t au8PrioLevel1[8] = 
<a name="l00370"></a>00370     {
<a name="l00371"></a>00371         PDL_IRQ_LEVEL_MFS8_RX,  PDL_IRQ_LEVEL_MFS8_TX,
<a name="l00372"></a>00372         PDL_IRQ_LEVEL_MFS9_RX,  PDL_IRQ_LEVEL_MFS9_TX,
<a name="l00373"></a>00373         PDL_IRQ_LEVEL_MFS10_RX,  PDL_IRQ_LEVEL_MFS10_TX,
<a name="l00374"></a>00374         PDL_IRQ_LEVEL_MFS11_RX,  PDL_IRQ_LEVEL_MFS11_TX,
<a name="l00375"></a>00375     };
<a name="l00376"></a>00376     
<a name="l00377"></a>00377     uint8_t au8PrioLevel2[8] = 
<a name="l00378"></a>00378     {
<a name="l00379"></a>00379         PDL_IRQ_LEVEL_MFS12_RX,  PDL_IRQ_LEVEL_MFS12_TX,
<a name="l00380"></a>00380         PDL_IRQ_LEVEL_MFS13_RX,  PDL_IRQ_LEVEL_MFS13_TX,
<a name="l00381"></a>00381         PDL_IRQ_LEVEL_MFS14_RX,  PDL_IRQ_LEVEL_MFS14_TX,
<a name="l00382"></a>00382         PDL_IRQ_LEVEL_MFS15_RX,  PDL_IRQ_LEVEL_MFS15_TX,
<a name="l00383"></a>00383     };
<a name="l00384"></a>00384 <span class="preprocessor">#elif (PDL_MCU_TYPE == PDL_FM4_TYPE5)</span>
<a name="l00385"></a>00385 <span class="preprocessor"></span>    uint8_t au8PrioLevel1[4] = 
<a name="l00386"></a>00386     {
<a name="l00387"></a>00387         PDL_IRQ_LEVEL_MFS8_RX,  PDL_IRQ_LEVEL_MFS8_TX,
<a name="l00388"></a>00388         PDL_IRQ_LEVEL_MFS9_RX,  PDL_IRQ_LEVEL_MFS9_TX,
<a name="l00389"></a>00389     };
<a name="l00390"></a>00390 <span class="preprocessor">#endif</span>
<a name="l00391"></a>00391 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(FALSE == bRxTx)
<a name="l00392"></a>00392     {
<a name="l00393"></a>00393         <span class="keywordflow">if</span>(u8Ch &lt; 8u)
<a name="l00394"></a>00394         {
<a name="l00395"></a>00395             enIrqIndex = (IRQn_Type)(MFS0_RX_IRQn + (2u * u8Ch));
<a name="l00396"></a>00396             NVIC_SetPriority(enIrqIndex, au8PrioLevel0[u8Ch*2u]);
<a name="l00397"></a>00397         }
<a name="l00398"></a>00398 <span class="preprocessor">    #if (PDL_MCU_TYPE == PDL_FM4_TYPE1) || (PDL_MCU_TYPE == PDL_FM4_TYPE2) || \</span>
<a name="l00399"></a>00399 <span class="preprocessor">        (PDL_MCU_TYPE == PDL_FM4_TYPE3) || (PDL_MCU_TYPE == PDL_FM4_TYPE5)  </span>
<a name="l00400"></a>00400 <span class="preprocessor"></span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((u8Ch &gt;= 8u) &amp;&amp; (u8Ch &lt; 12u))
<a name="l00401"></a>00401         {
<a name="l00402"></a>00402             enIrqIndex = (IRQn_Type)(MFS8_RX_IRQn + 2u * (u8Ch - 8u));
<a name="l00403"></a>00403             NVIC_SetPriority(enIrqIndex, au8PrioLevel1[2u * (u8Ch - 8u)]);
<a name="l00404"></a>00404         }
<a name="l00405"></a>00405 <span class="preprocessor">    #endif    </span>
<a name="l00406"></a>00406 <span class="preprocessor"></span><span class="preprocessor">    #if (PDL_MCU_TYPE == PDL_FM4_TYPE1) || (PDL_MCU_TYPE == PDL_FM4_TYPE2) || \</span>
<a name="l00407"></a>00407 <span class="preprocessor">        (PDL_MCU_TYPE == PDL_FM4_TYPE3)     </span>
<a name="l00408"></a>00408 <span class="preprocessor"></span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((u8Ch &gt;= 12u) &amp;&amp; (u8Ch &lt; 16u))
<a name="l00409"></a>00409         {
<a name="l00410"></a>00410             enIrqIndex = (IRQn_Type)(MFS12_RX_IRQn + 2u * (u8Ch - 12u));
<a name="l00411"></a>00411             NVIC_SetPriority(enIrqIndex, au8PrioLevel2[2u * (u8Ch - 12u)]);
<a name="l00412"></a>00412         }
<a name="l00413"></a>00413         
<a name="l00414"></a>00414 <span class="preprocessor">    #endif  </span>
<a name="l00415"></a>00415 <span class="preprocessor"></span>        <span class="keywordflow">else</span>
<a name="l00416"></a>00416         {
<a name="l00417"></a>00417             <span class="keywordflow">return</span>;
<a name="l00418"></a>00418         }
<a name="l00419"></a>00419 
<a name="l00420"></a>00420         NVIC_ClearPendingIRQ(enIrqIndex);
<a name="l00421"></a>00421         NVIC_EnableIRQ(enIrqIndex);
<a name="l00422"></a>00422     }
<a name="l00423"></a>00423     <span class="keywordflow">else</span>
<a name="l00424"></a>00424     {
<a name="l00425"></a>00425         <span class="keywordflow">if</span>(u8Ch &lt; 8u)
<a name="l00426"></a>00426         {
<a name="l00427"></a>00427             enIrqIndex = (IRQn_Type)(MFS0_TX_IRQn + 2u * u8Ch);
<a name="l00428"></a>00428             NVIC_SetPriority(enIrqIndex, au8PrioLevel0[(2u * u8Ch) + 1u]);
<a name="l00429"></a>00429         }
<a name="l00430"></a>00430 <span class="preprocessor">    #if (PDL_MCU_TYPE == PDL_FM4_TYPE1) || (PDL_MCU_TYPE == PDL_FM4_TYPE2) || \</span>
<a name="l00431"></a>00431 <span class="preprocessor">        (PDL_MCU_TYPE == PDL_FM4_TYPE3) || (PDL_MCU_TYPE == PDL_FM4_TYPE5)</span>
<a name="l00432"></a>00432 <span class="preprocessor"></span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((u8Ch &gt;= 8u) &amp;&amp; (u8Ch &lt; 12u))
<a name="l00433"></a>00433         {
<a name="l00434"></a>00434             enIrqIndex = (IRQn_Type)(MFS8_TX_IRQn + 2u * (u8Ch - 8u));
<a name="l00435"></a>00435             NVIC_SetPriority(enIrqIndex, au8PrioLevel1[2u * (u8Ch - 8u) + 1u]);
<a name="l00436"></a>00436         }
<a name="l00437"></a>00437 <span class="preprocessor">    #endif    </span>
<a name="l00438"></a>00438 <span class="preprocessor"></span><span class="preprocessor">    #if (PDL_MCU_TYPE == PDL_FM4_TYPE1) || (PDL_MCU_TYPE == PDL_FM4_TYPE2) || \</span>
<a name="l00439"></a>00439 <span class="preprocessor">        (PDL_MCU_TYPE == PDL_FM4_TYPE3)    </span>
<a name="l00440"></a>00440 <span class="preprocessor"></span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((u8Ch &gt;= 12u) &amp;&amp; (u8Ch &lt; 16u))
<a name="l00441"></a>00441         {
<a name="l00442"></a>00442             enIrqIndex = (IRQn_Type)(MFS12_TX_IRQn + 2u * (u8Ch - 12u));
<a name="l00443"></a>00443             NVIC_SetPriority(enIrqIndex, au8PrioLevel2[2u * (u8Ch - 12u) + 1u]);
<a name="l00444"></a>00444         }
<a name="l00445"></a>00445 <span class="preprocessor">    #endif</span>
<a name="l00446"></a>00446 <span class="preprocessor"></span>        NVIC_ClearPendingIRQ(enIrqIndex);
<a name="l00447"></a>00447         NVIC_EnableIRQ(enIrqIndex);
<a name="l00448"></a>00448     }                              
<a name="l00449"></a>00449 <span class="preprocessor">#endif                         </span>
<a name="l00450"></a>00450 <span class="preprocessor"></span>        
<a name="l00451"></a>00451 } <span class="comment">/* Mfs_InitTxIrq */</span>
<a name="l00452"></a>00452 
<a name="l00461"></a><a class="code" href="group___mfs_group.html#gac25b5fe9f346727c4b883952c6cd8d9a">00461</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="group___mfs_group.html#gac25b5fe9f346727c4b883952c6cd8d9a" title="Device dependent de-initialization of interrupts according CMSIS.">MfsDeInitNvic</a>(uint8_t u8Ch, boolean_t bRxTx)
<a name="l00462"></a>00462 {
<a name="l00463"></a>00463     IRQn_Type enIrqIndex; 
<a name="l00464"></a>00464   
<a name="l00465"></a>00465 <span class="preprocessor">#if (PDL_MCU_CORE == PDL_FM3_CORE)  </span>
<a name="l00466"></a>00466 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(FALSE == bRxTx)
<a name="l00467"></a>00467     {
<a name="l00468"></a>00468         enIrqIndex = (IRQn_Type)(MFS0_8_RX_IRQn + 2 * u8Ch);
<a name="l00469"></a>00469     }
<a name="l00470"></a>00470     <span class="keywordflow">else</span>
<a name="l00471"></a>00471     {
<a name="l00472"></a>00472         enIrqIndex = (IRQn_Type)(MFS0_8_TX_IRQn + 2 * u8Ch);
<a name="l00473"></a>00473 
<a name="l00474"></a>00474     }
<a name="l00475"></a>00475     
<a name="l00476"></a>00476     NVIC_ClearPendingIRQ(enIrqIndex);
<a name="l00477"></a>00477     NVIC_DisableIRQ(enIrqIndex);
<a name="l00478"></a>00478     NVIC_SetPriority(enIrqIndex, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00479"></a>00479 <span class="preprocessor">#elif (PDL_MCU_CORE == PDL_FM0P_CORE) </span>
<a name="l00480"></a>00480 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_MCU_TYPE == PDL_FM0P_TYPE3)</span>
<a name="l00481"></a>00481 <span class="preprocessor"></span>    enIrqIndex = (IRQn_Type)(MFS0_IRQn + u8Ch);
<a name="l00482"></a>00482     
<a name="l00483"></a>00483     NVIC_ClearPendingIRQ(enIrqIndex);
<a name="l00484"></a>00484     NVIC_DisableIRQ(enIrqIndex);
<a name="l00485"></a>00485     NVIC_SetPriority(enIrqIndex, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00486"></a>00486 <span class="preprocessor">#else</span>
<a name="l00487"></a>00487 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(FALSE == bRxTx)
<a name="l00488"></a>00488     {
<a name="l00489"></a>00489         enIrqIndex = (IRQn_Type)(MFS0_8_RX_IRQn + 2 * u8Ch);
<a name="l00490"></a>00490     }
<a name="l00491"></a>00491     <span class="keywordflow">else</span>
<a name="l00492"></a>00492     {
<a name="l00493"></a>00493         enIrqIndex = (IRQn_Type)(MFS0_8_TX_IRQn + 2 * u8Ch);
<a name="l00494"></a>00494 
<a name="l00495"></a>00495     }
<a name="l00496"></a>00496 
<a name="l00497"></a>00497     NVIC_ClearPendingIRQ(enIrqIndex);
<a name="l00498"></a>00498     NVIC_DisableIRQ(enIrqIndex);
<a name="l00499"></a>00499     NVIC_SetPriority(enIrqIndex, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);    
<a name="l00500"></a>00500 <span class="preprocessor">#endif    </span>
<a name="l00501"></a>00501 <span class="preprocessor"></span><span class="preprocessor">#elif (PDL_MCU_CORE == PDL_FM4_CORE)</span>
<a name="l00502"></a>00502 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(FALSE == bRxTx)
<a name="l00503"></a>00503     {
<a name="l00504"></a>00504         <span class="keywordflow">if</span>(u8Ch &lt; 8u)
<a name="l00505"></a>00505         {
<a name="l00506"></a>00506             enIrqIndex = (IRQn_Type)(MFS0_RX_IRQn + 2u * u8Ch);
<a name="l00507"></a>00507         }
<a name="l00508"></a>00508 <span class="preprocessor">    #if (PDL_MCU_TYPE == PDL_FM4_TYPE1) || (PDL_MCU_TYPE == PDL_FM4_TYPE2) || \</span>
<a name="l00509"></a>00509 <span class="preprocessor">        (PDL_MCU_TYPE == PDL_FM4_TYPE3) || (PDL_MCU_TYPE == PDL_FM4_TYPE5)              </span>
<a name="l00510"></a>00510 <span class="preprocessor"></span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((u8Ch &gt;= 8u) &amp;&amp; (u8Ch &lt; 12u))
<a name="l00511"></a>00511         {
<a name="l00512"></a>00512             enIrqIndex = (IRQn_Type)(MFS8_RX_IRQn + 2u * (u8Ch - 8u));
<a name="l00513"></a>00513         }
<a name="l00514"></a>00514 <span class="preprocessor">    #endif</span>
<a name="l00515"></a>00515 <span class="preprocessor"></span><span class="preprocessor">    #if (PDL_MCU_TYPE == PDL_FM4_TYPE1) || (PDL_MCU_TYPE == PDL_FM4_TYPE2) || \</span>
<a name="l00516"></a>00516 <span class="preprocessor">        (PDL_MCU_TYPE == PDL_FM4_TYPE3)</span>
<a name="l00517"></a>00517 <span class="preprocessor"></span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((u8Ch &gt;= 12u) &amp;&amp; (u8Ch &lt; 16u))
<a name="l00518"></a>00518         {
<a name="l00519"></a>00519             enIrqIndex = (IRQn_Type)(MFS12_RX_IRQn + 2u * (u8Ch - 12u));
<a name="l00520"></a>00520         }
<a name="l00521"></a>00521 <span class="preprocessor">    #endif              </span>
<a name="l00522"></a>00522 <span class="preprocessor"></span>        <span class="keywordflow">else</span>
<a name="l00523"></a>00523         {
<a name="l00524"></a>00524             <span class="keywordflow">return</span>;
<a name="l00525"></a>00525         }
<a name="l00526"></a>00526     }
<a name="l00527"></a>00527     <span class="keywordflow">else</span>
<a name="l00528"></a>00528     {
<a name="l00529"></a>00529         <span class="keywordflow">if</span>(u8Ch &lt; 8u)
<a name="l00530"></a>00530         {
<a name="l00531"></a>00531             enIrqIndex = (IRQn_Type)(MFS0_TX_IRQn + 2 * u8Ch);
<a name="l00532"></a>00532         }
<a name="l00533"></a>00533 <span class="preprocessor">    #if (PDL_MCU_TYPE == PDL_FM4_TYPE1) || (PDL_MCU_TYPE == PDL_FM4_TYPE2) || \</span>
<a name="l00534"></a>00534 <span class="preprocessor">        (PDL_MCU_TYPE == PDL_FM4_TYPE3) || (PDL_MCU_TYPE == PDL_FM4_TYPE5)          </span>
<a name="l00535"></a>00535 <span class="preprocessor"></span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((u8Ch &gt;= 8u) &amp;&amp; (u8Ch &lt; 12u))
<a name="l00536"></a>00536         {
<a name="l00537"></a>00537             enIrqIndex = (IRQn_Type)(MFS8_TX_IRQn + 2u * (u8Ch - 8u));
<a name="l00538"></a>00538         }
<a name="l00539"></a>00539 <span class="preprocessor">    #endif</span>
<a name="l00540"></a>00540 <span class="preprocessor"></span><span class="preprocessor">    #if (PDL_MCU_TYPE == PDL_FM4_TYPE1) || (PDL_MCU_TYPE == PDL_FM4_TYPE2) || \</span>
<a name="l00541"></a>00541 <span class="preprocessor">        (PDL_MCU_TYPE == PDL_FM4_TYPE3) </span>
<a name="l00542"></a>00542 <span class="preprocessor"></span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((u8Ch &gt;= 12u) &amp;&amp; (u8Ch &lt; 16u))
<a name="l00543"></a>00543         {
<a name="l00544"></a>00544             enIrqIndex = (IRQn_Type)(MFS12_TX_IRQn + 2u * (u8Ch - 12u));
<a name="l00545"></a>00545         }
<a name="l00546"></a>00546 <span class="preprocessor">    #endif              </span>
<a name="l00547"></a>00547 <span class="preprocessor"></span>        <span class="keywordflow">else</span>
<a name="l00548"></a>00548         {
<a name="l00549"></a>00549             <span class="keywordflow">return</span>;
<a name="l00550"></a>00550         }
<a name="l00551"></a>00551     }
<a name="l00552"></a>00552     
<a name="l00553"></a>00553     NVIC_ClearPendingIRQ(enIrqIndex);
<a name="l00554"></a>00554     NVIC_DisableIRQ(enIrqIndex);
<a name="l00555"></a>00555     NVIC_SetPriority(enIrqIndex, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00556"></a>00556     
<a name="l00557"></a>00557 <span class="preprocessor">#endif                         </span>
<a name="l00558"></a>00558 <span class="preprocessor"></span>    
<a name="l00559"></a>00559 } <span class="comment">/* Mfs_DeInitIrq */</span>
<a name="l00560"></a>00560 
<a name="l00561"></a>00561 <span class="preprocessor">#endif</span>
<a name="l00562"></a>00562 <span class="preprocessor"></span>
<a name="l00563"></a>00563 <span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS_UART_MODE == PDL_ON)    </span>
<a name="l00564"></a>00564 <span class="preprocessor"></span><span class="comment">/******************************************************************************</span>
<a name="l00565"></a>00565 <span class="comment"> * UART driver functions</span>
<a name="l00566"></a>00566 <span class="comment"> ******************************************************************************/</span>  
<a name="l00576"></a><a class="code" href="group___mfs_group.html#ga40fb7c5c444cd035117696953cb49b33">00576</a> <span class="keyword">static</span> <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* <a class="code" href="group___mfs_group.html#ga40fb7c5c444cd035117696953cb49b33" title="Return the internal data for a certain UART instance.">MfsUartGetInternDataPtr</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>* pstcUart)
<a name="l00577"></a>00577 {
<a name="l00578"></a>00578     <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcInternDataPtr = NULL;
<a name="l00579"></a>00579     uint32_t u32Instance;
<a name="l00580"></a>00580 
<a name="l00581"></a>00581     <span class="keywordflow">if</span> (NULL != pstcUart)
<a name="l00582"></a>00582     {
<a name="l00583"></a>00583         <span class="keywordflow">for</span> (u32Instance = 0u; u32Instance &lt; (uint32_t)<a class="code" href="group___mfs_group.html#ggafce824c305ebb58476ef4b279447e35fa7851cc22d73d4df65b231cf9f35e824d">MfsInstanceIndexMax</a>; u32Instance++)
<a name="l00584"></a>00584         {
<a name="l00585"></a>00585             <span class="keywordflow">if</span> (pstcUart == m_astcMfsInstanceDataLut[u32Instance].stcInstance.pstcUartInstance)
<a name="l00586"></a>00586             {
<a name="l00587"></a>00587                 pstcInternDataPtr = &amp;m_astcMfsInstanceDataLut[u32Instance].<a class="code" href="structstc__mfs__instance__data.html#a7e848ba5739675221ced351df12957b3" title="module internal data of instance">stcInternData</a>;
<a name="l00588"></a>00588                 <span class="keywordflow">break</span>;
<a name="l00589"></a>00589             }
<a name="l00590"></a>00590         }
<a name="l00591"></a>00591             
<a name="l00592"></a>00592     }
<a name="l00593"></a>00593 
<a name="l00594"></a>00594     <span class="keywordflow">return</span> (pstcInternDataPtr);
<a name="l00595"></a>00595 } <span class="comment">/* MfsGetInternDataPtr */</span>
<a name="l00596"></a>00596 
<a name="l00597"></a>00597 
<a name="l00598"></a>00598 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_MFS0 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS8 == PDL_ON) ||  \</span>
<a name="l00599"></a>00599 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS1 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS9 == PDL_ON) ||  \</span>
<a name="l00600"></a>00600 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS2 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS10 == PDL_ON) || \</span>
<a name="l00601"></a>00601 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS3 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS11 == PDL_ON) || \</span>
<a name="l00602"></a>00602 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS4 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS12 == PDL_ON) || \</span>
<a name="l00603"></a>00603 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS5 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS13 == PDL_ON) || \</span>
<a name="l00604"></a>00604 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS6 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS14 == PDL_ON) || \</span>
<a name="l00605"></a>00605 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS7 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS15 == PDL_ON)       </span>
<a name="l00606"></a>00606 <span class="preprocessor"></span>
<a name="l00616"></a><a class="code" href="group___mfs_group.html#gaf10286316ae78e55453cb968d79f3a77">00616</a> <span class="keywordtype">void</span> <a class="code" href="group___mfs_group.html#gaf10286316ae78e55453cb968d79f3a77" title="UART receive interrupt service routine.">MfsUartIrqHandlerRx</a>( <span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>*   pstcUart,
<a name="l00617"></a>00617                           <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData)
<a name="l00618"></a>00618 {
<a name="l00619"></a>00619     <span class="keywordflow">if</span> ((NULL != pstcUart) &amp;&amp; (NULL != pstcMfsInternData))
<a name="l00620"></a>00620     {
<a name="l00621"></a>00621         <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#aeaca78b71cfe8b43925e71fc4b7ca29b" title="Uart internal interrupt callback function.">stcUartInternIrqCb</a>.<a class="code" href="structstc__uart__irq__cb.html#ad40109f285524938eaf8fb58f887d4e1" title="UART RX interrupt callback function pointer.">pfnRxIrqCb</a>)
<a name="l00622"></a>00622         {
<a name="l00623"></a>00623             pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#aeaca78b71cfe8b43925e71fc4b7ca29b" title="Uart internal interrupt callback function.">stcUartInternIrqCb</a>.<a class="code" href="structstc__uart__irq__cb.html#ad40109f285524938eaf8fb58f887d4e1" title="UART RX interrupt callback function pointer.">pfnRxIrqCb</a>();
<a name="l00624"></a>00624         }
<a name="l00625"></a>00625     }
<a name="l00626"></a>00626 } <span class="comment">/* MfsIrqHandlerRx */</span>
<a name="l00627"></a>00627 
<a name="l00638"></a><a class="code" href="group___mfs_group.html#ga6d7cbb9a8558a96fde389853f53259cf">00638</a> <span class="keywordtype">void</span> <a class="code" href="group___mfs_group.html#ga6d7cbb9a8558a96fde389853f53259cf" title="MFS transmit interrupt service routine.">MfsUartIrqHandlerTx</a>( <span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>*   pstcUart, 
<a name="l00639"></a>00639                           <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData)
<a name="l00640"></a>00640 {
<a name="l00641"></a>00641     <span class="keywordflow">if</span> ((NULL != pstcUart) &amp;&amp; (NULL != pstcMfsInternData))
<a name="l00642"></a>00642     {
<a name="l00643"></a>00643         <span class="keywordflow">if</span>(1u == pstcUart-&gt;SSR_f.TDRE)
<a name="l00644"></a>00644         {
<a name="l00645"></a>00645             <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#aeaca78b71cfe8b43925e71fc4b7ca29b" title="Uart internal interrupt callback function.">stcUartInternIrqCb</a>.<a class="code" href="structstc__uart__irq__cb.html#a1b554fde91d5ebcef1a9b136ad28fd88" title="UART TX interrupt callback function pointer.">pfnTxIrqCb</a>)
<a name="l00646"></a>00646             {
<a name="l00647"></a>00647                 pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#aeaca78b71cfe8b43925e71fc4b7ca29b" title="Uart internal interrupt callback function.">stcUartInternIrqCb</a>.<a class="code" href="structstc__uart__irq__cb.html#a1b554fde91d5ebcef1a9b136ad28fd88" title="UART TX interrupt callback function pointer.">pfnTxIrqCb</a>();
<a name="l00648"></a>00648             }
<a name="l00649"></a>00649         }
<a name="l00650"></a>00650         
<a name="l00651"></a>00651         <span class="keywordflow">if</span>(1u == pstcUart-&gt;SSR_f.TBI)
<a name="l00652"></a>00652         {
<a name="l00653"></a>00653             <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#aeaca78b71cfe8b43925e71fc4b7ca29b" title="Uart internal interrupt callback function.">stcUartInternIrqCb</a>.<a class="code" href="structstc__uart__irq__cb.html#a182337a4324280aec65e2c88f507e538" title="UART TX idle interrupt callback function pointer.">pfnTxIdleCb</a>)
<a name="l00654"></a>00654             {
<a name="l00655"></a>00655                 pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#aeaca78b71cfe8b43925e71fc4b7ca29b" title="Uart internal interrupt callback function.">stcUartInternIrqCb</a>.<a class="code" href="structstc__uart__irq__cb.html#a182337a4324280aec65e2c88f507e538" title="UART TX idle interrupt callback function pointer.">pfnTxIdleCb</a>();
<a name="l00656"></a>00656             }
<a name="l00657"></a>00657         }
<a name="l00658"></a>00658         
<a name="l00659"></a>00659         <span class="keywordflow">if</span>(1u == pstcUart-&gt;FCR1_f.FDRQ)
<a name="l00660"></a>00660         {
<a name="l00661"></a>00661             <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#aeaca78b71cfe8b43925e71fc4b7ca29b" title="Uart internal interrupt callback function.">stcUartInternIrqCb</a>.<a class="code" href="structstc__uart__irq__cb.html#af6a48c32e9708772610ad4f9fd5720a6" title="UART TX FIFO interrupt callback function pointer.">pfnTxFifoIrqCb</a>)
<a name="l00662"></a>00662             {
<a name="l00663"></a>00663                 pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#aeaca78b71cfe8b43925e71fc4b7ca29b" title="Uart internal interrupt callback function.">stcUartInternIrqCb</a>.<a class="code" href="structstc__uart__irq__cb.html#af6a48c32e9708772610ad4f9fd5720a6" title="UART TX FIFO interrupt callback function pointer.">pfnTxFifoIrqCb</a>();
<a name="l00664"></a>00664             }
<a name="l00665"></a>00665             
<a name="l00666"></a>00666             pstcUart-&gt;FCR1_f.FDRQ = 0u;
<a name="l00667"></a>00667         }
<a name="l00668"></a>00668     }
<a name="l00669"></a>00669 } <span class="comment">/* MfsIrqHandlerTx */</span>
<a name="l00670"></a>00670             
<a name="l00688"></a><a class="code" href="group___mfs_group.html#ga68b25a6357ce4c79bf2044353df032ce">00688</a> en_result_t <a class="code" href="group___mfs_group.html#ga68b25a6357ce4c79bf2044353df032ce" title="Enable one interrupt source of UART.">Mfs_Uart_EnableIrq</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>* pstcUart, 
<a name="l00689"></a>00689                                <a class="code" href="group___mfs_group.html#gacaeccc84c2d2c8a155a02b493d2c54be" title="UART interrupt selection.">en_uart_irq_sel_t</a> enIrqSel)
<a name="l00690"></a>00690 {
<a name="l00691"></a>00691     <span class="keywordflow">if</span> (NULL == pstcUart)
<a name="l00692"></a>00692     {
<a name="l00693"></a>00693         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l00694"></a>00694     }
<a name="l00695"></a>00695     
<a name="l00696"></a>00696     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l00697"></a>00697     {
<a name="l00698"></a>00698         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggab609ab94df0a4b52a29ea27d78176ff7aab360e6cb0a5e9c8c63ee456e1a2dafc" title="UART TX interrupt.">UartTxIrq</a>:
<a name="l00699"></a>00699             pstcUart-&gt;SCR_f.TIE = 1u;
<a name="l00700"></a>00700             <span class="keywordflow">break</span>;
<a name="l00701"></a>00701         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggab609ab94df0a4b52a29ea27d78176ff7a160ea035ad89bd42d862fe74457e8c3a" title="UART RX interrupt.">UartRxIrq</a>:
<a name="l00702"></a>00702             pstcUart-&gt;SCR_f.RIE = 1u;
<a name="l00703"></a>00703             <span class="keywordflow">break</span>;
<a name="l00704"></a>00704         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggab609ab94df0a4b52a29ea27d78176ff7aedf639b8bb7d9419bdfc77045d0e2eb2" title="UART TX idle interrupt.">UartTxIdleIrq</a>:
<a name="l00705"></a>00705             pstcUart-&gt;SCR_f.TBIE = 1u;
<a name="l00706"></a>00706             <span class="keywordflow">break</span>;
<a name="l00707"></a>00707         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggab609ab94df0a4b52a29ea27d78176ff7a77bcba45a3be24492629fced3046ffd6" title="UART TX FIFO interrupt.">UartTxFifoIrq</a>:
<a name="l00708"></a>00708             pstcUart-&gt;FCR1_f.FTIE = 1u;
<a name="l00709"></a>00709             <span class="keywordflow">break</span>;
<a name="l00710"></a>00710         <span class="keywordflow">default</span>:
<a name="l00711"></a>00711             <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l00712"></a>00712     }
<a name="l00713"></a>00713     
<a name="l00714"></a>00714     <span class="keywordflow">return</span> Ok;
<a name="l00715"></a>00715 }
<a name="l00716"></a>00716 
<a name="l00734"></a><a class="code" href="group___mfs_group.html#gadab2cfdf655ab92ad1090f744c5157ae">00734</a> en_result_t <a class="code" href="group___mfs_group.html#gadab2cfdf655ab92ad1090f744c5157ae" title="Disable one interrupt source of UART.">Mfs_Uart_DisableIrq</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>* pstcUart, 
<a name="l00735"></a>00735                                 <a class="code" href="group___mfs_group.html#gacaeccc84c2d2c8a155a02b493d2c54be" title="UART interrupt selection.">en_uart_irq_sel_t</a> enIrqSel)
<a name="l00736"></a>00736 {
<a name="l00737"></a>00737     <span class="keywordflow">if</span> (NULL == pstcUart)
<a name="l00738"></a>00738     {
<a name="l00739"></a>00739         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l00740"></a>00740     }
<a name="l00741"></a>00741     
<a name="l00742"></a>00742     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l00743"></a>00743     {
<a name="l00744"></a>00744         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggab609ab94df0a4b52a29ea27d78176ff7aab360e6cb0a5e9c8c63ee456e1a2dafc" title="UART TX interrupt.">UartTxIrq</a>:
<a name="l00745"></a>00745             pstcUart-&gt;SCR_f.TIE = 0u;
<a name="l00746"></a>00746             <span class="keywordflow">break</span>;
<a name="l00747"></a>00747         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggab609ab94df0a4b52a29ea27d78176ff7a160ea035ad89bd42d862fe74457e8c3a" title="UART RX interrupt.">UartRxIrq</a>:
<a name="l00748"></a>00748             pstcUart-&gt;SCR_f.RIE = 0u;
<a name="l00749"></a>00749             <span class="keywordflow">break</span>;
<a name="l00750"></a>00750         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggab609ab94df0a4b52a29ea27d78176ff7aedf639b8bb7d9419bdfc77045d0e2eb2" title="UART TX idle interrupt.">UartTxIdleIrq</a>:
<a name="l00751"></a>00751             pstcUart-&gt;SCR_f.TBIE = 0u;
<a name="l00752"></a>00752             <span class="keywordflow">break</span>;
<a name="l00753"></a>00753         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggab609ab94df0a4b52a29ea27d78176ff7a77bcba45a3be24492629fced3046ffd6" title="UART TX FIFO interrupt.">UartTxFifoIrq</a>:
<a name="l00754"></a>00754             pstcUart-&gt;FCR1_f.FTIE = 0u;
<a name="l00755"></a>00755             <span class="keywordflow">break</span>;
<a name="l00756"></a>00756         <span class="keywordflow">default</span>:
<a name="l00757"></a>00757             <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l00758"></a>00758     }
<a name="l00759"></a>00759     
<a name="l00760"></a>00760     <span class="keywordflow">return</span> Ok;
<a name="l00761"></a>00761 }
<a name="l00762"></a>00762 
<a name="l00763"></a>00763 <span class="preprocessor">#endif     </span>
<a name="l00764"></a>00764 <span class="preprocessor"></span>
<a name="l00782"></a><a class="code" href="group___mfs_group.html#ga2ceb9c00402fc13a1f715f50b3f3c17e">00782</a> en_result_t <a class="code" href="group___mfs_group.html#ga2ceb9c00402fc13a1f715f50b3f3c17e" title="Initialization of a MFS module to activate as UART.">Mfs_Uart_Init</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>*         pstcUart,
<a name="l00783"></a>00783                           <a class="code" href="structstc__mfs__uart__config.html" title="UART configuration structure.">stc_mfs_uart_config_t</a>* pstcConfig)
<a name="l00784"></a>00784 {
<a name="l00785"></a>00785     <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData;
<a name="l00786"></a>00786     uint8_t u8Ch;
<a name="l00787"></a>00787     
<a name="l00788"></a>00788     <span class="comment">/* Preset local register variables to zero */</span>
<a name="l00789"></a>00789     stc_mfs_uart_smr_field_t  stcSMR  = { 0u };
<a name="l00790"></a>00790     stc_mfs_uart_scr_field_t  stcSCR  = { 0u };
<a name="l00791"></a>00791     stc_mfs_uart_escr_field_t stcESCR = { 0u };
<a name="l00792"></a>00792    
<a name="l00793"></a>00793     <span class="comment">/* Check for valid pointer and get pointer to internal data struct ... */</span>
<a name="l00794"></a>00794     pstcMfsInternData = <a class="code" href="group___mfs_group.html#ga40fb7c5c444cd035117696953cb49b33" title="Return the internal data for a certain UART instance.">MfsUartGetInternDataPtr</a>(pstcUart);
<a name="l00795"></a>00795     
<a name="l00796"></a>00796     <span class="comment">/* Parameter check and get ptr to internal data struct */</span>
<a name="l00797"></a>00797     <span class="keywordflow">if</span> ((NULL == pstcMfsInternData)
<a name="l00798"></a>00798     ||  (NULL == pstcConfig)
<a name="l00799"></a>00799        )
<a name="l00800"></a>00800     {
<a name="l00801"></a>00801         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l00802"></a>00802     }
<a name="l00803"></a>00803 
<a name="l00804"></a>00804     <span class="comment">/* Calculate the channel number */</span>
<a name="l00805"></a>00805     u8Ch = <a class="code" href="group___mfs_group.html#ga245161ba0819a002a21bb9be662761bd">UartInstanceToIndex</a>(pstcUart);
<a name="l00806"></a>00806     
<a name="l00807"></a>00807     <span class="keywordflow">if</span>(u8Ch &gt; 15u)
<a name="l00808"></a>00808     {
<a name="l00809"></a>00809         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l00810"></a>00810     }
<a name="l00811"></a>00811     
<a name="l00812"></a>00812     <span class="comment">/* Set the MFS mode in the internal structure */</span>
<a name="l00813"></a>00813     pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a3efa9df8c4b18392bbb53070c40307ea" title="MFS mode.">enMode</a> = <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a95bf32988e996db0ca573beec307b80b" title="MFS UART mode.">MfsUartMode</a>;
<a name="l00814"></a>00814     
<a name="l00815"></a>00815     <span class="comment">/* Set UART mode */</span>
<a name="l00816"></a>00816     <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#a9ab70d661b8e2d9f70cbf0260ac819ce" title="UART mode.">enMode</a>)
<a name="l00817"></a>00817     {
<a name="l00818"></a>00818         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga7b45a51884fb6210d1401d423f3e92a2a6360b180d83f7f7823f1bce86455e616" title="Normal mode.">UartNormal</a>:
<a name="l00819"></a>00819             stcSMR.MD = 0u;   <span class="comment">/* Normal mode */</span>
<a name="l00820"></a>00820             <span class="keywordflow">break</span>;
<a name="l00821"></a>00821         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga7b45a51884fb6210d1401d423f3e92a2a04423d69ff8a68d31142a0cab1f8a6e6" title="Multi-Processor Mode.">UartMulti</a>:
<a name="l00822"></a>00822             stcSMR.MD = 1u;    <span class="comment">/* Multi-processor mode */</span>
<a name="l00823"></a>00823             <span class="keywordflow">break</span>;
<a name="l00824"></a>00824         <span class="keywordflow">default</span>:
<a name="l00825"></a>00825             <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l00826"></a>00826     }
<a name="l00827"></a>00827 
<a name="l00828"></a>00828     <span class="comment">/* Enable SOE */</span>
<a name="l00829"></a>00829     stcSMR.SOE = TRUE;
<a name="l00830"></a>00830     <span class="comment">/* Set Parity */</span>
<a name="l00831"></a>00831     <span class="keywordflow">switch</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#a4515b00d96e17b763582efe67e12fa32" title="Parity format.">enParity</a>)
<a name="l00832"></a>00832     {
<a name="l00833"></a>00833         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga494135edddb4720ce45f21f866c8a7ffa531f9d3d9a5b8e0af7bce4719a631877" title="No parity bit is used.">UartParityNone</a>:
<a name="l00834"></a>00834             stcESCR.P   = FALSE; <span class="comment">/* Parity type selection (0-even/1-odd) */</span>
<a name="l00835"></a>00835             stcESCR.PEN = FALSE; <span class="comment">/* Parity disable */</span>
<a name="l00836"></a>00836             <span class="keywordflow">break</span>;
<a name="l00837"></a>00837         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga494135edddb4720ce45f21f866c8a7ffa8843cd3f0426fa2eac6ced178323ef4b" title="Even parity bit is used.">UartParityEven</a>:
<a name="l00838"></a>00838             stcESCR.P   = FALSE; <span class="comment">/* Parity type selection (0-even/1-odd) */</span>
<a name="l00839"></a>00839             stcESCR.PEN = TRUE;  <span class="comment">/* Parity Enable */</span>
<a name="l00840"></a>00840             <span class="keywordflow">break</span>;
<a name="l00841"></a>00841         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga494135edddb4720ce45f21f866c8a7ffaf1811083690fb0c58fd361ce9c4ba081" title="Odd parity bit is used.">UartParityOdd</a>:
<a name="l00842"></a>00842             stcESCR.P   = TRUE;  <span class="comment">/* Parity type selection (0-even/1-odd) */</span>
<a name="l00843"></a>00843             stcESCR.PEN = TRUE;  <span class="comment">/* Parity Enable */</span>
<a name="l00844"></a>00844             <span class="keywordflow">break</span>;
<a name="l00845"></a>00845         <span class="keywordflow">default</span>:
<a name="l00846"></a>00846             <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l00847"></a>00847     }
<a name="l00848"></a>00848     <span class="comment">/* Set Stop bit length */</span>
<a name="l00849"></a>00849     <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#a3cbbc25e62af2dcf822a736018bf38cc" title="Stop bit.">enStopBit</a>)
<a name="l00850"></a>00850     {
<a name="l00851"></a>00851         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaeab3befcc2b4e9f9531f4effb957c520aac6faf647c3cfdaf8ca4d16e0c486d53" title="1 Stop Bit">UartOneStopBit</a>:
<a name="l00852"></a>00852             stcSMR.SBL   = FALSE;
<a name="l00853"></a>00853             stcESCR.ESBL = FALSE;
<a name="l00854"></a>00854             <span class="keywordflow">break</span>;
<a name="l00855"></a>00855         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaeab3befcc2b4e9f9531f4effb957c520aed80b0cdf8786ac3334ef216227a45ee" title="2 Stop Bits">UartTwoStopBits</a>:
<a name="l00856"></a>00856             stcSMR.SBL   = TRUE;
<a name="l00857"></a>00857             stcESCR.ESBL = FALSE;
<a name="l00858"></a>00858             <span class="keywordflow">break</span>;     
<a name="l00859"></a>00859         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaeab3befcc2b4e9f9531f4effb957c520a7a3b1607c1035451fb9d39206918fa24" title="3 Stop Bits">UartThreeStopBits</a>:
<a name="l00860"></a>00860             stcSMR.SBL   = FALSE;
<a name="l00861"></a>00861             stcESCR.ESBL = TRUE;
<a name="l00862"></a>00862             <span class="keywordflow">break</span>;
<a name="l00863"></a>00863         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaeab3befcc2b4e9f9531f4effb957c520abb9c20bf538d072fb8e4b131800e8288" title="4 Stop Bits">UartFourStopBits</a>:
<a name="l00864"></a>00864             stcSMR.SBL   = TRUE;
<a name="l00865"></a>00865             stcESCR.ESBL = TRUE;
<a name="l00866"></a>00866             <span class="keywordflow">break</span>;
<a name="l00867"></a>00867         <span class="keywordflow">default</span>:
<a name="l00868"></a>00868             <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l00869"></a>00869     }    
<a name="l00870"></a>00870     <span class="comment">/* Set Data bit length (5 - 9bits) */</span>
<a name="l00871"></a>00871     <span class="keywordflow">switch</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#ad2fb326f133f98da24b199a969d265aa" title="5..9 Bit Character Length">enDataLength</a>)
<a name="l00872"></a>00872     {
<a name="l00873"></a>00873         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggace22a689e0be614b55e2b5631f8fd833a8404eaef7633e2d4e56e1f517395c443" title="5 Bit character length">UartFiveBits</a>:
<a name="l00874"></a>00874             stcESCR.L = <a class="code" href="group___mfs_group.html#ggace22a689e0be614b55e2b5631f8fd833a8404eaef7633e2d4e56e1f517395c443" title="5 Bit character length">UartFiveBits</a>;
<a name="l00875"></a>00875             <span class="keywordflow">break</span>;
<a name="l00876"></a>00876         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggace22a689e0be614b55e2b5631f8fd833ac66a083f291222875af53e7f3e8f52c4" title="6 Bit character length">UartSixBits</a>:
<a name="l00877"></a>00877             stcESCR.L = <a class="code" href="group___mfs_group.html#ggace22a689e0be614b55e2b5631f8fd833ac66a083f291222875af53e7f3e8f52c4" title="6 Bit character length">UartSixBits</a>;
<a name="l00878"></a>00878             <span class="keywordflow">break</span>;
<a name="l00879"></a>00879         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggace22a689e0be614b55e2b5631f8fd833a093c8e4fde2408bd9d5056c6ee4a6b32" title="7 Bit character length">UartSevenBits</a>:
<a name="l00880"></a>00880             stcESCR.L = <a class="code" href="group___mfs_group.html#ggace22a689e0be614b55e2b5631f8fd833a093c8e4fde2408bd9d5056c6ee4a6b32" title="7 Bit character length">UartSevenBits</a>;
<a name="l00881"></a>00881             <span class="keywordflow">break</span>;   
<a name="l00882"></a>00882         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggace22a689e0be614b55e2b5631f8fd833a6cac8a71b29ff127cd345aa32272fef3" title="8 Bit character length">UartEightBits</a>:
<a name="l00883"></a>00883             stcESCR.L = <a class="code" href="group___mfs_group.html#ggace22a689e0be614b55e2b5631f8fd833a6cac8a71b29ff127cd345aa32272fef3" title="8 Bit character length">UartEightBits</a>;
<a name="l00884"></a>00884             <span class="keywordflow">break</span>;
<a name="l00885"></a>00885         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggace22a689e0be614b55e2b5631f8fd833adb1a422dad2d2dbe392bb8c24ba4843a" title="9 Bit character length">UartNineBits</a>:
<a name="l00886"></a>00886             stcESCR.L = <a class="code" href="group___mfs_group.html#ggace22a689e0be614b55e2b5631f8fd833adb1a422dad2d2dbe392bb8c24ba4843a" title="9 Bit character length">UartNineBits</a>;
<a name="l00887"></a>00887             <span class="keywordflow">break</span>;
<a name="l00888"></a>00888         <span class="keywordflow">default</span>:
<a name="l00889"></a>00889             <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l00890"></a>00890     }
<a name="l00891"></a>00891     <span class="comment">/* Set Bit direction (LSB/MSB) */</span>    
<a name="l00892"></a>00892     <span class="keywordflow">switch</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#afa094363805829829f3245c0eccaea78" title="UART data direction.">enBitDirection</a>)
<a name="l00893"></a>00893     {
<a name="l00894"></a>00894         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga73d0e8619d368165ba675d553c156ed8aa0db061e7e5b4c0ca5d077344ccf4fa7" title="LSB first.">UartDataLsbFirst</a>:
<a name="l00895"></a>00895             stcSMR.BDS = 0;
<a name="l00896"></a>00896             <span class="keywordflow">break</span>;
<a name="l00897"></a>00897         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga73d0e8619d368165ba675d553c156ed8aaf8d86576432228aac623f012630610e" title="MSB first.">UartDataMsbFirst</a>:
<a name="l00898"></a>00898             stcSMR.BDS = 1;
<a name="l00899"></a>00899             <span class="keywordflow">break</span>;  
<a name="l00900"></a>00900         <span class="keywordflow">default</span>:
<a name="l00901"></a>00901             <span class="keywordflow">return</span> ErrorInvalidParameter;  
<a name="l00902"></a>00902     }
<a name="l00903"></a>00903 
<a name="l00904"></a>00904     <span class="comment">/* HW Flow */</span>
<a name="l00905"></a>00905     <span class="keywordflow">if</span> (TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#a5a63ff88cd81fe331281cd35213255f1" title="FALSE: Not use Hardware Flow, TRUE : Use Hardware Flow.">bHwFlow</a>)
<a name="l00906"></a>00906     {
<a name="l00907"></a>00907         stcESCR.FLWEN = TRUE;
<a name="l00908"></a>00908     }
<a name="l00909"></a>00909     <span class="keywordflow">else</span>
<a name="l00910"></a>00910     {
<a name="l00911"></a>00911         stcESCR.FLWEN = FALSE;
<a name="l00912"></a>00912     }
<a name="l00913"></a>00913 
<a name="l00914"></a>00914     <span class="comment">/* Set Signal system (NRZ/Int-NRZ) */</span>
<a name="l00915"></a>00915     <span class="keywordflow">if</span> (TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#a61103b214188537bf641ef11a0f0aba4" title="FALSE: NRZ, TRUE : Inverted NRZ.">bInvertData</a>)
<a name="l00916"></a>00916     {
<a name="l00917"></a>00917         stcESCR.INV = TRUE;
<a name="l00918"></a>00918     }
<a name="l00919"></a>00919     <span class="keywordflow">else</span>
<a name="l00920"></a>00920     {
<a name="l00921"></a>00921         stcESCR.INV = FALSE;
<a name="l00922"></a>00922     }
<a name="l00923"></a>00923     
<a name="l00924"></a>00924     
<a name="l00925"></a>00925     <span class="comment">/* Clear MFS by setting the Software Reset bit */</span>
<a name="l00926"></a>00926     pstcUart-&gt;SCR_f.UPCL = TRUE;
<a name="l00927"></a>00927 
<a name="l00928"></a>00928     <span class="comment">/* Set Baudrate */</span>
<a name="l00929"></a>00929     (void)<a class="code" href="group___mfs_group.html#gaf501bdcbb009eca7125601c47b4eb8a5" title="Set the baudrate of UART.">Mfs_Uart_SetBaudRate</a>(pstcUart, pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#a02de7678fcf4d4ee36160e20baefb31a" title="Baud rate (bps)">u32BaudRate</a>);
<a name="l00930"></a>00930     <span class="comment">/* Set registers value */</span>
<a name="l00931"></a>00931     pstcUart-&gt;SMR_f  = stcSMR;
<a name="l00932"></a>00932     pstcUart-&gt;SCR_f  = stcSCR;
<a name="l00933"></a>00933     pstcUart-&gt;ESCR_f = stcESCR;
<a name="l00934"></a>00934     
<a name="l00935"></a>00935     <span class="comment">/* Set external clock */</span>
<a name="l00936"></a>00936     pstcUart-&gt;BGR_f.EXT = ((pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#a220e4cdbc77c15033f3817da1232c277" title="FALSE: use internal clock, TRUE: use external clock which input via SCK pin.">bUseExtClk</a> == TRUE) ? 1u : 0u);
<a name="l00937"></a>00937     
<a name="l00938"></a>00938     <span class="comment">/* Configue FIFO */</span>
<a name="l00939"></a>00939     <span class="keywordflow">if</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#aa091c03d2eb888d3ffa4bb35a19d44f6" title="Pointer to FIFO configuration structure, if set to NULL, FIFO function will not be enabled...">pstcFifoConfig</a> != NULL)
<a name="l00940"></a>00940     {
<a name="l00941"></a>00941         <span class="comment">/* Reset FIFO */</span>
<a name="l00942"></a>00942         pstcUart-&gt;FCR0_f.FCL1 = 1;
<a name="l00943"></a>00943         pstcUart-&gt;FCR0_f.FCL2 = 1;
<a name="l00944"></a>00944         <span class="comment">/* Enable FIFO receive Idle detection */</span>
<a name="l00945"></a>00945         pstcUart-&gt;FCR1_f.FRIIE = 1u;
<a name="l00946"></a>00946         <span class="comment">/* Selection TX and RX FIFO  */</span>
<a name="l00947"></a>00947         <span class="keywordflow">switch</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#aa091c03d2eb888d3ffa4bb35a19d44f6" title="Pointer to FIFO configuration structure, if set to NULL, FIFO function will not be enabled...">pstcFifoConfig</a>-&gt;<a class="code" href="structstc__mfs__fifo__config.html#a57522e8de00d79ae7f63cb81aedb9e5b" title="FIFO selection, see en_mfs_fifo_sel_t for details.">enFifoSel</a>)
<a name="l00948"></a>00948         {
<a name="l00949"></a>00949             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa75ef033bccb72dc698fbdde1559c580a3b86d2138912f3c9678856ac2a0dc56c" title="Transmit FIFO:FIFO1, Received FIFO:FIFO2.">MfsTxFifo1RxFifo2</a>:
<a name="l00950"></a>00950                 pstcUart-&gt;FCR1_f.FSEL = 0u;
<a name="l00951"></a>00951                 <span class="keywordflow">break</span>;
<a name="l00952"></a>00952             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa75ef033bccb72dc698fbdde1559c580a71003bf541f6873ac786ea6b31b9a046" title="Transmit FIFO:FIFO2, Received FIFO:FIFO1.">MfsTxFifo2RxFifo1</a>:
<a name="l00953"></a>00953                 pstcUart-&gt;FCR1_f.FSEL = 1u;
<a name="l00954"></a>00954                 <span class="keywordflow">break</span>;
<a name="l00955"></a>00955             <span class="keywordflow">default</span>:
<a name="l00956"></a>00956                <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l00957"></a>00957         }
<a name="l00958"></a>00958         <span class="comment">/* Set FIFO count */</span>
<a name="l00959"></a>00959         pstcUart-&gt;FBYTE1 = pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#aa091c03d2eb888d3ffa4bb35a19d44f6" title="Pointer to FIFO configuration structure, if set to NULL, FIFO function will not be enabled...">pstcFifoConfig</a>-&gt;<a class="code" href="structstc__mfs__fifo__config.html#ac2b77d76431bbc7f1fdf7fc88d17a2f6" title="Transfer data count for FIFO1.">u8ByteCount1</a>;
<a name="l00960"></a>00960         pstcUart-&gt;FBYTE2 = pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#aa091c03d2eb888d3ffa4bb35a19d44f6" title="Pointer to FIFO configuration structure, if set to NULL, FIFO function will not be enabled...">pstcFifoConfig</a>-&gt;<a class="code" href="structstc__mfs__fifo__config.html#a1252320650a64b39c87bfabfc1d420bd" title="Transfer data count for FIFO2.">u8ByteCount2</a>;
<a name="l00961"></a>00961         <span class="comment">/* Enable FIFO  */</span>
<a name="l00962"></a>00962         pstcUart-&gt;FCR0_f.FE1 = 1u;
<a name="l00963"></a>00963         pstcUart-&gt;FCR0_f.FE2 = 1u;
<a name="l00964"></a>00964     }
<a name="l00965"></a>00965 
<a name="l00966"></a>00966 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_MFS0 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS8 == PDL_ON) ||  \</span>
<a name="l00967"></a>00967 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS1 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS9 == PDL_ON) ||  \</span>
<a name="l00968"></a>00968 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS2 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS10 == PDL_ON) || \</span>
<a name="l00969"></a>00969 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS3 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS11 == PDL_ON) || \</span>
<a name="l00970"></a>00970 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS4 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS12 == PDL_ON) || \</span>
<a name="l00971"></a>00971 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS5 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS13 == PDL_ON) || \</span>
<a name="l00972"></a>00972 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS6 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS14 == PDL_ON) || \</span>
<a name="l00973"></a>00973 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS7 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS15 == PDL_ON)      </span>
<a name="l00974"></a>00974 <span class="preprocessor"></span>    <span class="comment">/* Configue interrupts */</span>
<a name="l00975"></a>00975     <span class="keywordflow">if</span>(NULL != pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#a6c5903e5a1dd4d8300963e783834c3a7" title="Pointer to UART interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>)
<a name="l00976"></a>00976     {
<a name="l00977"></a>00977         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#a6c5903e5a1dd4d8300963e783834c3a7" title="Pointer to UART interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__uart__irq__en.html#af045726c4197374f4d9ad38ba0c10da9" title="UART RX interrupt.">bRxIrq</a>)
<a name="l00978"></a>00978         {
<a name="l00979"></a>00979             
<a name="l00980"></a>00980             pstcUart-&gt;SCR_f.RIE = 1u;
<a name="l00981"></a>00981         }
<a name="l00982"></a>00982         
<a name="l00983"></a>00983         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#a6c5903e5a1dd4d8300963e783834c3a7" title="Pointer to UART interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__uart__irq__en.html#a9225483d09ffac6ffd1a8efee3a27aaa" title="UART TX interrupt.">bTxIrq</a>)
<a name="l00984"></a>00984         {
<a name="l00985"></a>00985             
<a name="l00986"></a>00986             pstcUart-&gt;SCR_f.TIE = 1u;
<a name="l00987"></a>00987         }
<a name="l00988"></a>00988         
<a name="l00989"></a>00989         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#a6c5903e5a1dd4d8300963e783834c3a7" title="Pointer to UART interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__uart__irq__en.html#ab20055e6900c7bf9b89e28d7db325691" title="UART TX idle interrupt.">bTxIdleIrq</a>)
<a name="l00990"></a>00990         {
<a name="l00991"></a>00991             
<a name="l00992"></a>00992             pstcUart-&gt;SCR_f.TBIE = 1u;
<a name="l00993"></a>00993         }
<a name="l00994"></a>00994         
<a name="l00995"></a>00995         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#a6c5903e5a1dd4d8300963e783834c3a7" title="Pointer to UART interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__uart__irq__en.html#a9a54ea9dc253444060a1c09cbbcc6b16" title="UART TX FIFO interrupt.">bTxFifoIrq</a>)
<a name="l00996"></a>00996         {
<a name="l00997"></a>00997             
<a name="l00998"></a>00998             pstcUart-&gt;FCR1_f.FTIE = 1u;
<a name="l00999"></a>00999         }
<a name="l01000"></a>01000     }
<a name="l01001"></a>01001     
<a name="l01002"></a>01002     <span class="comment">/* Configure callback functions */</span>
<a name="l01003"></a>01003     <span class="keywordflow">if</span>(NULL != pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#ae1a72d00cfcd3531c86d57d4d571f60c" title="Pointer to UART interrupt callback functions structurei, f set to NULL, no interrupt callback initial...">pstcIrqCb</a>)
<a name="l01004"></a>01004     {
<a name="l01005"></a>01005         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#aeaca78b71cfe8b43925e71fc4b7ca29b" title="Uart internal interrupt callback function.">stcUartInternIrqCb</a>.<a class="code" href="structstc__uart__irq__cb.html#ad40109f285524938eaf8fb58f887d4e1" title="UART RX interrupt callback function pointer.">pfnRxIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#ae1a72d00cfcd3531c86d57d4d571f60c" title="Pointer to UART interrupt callback functions structurei, f set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__uart__irq__cb.html#ad40109f285524938eaf8fb58f887d4e1" title="UART RX interrupt callback function pointer.">pfnRxIrqCb</a>;
<a name="l01006"></a>01006         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#aeaca78b71cfe8b43925e71fc4b7ca29b" title="Uart internal interrupt callback function.">stcUartInternIrqCb</a>.<a class="code" href="structstc__uart__irq__cb.html#a1b554fde91d5ebcef1a9b136ad28fd88" title="UART TX interrupt callback function pointer.">pfnTxIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#ae1a72d00cfcd3531c86d57d4d571f60c" title="Pointer to UART interrupt callback functions structurei, f set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__uart__irq__cb.html#a1b554fde91d5ebcef1a9b136ad28fd88" title="UART TX interrupt callback function pointer.">pfnTxIrqCb</a>;
<a name="l01007"></a>01007         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#aeaca78b71cfe8b43925e71fc4b7ca29b" title="Uart internal interrupt callback function.">stcUartInternIrqCb</a>.<a class="code" href="structstc__uart__irq__cb.html#a182337a4324280aec65e2c88f507e538" title="UART TX idle interrupt callback function pointer.">pfnTxIdleCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#ae1a72d00cfcd3531c86d57d4d571f60c" title="Pointer to UART interrupt callback functions structurei, f set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__uart__irq__cb.html#a182337a4324280aec65e2c88f507e538" title="UART TX idle interrupt callback function pointer.">pfnTxIdleCb</a>;
<a name="l01008"></a>01008         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#aeaca78b71cfe8b43925e71fc4b7ca29b" title="Uart internal interrupt callback function.">stcUartInternIrqCb</a>.<a class="code" href="structstc__uart__irq__cb.html#af6a48c32e9708772610ad4f9fd5720a6" title="UART TX FIFO interrupt callback function pointer.">pfnTxFifoIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#ae1a72d00cfcd3531c86d57d4d571f60c" title="Pointer to UART interrupt callback functions structurei, f set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__uart__irq__cb.html#af6a48c32e9708772610ad4f9fd5720a6" title="UART TX FIFO interrupt callback function pointer.">pfnTxFifoIrqCb</a>;
<a name="l01009"></a>01009     }
<a name="l01010"></a>01010     
<a name="l01011"></a>01011     <span class="comment">/* Configure NVIC */</span>
<a name="l01012"></a>01012     <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__uart__config.html#a18b9c6a82679466e066894a2b65f0d13" title="TRUE: enable NVIC, FALSE: don&#39;t enable NVIC.">bTouchNvic</a>)
<a name="l01013"></a>01013     {
<a name="l01014"></a>01014         <a class="code" href="group___mfs_group.html#ga8cf89127037324ffc519f97b5312be9c" title="Device dependent initialization of transmit interrupts according CMSIS with level defined in pdl...">MfsInitNvic</a>(u8Ch, FALSE);
<a name="l01015"></a>01015         <a class="code" href="group___mfs_group.html#ga8cf89127037324ffc519f97b5312be9c" title="Device dependent initialization of transmit interrupts according CMSIS with level defined in pdl...">MfsInitNvic</a>(u8Ch, TRUE);
<a name="l01016"></a>01016     }
<a name="l01017"></a>01017 <span class="preprocessor">#endif</span>
<a name="l01018"></a>01018 <span class="preprocessor"></span>    
<a name="l01019"></a>01019     <span class="keywordflow">return</span> (Ok);
<a name="l01020"></a>01020 } <span class="comment">/* MFS_Uart_Init  */</span>
<a name="l01021"></a>01021 
<a name="l01038"></a><a class="code" href="group___mfs_group.html#ga448818ccb52abd5a7d1917ac901b62d9">01038</a> en_result_t <a class="code" href="group___mfs_group.html#ga448818ccb52abd5a7d1917ac901b62d9" title="Deinitialisation of a MFS module activating as UART.">Mfs_Uart_DeInit</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>* pstcUart, boolean_t bTouchNvic)
<a name="l01039"></a>01039 {
<a name="l01040"></a>01040     en_result_t            enResult;
<a name="l01041"></a>01041     <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData;
<a name="l01042"></a>01042     uint8_t u8Ch;
<a name="l01043"></a>01043     
<a name="l01044"></a>01044     <span class="comment">/* Calculate the channel number */</span>
<a name="l01045"></a>01045     u8Ch = <a class="code" href="group___mfs_group.html#ga245161ba0819a002a21bb9be662761bd">UartInstanceToIndex</a>(pstcUart);
<a name="l01046"></a>01046     
<a name="l01047"></a>01047     <span class="keywordflow">if</span>(u8Ch &gt; 15u)
<a name="l01048"></a>01048     {
<a name="l01049"></a>01049         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l01050"></a>01050     }
<a name="l01051"></a>01051 
<a name="l01052"></a>01052     <span class="comment">/* Check for valid pointer and get pointer to internal data struct ... */</span>
<a name="l01053"></a>01053     pstcMfsInternData = <a class="code" href="group___mfs_group.html#ga40fb7c5c444cd035117696953cb49b33" title="Return the internal data for a certain UART instance.">MfsUartGetInternDataPtr</a>(pstcUart);
<a name="l01054"></a>01054     <span class="comment">/* ... and check */</span>
<a name="l01055"></a>01055     <span class="keywordflow">if</span> (NULL == pstcMfsInternData)
<a name="l01056"></a>01056     {
<a name="l01057"></a>01057         enResult = ErrorInvalidParameter;
<a name="l01058"></a>01058     }
<a name="l01059"></a>01059     <span class="keywordflow">else</span>
<a name="l01060"></a>01060     {
<a name="l01061"></a>01061         pstcUart-&gt;SCR_f.TXE = FALSE;
<a name="l01062"></a>01062         pstcUart-&gt;SCR_f.RXE = FALSE;
<a name="l01063"></a>01063 
<a name="l01064"></a>01064         <span class="comment">/* Baud Rate Generation Reload Reset */</span>
<a name="l01065"></a>01065         pstcUart-&gt;BGR = 0u;
<a name="l01066"></a>01066             
<a name="l01067"></a>01067         <span class="comment">/* Serial Mode Register clear all bits (valid in any mode) */</span>
<a name="l01068"></a>01068         pstcUart-&gt;SMR = 0u;
<a name="l01069"></a>01069            
<a name="l01070"></a>01070         <span class="comment">/* Reset Mfs receive and transmit bit to default */</span>
<a name="l01071"></a>01071         <span class="comment">/* and clear all error flags */</span>
<a name="l01072"></a>01072         pstcUart-&gt;SCR = 0u;
<a name="l01073"></a>01073 
<a name="l01074"></a>01074         <span class="comment">/* Clear reception Errors */</span>
<a name="l01075"></a>01075         pstcUart-&gt;SSR_f.REC = TRUE;
<a name="l01076"></a>01076            
<a name="l01077"></a>01077         <span class="comment">/* Reset all other used register to default value */</span>
<a name="l01078"></a>01078         pstcUart-&gt;SSR  = 0u;
<a name="l01079"></a>01079         pstcUart-&gt;ESCR = 0u;
<a name="l01080"></a>01080         pstcUart-&gt;FCR0 = 0u;
<a name="l01081"></a>01081         pstcUart-&gt;FCR1 = 0u;
<a name="l01082"></a>01082 
<a name="l01083"></a>01083         <span class="comment">/* Clear MFS by setting the Software Reset bit */</span>
<a name="l01084"></a>01084         pstcUart-&gt;SCR_f.UPCL = TRUE;
<a name="l01085"></a>01085 
<a name="l01086"></a>01086 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_MFS0 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS8 == PDL_ON) ||  \</span>
<a name="l01087"></a>01087 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS1 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS9 == PDL_ON) ||  \</span>
<a name="l01088"></a>01088 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS2 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS10 == PDL_ON) || \</span>
<a name="l01089"></a>01089 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS3 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS11 == PDL_ON) || \</span>
<a name="l01090"></a>01090 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS4 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS12 == PDL_ON) || \</span>
<a name="l01091"></a>01091 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS5 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS13 == PDL_ON) || \</span>
<a name="l01092"></a>01092 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS6 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS14 == PDL_ON) || \</span>
<a name="l01093"></a>01093 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS7 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS15 == PDL_ON)       </span>
<a name="l01094"></a>01094 <span class="preprocessor"></span>        <span class="comment">/* Disable NVIC */</span>  
<a name="l01095"></a>01095         <span class="keywordflow">if</span>(TRUE == bTouchNvic)
<a name="l01096"></a>01096         {
<a name="l01097"></a>01097             <a class="code" href="group___mfs_group.html#gac25b5fe9f346727c4b883952c6cd8d9a" title="Device dependent de-initialization of interrupts according CMSIS.">MfsDeInitNvic</a>(u8Ch, FALSE);
<a name="l01098"></a>01098             <a class="code" href="group___mfs_group.html#gac25b5fe9f346727c4b883952c6cd8d9a" title="Device dependent de-initialization of interrupts according CMSIS.">MfsDeInitNvic</a>(u8Ch, TRUE);
<a name="l01099"></a>01099         }
<a name="l01100"></a>01100 <span class="preprocessor">#endif        </span>
<a name="l01101"></a>01101 <span class="preprocessor"></span>        enResult = Ok;
<a name="l01102"></a>01102     }
<a name="l01103"></a>01103 
<a name="l01104"></a>01104     <span class="keywordflow">return</span> (enResult);
<a name="l01105"></a>01105 } <span class="comment">/* Mfs_Uart_DeInit */</span>
<a name="l01106"></a>01106 
<a name="l01123"></a><a class="code" href="group___mfs_group.html#gaf501bdcbb009eca7125601c47b4eb8a5">01123</a> en_result_t <a class="code" href="group___mfs_group.html#gaf501bdcbb009eca7125601c47b4eb8a5" title="Set the baudrate of UART.">Mfs_Uart_SetBaudRate</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>* pstcUart,
<a name="l01124"></a>01124                                  uint32_t u32BaudRate)
<a name="l01125"></a>01125 {
<a name="l01126"></a>01126     uint32_t u32Pclk1;
<a name="l01127"></a>01127   
<a name="l01128"></a>01128     <span class="keywordflow">if</span> ((NULL == pstcUart) || (u32BaudRate &lt; 4u))
<a name="l01129"></a>01129     {
<a name="l01130"></a>01130         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01131"></a>01131     }
<a name="l01132"></a>01132     
<a name="l01133"></a>01133 <span class="preprocessor">#if (PDL_MCU_CORE == PDL_FM0P_CORE)    </span>
<a name="l01134"></a>01134 <span class="preprocessor"></span>    u32Pclk1 = __HCLK/(1ul &lt;&lt; (APBC1_PSR_Val &amp; 0x03u)); <span class="comment">/* MFS is attached on APB1 bus in FM0+ device */</span>
<a name="l01135"></a>01135 <span class="preprocessor">#else</span>
<a name="l01136"></a>01136 <span class="preprocessor"></span>    u32Pclk1 = __HCLK/(1ul &lt;&lt; (APBC2_PSR_Val &amp; 0x03u)); <span class="comment">/* MFS is attached on APB2 bus in FM3, FM4 device */</span>
<a name="l01137"></a>01137 <span class="preprocessor">#endif    </span>
<a name="l01138"></a>01138 <span class="preprocessor"></span>    pstcUart-&gt;BGR_f.BGR = (u32Pclk1/u32BaudRate) - 1;
<a name="l01139"></a>01139     
<a name="l01140"></a>01140     <span class="keywordflow">return</span> Ok;
<a name="l01141"></a>01141 }
<a name="l01142"></a>01142 
<a name="l01158"></a><a class="code" href="group___mfs_group.html#gaaefbb725135b151db4d43f6804cb5b08">01158</a> en_result_t <a class="code" href="group___mfs_group.html#gaaefbb725135b151db4d43f6804cb5b08" title="Enable UART functions.">Mfs_Uart_EnableFunc</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>* pstcUart, <a class="code" href="group___mfs_group.html#ga2e616899b5ac19874fac5a4584c8152c" title="UART functions.">en_uart_func_t</a> enFunc)
<a name="l01159"></a>01159 {
<a name="l01160"></a>01160     <span class="keywordflow">if</span> (NULL == pstcUart)
<a name="l01161"></a>01161     {
<a name="l01162"></a>01162         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01163"></a>01163     }
<a name="l01164"></a>01164     
<a name="l01165"></a>01165     <span class="keywordflow">switch</span>(enFunc)
<a name="l01166"></a>01166     {
<a name="l01167"></a>01167         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga37e5ef229926dbef8c128058fbc1cb00afab4bf8f85deaec040aebe8d6ed9bfc1" title="UART TX.">UartTx</a>:
<a name="l01168"></a>01168             pstcUart-&gt;SCR_f.TXE = 1u;
<a name="l01169"></a>01169             <span class="keywordflow">break</span>;
<a name="l01170"></a>01170         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga37e5ef229926dbef8c128058fbc1cb00a10de4e8b870f733c385f02fa7de395ee" title="UART RX.">UartRx</a>:
<a name="l01171"></a>01171             pstcUart-&gt;SCR_f.RXE = 1u;
<a name="l01172"></a>01172             <span class="keywordflow">break</span>;
<a name="l01173"></a>01173         <span class="keywordflow">default</span>:
<a name="l01174"></a>01174             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01175"></a>01175     }
<a name="l01176"></a>01176     
<a name="l01177"></a>01177     <span class="keywordflow">return</span> Ok;
<a name="l01178"></a>01178 }
<a name="l01179"></a>01179 
<a name="l01195"></a><a class="code" href="group___mfs_group.html#ga4bfc93c941cc6e006027f9ac56a4e42e">01195</a> en_result_t <a class="code" href="group___mfs_group.html#ga4bfc93c941cc6e006027f9ac56a4e42e" title="Disable UART functions.">Mfs_Uart_DisableFunc</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>* pstcUart, <a class="code" href="group___mfs_group.html#ga2e616899b5ac19874fac5a4584c8152c" title="UART functions.">en_uart_func_t</a> enFunc)
<a name="l01196"></a>01196 {
<a name="l01197"></a>01197     <span class="keywordflow">if</span> (NULL == pstcUart)
<a name="l01198"></a>01198     {
<a name="l01199"></a>01199         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01200"></a>01200     }
<a name="l01201"></a>01201     
<a name="l01202"></a>01202     <span class="keywordflow">switch</span>(enFunc)
<a name="l01203"></a>01203     {
<a name="l01204"></a>01204         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga37e5ef229926dbef8c128058fbc1cb00afab4bf8f85deaec040aebe8d6ed9bfc1" title="UART TX.">UartTx</a>:
<a name="l01205"></a>01205             pstcUart-&gt;SCR_f.TXE = 0u;
<a name="l01206"></a>01206             <span class="keywordflow">break</span>;
<a name="l01207"></a>01207         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga37e5ef229926dbef8c128058fbc1cb00a10de4e8b870f733c385f02fa7de395ee" title="UART RX.">UartRx</a>:
<a name="l01208"></a>01208             pstcUart-&gt;SCR_f.RXE = 0u;
<a name="l01209"></a>01209             <span class="keywordflow">break</span>;
<a name="l01210"></a>01210         <span class="keywordflow">default</span>:
<a name="l01211"></a>01211             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01212"></a>01212     }
<a name="l01213"></a>01213     
<a name="l01214"></a>01214     <span class="keywordflow">return</span> Ok;
<a name="l01215"></a>01215 }
<a name="l01216"></a>01216 
<a name="l01246"></a><a class="code" href="group___mfs_group.html#gaa8d614d38b20e6764f6024bd57bd42c3">01246</a> boolean_t <a class="code" href="group___mfs_group.html#gaa8d614d38b20e6764f6024bd57bd42c3" title="Get status of UART according to status type.">Mfs_Uart_GetStatus</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>* pstcUart, 
<a name="l01247"></a>01247                              <a class="code" href="group___mfs_group.html#ga198ed18189c60112199d22f8ab95e522" title="UART status types.">en_uart_status_t</a> enStatus)
<a name="l01248"></a>01248 {
<a name="l01249"></a>01249     boolean_t bResult = FALSE;
<a name="l01250"></a>01250     
<a name="l01251"></a>01251     <span class="keywordflow">switch</span>(enStatus)
<a name="l01252"></a>01252     {
<a name="l01253"></a>01253         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggacd4f828f93adb76efccf8424a5567629acc81fce55679d0aa32f19446061d4c91" title="Parity error.">UartParityError</a>:
<a name="l01254"></a>01254             bResult = (pstcUart-&gt;SSR_f.PE == 1u) ? TRUE : FALSE;
<a name="l01255"></a>01255             <span class="keywordflow">break</span>;  
<a name="l01256"></a>01256         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggacd4f828f93adb76efccf8424a5567629a96e2296a964f6e743ea0fb935b376941" title="Frame error.">UartFrameError</a>:
<a name="l01257"></a>01257             bResult = (pstcUart-&gt;SSR_f.FRE == 1u) ? TRUE : FALSE;
<a name="l01258"></a>01258             <span class="keywordflow">break</span>;  
<a name="l01259"></a>01259         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggacd4f828f93adb76efccf8424a5567629a562973affe3e87a87aa602c79c915b82" title="Overrun error.">UartOverrunError</a>:
<a name="l01260"></a>01260             bResult = (pstcUart-&gt;SSR_f.ORE == 1u) ? TRUE : FALSE;
<a name="l01261"></a>01261             <span class="keywordflow">break</span>;  
<a name="l01262"></a>01262         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggacd4f828f93adb76efccf8424a5567629ae993e3033bd649b5bc26f8fbe8c24867" title="RX completion.">UartRxFull</a>:
<a name="l01263"></a>01263             bResult = (pstcUart-&gt;SSR_f.RDRF == 1u) ? TRUE : FALSE;
<a name="l01264"></a>01264             <span class="keywordflow">break</span>;  
<a name="l01265"></a>01265         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggacd4f828f93adb76efccf8424a5567629a589d06e41a040bc00fa4fa0c637b8bc3" title="TX buffer empty.">UartTxEmpty</a>:
<a name="l01266"></a>01266             bResult = (pstcUart-&gt;SSR_f.TDRE == 1u) ? TRUE : FALSE;
<a name="l01267"></a>01267             <span class="keywordflow">break</span>;  
<a name="l01268"></a>01268         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggacd4f828f93adb76efccf8424a5567629a73115bb87fdf02e0eeafe4d9e3566b1b" title="TX idle.">UartTxIdle</a>:
<a name="l01269"></a>01269             bResult = (pstcUart-&gt;SSR_f.TBI == 1u) ? TRUE : FALSE;
<a name="l01270"></a>01270             <span class="keywordflow">break</span>;  
<a name="l01271"></a>01271         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggacd4f828f93adb76efccf8424a5567629a3db138560ce9172dbc94bfbe36595f46" title="TX FIFO request.">UartTxFifoRequest</a>:
<a name="l01272"></a>01272             bResult = (pstcUart-&gt;FCR1_f.FDRQ == 1u) ? TRUE : FALSE;
<a name="l01273"></a>01273             <span class="keywordflow">break</span>;  
<a name="l01274"></a>01274         <span class="keywordflow">default</span>:
<a name="l01275"></a>01275             <span class="keywordflow">break</span>;  
<a name="l01276"></a>01276     }
<a name="l01277"></a>01277     
<a name="l01278"></a>01278     <span class="keywordflow">return</span> bResult;
<a name="l01279"></a>01279 }
<a name="l01280"></a>01280 
<a name="l01303"></a><a class="code" href="group___mfs_group.html#gaebe22bef48feeb338e303383aa28da3a">01303</a> en_result_t <a class="code" href="group___mfs_group.html#gaebe22bef48feeb338e303383aa28da3a" title="Clear status of UART according to status type.">Mfs_Uart_ClrStatus</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>* pstcUart,
<a name="l01304"></a>01304                                <a class="code" href="group___mfs_group.html#ga198ed18189c60112199d22f8ab95e522" title="UART status types.">en_uart_status_t</a> enStatus)
<a name="l01305"></a>01305 {
<a name="l01306"></a>01306     <span class="keywordflow">if</span> (NULL == pstcUart)
<a name="l01307"></a>01307     {
<a name="l01308"></a>01308         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01309"></a>01309     }
<a name="l01310"></a>01310     
<a name="l01311"></a>01311     <span class="keywordflow">switch</span>(enStatus)
<a name="l01312"></a>01312     {
<a name="l01313"></a>01313         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggacd4f828f93adb76efccf8424a5567629acc81fce55679d0aa32f19446061d4c91" title="Parity error.">UartParityError</a>: 
<a name="l01314"></a>01314         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggacd4f828f93adb76efccf8424a5567629a96e2296a964f6e743ea0fb935b376941" title="Frame error.">UartFrameError</a>:
<a name="l01315"></a>01315         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggacd4f828f93adb76efccf8424a5567629a562973affe3e87a87aa602c79c915b82" title="Overrun error.">UartOverrunError</a>:
<a name="l01316"></a>01316             pstcUart-&gt;SSR_f.REC = 1u;
<a name="l01317"></a>01317             <span class="keywordflow">break</span>;  
<a name="l01318"></a>01318         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggacd4f828f93adb76efccf8424a5567629ae993e3033bd649b5bc26f8fbe8c24867" title="RX completion.">UartRxFull</a>:
<a name="l01319"></a>01319         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggacd4f828f93adb76efccf8424a5567629a589d06e41a040bc00fa4fa0c637b8bc3" title="TX buffer empty.">UartTxEmpty</a>:
<a name="l01320"></a>01320         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggacd4f828f93adb76efccf8424a5567629a73115bb87fdf02e0eeafe4d9e3566b1b" title="TX idle.">UartTxIdle</a>:
<a name="l01321"></a>01321             <span class="keywordflow">break</span>;  
<a name="l01322"></a>01322         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggacd4f828f93adb76efccf8424a5567629a3db138560ce9172dbc94bfbe36595f46" title="TX FIFO request.">UartTxFifoRequest</a>:
<a name="l01323"></a>01323             pstcUart-&gt;FCR1_f.FDRQ = 0u;
<a name="l01324"></a>01324             <span class="keywordflow">break</span>;  
<a name="l01325"></a>01325         <span class="keywordflow">default</span>:
<a name="l01326"></a>01326             <span class="keywordflow">return</span> ErrorInvalidParameter;  
<a name="l01327"></a>01327     }
<a name="l01328"></a>01328     
<a name="l01329"></a>01329     <span class="keywordflow">return</span> Ok;
<a name="l01330"></a>01330 }
<a name="l01331"></a>01331 
<a name="l01344"></a><a class="code" href="group___mfs_group.html#ga52bba13bfc372cc6eebb9b1c60ceb7ed">01344</a> en_result_t <a class="code" href="group___mfs_group.html#ga52bba13bfc372cc6eebb9b1c60ceb7ed" title="Write UART data buffer.">Mfs_Uart_SendData</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>* pstcUart, uint16_t u16Data)
<a name="l01345"></a>01345 {
<a name="l01346"></a>01346     <span class="keywordflow">if</span> (NULL == pstcUart)
<a name="l01347"></a>01347     {
<a name="l01348"></a>01348         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01349"></a>01349     }
<a name="l01350"></a>01350     
<a name="l01351"></a>01351     pstcUart-&gt;TDR = u16Data;
<a name="l01352"></a>01352     
<a name="l01353"></a>01353     <span class="keywordflow">return</span> Ok;
<a name="l01354"></a>01354 }
<a name="l01355"></a>01355 
<a name="l01365"></a><a class="code" href="group___mfs_group.html#ga7ef623213ee4599db21fceddd2d28ba0">01365</a> uint16_t <a class="code" href="group___mfs_group.html#ga7ef623213ee4599db21fceddd2d28ba0" title="Read UART data buffer.">Mfs_Uart_ReceiveData</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>* pstcUart)
<a name="l01366"></a>01366 {    
<a name="l01367"></a>01367     <span class="keywordflow">return</span> (pstcUart-&gt;RDR);
<a name="l01368"></a>01368 }
<a name="l01369"></a>01369 
<a name="l01382"></a><a class="code" href="group___mfs_group.html#gae217ea01829510dede08a87bb9004230">01382</a> en_result_t <a class="code" href="group___mfs_group.html#gae217ea01829510dede08a87bb9004230" title="Reset UART FIFO.">Mfs_Uart_ResetFifo</a> (<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>* pstcUart, 
<a name="l01383"></a>01383                                 <a class="code" href="group___mfs_group.html#ga92c7220a4bea875ed8c044e89c63768d" title="Mfs FIFO Number.">en_mfs_fifo_t</a> enFifo)
<a name="l01384"></a>01384 {
<a name="l01385"></a>01385     <span class="keywordflow">if</span> (NULL == pstcUart)
<a name="l01386"></a>01386     {
<a name="l01387"></a>01387         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01388"></a>01388     }
<a name="l01389"></a>01389     
<a name="l01390"></a>01390     <span class="keywordflow">switch</span>(enFifo)
<a name="l01391"></a>01391     {
<a name="l01392"></a>01392         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034a0ffddd198e226809429b23d9f32ef5f8" title="FIFO No.1.">MfsFifo1</a>:
<a name="l01393"></a>01393             pstcUart-&gt;FCR0_f.FCL1 = 1u;
<a name="l01394"></a>01394             <span class="keywordflow">break</span>;
<a name="l01395"></a>01395         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034ac8a2b52ff2b3ab8b5e6c0be9e335b837" title="FIFO No.2.">MfsFifo2</a>:
<a name="l01396"></a>01396             pstcUart-&gt;FCR0_f.FCL2 = 1u;
<a name="l01397"></a>01397             <span class="keywordflow">break</span>;
<a name="l01398"></a>01398         <span class="keywordflow">default</span>:
<a name="l01399"></a>01399             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01400"></a>01400     }
<a name="l01401"></a>01401     
<a name="l01402"></a>01402     <span class="keywordflow">return</span> Ok;
<a name="l01403"></a>01403 }
<a name="l01404"></a>01404 
<a name="l01418"></a><a class="code" href="group___mfs_group.html#ga7e578e5e84060a23c965d79998582777">01418</a> en_result_t <a class="code" href="group___mfs_group.html#ga7e578e5e84060a23c965d79998582777" title="Set UART FIFO count.">Mfs_Uart_SetFifoCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>* pstcUart,
<a name="l01419"></a>01419                                   <a class="code" href="group___mfs_group.html#ga92c7220a4bea875ed8c044e89c63768d" title="Mfs FIFO Number.">en_mfs_fifo_t</a> enFifo,
<a name="l01420"></a>01420                                   uint8_t u8Count)
<a name="l01421"></a>01421 {
<a name="l01422"></a>01422     <span class="keywordflow">if</span> (NULL == pstcUart)
<a name="l01423"></a>01423     {
<a name="l01424"></a>01424         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01425"></a>01425     }
<a name="l01426"></a>01426     
<a name="l01427"></a>01427     <span class="keywordflow">switch</span>(enFifo)
<a name="l01428"></a>01428     {
<a name="l01429"></a>01429         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034a0ffddd198e226809429b23d9f32ef5f8" title="FIFO No.1.">MfsFifo1</a>:
<a name="l01430"></a>01430             pstcUart-&gt;FBYTE1 = u8Count;
<a name="l01431"></a>01431             <span class="keywordflow">break</span>;
<a name="l01432"></a>01432         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034ac8a2b52ff2b3ab8b5e6c0be9e335b837" title="FIFO No.2.">MfsFifo2</a>:
<a name="l01433"></a>01433             pstcUart-&gt;FBYTE2 = u8Count;
<a name="l01434"></a>01434             <span class="keywordflow">break</span>;
<a name="l01435"></a>01435         <span class="keywordflow">default</span>:
<a name="l01436"></a>01436            <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01437"></a>01437     }
<a name="l01438"></a>01438     
<a name="l01439"></a>01439     <span class="keywordflow">return</span> Ok;
<a name="l01440"></a>01440 }
<a name="l01441"></a>01441 
<a name="l01456"></a><a class="code" href="group___mfs_group.html#ga47f4f9e6e1efae7e121b34896d52f64d">01456</a> uint8_t <a class="code" href="group___mfs_group.html#ga47f4f9e6e1efae7e121b34896d52f64d" title="Get UART FIFO count.">Mfs_Uart_GetFifoCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#ga92c6f8f73176f1772b653b4927373ed3">stc_mfsn_uart_t</a>* pstcUart,
<a name="l01457"></a>01457                               <a class="code" href="group___mfs_group.html#ga92c7220a4bea875ed8c044e89c63768d" title="Mfs FIFO Number.">en_mfs_fifo_t</a> enFifo)
<a name="l01458"></a>01458 {
<a name="l01459"></a>01459     uint8_t u8FifoCnt = 0xFFu;
<a name="l01460"></a>01460     
<a name="l01461"></a>01461     <span class="keywordflow">switch</span>(enFifo)
<a name="l01462"></a>01462     {
<a name="l01463"></a>01463         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034a0ffddd198e226809429b23d9f32ef5f8" title="FIFO No.1.">MfsFifo1</a>:
<a name="l01464"></a>01464             u8FifoCnt = pstcUart-&gt;FBYTE1;
<a name="l01465"></a>01465             <span class="keywordflow">break</span>;
<a name="l01466"></a>01466         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034ac8a2b52ff2b3ab8b5e6c0be9e335b837" title="FIFO No.2.">MfsFifo2</a>:
<a name="l01467"></a>01467             u8FifoCnt = pstcUart-&gt;FBYTE2;
<a name="l01468"></a>01468             <span class="keywordflow">break</span>;
<a name="l01469"></a>01469         <span class="keywordflow">default</span>:
<a name="l01470"></a>01470            <span class="keywordflow">break</span>;
<a name="l01471"></a>01471     }
<a name="l01472"></a>01472     
<a name="l01473"></a>01473     <span class="keywordflow">return</span> u8FifoCnt;
<a name="l01474"></a>01474 }
<a name="l01475"></a>01475 <span class="preprocessor">#endif</span>
<a name="l01476"></a>01476 <span class="preprocessor"></span>
<a name="l01477"></a>01477 <span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS_CSIO_MODE == PDL_ON)                             </span>
<a name="l01478"></a>01478 <span class="preprocessor"></span><span class="comment">/******************************************************************************</span>
<a name="l01479"></a>01479 <span class="comment"> * CSIO driver functions</span>
<a name="l01480"></a>01480 <span class="comment"> ******************************************************************************/</span>
<a name="l01481"></a>01481 
<a name="l01491"></a><a class="code" href="group___mfs_group.html#gac79c84b0a45258223a917b61d6ae2e7f">01491</a> <span class="keyword">static</span> <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* <a class="code" href="group___mfs_group.html#gac79c84b0a45258223a917b61d6ae2e7f" title="Return the internal data for a certain CSIO instance.">MfsCsioGetInternDataPtr</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio)
<a name="l01492"></a>01492 {
<a name="l01493"></a>01493     <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcInternDataPtr = NULL;
<a name="l01494"></a>01494     uint32_t u32Instance;
<a name="l01495"></a>01495 
<a name="l01496"></a>01496     <span class="keywordflow">if</span> (NULL != pstcCsio)
<a name="l01497"></a>01497     {
<a name="l01498"></a>01498         <span class="keywordflow">for</span> (u32Instance = 0u; u32Instance &lt; (uint32_t)<a class="code" href="group___mfs_group.html#ggafce824c305ebb58476ef4b279447e35fa7851cc22d73d4df65b231cf9f35e824d">MfsInstanceIndexMax</a>; u32Instance++)
<a name="l01499"></a>01499         {
<a name="l01500"></a>01500             <span class="keywordflow">if</span> (pstcCsio == m_astcMfsInstanceDataLut[u32Instance].stcInstance.pstcCsioInstance)
<a name="l01501"></a>01501             {
<a name="l01502"></a>01502                 pstcInternDataPtr = &amp;m_astcMfsInstanceDataLut[u32Instance].<a class="code" href="structstc__mfs__instance__data.html#a7e848ba5739675221ced351df12957b3" title="module internal data of instance">stcInternData</a>;
<a name="l01503"></a>01503                 <span class="keywordflow">break</span>;
<a name="l01504"></a>01504             }
<a name="l01505"></a>01505         }
<a name="l01506"></a>01506             
<a name="l01507"></a>01507     }
<a name="l01508"></a>01508 
<a name="l01509"></a>01509     <span class="keywordflow">return</span> (pstcInternDataPtr);
<a name="l01510"></a>01510 } <span class="comment">/* MfsGetInternDataPtr */</span>
<a name="l01511"></a>01511 
<a name="l01512"></a>01512 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_MFS0 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS8 == PDL_ON) ||  \</span>
<a name="l01513"></a>01513 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS1 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS9 == PDL_ON) ||  \</span>
<a name="l01514"></a>01514 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS2 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS10 == PDL_ON) || \</span>
<a name="l01515"></a>01515 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS3 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS11 == PDL_ON) || \</span>
<a name="l01516"></a>01516 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS4 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS12 == PDL_ON) || \</span>
<a name="l01517"></a>01517 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS5 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS13 == PDL_ON) || \</span>
<a name="l01518"></a>01518 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS6 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS14 == PDL_ON) || \</span>
<a name="l01519"></a>01519 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS7 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS15 == PDL_ON) </span>
<a name="l01520"></a>01520 <span class="preprocessor"></span>
<a name="l01530"></a><a class="code" href="group___mfs_group.html#ga3f1b197312aa3c6bc9b0b7c39fea397b">01530</a> <span class="keywordtype">void</span> <a class="code" href="group___mfs_group.html#ga3f1b197312aa3c6bc9b0b7c39fea397b" title="CSIO receive interrupt service routine.">MfsCsioIrqHandlerRx</a>( <span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>*   pstcCsio,
<a name="l01531"></a>01531                           <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData)
<a name="l01532"></a>01532 {
<a name="l01533"></a>01533     <span class="keywordflow">if</span> ((NULL != pstcCsio) &amp;&amp; (NULL != pstcMfsInternData))
<a name="l01534"></a>01534     {
<a name="l01535"></a>01535         <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#ad40109f285524938eaf8fb58f887d4e1" title="CSIO RX interrupt callback function.">pfnRxIrqCb</a>)
<a name="l01536"></a>01536         {
<a name="l01537"></a>01537             pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#ad40109f285524938eaf8fb58f887d4e1" title="CSIO RX interrupt callback function.">pfnRxIrqCb</a>();
<a name="l01538"></a>01538         }
<a name="l01539"></a>01539     }
<a name="l01540"></a>01540 } <span class="comment">/* MfsCsioIrqHandlerRx */</span>
<a name="l01541"></a>01541 
<a name="l01552"></a><a class="code" href="group___mfs_group.html#ga2366980aecbbfbaa51bdc49c9b99ab76">01552</a> <span class="keywordtype">void</span> <a class="code" href="group___mfs_group.html#ga2366980aecbbfbaa51bdc49c9b99ab76" title="CSIO transfer interrupt service routine.">MfsCsioIrqHandlerTx</a>( <span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>*   pstcCsio, 
<a name="l01553"></a>01553                           <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData)
<a name="l01554"></a>01554 {
<a name="l01555"></a>01555     <span class="keywordflow">if</span> ((NULL != pstcCsio) &amp;&amp; (NULL != pstcMfsInternData))
<a name="l01556"></a>01556     {
<a name="l01557"></a>01557         <span class="keywordflow">if</span>(1u == pstcCsio-&gt;SSR_f.TDRE)
<a name="l01558"></a>01558         {
<a name="l01559"></a>01559             <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#a1b554fde91d5ebcef1a9b136ad28fd88" title="CSIO TX interrupt callback function.">pfnTxIrqCb</a>)
<a name="l01560"></a>01560             {
<a name="l01561"></a>01561                 pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#a1b554fde91d5ebcef1a9b136ad28fd88" title="CSIO TX interrupt callback function.">pfnTxIrqCb</a>();
<a name="l01562"></a>01562             }
<a name="l01563"></a>01563         }
<a name="l01564"></a>01564         
<a name="l01565"></a>01565         <span class="keywordflow">if</span>(1u == pstcCsio-&gt;SSR_f.TBI)
<a name="l01566"></a>01566         {
<a name="l01567"></a>01567             <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#a182337a4324280aec65e2c88f507e538" title="CSIO TX idle interrupt callback function.">pfnTxIdleCb</a>)
<a name="l01568"></a>01568             {
<a name="l01569"></a>01569                 pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#a182337a4324280aec65e2c88f507e538" title="CSIO TX idle interrupt callback function.">pfnTxIdleCb</a>();
<a name="l01570"></a>01570             }
<a name="l01571"></a>01571         }
<a name="l01572"></a>01572         
<a name="l01573"></a>01573         <span class="keywordflow">if</span>(1u == pstcCsio-&gt;FCR1_f.FDRQ)
<a name="l01574"></a>01574         {
<a name="l01575"></a>01575             <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#af6a48c32e9708772610ad4f9fd5720a6" title="CSIO TX FIFO interrupt callback function.">pfnTxFifoIrqCb</a>)
<a name="l01576"></a>01576             {
<a name="l01577"></a>01577                 pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#af6a48c32e9708772610ad4f9fd5720a6" title="CSIO TX FIFO interrupt callback function.">pfnTxFifoIrqCb</a>();
<a name="l01578"></a>01578             }
<a name="l01579"></a>01579             
<a name="l01580"></a>01580             pstcCsio-&gt;FCR1_f.FDRQ = 0u;
<a name="l01581"></a>01581         }
<a name="l01582"></a>01582 <span class="preprocessor">    #if (PDL_MCU_CORE == PDL_FM4_CORE) || (PDL_MCU_CORE == PDL_FM0P_CORE)    </span>
<a name="l01583"></a>01583 <span class="preprocessor"></span>        <span class="keywordflow">if</span>(1u == pstcCsio-&gt;SACSR_f.CSE)
<a name="l01584"></a>01584         {
<a name="l01585"></a>01585             <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#a2b58967c372a9a5b4d79b43ca540d7da" title="CSIO chip selection interrupt callback function.">pfnCsErrIrqCb</a>)
<a name="l01586"></a>01586             {
<a name="l01587"></a>01587                 pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#a2b58967c372a9a5b4d79b43ca540d7da" title="CSIO chip selection interrupt callback function.">pfnCsErrIrqCb</a>();
<a name="l01588"></a>01588             }
<a name="l01589"></a>01589             
<a name="l01590"></a>01590             pstcCsio-&gt;SACSR_f.CSE = 0u;
<a name="l01591"></a>01591         }
<a name="l01592"></a>01592 <span class="preprocessor">    #endif    </span>
<a name="l01593"></a>01593 <span class="preprocessor"></span>        
<a name="l01594"></a>01594     }
<a name="l01595"></a>01595 } <span class="comment">/* MfsIrqHandlerTx */</span>
<a name="l01596"></a>01596           
<a name="l01607"></a><a class="code" href="group___mfs_group.html#ga934d3e4f0ae722ce26053b097a7488e7">01607</a> <span class="keywordtype">void</span> <a class="code" href="group___mfs_group.html#ga934d3e4f0ae722ce26053b097a7488e7" title="CSIO status interrupt service routine.">MfsCsioIrqHandlerStatus</a>( <span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>*   pstcCsio, 
<a name="l01608"></a>01608                               <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData)
<a name="l01609"></a>01609 {
<a name="l01610"></a>01610     <span class="keywordflow">if</span> ((NULL != pstcCsio) &amp;&amp; (NULL != pstcMfsInternData))
<a name="l01611"></a>01611     {
<a name="l01612"></a>01612 <span class="preprocessor">    #if (PDL_MCU_CORE == PDL_FM4_CORE) || (PDL_MCU_CORE == PDL_FM0P_CORE)   </span>
<a name="l01613"></a>01613 <span class="preprocessor"></span>        <span class="keywordflow">if</span>(1u == pstcCsio-&gt;SACSR_f.TINT)
<a name="l01614"></a>01614         {
<a name="l01615"></a>01615             <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#a399f6dcb22c0394c8a0f581654b10ce2" title="CSIO serial timer interrupt callback function.">pfnSerialTimerIrqCb</a>)
<a name="l01616"></a>01616             {
<a name="l01617"></a>01617                 pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#a399f6dcb22c0394c8a0f581654b10ce2" title="CSIO serial timer interrupt callback function.">pfnSerialTimerIrqCb</a>();
<a name="l01618"></a>01618             }
<a name="l01619"></a>01619             
<a name="l01620"></a>01620             pstcCsio-&gt;SACSR_f.TINT = 0u;
<a name="l01621"></a>01621         }
<a name="l01622"></a>01622 <span class="preprocessor">    #endif    </span>
<a name="l01623"></a>01623 <span class="preprocessor"></span>    }
<a name="l01624"></a>01624 }
<a name="l01625"></a>01625 
<a name="l01645"></a><a class="code" href="group___mfs_group.html#ga4512f574902398a556ee19b8183cf6a1">01645</a> en_result_t <a class="code" href="group___mfs_group.html#ga4512f574902398a556ee19b8183cf6a1" title="Enable CSIO interrupts.">Mfs_Csio_EnableIrq</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio, 
<a name="l01646"></a>01646                                <a class="code" href="group___mfs_group.html#ga3bc124d875de70f8168a4456d77ac4fc" title="CSIO interrupt selection.">en_csio_irq_sel_t</a> enIrqSel)
<a name="l01647"></a>01647 {
<a name="l01648"></a>01648     <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData;
<a name="l01649"></a>01649 
<a name="l01650"></a>01650     <span class="comment">/* Check for valid pointer and get pointer to internal data struct ... */</span>
<a name="l01651"></a>01651     pstcMfsInternData = <a class="code" href="group___mfs_group.html#gac79c84b0a45258223a917b61d6ae2e7f" title="Return the internal data for a certain CSIO instance.">MfsCsioGetInternDataPtr</a>(pstcCsio);
<a name="l01652"></a>01652   
<a name="l01653"></a>01653     <span class="keywordflow">if</span> (NULL == pstcMfsInternData)
<a name="l01654"></a>01654     {
<a name="l01655"></a>01655         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l01656"></a>01656     }
<a name="l01657"></a>01657     
<a name="l01658"></a>01658     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l01659"></a>01659     {
<a name="l01660"></a>01660         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga339bf38499acae0c40627170ee46b85faa04748cc9576f7ecb9dae652cc185899" title="CSIO TX interrupt.">CsioTxIrq</a>:
<a name="l01661"></a>01661             pstcCsio-&gt;SCR_f.TIE = 1u;
<a name="l01662"></a>01662             <span class="keywordflow">break</span>;
<a name="l01663"></a>01663         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga339bf38499acae0c40627170ee46b85faf656c35da78ea62824c80d2bc6976d88" title="CSIO RX interrupt.">CsioRxIrq</a>:
<a name="l01664"></a>01664             pstcCsio-&gt;SCR_f.RIE = 1u;
<a name="l01665"></a>01665             <span class="keywordflow">break</span>;
<a name="l01666"></a>01666         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga339bf38499acae0c40627170ee46b85fa031976d26843584ad1fae5f31c5d1d5f" title="CSIO TX idle interrupt.">CsioTxIdleIrq</a>:
<a name="l01667"></a>01667             pstcCsio-&gt;SCR_f.TBIE = 1u;
<a name="l01668"></a>01668             <span class="keywordflow">break</span>;
<a name="l01669"></a>01669         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga339bf38499acae0c40627170ee46b85fae51e3f0d32427e6339c2470db7bafc5f" title="CSIO TX FIFO interrupt.">CsioTxFifoIrq</a>:
<a name="l01670"></a>01670             pstcCsio-&gt;FCR1_f.FTIE = 1u;
<a name="l01671"></a>01671             <span class="keywordflow">break</span>;
<a name="l01672"></a>01672 <span class="preprocessor">    #if (PDL_MCU_CORE == PDL_FM4_CORE) || (PDL_MCU_CORE == PDL_FM0P_CORE)     </span>
<a name="l01673"></a>01673 <span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga339bf38499acae0c40627170ee46b85fa6c5dff36c03723aba6907bad6c81f465" title="CSIO chip selection interrupt.">CsioCsErrIrq</a>:
<a name="l01674"></a>01674             pstcCsio-&gt;SACSR_f.CSEIE = 1u;
<a name="l01675"></a>01675             <span class="keywordflow">break</span>;
<a name="l01676"></a>01676         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga339bf38499acae0c40627170ee46b85faba2e6df4354e47bd9517d17c0c35fb28" title="CSIO serial timer interrupt.">CsioSerialTimerIrq</a>:
<a name="l01677"></a>01677              pstcCsio-&gt;SACSR_f.TINTE = 1u;
<a name="l01678"></a>01678             <span class="keywordflow">break</span>;
<a name="l01679"></a>01679 <span class="preprocessor">    #endif    </span>
<a name="l01680"></a>01680 <span class="preprocessor"></span>        <span class="keywordflow">default</span>:
<a name="l01681"></a>01681             <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l01682"></a>01682     }
<a name="l01683"></a>01683     
<a name="l01684"></a>01684     <span class="keywordflow">return</span> Ok;
<a name="l01685"></a>01685 }
<a name="l01686"></a>01686 
<a name="l01709"></a><a class="code" href="group___mfs_group.html#ga220af7d06f5e4a7722a99b3f2f3666e0">01709</a> en_result_t <a class="code" href="group___mfs_group.html#ga220af7d06f5e4a7722a99b3f2f3666e0" title="Disable CSIO interrupts.">Mfs_Csio_DisableIrq</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio, 
<a name="l01710"></a>01710                                 <a class="code" href="group___mfs_group.html#ga3bc124d875de70f8168a4456d77ac4fc" title="CSIO interrupt selection.">en_csio_irq_sel_t</a> enIrqSel)
<a name="l01711"></a>01711 {  
<a name="l01712"></a>01712     <span class="keywordflow">if</span> (NULL == pstcCsio)
<a name="l01713"></a>01713     {
<a name="l01714"></a>01714         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l01715"></a>01715     }
<a name="l01716"></a>01716     
<a name="l01717"></a>01717     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l01718"></a>01718     {
<a name="l01719"></a>01719         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga339bf38499acae0c40627170ee46b85faa04748cc9576f7ecb9dae652cc185899" title="CSIO TX interrupt.">CsioTxIrq</a>:
<a name="l01720"></a>01720             pstcCsio-&gt;SCR_f.TIE = 0u;
<a name="l01721"></a>01721             <span class="keywordflow">break</span>;
<a name="l01722"></a>01722         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga339bf38499acae0c40627170ee46b85faf656c35da78ea62824c80d2bc6976d88" title="CSIO RX interrupt.">CsioRxIrq</a>:
<a name="l01723"></a>01723             pstcCsio-&gt;SCR_f.RIE = 0u;
<a name="l01724"></a>01724             <span class="keywordflow">break</span>;
<a name="l01725"></a>01725         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga339bf38499acae0c40627170ee46b85fa031976d26843584ad1fae5f31c5d1d5f" title="CSIO TX idle interrupt.">CsioTxIdleIrq</a>:
<a name="l01726"></a>01726             pstcCsio-&gt;SCR_f.TBIE = 0u;
<a name="l01727"></a>01727             <span class="keywordflow">break</span>;
<a name="l01728"></a>01728         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga339bf38499acae0c40627170ee46b85fae51e3f0d32427e6339c2470db7bafc5f" title="CSIO TX FIFO interrupt.">CsioTxFifoIrq</a>:
<a name="l01729"></a>01729             pstcCsio-&gt;FCR1_f.FTIE = 0u;
<a name="l01730"></a>01730             <span class="keywordflow">break</span>;
<a name="l01731"></a>01731 <span class="preprocessor">    #if (PDL_MCU_CORE == PDL_FM4_CORE) || (PDL_MCU_CORE == PDL_FM0P_CORE)         </span>
<a name="l01732"></a>01732 <span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga339bf38499acae0c40627170ee46b85fa6c5dff36c03723aba6907bad6c81f465" title="CSIO chip selection interrupt.">CsioCsErrIrq</a>:
<a name="l01733"></a>01733             pstcCsio-&gt;SACSR_f.CSEIE = 0u;
<a name="l01734"></a>01734             <span class="keywordflow">break</span>;
<a name="l01735"></a>01735         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga339bf38499acae0c40627170ee46b85faba2e6df4354e47bd9517d17c0c35fb28" title="CSIO serial timer interrupt.">CsioSerialTimerIrq</a>:
<a name="l01736"></a>01736              pstcCsio-&gt;SACSR_f.TINTE = 0u;
<a name="l01737"></a>01737             <span class="keywordflow">break</span>;
<a name="l01738"></a>01738 <span class="preprocessor">    #endif         </span>
<a name="l01739"></a>01739 <span class="preprocessor"></span>        <span class="keywordflow">default</span>:
<a name="l01740"></a>01740             <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l01741"></a>01741     }
<a name="l01742"></a>01742     
<a name="l01743"></a>01743     <span class="keywordflow">return</span> Ok;
<a name="l01744"></a>01744 }
<a name="l01745"></a>01745 
<a name="l01746"></a>01746 <span class="preprocessor">#endif   </span>
<a name="l01747"></a>01747 <span class="preprocessor"></span>
<a name="l01765"></a><a class="code" href="group___mfs_group.html#ga3f39acddef04f14896a6b5dd5accf4d8">01765</a> en_result_t <a class="code" href="group___mfs_group.html#ga3f39acddef04f14896a6b5dd5accf4d8" title="Initialization of a MFS module to activate as CSIO.">Mfs_Csio_Init</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>*         pstcCsio,
<a name="l01766"></a>01766                           <a class="code" href="structstc__mfs__csio__config.html" title="CSIO configuration structure.">stc_mfs_csio_config_t</a>* pstcConfig)
<a name="l01767"></a>01767 {
<a name="l01768"></a>01768     <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData;
<a name="l01769"></a>01769     uint8_t u8Ch;
<a name="l01770"></a>01770     
<a name="l01771"></a>01771     <span class="comment">/* Preset local register variables to zero */</span>
<a name="l01772"></a>01772     stc_mfs_csio_smr_field_t  stcSMR  = { 0u };
<a name="l01773"></a>01773     stc_mfs_csio_scr_field_t  stcSCR  = { 0u };
<a name="l01774"></a>01774     stc_mfs_csio_ssr_field_t  stcSSR  = { 0u };
<a name="l01775"></a>01775     stc_mfs_csio_escr_field_t stcESCR = { 0u };
<a name="l01776"></a>01776 
<a name="l01777"></a>01777     <span class="comment">/* Check for valid pointer and get pointer to internal data struct ... */</span>
<a name="l01778"></a>01778     pstcMfsInternData = <a class="code" href="group___mfs_group.html#gac79c84b0a45258223a917b61d6ae2e7f" title="Return the internal data for a certain CSIO instance.">MfsCsioGetInternDataPtr</a>(pstcCsio);
<a name="l01779"></a>01779     
<a name="l01780"></a>01780     <span class="comment">/* Parameter check and get ptr to internal data struct */</span>
<a name="l01781"></a>01781     <span class="keywordflow">if</span> ((NULL == pstcMfsInternData)
<a name="l01782"></a>01782         ||  (NULL == pstcConfig))
<a name="l01783"></a>01783     {
<a name="l01784"></a>01784         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l01785"></a>01785     }
<a name="l01786"></a>01786 
<a name="l01787"></a>01787     <span class="comment">/* Calculate the channel number */</span>
<a name="l01788"></a>01788     u8Ch = <a class="code" href="group___mfs_group.html#ga25d4c0b8542b70b05e26c58e7bde5221">CsioInstanceToIndex</a>(pstcCsio);
<a name="l01789"></a>01789     
<a name="l01790"></a>01790     <span class="keywordflow">if</span>(u8Ch &gt; 15u)
<a name="l01791"></a>01791     {
<a name="l01792"></a>01792         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l01793"></a>01793     }
<a name="l01794"></a>01794     
<a name="l01795"></a>01795     <span class="comment">/* Set MFS mode in the internal structure */</span>
<a name="l01796"></a>01796     pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a3efa9df8c4b18392bbb53070c40307ea" title="MFS mode.">enMode</a> = <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a80aa44fdcc2615aa0a3c14a189b0f2b4" title="MFS CSIO mode.">MfsCsioMode</a>;
<a name="l01797"></a>01797     
<a name="l01798"></a>01798     <span class="comment">/* Set CSIO mode */</span>
<a name="l01799"></a>01799     stcSMR.MD = 2u;
<a name="l01800"></a>01800 
<a name="l01801"></a>01801     <span class="comment">/* Set master/slave mode */</span>
<a name="l01802"></a>01802     <span class="keywordflow">switch</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a6741d6fbb69eaf2b1130857d227af41a" title="Master or slave mode.">enMsMode</a>)
<a name="l01803"></a>01803     {
<a name="l01804"></a>01804         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggad1262a00bd2cda9134fa7055f730dda7a89584046ac62e7167d785a5e722e7138" title="Master mode (generating serial clock)">CsioMaster</a>:
<a name="l01805"></a>01805             stcSCR.MS = FALSE;  <span class="comment">/* Master mode */</span>
<a name="l01806"></a>01806             <span class="comment">/* Enable SOE */</span>
<a name="l01807"></a>01807             stcSMR.SOE = TRUE;  
<a name="l01808"></a>01808             <span class="comment">/* Enable SCKE */</span>
<a name="l01809"></a>01809             stcSMR.SCKE = TRUE;
<a name="l01810"></a>01810             <span class="keywordflow">break</span>;
<a name="l01811"></a>01811         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggad1262a00bd2cda9134fa7055f730dda7ac09113eefa2507533bab3c7c0992732a" title="Slave mode (external serial clock)">CsioSlave</a>:
<a name="l01812"></a>01812             stcSCR.MS = TRUE;   <span class="comment">/* Slave mode */</span>
<a name="l01813"></a>01813             <span class="comment">/* Enable SOE */</span>
<a name="l01814"></a>01814             stcSMR.SOE = TRUE;  
<a name="l01815"></a>01815             <span class="comment">/* Enable SCKE */</span>
<a name="l01816"></a>01816             stcSMR.SCKE = FALSE; <span class="comment">/* Disable clock output in slave mode */</span>
<a name="l01817"></a>01817             <span class="keywordflow">break</span>;
<a name="l01818"></a>01818         <span class="keywordflow">default</span>:
<a name="l01819"></a>01819             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01820"></a>01820     }
<a name="l01821"></a>01821     
<a name="l01822"></a>01822     
<a name="l01823"></a>01823 
<a name="l01824"></a>01824     <span class="comment">/* Set normal/SPI mode */</span>
<a name="l01825"></a>01825     <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a362a1bf5819b1366f3a56ad58ddd271a" title="CSIO or SPI mode.">enActMode</a>)
<a name="l01826"></a>01826     {
<a name="l01827"></a>01827         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga8671533ab7e08362da25558f5dc2b6f1a77f5aed514d992b5464de1ea861b03f9" title="Normal mode.">CsioActNormalMode</a>:
<a name="l01828"></a>01828             stcSCR.SPI = FALSE; <span class="comment">/* Normal mode */</span>
<a name="l01829"></a>01829             <span class="keywordflow">break</span>;
<a name="l01830"></a>01830         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga8671533ab7e08362da25558f5dc2b6f1a7bde5cafac83328a418e3db52d2fd394" title="SPI mode.">CsioActSpiMode</a>:
<a name="l01831"></a>01831             stcSCR.SPI = TRUE;  <span class="comment">/* SPI mode */</span>
<a name="l01832"></a>01832             <span class="keywordflow">break</span>;
<a name="l01833"></a>01833         <span class="keywordflow">default</span>:
<a name="l01834"></a>01834             <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l01835"></a>01835     }
<a name="l01836"></a>01836 
<a name="l01837"></a>01837     <span class="comment">/* Wait time insertion */</span>
<a name="l01838"></a>01838     <span class="keywordflow">switch</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#abc155844fbdebe66853d145791047451" title="Sync wait time.">enSyncWaitTime</a>)
<a name="l01839"></a>01839     {
<a name="l01840"></a>01840         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga1ae2114b04b2247c0231bdbfde449ba1a32cf64f728b9638c162b075fb93af461" title="0 wait time insertion">CsioSyncWaitZero</a>:
<a name="l01841"></a>01841             stcESCR.WT = 0u;    <span class="comment">/* 0bit */</span>
<a name="l01842"></a>01842             <span class="keywordflow">break</span>;
<a name="l01843"></a>01843         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga1ae2114b04b2247c0231bdbfde449ba1a5ad018543e2d9ee6a6123f2cb41d834d" title="1 wait time insertion">CsioSyncWaitOne</a>:
<a name="l01844"></a>01844             stcESCR.WT = 1u;    <span class="comment">/* 1bit */</span>
<a name="l01845"></a>01845             <span class="keywordflow">break</span>;
<a name="l01846"></a>01846         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga1ae2114b04b2247c0231bdbfde449ba1a9d6a7205d3d68e582213e37b862e2fd1" title="2 wait time insertion">CsioSyncWaitTwo</a>:
<a name="l01847"></a>01847             stcESCR.WT = 2u;   <span class="comment">/* 2bits */</span>
<a name="l01848"></a>01848             <span class="keywordflow">break</span>;
<a name="l01849"></a>01849         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga1ae2114b04b2247c0231bdbfde449ba1a0c7c0be1b3b07fb1218e94ca768945b7" title="3 wait time insertion">CsioSyncWaitThree</a>:
<a name="l01850"></a>01850             stcESCR.WT = 3u;   <span class="comment">/* 3bits */</span>
<a name="l01851"></a>01851             <span class="keywordflow">break</span>;
<a name="l01852"></a>01852         <span class="keywordflow">default</span>:
<a name="l01853"></a>01853             <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l01854"></a>01854     }
<a name="l01855"></a>01855 <span class="preprocessor">#if (PDL_MCU_CORE == PDL_FM0P_CORE) || (PDL_MCU_CORE == PDL_FM4_CORE)  </span>
<a name="l01856"></a>01856 <span class="preprocessor"></span>    stcESCR.L3 = 0u;  <span class="comment">/* Default:less than 13 bits */</span>
<a name="l01857"></a>01857 <span class="preprocessor">#endif    </span>
<a name="l01858"></a>01858 <span class="preprocessor"></span>
<a name="l01859"></a>01859     <span class="comment">/* Set Data bit length (5-16,20,24,32 bits) */</span>
<a name="l01860"></a>01860     <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a87d72b1d1500060f36fcf9823fd7bb67" title="5..16 Bit Character Length, see description of en_csio_data_len_t">enDataLength</a>)
<a name="l01861"></a>01861     {
<a name="l01862"></a>01862         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga17b22e4ddc57e4561bf07846af9d0ddba222399d7e79ab7d9481ed68a7194e85a" title="5 Bit character length">CsioFiveBits</a>:
<a name="l01863"></a>01863             stcESCR.L = 1u;
<a name="l01864"></a>01864             <span class="keywordflow">break</span>;
<a name="l01865"></a>01865         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga17b22e4ddc57e4561bf07846af9d0ddba114400551830841e436ffb10e069b63a" title="6 Bit character length">CsioSixBits</a>:
<a name="l01866"></a>01866             stcESCR.L = 2u;
<a name="l01867"></a>01867             <span class="keywordflow">break</span>;
<a name="l01868"></a>01868         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga17b22e4ddc57e4561bf07846af9d0ddba4133fb1b672bd29fd1fb6fef73ee3690" title="7 Bit character length">CsioSevenBits</a>:
<a name="l01869"></a>01869             stcESCR.L = 3u;
<a name="l01870"></a>01870             <span class="keywordflow">break</span>;   
<a name="l01871"></a>01871         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga17b22e4ddc57e4561bf07846af9d0ddba0a66474b7c33b7ee99457a735a50ff6d" title="8 Bit character length">CsioEightBits</a>:
<a name="l01872"></a>01872             stcESCR.L = 0u;
<a name="l01873"></a>01873             <span class="keywordflow">break</span>;
<a name="l01874"></a>01874         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga17b22e4ddc57e4561bf07846af9d0ddba9ce63d5c0f41c4e6d21f157417b38d94" title="9 Bit character length">CsioNineBits</a>:
<a name="l01875"></a>01875             stcESCR.L = 4u;
<a name="l01876"></a>01876             <span class="keywordflow">break</span>;
<a name="l01877"></a>01877 <span class="preprocessor">    #if (PDL_MCU_CORE == PDL_FM0P_CORE) || (PDL_MCU_CORE == PDL_FM4_CORE)           </span>
<a name="l01878"></a>01878 <span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga17b22e4ddc57e4561bf07846af9d0ddba0cf65575c474438684a89be2d21558db" title="10 Bit character length">CsioTenBits</a>:
<a name="l01879"></a>01879             stcESCR.L = 5u;
<a name="l01880"></a>01880             <span class="keywordflow">break</span>;
<a name="l01881"></a>01881         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga17b22e4ddc57e4561bf07846af9d0ddba483dc7e2634bdfa901932f225800875d" title="11 Bit character length">CsioElevenBits</a>:
<a name="l01882"></a>01882             stcESCR.L = 6u;
<a name="l01883"></a>01883             <span class="keywordflow">break</span>;
<a name="l01884"></a>01884         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga17b22e4ddc57e4561bf07846af9d0ddba1ad936ada0c60eb28ae960033a149852" title="12 Bit character length">CsioTwelveBits</a>:
<a name="l01885"></a>01885             stcESCR.L = 7u;
<a name="l01886"></a>01886             <span class="keywordflow">break</span>;
<a name="l01887"></a>01887         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga17b22e4ddc57e4561bf07846af9d0ddba6b49780e13f093598401197b4f438076" title="13 Bit character length">CsioThirteenBits</a>:
<a name="l01888"></a>01888             stcESCR.L = 0u;
<a name="l01889"></a>01889             stcESCR.L3 = TRUE;  <span class="comment">/* More than 12 bits */</span>
<a name="l01890"></a>01890             <span class="keywordflow">break</span>;
<a name="l01891"></a>01891         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga17b22e4ddc57e4561bf07846af9d0ddba3f669f1cca0c2c9c831671d91ae2214d" title="14 Bit character length">CsioFourteenBits</a>:
<a name="l01892"></a>01892             stcESCR.L = 1u;
<a name="l01893"></a>01893             stcESCR.L3 = TRUE;  <span class="comment">/* More than 12 bits */</span>
<a name="l01894"></a>01894             <span class="keywordflow">break</span>;
<a name="l01895"></a>01895         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga17b22e4ddc57e4561bf07846af9d0ddbac4e6790ea120f7dac953d069b90f8e1e" title="15 Bit character length">CsioFifteenBits</a>:
<a name="l01896"></a>01896             stcESCR.L = 2u;
<a name="l01897"></a>01897             stcESCR.L3 = TRUE;  <span class="comment">/* More than 12 bits */</span>
<a name="l01898"></a>01898             <span class="keywordflow">break</span>;
<a name="l01899"></a>01899         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga17b22e4ddc57e4561bf07846af9d0ddbabafb03b9a4afd873a895fd4f996aa4b8" title="16 Bit character length">CsioSixteenBits</a>:
<a name="l01900"></a>01900             stcESCR.L = 3u;
<a name="l01901"></a>01901             stcESCR.L3 = TRUE;  <span class="comment">/* More than 12 bits */</span>
<a name="l01902"></a>01902             <span class="keywordflow">break</span>;
<a name="l01903"></a>01903 <span class="preprocessor">    #endif        </span>
<a name="l01904"></a>01904 <span class="preprocessor"></span>        <span class="keywordflow">default</span>:
<a name="l01905"></a>01905             <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l01906"></a>01906     }
<a name="l01907"></a>01907     <span class="comment">/* Set Bit direction (LSB/MSB) */</span>    
<a name="l01908"></a>01908     <span class="keywordflow">switch</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a1195724c6b18c4c272a047938d2de1b1" title="Bit direction.">enBitDirection</a>)
<a name="l01909"></a>01909     {
<a name="l01910"></a>01910         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga9ca51be743c1a90bdf584f1a261c3139a72212945a21c6686b63498e2c87f813e" title="LSB first.">CsioDataLsbFirst</a>:
<a name="l01911"></a>01911             stcSMR.BDS = FALSE;
<a name="l01912"></a>01912             <span class="keywordflow">break</span>;
<a name="l01913"></a>01913         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga9ca51be743c1a90bdf584f1a261c3139a61040a783dd11d966279be33ff663f4c" title="MSB first.">CsioDataMsbFirst</a>:
<a name="l01914"></a>01914             stcSMR.BDS = TRUE;
<a name="l01915"></a>01915             <span class="keywordflow">break</span>;
<a name="l01916"></a>01916         <span class="keywordflow">default</span>:
<a name="l01917"></a>01917             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01918"></a>01918     }
<a name="l01919"></a>01919 
<a name="l01920"></a>01920     <span class="comment">/* Set Signal system (SCK Mark Level) */</span>
<a name="l01921"></a>01921     <span class="keywordflow">if</span> (TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a8d234e3b7eff19242ee382fde558b8cb" title="FALSE: SCK Mark Level High, TRUE: SCK Mark Level Low.">bInvertClk</a>)
<a name="l01922"></a>01922     {
<a name="l01923"></a>01923         stcSMR.SCINV = TRUE;    <span class="comment">/* SCK Make Level : Low */</span>
<a name="l01924"></a>01924     }
<a name="l01925"></a>01925     <span class="keywordflow">else</span>
<a name="l01926"></a>01926     {
<a name="l01927"></a>01927         stcSMR.SCINV = FALSE;   <span class="comment">/* SCK Make Level : High */</span>
<a name="l01928"></a>01928     }
<a name="l01929"></a>01929 
<a name="l01930"></a>01930     stcSSR.REC = TRUE;          <span class="comment">/* Clear received error flag */</span>
<a name="l01931"></a>01931 
<a name="l01932"></a>01932     <span class="comment">/* Set Baudrate */</span>
<a name="l01933"></a>01933     (void)<a class="code" href="group___mfs_group.html#ga078dd2913ffbdf2ededdadc508a9597a" title="Set the baudrate of CSIO.">Mfs_Csio_SetBaudRate</a>(pstcCsio, pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a02de7678fcf4d4ee36160e20baefb31a" title="Baud rate (bps)">u32BaudRate</a>);
<a name="l01934"></a>01934     <span class="comment">/* Set registers value */</span>
<a name="l01935"></a>01935     pstcCsio-&gt;SMR_f  = stcSMR;
<a name="l01936"></a>01936     pstcCsio-&gt;SCR_f  = stcSCR;
<a name="l01937"></a>01937     pstcCsio-&gt;ESCR_f = stcESCR;
<a name="l01938"></a>01938     pstcCsio-&gt;SSR_f  = stcSSR;
<a name="l01939"></a>01939     
<a name="l01940"></a>01940 <span class="preprocessor">#if (PDL_MCU_CORE == PDL_FM0P_CORE) || (PDL_MCU_CORE == PDL_FM4_CORE)  </span>
<a name="l01941"></a>01941 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(NULL != pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a43373969252ebee151c01a7f1617f2aa" title="Pointer to serial timer configuration structure, if set to NULL, nothing will be done.">pstcSerialTimer</a>)  <span class="comment">/* Use serial timer? */</span>
<a name="l01942"></a>01942     {
<a name="l01943"></a>01943         <span class="comment">/* Set serial timer clock */</span>
<a name="l01944"></a>01944         <span class="keywordflow">switch</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a43373969252ebee151c01a7f1617f2aa" title="Pointer to serial timer configuration structure, if set to NULL, nothing will be done.">pstcSerialTimer</a>-&gt;<a class="code" href="structstc__csio__serial__timer.html#a52504abea5039190bdc490f0955093b8" title="Clock division.">enClkDiv</a>)
<a name="l01945"></a>01945         {
<a name="l01946"></a>01946             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga3113f554e7ca9ea7c8b7425c2f2bbdbaa53011e80652bc22b3ece9c54872d8466" title="Serial Timer clock = PCLK.">CsioTimerNoDiv</a>:
<a name="l01947"></a>01947                 pstcCsio-&gt;SACSR_f.TDIV = 0u;
<a name="l01948"></a>01948                 <span class="keywordflow">break</span>;
<a name="l01949"></a>01949             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga3113f554e7ca9ea7c8b7425c2f2bbdbaaaa0dfc95f7cfb98282081fa38c6e0270" title="Serial Timer clock = PCLK/2.">CsioTimerDiv2</a>:
<a name="l01950"></a>01950                 pstcCsio-&gt;SACSR_f.TDIV = 1u;
<a name="l01951"></a>01951                 <span class="keywordflow">break</span>;
<a name="l01952"></a>01952             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga3113f554e7ca9ea7c8b7425c2f2bbdbaa806aafc84c95470a90d911646e35acdc" title="Serial Timer clock = PCLK/4.">CsioTimerDiv4</a>:
<a name="l01953"></a>01953                 pstcCsio-&gt;SACSR_f.TDIV = 2u;
<a name="l01954"></a>01954                 <span class="keywordflow">break</span>;
<a name="l01955"></a>01955             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga3113f554e7ca9ea7c8b7425c2f2bbdbaa64478166656e74df65db8dceb99aa5a6" title="Serial Timer clock = PCLK/8.">CsioTimerDiv8</a>: 
<a name="l01956"></a>01956                 pstcCsio-&gt;SACSR_f.TDIV = 3u;
<a name="l01957"></a>01957                 <span class="keywordflow">break</span>;
<a name="l01958"></a>01958             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga3113f554e7ca9ea7c8b7425c2f2bbdbaa0d04c61506167912abe10b0f5594015e" title="Serial Timer clock = PCLK/16.">CsioTimerDiv16</a>:
<a name="l01959"></a>01959                 pstcCsio-&gt;SACSR_f.TDIV = 4u;
<a name="l01960"></a>01960                 <span class="keywordflow">break</span>;
<a name="l01961"></a>01961             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga3113f554e7ca9ea7c8b7425c2f2bbdbaa6bc43a7718866492ea0091da878d2cc3" title="Serial Timer clock = PCLK/32.">CsioTimerDiv32</a>: 
<a name="l01962"></a>01962                 pstcCsio-&gt;SACSR_f.TDIV = 5u;
<a name="l01963"></a>01963                 <span class="keywordflow">break</span>;
<a name="l01964"></a>01964             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga3113f554e7ca9ea7c8b7425c2f2bbdbaab3d8e0238dcf16c7b7e2f17a8c0681dd" title="Serial Timer clock = PCLK/64.">CsioTimerDiv64</a>:
<a name="l01965"></a>01965                 pstcCsio-&gt;SACSR_f.TDIV = 6u;
<a name="l01966"></a>01966                 <span class="keywordflow">break</span>;
<a name="l01967"></a>01967             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga3113f554e7ca9ea7c8b7425c2f2bbdbaa3c8e829fa321cce7e5189dad3766969d" title="Serial Timer clock = PCLK/128.">CsioTimerDiv128</a>: 
<a name="l01968"></a>01968                 pstcCsio-&gt;SACSR_f.TDIV = 7u;
<a name="l01969"></a>01969                 <span class="keywordflow">break</span>;
<a name="l01970"></a>01970             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga3113f554e7ca9ea7c8b7425c2f2bbdbaafa22530bf91c7ca37e9baa44ad183ba8" title="Serial Timer clock = PCLK/256.">CsioTimerDiv256</a>: 
<a name="l01971"></a>01971                 pstcCsio-&gt;SACSR_f.TDIV = 8u;
<a name="l01972"></a>01972                 <span class="keywordflow">break</span>;    
<a name="l01973"></a>01973             <span class="keywordflow">default</span>:
<a name="l01974"></a>01974                 <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01975"></a>01975         }
<a name="l01976"></a>01976         
<a name="l01977"></a>01977         <span class="comment">/* Transfer count */</span>
<a name="l01978"></a>01978         pstcCsio-&gt;TBYTE0 = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a43373969252ebee151c01a7f1617f2aa" title="Pointer to serial timer configuration structure, if set to NULL, nothing will be done.">pstcSerialTimer</a>-&gt;<a class="code" href="structstc__csio__serial__timer.html#a5a2abcc01c7dd15b948fe417518b82b8" title="Transfer byte count.">u8TransferByteCnt</a>;
<a name="l01979"></a>01979         
<a name="l01980"></a>01980         <span class="comment">/* Timer compare value */</span>
<a name="l01981"></a>01981         pstcCsio-&gt;STMCR = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a43373969252ebee151c01a7f1617f2aa" title="Pointer to serial timer configuration structure, if set to NULL, nothing will be done.">pstcSerialTimer</a>-&gt;<a class="code" href="structstc__csio__serial__timer.html#af969664ad0d2359a414686ed2d57cca5" title="The compare value depending on which the transfer starts.">u16CompareVal</a>;
<a name="l01982"></a>01982         
<a name="l01983"></a>01983         <span class="comment">/* Enable sync transfer */</span>
<a name="l01984"></a>01984         pstcCsio-&gt;SACSR_f.TSYNE = 1u;
<a name="l01985"></a>01985     }
<a name="l01986"></a>01986     
<a name="l01987"></a>01987     <span class="keywordflow">if</span>(NULL != pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>)  <span class="comment">/* Use chip selection function? */</span>
<a name="l01988"></a>01988     {
<a name="l01989"></a>01989         <span class="keywordflow">if</span>(<a class="code" href="group___mfs_group.html#ggad1262a00bd2cda9134fa7055f730dda7a89584046ac62e7167d785a5e722e7138" title="Master mode (generating serial clock)">CsioMaster</a> == pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a6741d6fbb69eaf2b1130857d227af41a" title="Master or slave mode.">enMsMode</a>)
<a name="l01990"></a>01990         {
<a name="l01991"></a>01991             <span class="comment">/* Select CS start pin */</span>
<a name="l01992"></a>01992             <span class="keywordflow">switch</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>-&gt;<a class="code" href="structstc__csio__cs.html#a808fcdb61bb75f23a52618c4a2d7b4ec" title="Chip selecetion pin selection.">enCsStartPin</a>)
<a name="l01993"></a>01993             {
<a name="l01994"></a>01994                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga136fd8e9d65c66c1b979ff307c23ac6bab05aafe4b8f0f81f751e41e054c050a4" title="Use SCS0 as chip selection pin.">CsPinScs0</a>:
<a name="l01995"></a>01995                     pstcCsio-&gt;SCSCR_f.SST = 0u;
<a name="l01996"></a>01996                     <span class="keywordflow">break</span>;
<a name="l01997"></a>01997                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga136fd8e9d65c66c1b979ff307c23ac6ba76d615cef47da60dff240101c05f00ee" title="Use SCS1 as chip selection pin.">CsPinScs1</a>:
<a name="l01998"></a>01998                     pstcCsio-&gt;SCSCR_f.SST = 1u;
<a name="l01999"></a>01999                     <span class="keywordflow">break</span>;
<a name="l02000"></a>02000                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga136fd8e9d65c66c1b979ff307c23ac6bab5b25b29c836349f03b4c5369550d92c" title="Use SCS2 as chip selection pin.">CsPinScs2</a>:
<a name="l02001"></a>02001                     pstcCsio-&gt;SCSCR_f.SST = 2u;
<a name="l02002"></a>02002                     <span class="keywordflow">break</span>;
<a name="l02003"></a>02003                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga136fd8e9d65c66c1b979ff307c23ac6ba2b4798a6e19d64278396f18d21e5d8c5" title="Use SCS3 as chip selection pin.">CsPinScs3</a>:
<a name="l02004"></a>02004                     pstcCsio-&gt;SCSCR_f.SST = 3u;
<a name="l02005"></a>02005                     <span class="keywordflow">break</span>;
<a name="l02006"></a>02006                 <span class="keywordflow">default</span>:
<a name="l02007"></a>02007                     <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02008"></a>02008             }
<a name="l02009"></a>02009             
<a name="l02010"></a>02010             <span class="comment">/* Select CS end pin */</span>
<a name="l02011"></a>02011             <span class="keywordflow">switch</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>-&gt;<a class="code" href="structstc__csio__cs.html#aa3f0198bd0631ab649a2380684760d62" title="Chip selecetion pin selection.">enCsEndPin</a>)
<a name="l02012"></a>02012             {
<a name="l02013"></a>02013                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga136fd8e9d65c66c1b979ff307c23ac6bab05aafe4b8f0f81f751e41e054c050a4" title="Use SCS0 as chip selection pin.">CsPinScs0</a>:
<a name="l02014"></a>02014                     pstcCsio-&gt;SCSCR_f.SED = 0u;
<a name="l02015"></a>02015                     <span class="keywordflow">break</span>;
<a name="l02016"></a>02016                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga136fd8e9d65c66c1b979ff307c23ac6ba76d615cef47da60dff240101c05f00ee" title="Use SCS1 as chip selection pin.">CsPinScs1</a>:
<a name="l02017"></a>02017                     pstcCsio-&gt;SCSCR_f.SED = 1u;
<a name="l02018"></a>02018                     <span class="keywordflow">break</span>;
<a name="l02019"></a>02019                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga136fd8e9d65c66c1b979ff307c23ac6bab5b25b29c836349f03b4c5369550d92c" title="Use SCS2 as chip selection pin.">CsPinScs2</a>:
<a name="l02020"></a>02020                     pstcCsio-&gt;SCSCR_f.SED = 2u;
<a name="l02021"></a>02021                     <span class="keywordflow">break</span>;
<a name="l02022"></a>02022                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga136fd8e9d65c66c1b979ff307c23ac6ba2b4798a6e19d64278396f18d21e5d8c5" title="Use SCS3 as chip selection pin.">CsPinScs3</a>:
<a name="l02023"></a>02023                     pstcCsio-&gt;SCSCR_f.SED = 3u;
<a name="l02024"></a>02024                     <span class="keywordflow">break</span>;
<a name="l02025"></a>02025                 <span class="keywordflow">default</span>:
<a name="l02026"></a>02026                     <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02027"></a>02027             }
<a name="l02028"></a>02028             
<a name="l02029"></a>02029             <span class="comment">/* Set transfer count of each SCS pin */</span>
<a name="l02030"></a>02030             pstcCsio-&gt;TBYTE0 = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>-&gt;<a class="code" href="structstc__csio__cs.html#aa9cd1ae330fb97c627300db1e3342a15" title="SCS0 Transfer byte count.">u8Scs0TransferByteCnt</a>;
<a name="l02031"></a>02031             pstcCsio-&gt;TBYTE1 = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>-&gt;<a class="code" href="structstc__csio__cs.html#a7abc90a588035b830fcdf9d4f50f9982" title="SCS1 Transfer byte count.">u8Scs1TransferByteCnt</a>;
<a name="l02032"></a>02032             pstcCsio-&gt;TBYTE2 = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>-&gt;<a class="code" href="structstc__csio__cs.html#ab7604299ed4ea491d5d4c5cd96c9db50" title="SCS2 Transfer byte count.">u8Scs2TransferByteCnt</a>;
<a name="l02033"></a>02033             pstcCsio-&gt;TBYTE3 = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>-&gt;<a class="code" href="structstc__csio__cs.html#a5c678b9c378866654155f6b23bcf0f0a" title="SCS3 Transfer byte count.">u8Scs3TransferByteCnt</a>;
<a name="l02034"></a>02034             
<a name="l02035"></a>02035             <span class="comment">/* Select CS active level (only for SCS0) */</span>
<a name="l02036"></a>02036             <span class="keywordflow">switch</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>-&gt;<a class="code" href="structstc__csio__cs.html#a324a38d9ad36f16ea5d97b46cc8c3db4" title="Active level selection, only available for SCS0.">enLevel</a>)
<a name="l02037"></a>02037             {
<a name="l02038"></a>02038                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaaa088b290e771968d1fd764cbbac3048a08def44b6c0bc03c44ca214faf29d988" title="Set low as active level for SCS0 pin.">CsHighActive</a>:
<a name="l02039"></a>02039                     pstcCsio-&gt;SCSCR_f.CSLVL = 0u;
<a name="l02040"></a>02040                     <span class="keywordflow">break</span>;
<a name="l02041"></a>02041                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaaa088b290e771968d1fd764cbbac3048a0256f3c990c39db2f0303baf21a0aa88" title="Set high as active level for SCS0 pin.">CsLowActive</a>:
<a name="l02042"></a>02042                     pstcCsio-&gt;SCSCR_f.CSLVL = 1u;
<a name="l02043"></a>02043                     <span class="keywordflow">break</span>;
<a name="l02044"></a>02044                 <span class="keywordflow">default</span>:
<a name="l02045"></a>02045                     <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02046"></a>02046             }
<a name="l02047"></a>02047             
<a name="l02048"></a>02048             <span class="comment">/* Active hold or not */</span>
<a name="l02049"></a>02049             pstcCsio-&gt;SCSCR_f.SCAM = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>-&gt;<a class="code" href="structstc__csio__cs.html#a1d4f6829cd97d01afc3500565418abe9" title="FALSE: don&#39;t hold active status, TRUE: hold active status until all bytes are transfered.">bActiveHold</a>;
<a name="l02050"></a>02050             
<a name="l02051"></a>02051             <span class="comment">/* Set chip selection clock */</span>
<a name="l02052"></a>02052             <span class="keywordflow">switch</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>-&gt;<a class="code" href="structstc__csio__cs.html#ab90675cf6b3178cebc02da43db8aa8ae" title="Chip selecetion clock division.">enClkDiv</a>)
<a name="l02053"></a>02053             {
<a name="l02054"></a>02054                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga3602369e0d2119849b3626ec4bff9de0ac396a2849d31771e37f9b38e6999e010" title="Chip selection clock = PCLK.">CsClkNoDiv</a>:
<a name="l02055"></a>02055                     pstcCsio-&gt;SCSCR_f.CDIV = 0u;
<a name="l02056"></a>02056                     <span class="keywordflow">break</span>;
<a name="l02057"></a>02057                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga3602369e0d2119849b3626ec4bff9de0aa356c0aaeb48c58f79469c2630f11e39" title="Chip selection clock = PCLK/2.">CsClkDiv2</a>:
<a name="l02058"></a>02058                     pstcCsio-&gt;SCSCR_f.CDIV = 1u;
<a name="l02059"></a>02059                     <span class="keywordflow">break</span>;
<a name="l02060"></a>02060                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga3602369e0d2119849b3626ec4bff9de0a0a11c45ea05be4aa0deb2923e6cf5ade" title="Chip selection clock = PCLK/4.">CsClkDiv4</a>:
<a name="l02061"></a>02061                     pstcCsio-&gt;SCSCR_f.CDIV = 2u;
<a name="l02062"></a>02062                     <span class="keywordflow">break</span>;
<a name="l02063"></a>02063                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga3602369e0d2119849b3626ec4bff9de0abe5c7af9c3f2b51cd5f8fabd7ba13840" title="Chip selection clock = PCLK/8.">CsClkDiv8</a>:
<a name="l02064"></a>02064                     pstcCsio-&gt;SCSCR_f.CDIV = 3u;
<a name="l02065"></a>02065                     <span class="keywordflow">break</span>;
<a name="l02066"></a>02066                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga3602369e0d2119849b3626ec4bff9de0ab0fffd40456641135e6485b6043c2ddc" title="Chip selection clock = PCLK/16.">CsClkDiv16</a>:
<a name="l02067"></a>02067                     pstcCsio-&gt;SCSCR_f.CDIV = 4u;
<a name="l02068"></a>02068                     <span class="keywordflow">break</span>;
<a name="l02069"></a>02069                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga3602369e0d2119849b3626ec4bff9de0a0ad4cdf817091930a67a63bc29b2188a" title="Chip selection clock = PCLK/32.">CsClkDiv32</a>:
<a name="l02070"></a>02070                     pstcCsio-&gt;SCSCR_f.CDIV = 5u;
<a name="l02071"></a>02071                     <span class="keywordflow">break</span>;
<a name="l02072"></a>02072                 <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga3602369e0d2119849b3626ec4bff9de0a850a5a1b5b28f8ef627dcfdea9e382b7" title="Chip selection clock = PCLK/64.">CsClkDiv64</a>:
<a name="l02073"></a>02073                     pstcCsio-&gt;SCSCR_f.CDIV = 6u;
<a name="l02074"></a>02074                     <span class="keywordflow">break</span>;
<a name="l02075"></a>02075                 <span class="keywordflow">default</span>:
<a name="l02076"></a>02076                     <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02077"></a>02077             }
<a name="l02078"></a>02078             <span class="comment">/* Set chip selection timing */</span>
<a name="l02079"></a>02079             pstcCsio-&gt;SCSTR1 = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>-&gt;<a class="code" href="structstc__csio__cs.html#a75e4c00228109a5f775543ca75143144" title="Chip selecetion delay time.">u8CsSetupDelayTime</a>;
<a name="l02080"></a>02080             pstcCsio-&gt;SCSTR0 = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>-&gt;<a class="code" href="structstc__csio__cs.html#a69a17ab78cb214194828d318be904f91" title="Chip selecetion hold time.">u8CsHoldDelayTime</a>;
<a name="l02081"></a>02081             pstcCsio-&gt;SCSTR32 = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>-&gt;<a class="code" href="structstc__csio__cs.html#a8fc10b95f8384298007d0d9bd033a670" title="Chip selecetion deselection time (gap between two bytes&#39;s transfer)">u16CsDeselectTime</a>;
<a name="l02082"></a>02082         }
<a name="l02083"></a>02083         
<a name="l02084"></a>02084         <span class="comment">/* Enable SCS pin */</span>
<a name="l02085"></a>02085         pstcCsio-&gt;SCSCR_f.CSEN0 = ((pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>-&gt;<a class="code" href="structstc__csio__cs.html#a3bdd603f90976552c150c27f23112f22" title="TRUE: SCS0 Enable.">bScs0En</a> == TRUE) ? 1u : 0u);
<a name="l02086"></a>02086         pstcCsio-&gt;SCSCR_f.CSEN1 = ((pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>-&gt;<a class="code" href="structstc__csio__cs.html#ac2d73e35ee57135e16279f36c0ca57b0" title="TRUE: SCS1 Enable.">bScs1En</a> == TRUE) ? 1u : 0u);
<a name="l02087"></a>02087         pstcCsio-&gt;SCSCR_f.CSEN2 = ((pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>-&gt;<a class="code" href="structstc__csio__cs.html#a052f8d81ee34d9c20a116fc3063b2954" title="TRUE: SCS2 Enable.">bScs2En</a> == TRUE) ? 1u : 0u);
<a name="l02088"></a>02088         pstcCsio-&gt;SCSCR_f.CSEN3 = ((pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a73cf23d30c0cbc6c653ed0d0e346fa45" title="Pointer to chip selection configuration structure, if set to NULL, nothing will be done...">pstcCsConfig</a>-&gt;<a class="code" href="structstc__csio__cs.html#a7eeceb48dceddb3436228321185d8b08" title="TRUE: SCS3 Enable.">bScs3En</a> == TRUE) ? 1u : 0u);
<a name="l02089"></a>02089         
<a name="l02090"></a>02090         <span class="keywordflow">if</span>(<a class="code" href="group___mfs_group.html#ggad1262a00bd2cda9134fa7055f730dda7a89584046ac62e7167d785a5e722e7138" title="Master mode (generating serial clock)">CsioMaster</a> == pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a6741d6fbb69eaf2b1130857d227af41a" title="Master or slave mode.">enMsMode</a>)
<a name="l02091"></a>02091         {
<a name="l02092"></a>02092             <span class="comment">/* Enable CS pins output */</span>
<a name="l02093"></a>02093             pstcCsio-&gt;SCSCR_f.CSOE = 1u;
<a name="l02094"></a>02094         }
<a name="l02095"></a>02095         <span class="keywordflow">else</span>
<a name="l02096"></a>02096         {
<a name="l02097"></a>02097             <span class="comment">/* Disable CS pins output */</span>
<a name="l02098"></a>02098             pstcCsio-&gt;SCSCR_f.CSOE = 0u;
<a name="l02099"></a>02099         }
<a name="l02100"></a>02100     }
<a name="l02101"></a>02101 <span class="preprocessor">#endif</span>
<a name="l02102"></a>02102 <span class="preprocessor"></span>    
<a name="l02103"></a>02103     <span class="keywordflow">if</span>(NULL != pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#aa091c03d2eb888d3ffa4bb35a19d44f6" title="Pointer to FIFO configuration structure, if set to NULL, nothing will be done.">pstcFifoConfig</a>) <span class="comment">/* Use FIFO function? */</span>
<a name="l02104"></a>02104     {
<a name="l02105"></a>02105         <span class="comment">/* Reset FIFO */</span>
<a name="l02106"></a>02106         pstcCsio-&gt;FCR0_f.FCL1 = 0u;
<a name="l02107"></a>02107         pstcCsio-&gt;FCR0_f.FCL2 = 0u;
<a name="l02108"></a>02108         <span class="comment">/* Enable FIFO receive Idle detection */</span>
<a name="l02109"></a>02109         pstcCsio-&gt;FCR1_f.FRIIE = 1;
<a name="l02110"></a>02110         <span class="comment">/* Selection TX and RX FIFO  */</span>
<a name="l02111"></a>02111         <span class="keywordflow">switch</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#aa091c03d2eb888d3ffa4bb35a19d44f6" title="Pointer to FIFO configuration structure, if set to NULL, nothing will be done.">pstcFifoConfig</a>-&gt;<a class="code" href="structstc__mfs__fifo__config.html#a57522e8de00d79ae7f63cb81aedb9e5b" title="FIFO selection, see en_mfs_fifo_sel_t for details.">enFifoSel</a>)
<a name="l02112"></a>02112         {
<a name="l02113"></a>02113             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa75ef033bccb72dc698fbdde1559c580a3b86d2138912f3c9678856ac2a0dc56c" title="Transmit FIFO:FIFO1, Received FIFO:FIFO2.">MfsTxFifo1RxFifo2</a>:
<a name="l02114"></a>02114                 pstcCsio-&gt;FCR1_f.FSEL = 0u;
<a name="l02115"></a>02115                 <span class="keywordflow">break</span>;
<a name="l02116"></a>02116             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa75ef033bccb72dc698fbdde1559c580a71003bf541f6873ac786ea6b31b9a046" title="Transmit FIFO:FIFO2, Received FIFO:FIFO1.">MfsTxFifo2RxFifo1</a>:
<a name="l02117"></a>02117                 pstcCsio-&gt;FCR1_f.FSEL = 1u;
<a name="l02118"></a>02118                 <span class="keywordflow">break</span>;
<a name="l02119"></a>02119             <span class="keywordflow">default</span>:
<a name="l02120"></a>02120                <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l02121"></a>02121         }
<a name="l02122"></a>02122         <span class="comment">/* Set FIFO count */</span>
<a name="l02123"></a>02123         pstcCsio-&gt;FBYTE1 = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#aa091c03d2eb888d3ffa4bb35a19d44f6" title="Pointer to FIFO configuration structure, if set to NULL, nothing will be done.">pstcFifoConfig</a>-&gt;<a class="code" href="structstc__mfs__fifo__config.html#ac2b77d76431bbc7f1fdf7fc88d17a2f6" title="Transfer data count for FIFO1.">u8ByteCount1</a>;
<a name="l02124"></a>02124         pstcCsio-&gt;FBYTE2 = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#aa091c03d2eb888d3ffa4bb35a19d44f6" title="Pointer to FIFO configuration structure, if set to NULL, nothing will be done.">pstcFifoConfig</a>-&gt;<a class="code" href="structstc__mfs__fifo__config.html#a1252320650a64b39c87bfabfc1d420bd" title="Transfer data count for FIFO2.">u8ByteCount2</a>;
<a name="l02125"></a>02125         <span class="comment">/* Enable FIFO  */</span>
<a name="l02126"></a>02126         pstcCsio-&gt;FCR0_f.FE1 = 1u;
<a name="l02127"></a>02127         pstcCsio-&gt;FCR0_f.FE2 = 1u;
<a name="l02128"></a>02128     }
<a name="l02129"></a>02129 
<a name="l02130"></a>02130 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_MFS0 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS8 == PDL_ON) ||  \</span>
<a name="l02131"></a>02131 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS1 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS9 == PDL_ON) ||  \</span>
<a name="l02132"></a>02132 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS2 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS10 == PDL_ON) || \</span>
<a name="l02133"></a>02133 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS3 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS11 == PDL_ON) || \</span>
<a name="l02134"></a>02134 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS4 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS12 == PDL_ON) || \</span>
<a name="l02135"></a>02135 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS5 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS13 == PDL_ON) || \</span>
<a name="l02136"></a>02136 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS6 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS14 == PDL_ON) || \</span>
<a name="l02137"></a>02137 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS7 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS15 == PDL_ON)         </span>
<a name="l02138"></a>02138 <span class="preprocessor"></span>    <span class="comment">/* Configure interrupts */</span>
<a name="l02139"></a>02139     <span class="keywordflow">if</span>(NULL != pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#af66a8d5263f9c1a220b477af421702aa" title="Pointer to CSIO interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>)
<a name="l02140"></a>02140     { 
<a name="l02141"></a>02141         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#af66a8d5263f9c1a220b477af421702aa" title="Pointer to CSIO interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__csio__irq__en.html#af045726c4197374f4d9ad38ba0c10da9" title="CSIO RX interrupt.">bRxIrq</a>)
<a name="l02142"></a>02142         {
<a name="l02143"></a>02143             pstcCsio-&gt;SCR_f.RIE = 1u;   
<a name="l02144"></a>02144         }
<a name="l02145"></a>02145         
<a name="l02146"></a>02146         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#af66a8d5263f9c1a220b477af421702aa" title="Pointer to CSIO interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__csio__irq__en.html#a9225483d09ffac6ffd1a8efee3a27aaa" title="CSIO TX interrupt.">bTxIrq</a>)
<a name="l02147"></a>02147         {
<a name="l02148"></a>02148             pstcCsio-&gt;SCR_f.TIE = 1u;
<a name="l02149"></a>02149         }
<a name="l02150"></a>02150         
<a name="l02151"></a>02151         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#af66a8d5263f9c1a220b477af421702aa" title="Pointer to CSIO interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__csio__irq__en.html#ab20055e6900c7bf9b89e28d7db325691" title="CSIO TX idle interrupt.">bTxIdleIrq</a>)
<a name="l02152"></a>02152         {
<a name="l02153"></a>02153             pstcCsio-&gt;SCR_f.TBIE = 1u;
<a name="l02154"></a>02154         }
<a name="l02155"></a>02155         
<a name="l02156"></a>02156         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#af66a8d5263f9c1a220b477af421702aa" title="Pointer to CSIO interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__csio__irq__en.html#a9a54ea9dc253444060a1c09cbbcc6b16" title="CSIO TX FIFO interrupt.">bTxFifoIrq</a>)
<a name="l02157"></a>02157         {
<a name="l02158"></a>02158             pstcCsio-&gt;FCR1_f.FTIE = 1u;
<a name="l02159"></a>02159         }
<a name="l02160"></a>02160 <span class="preprocessor">    #if (PDL_MCU_CORE == PDL_FM0P_CORE) || (PDL_MCU_CORE == PDL_FM4_CORE)      </span>
<a name="l02161"></a>02161 <span class="preprocessor"></span>        <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#af66a8d5263f9c1a220b477af421702aa" title="Pointer to CSIO interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__csio__irq__en.html#a00bb13f25dcb097cb9954750284991f6" title="CSIO chip selection interrupt.">bCsErrIrq</a>) 
<a name="l02162"></a>02162         {
<a name="l02163"></a>02163             pstcCsio-&gt;SACSR_f.CSEIE = 1u;
<a name="l02164"></a>02164         }
<a name="l02165"></a>02165         
<a name="l02166"></a>02166         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#af66a8d5263f9c1a220b477af421702aa" title="Pointer to CSIO interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__csio__irq__en.html#a1c5e9874c4722b70f2385e90489f5737" title="CSIO serial timer interrupt.">bSerialTimerIrq</a>)
<a name="l02167"></a>02167         {
<a name="l02168"></a>02168             pstcCsio-&gt;SACSR_f.TINTE = 1u;
<a name="l02169"></a>02169         }
<a name="l02170"></a>02170 <span class="preprocessor">    #endif    </span>
<a name="l02171"></a>02171 <span class="preprocessor"></span>    }
<a name="l02172"></a>02172     
<a name="l02173"></a>02173     <span class="comment">/* Configure interrupt callback functions */</span>
<a name="l02174"></a>02174     <span class="keywordflow">if</span>(NULL != pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a101931934df3b0fa594a7c9506bcaf12" title="Pointer to CSIO interrupt callback functions structurei, f set to NULL, no interrupt callback initial...">pstcIrqCb</a>)
<a name="l02175"></a>02175     {
<a name="l02176"></a>02176         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#ad40109f285524938eaf8fb58f887d4e1" title="CSIO RX interrupt callback function.">pfnRxIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a101931934df3b0fa594a7c9506bcaf12" title="Pointer to CSIO interrupt callback functions structurei, f set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__csio__irq__cb.html#ad40109f285524938eaf8fb58f887d4e1" title="CSIO RX interrupt callback function.">pfnRxIrqCb</a>;
<a name="l02177"></a>02177         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#a1b554fde91d5ebcef1a9b136ad28fd88" title="CSIO TX interrupt callback function.">pfnTxIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a101931934df3b0fa594a7c9506bcaf12" title="Pointer to CSIO interrupt callback functions structurei, f set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__csio__irq__cb.html#a1b554fde91d5ebcef1a9b136ad28fd88" title="CSIO TX interrupt callback function.">pfnTxIrqCb</a>;
<a name="l02178"></a>02178         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#a182337a4324280aec65e2c88f507e538" title="CSIO TX idle interrupt callback function.">pfnTxIdleCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a101931934df3b0fa594a7c9506bcaf12" title="Pointer to CSIO interrupt callback functions structurei, f set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__csio__irq__cb.html#a182337a4324280aec65e2c88f507e538" title="CSIO TX idle interrupt callback function.">pfnTxIdleCb</a>;
<a name="l02179"></a>02179         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#af6a48c32e9708772610ad4f9fd5720a6" title="CSIO TX FIFO interrupt callback function.">pfnTxFifoIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a101931934df3b0fa594a7c9506bcaf12" title="Pointer to CSIO interrupt callback functions structurei, f set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__csio__irq__cb.html#af6a48c32e9708772610ad4f9fd5720a6" title="CSIO TX FIFO interrupt callback function.">pfnTxFifoIrqCb</a>;
<a name="l02180"></a>02180 <span class="preprocessor">    #if (PDL_MCU_CORE == PDL_FM4_CORE) || (PDL_MCU_CORE == PDL_FM0P_CORE)    </span>
<a name="l02181"></a>02181 <span class="preprocessor"></span>        pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#a2b58967c372a9a5b4d79b43ca540d7da" title="CSIO chip selection interrupt callback function.">pfnCsErrIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a101931934df3b0fa594a7c9506bcaf12" title="Pointer to CSIO interrupt callback functions structurei, f set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__csio__irq__cb.html#a2b58967c372a9a5b4d79b43ca540d7da" title="CSIO chip selection interrupt callback function.">pfnCsErrIrqCb</a>;
<a name="l02182"></a>02182         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a01eef031e871021081e99b232de9142a" title="CSIO internal interrupt callback function.">stcCsioInternIrqCb</a>.<a class="code" href="structstc__csio__irq__cb.html#a399f6dcb22c0394c8a0f581654b10ce2" title="CSIO serial timer interrupt callback function.">pfnSerialTimerIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a101931934df3b0fa594a7c9506bcaf12" title="Pointer to CSIO interrupt callback functions structurei, f set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__csio__irq__cb.html#a399f6dcb22c0394c8a0f581654b10ce2" title="CSIO serial timer interrupt callback function.">pfnSerialTimerIrqCb</a>;
<a name="l02183"></a>02183 <span class="preprocessor">    #endif    </span>
<a name="l02184"></a>02184 <span class="preprocessor"></span>    }
<a name="l02185"></a>02185     
<a name="l02186"></a>02186     <span class="comment">/* Configure NVIC */</span>    
<a name="l02187"></a>02187     <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__csio__config.html#a18b9c6a82679466e066894a2b65f0d13" title="TRUE: enable NVIC, FALSE: don&#39;t enable NVIC.">bTouchNvic</a>)
<a name="l02188"></a>02188     {
<a name="l02189"></a>02189         <a class="code" href="group___mfs_group.html#ga8cf89127037324ffc519f97b5312be9c" title="Device dependent initialization of transmit interrupts according CMSIS with level defined in pdl...">MfsInitNvic</a>(u8Ch, FALSE);
<a name="l02190"></a>02190         <a class="code" href="group___mfs_group.html#ga8cf89127037324ffc519f97b5312be9c" title="Device dependent initialization of transmit interrupts according CMSIS with level defined in pdl...">MfsInitNvic</a>(u8Ch, TRUE);
<a name="l02191"></a>02191     }
<a name="l02192"></a>02192     
<a name="l02193"></a>02193 <span class="preprocessor">#endif    </span>
<a name="l02194"></a>02194 <span class="preprocessor"></span>    <span class="keywordflow">return</span> (Ok);
<a name="l02195"></a>02195 } <span class="comment">/* Mfs_Csio_Init */</span>
<a name="l02196"></a>02196 
<a name="l02213"></a><a class="code" href="group___mfs_group.html#gae0078c73ed1aceab2e5cf20357c53bb0">02213</a> en_result_t <a class="code" href="group___mfs_group.html#gae0078c73ed1aceab2e5cf20357c53bb0" title="Deinitialisation of a MFS module activating as CSIO.">Mfs_Csio_DeInit</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio, boolean_t bTouchNvic)
<a name="l02214"></a>02214 {
<a name="l02215"></a>02215     en_result_t            enResult;
<a name="l02216"></a>02216     <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData;
<a name="l02217"></a>02217     uint8_t u8Ch;
<a name="l02218"></a>02218     
<a name="l02219"></a>02219     <span class="comment">/* Calculate the channel number */</span>
<a name="l02220"></a>02220     u8Ch = <a class="code" href="group___mfs_group.html#ga25d4c0b8542b70b05e26c58e7bde5221">CsioInstanceToIndex</a>(pstcCsio);
<a name="l02221"></a>02221     
<a name="l02222"></a>02222     <span class="keywordflow">if</span>(u8Ch &gt; 15u)
<a name="l02223"></a>02223     {
<a name="l02224"></a>02224         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l02225"></a>02225     }
<a name="l02226"></a>02226 
<a name="l02227"></a>02227     <span class="comment">/* Check for valid pointer and get pointer to internal data struct ... */</span>
<a name="l02228"></a>02228     pstcMfsInternData = <a class="code" href="group___mfs_group.html#gac79c84b0a45258223a917b61d6ae2e7f" title="Return the internal data for a certain CSIO instance.">MfsCsioGetInternDataPtr</a>(pstcCsio);
<a name="l02229"></a>02229     <span class="comment">/* ... and check */</span>
<a name="l02230"></a>02230     <span class="keywordflow">if</span> (NULL == pstcMfsInternData)
<a name="l02231"></a>02231     {
<a name="l02232"></a>02232         enResult = ErrorInvalidParameter;
<a name="l02233"></a>02233     }
<a name="l02234"></a>02234     <span class="keywordflow">else</span>
<a name="l02235"></a>02235     {
<a name="l02236"></a>02236         <span class="comment">/* First of all disable receiver, transmitter and deinit interrupts */</span>
<a name="l02237"></a>02237         pstcCsio-&gt;SCR_f.TXE = FALSE;
<a name="l02238"></a>02238         pstcCsio-&gt;SCR_f.RXE = FALSE;
<a name="l02239"></a>02239 
<a name="l02240"></a>02240         <span class="comment">/* Baud Rate Generation Reload Reset */</span>
<a name="l02241"></a>02241         pstcCsio-&gt;BGR = 0u;
<a name="l02242"></a>02242             
<a name="l02243"></a>02243         <span class="comment">/* Serial Mode Register clear all bits (valid in any mode) */</span>
<a name="l02244"></a>02244         pstcCsio-&gt;SMR = 0u;
<a name="l02245"></a>02245            
<a name="l02246"></a>02246         <span class="comment">/* Reset Mfs receive and transmit bit to default */</span>
<a name="l02247"></a>02247         <span class="comment">/* and clear all error flags */</span>
<a name="l02248"></a>02248         pstcCsio-&gt;SCR = 0u;
<a name="l02249"></a>02249 
<a name="l02250"></a>02250         <span class="comment">/* Clear reception Errors */</span>
<a name="l02251"></a>02251         pstcCsio-&gt;SSR_f.REC = TRUE;
<a name="l02252"></a>02252            
<a name="l02253"></a>02253         <span class="comment">/* Reset all other used register to default value */</span>
<a name="l02254"></a>02254         pstcCsio-&gt;SSR  = 0u;
<a name="l02255"></a>02255         pstcCsio-&gt;ESCR = 0u;
<a name="l02256"></a>02256         pstcCsio-&gt;FCR0 = 0u;
<a name="l02257"></a>02257         pstcCsio-&gt;FCR1 = 0u;
<a name="l02258"></a>02258 <span class="preprocessor">    #if (PDL_MCU_CORE == PDL_FM0P_CORE) || (PDL_MCU_CORE == PDL_FM4_CORE)    </span>
<a name="l02259"></a>02259 <span class="preprocessor"></span>        pstcCsio-&gt;SACSR = 0u;
<a name="l02260"></a>02260         pstcCsio-&gt;STMCR = 0u;
<a name="l02261"></a>02261         pstcCsio-&gt;SCSCR = 0u;
<a name="l02262"></a>02262         pstcCsio-&gt;SCSTR0 = 0;
<a name="l02263"></a>02263         pstcCsio-&gt;SCSTR1 = 0;
<a name="l02264"></a>02264         pstcCsio-&gt;SCSTR32 = 0;
<a name="l02265"></a>02265         pstcCsio-&gt;TBYTE0 = 0u;
<a name="l02266"></a>02266         pstcCsio-&gt;TBYTE1 = 0u;
<a name="l02267"></a>02267         pstcCsio-&gt;TBYTE2 = 0u;
<a name="l02268"></a>02268         pstcCsio-&gt;TBYTE3 = 0u;
<a name="l02269"></a>02269 <span class="preprocessor">    #endif    </span>
<a name="l02270"></a>02270 <span class="preprocessor"></span>  
<a name="l02271"></a>02271 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_MFS0 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS8 == PDL_ON) ||  \</span>
<a name="l02272"></a>02272 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS1 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS9 == PDL_ON) ||  \</span>
<a name="l02273"></a>02273 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS2 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS10 == PDL_ON) || \</span>
<a name="l02274"></a>02274 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS3 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS11 == PDL_ON) || \</span>
<a name="l02275"></a>02275 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS4 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS12 == PDL_ON) || \</span>
<a name="l02276"></a>02276 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS5 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS13 == PDL_ON) || \</span>
<a name="l02277"></a>02277 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS6 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS14 == PDL_ON) || \</span>
<a name="l02278"></a>02278 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS7 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS15 == PDL_ON)      </span>
<a name="l02279"></a>02279 <span class="preprocessor"></span>        <span class="comment">/* Disable NVIC */</span>
<a name="l02280"></a>02280         <span class="keywordflow">if</span>(TRUE == bTouchNvic)
<a name="l02281"></a>02281         {
<a name="l02282"></a>02282             <a class="code" href="group___mfs_group.html#gac25b5fe9f346727c4b883952c6cd8d9a" title="Device dependent de-initialization of interrupts according CMSIS.">MfsDeInitNvic</a>(u8Ch, FALSE);
<a name="l02283"></a>02283             <a class="code" href="group___mfs_group.html#gac25b5fe9f346727c4b883952c6cd8d9a" title="Device dependent de-initialization of interrupts according CMSIS.">MfsDeInitNvic</a>(u8Ch, TRUE);
<a name="l02284"></a>02284         }
<a name="l02285"></a>02285 <span class="preprocessor">#endif        </span>
<a name="l02286"></a>02286 <span class="preprocessor"></span>        enResult = Ok;
<a name="l02287"></a>02287     }
<a name="l02288"></a>02288 
<a name="l02289"></a>02289     <span class="keywordflow">return</span> (enResult);
<a name="l02290"></a>02290 } <span class="comment">/* Mfs_Csio_DeInit */</span>
<a name="l02291"></a>02291 
<a name="l02308"></a><a class="code" href="group___mfs_group.html#ga078dd2913ffbdf2ededdadc508a9597a">02308</a> en_result_t <a class="code" href="group___mfs_group.html#ga078dd2913ffbdf2ededdadc508a9597a" title="Set the baudrate of CSIO.">Mfs_Csio_SetBaudRate</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio,
<a name="l02309"></a>02309                                  uint32_t u32BaudRate)
<a name="l02310"></a>02310 {
<a name="l02311"></a>02311     uint32_t u32Pclk1;
<a name="l02312"></a>02312   
<a name="l02313"></a>02313     <span class="keywordflow">if</span> ((NULL == pstcCsio) || (u32BaudRate &lt; 3u))
<a name="l02314"></a>02314     {
<a name="l02315"></a>02315         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02316"></a>02316     }
<a name="l02317"></a>02317 <span class="preprocessor">#if (PDL_MCU_CORE == PDL_FM0P_CORE)        </span>
<a name="l02318"></a>02318 <span class="preprocessor"></span>    u32Pclk1 = __HCLK/(1ul &lt;&lt; (APBC1_PSR_Val &amp; 0x03u)); <span class="comment">/* MFS is attached on APB1 bus for FM0+ */</span>
<a name="l02319"></a>02319 <span class="preprocessor">#else</span>
<a name="l02320"></a>02320 <span class="preprocessor"></span>    u32Pclk1 = __HCLK/(1ul &lt;&lt; (APBC2_PSR_Val &amp; 0x03u)); <span class="comment">/* MFS is attached on APB2 bus for FM3 and FM4 */</span>
<a name="l02321"></a>02321 <span class="preprocessor">#endif    </span>
<a name="l02322"></a>02322 <span class="preprocessor"></span>    pstcCsio-&gt;BGR_f.BGR = (u32Pclk1/u32BaudRate) - 1u;
<a name="l02323"></a>02323     
<a name="l02324"></a>02324     <span class="keywordflow">return</span> Ok;
<a name="l02325"></a>02325 }
<a name="l02326"></a>02326 
<a name="l02327"></a>02327 <span class="preprocessor">#if (PDL_MCU_CORE == PDL_FM0P_CORE) || (PDL_MCU_CORE == PDL_FM4_CORE) </span>
<a name="l02328"></a>02328 <span class="preprocessor"></span>
<a name="l02344"></a><a class="code" href="group___mfs_group.html#gab9f3aa3155a661f8b065edd4ab8bb8cc">02344</a> en_result_t <a class="code" href="group___mfs_group.html#gab9f3aa3155a661f8b065edd4ab8bb8cc" title="Set the compare value of CSIO serial timer.">Mfs_Csio_SetTimerCompareValue</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio,
<a name="l02345"></a>02345                                           uint16_t u16CompareValue)
<a name="l02346"></a>02346 {
<a name="l02347"></a>02347     <span class="keywordflow">if</span> (NULL == pstcCsio)
<a name="l02348"></a>02348     {
<a name="l02349"></a>02349         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02350"></a>02350     }
<a name="l02351"></a>02351     
<a name="l02352"></a>02352     pstcCsio-&gt;STMCR = u16CompareValue;
<a name="l02353"></a>02353     
<a name="l02354"></a>02354     <span class="keywordflow">return</span> Ok;
<a name="l02355"></a>02355 }
<a name="l02356"></a>02356 
<a name="l02374"></a><a class="code" href="group___mfs_group.html#gac02b105256f34da345f7e380cae2ba66">02374</a> en_result_t <a class="code" href="group___mfs_group.html#gac02b105256f34da345f7e380cae2ba66" title="Set the transfer byte count of a selected chip selection pin.">Mfs_Csio_SetCsTransferByteCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio,
<a name="l02375"></a>02375                                             <a class="code" href="group___mfs_group.html#ga1afe28c29523467a261a841057fa3d7f" title="CSIO chip selection pin.">en_cs_pin_sel_t</a> enCsPin,
<a name="l02376"></a>02376                                             uint8_t u8ByteCnt)
<a name="l02377"></a>02377 {
<a name="l02378"></a>02378     <span class="keywordflow">if</span> (NULL == pstcCsio)
<a name="l02379"></a>02379     {
<a name="l02380"></a>02380         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02381"></a>02381     }
<a name="l02382"></a>02382     
<a name="l02383"></a>02383     <span class="keywordflow">switch</span>(enCsPin)
<a name="l02384"></a>02384     {
<a name="l02385"></a>02385         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga136fd8e9d65c66c1b979ff307c23ac6bab05aafe4b8f0f81f751e41e054c050a4" title="Use SCS0 as chip selection pin.">CsPinScs0</a>:
<a name="l02386"></a>02386             pstcCsio-&gt;TBYTE0 = u8ByteCnt;
<a name="l02387"></a>02387             <span class="keywordflow">break</span>;
<a name="l02388"></a>02388         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga136fd8e9d65c66c1b979ff307c23ac6ba76d615cef47da60dff240101c05f00ee" title="Use SCS1 as chip selection pin.">CsPinScs1</a>:
<a name="l02389"></a>02389             pstcCsio-&gt;TBYTE1 = u8ByteCnt;
<a name="l02390"></a>02390             <span class="keywordflow">break</span>;
<a name="l02391"></a>02391         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga136fd8e9d65c66c1b979ff307c23ac6bab5b25b29c836349f03b4c5369550d92c" title="Use SCS2 as chip selection pin.">CsPinScs2</a>:
<a name="l02392"></a>02392             pstcCsio-&gt;TBYTE2 = u8ByteCnt;
<a name="l02393"></a>02393             <span class="keywordflow">break</span>;
<a name="l02394"></a>02394         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga136fd8e9d65c66c1b979ff307c23ac6ba2b4798a6e19d64278396f18d21e5d8c5" title="Use SCS3 as chip selection pin.">CsPinScs3</a>:
<a name="l02395"></a>02395             pstcCsio-&gt;TBYTE3 = u8ByteCnt;
<a name="l02396"></a>02396             <span class="keywordflow">break</span>;
<a name="l02397"></a>02397         <span class="keywordflow">default</span>:  
<a name="l02398"></a>02398             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02399"></a>02399     }
<a name="l02400"></a>02400     
<a name="l02401"></a>02401     <span class="keywordflow">return</span> Ok;
<a name="l02402"></a>02402 }
<a name="l02403"></a>02403 
<a name="l02420"></a><a class="code" href="group___mfs_group.html#ga76247a109ac88bfdae9f73395a8cdaae">02420</a> en_result_t <a class="code" href="group___mfs_group.html#ga76247a109ac88bfdae9f73395a8cdaae" title="Set the hold status of chip selection pin.">Mfs_Csio_SetCsHoldStatus</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio, 
<a name="l02421"></a>02421                                      boolean_t bHold)
<a name="l02422"></a>02422 {
<a name="l02423"></a>02423     <span class="keywordflow">if</span> (NULL == pstcCsio)
<a name="l02424"></a>02424     {
<a name="l02425"></a>02425         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02426"></a>02426     }
<a name="l02427"></a>02427     
<a name="l02428"></a>02428     pstcCsio-&gt;SCSCR_f.SCAM = (bHold == TRUE) ? 1u : 0u;
<a name="l02429"></a>02429     
<a name="l02430"></a>02430     <span class="keywordflow">return</span> Ok;
<a name="l02431"></a>02431 }
<a name="l02432"></a>02432 
<a name="l02449"></a><a class="code" href="group___mfs_group.html#gab45ad2f8285433ecb0650e3e589c967f">02449</a> en_result_t <a class="code" href="group___mfs_group.html#gab45ad2f8285433ecb0650e3e589c967f" title="Set the transfer byte count of CSIO serial timer.">Mfs_Csio_SetTimerTransferByteCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio,
<a name="l02450"></a>02450                                                uint8_t u8ByteCnt)
<a name="l02451"></a>02451 {
<a name="l02452"></a>02452     <span class="keywordflow">if</span> (NULL == pstcCsio)
<a name="l02453"></a>02453     {
<a name="l02454"></a>02454         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02455"></a>02455     }
<a name="l02456"></a>02456     
<a name="l02457"></a>02457     pstcCsio-&gt;TBYTE0 = u8ByteCnt;
<a name="l02458"></a>02458     
<a name="l02459"></a>02459     <span class="keywordflow">return</span> Ok;
<a name="l02460"></a>02460 }
<a name="l02461"></a>02461 <span class="preprocessor">#endif</span>
<a name="l02462"></a>02462 <span class="preprocessor"></span>                                  
<a name="l02479"></a><a class="code" href="group___mfs_group.html#ga4f5454f2cab94e02bea5d0b8ebc22fb0">02479</a> en_result_t <a class="code" href="group___mfs_group.html#ga4f5454f2cab94e02bea5d0b8ebc22fb0" title="Enable CSIO functions.">Mfs_Csio_EnableFunc</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio, <a class="code" href="group___mfs_group.html#gab2c19264353546d100853d0599eac1d6" title="CSIO function.">en_csio_func_t</a> enFunc)
<a name="l02480"></a>02480 {
<a name="l02481"></a>02481     <span class="keywordflow">if</span> (NULL == pstcCsio)
<a name="l02482"></a>02482     {
<a name="l02483"></a>02483         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02484"></a>02484     }
<a name="l02485"></a>02485     
<a name="l02486"></a>02486     <span class="keywordflow">switch</span>(enFunc)
<a name="l02487"></a>02487     {
<a name="l02488"></a>02488         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga9992c163bfe35844206863629239e024ac359fd1e29a58cd011aa99a367c42633" title="CSIO TX.">CsioTx</a>:
<a name="l02489"></a>02489             pstcCsio-&gt;SCR_f.TXE = 1u;
<a name="l02490"></a>02490             <span class="keywordflow">break</span>;
<a name="l02491"></a>02491         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga9992c163bfe35844206863629239e024a4efe82c662db21bca4ca54b15c061198" title="CSIO RX.">CsioRx</a>:
<a name="l02492"></a>02492             pstcCsio-&gt;SCR_f.RXE = 1u;
<a name="l02493"></a>02493             <span class="keywordflow">break</span>;
<a name="l02494"></a>02494 <span class="preprocessor">    #if (PDL_MCU_CORE == PDL_FM4_CORE) || (PDL_MCU_CORE == PDL_FM0P_CORE)        </span>
<a name="l02495"></a>02495 <span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga9992c163bfe35844206863629239e024ab66eacc69292b64934f9d6e09929d5d0" title="CSIO Serial TImer.">CsioSerialTimer</a>:
<a name="l02496"></a>02496             pstcCsio-&gt;SACSR_f.TMRE = 1u;
<a name="l02497"></a>02497             <span class="keywordflow">break</span>;
<a name="l02498"></a>02498         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga9992c163bfe35844206863629239e024ae186e94d4ec79ec218e39ebbf14805fa" title="CSIO chip selection error occurrance.">CsioCsErrOccur</a>:
<a name="l02499"></a>02499             pstcCsio-&gt;SACSR_f.TBEEN = 1u;
<a name="l02500"></a>02500             <span class="keywordflow">break</span>;
<a name="l02501"></a>02501 <span class="preprocessor">    #endif        </span>
<a name="l02502"></a>02502 <span class="preprocessor"></span>        <span class="keywordflow">default</span>:
<a name="l02503"></a>02503             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02504"></a>02504     }
<a name="l02505"></a>02505     
<a name="l02506"></a>02506     <span class="keywordflow">return</span> Ok;
<a name="l02507"></a>02507 }
<a name="l02508"></a>02508 
<a name="l02525"></a><a class="code" href="group___mfs_group.html#ga7cbad5bedf6286cede6008db9a39dc60">02525</a> en_result_t <a class="code" href="group___mfs_group.html#ga7cbad5bedf6286cede6008db9a39dc60" title="Disable CSIO functions.">Mfs_Csio_DisableFunc</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio, <a class="code" href="group___mfs_group.html#gab2c19264353546d100853d0599eac1d6" title="CSIO function.">en_csio_func_t</a> enFunc)
<a name="l02526"></a>02526 {
<a name="l02527"></a>02527     <span class="keywordflow">if</span> (NULL == pstcCsio)
<a name="l02528"></a>02528     {
<a name="l02529"></a>02529         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02530"></a>02530     }
<a name="l02531"></a>02531     
<a name="l02532"></a>02532     <span class="keywordflow">switch</span>(enFunc)
<a name="l02533"></a>02533     {
<a name="l02534"></a>02534         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga9992c163bfe35844206863629239e024ac359fd1e29a58cd011aa99a367c42633" title="CSIO TX.">CsioTx</a>:
<a name="l02535"></a>02535             pstcCsio-&gt;SCR_f.TXE = 0u;
<a name="l02536"></a>02536             <span class="keywordflow">break</span>;
<a name="l02537"></a>02537         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga9992c163bfe35844206863629239e024a4efe82c662db21bca4ca54b15c061198" title="CSIO RX.">CsioRx</a>:
<a name="l02538"></a>02538             pstcCsio-&gt;SCR_f.RXE = 0u;
<a name="l02539"></a>02539             <span class="keywordflow">break</span>;
<a name="l02540"></a>02540 <span class="preprocessor">    #if (PDL_MCU_CORE == PDL_FM4_CORE) || (PDL_MCU_CORE == PDL_FM0P_CORE)        </span>
<a name="l02541"></a>02541 <span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga9992c163bfe35844206863629239e024ab66eacc69292b64934f9d6e09929d5d0" title="CSIO Serial TImer.">CsioSerialTimer</a>:
<a name="l02542"></a>02542             pstcCsio-&gt;SACSR_f.TMRE = 0u;
<a name="l02543"></a>02543             <span class="keywordflow">break</span>;
<a name="l02544"></a>02544         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga9992c163bfe35844206863629239e024ae186e94d4ec79ec218e39ebbf14805fa" title="CSIO chip selection error occurrance.">CsioCsErrOccur</a>:
<a name="l02545"></a>02545             pstcCsio-&gt;SACSR_f.TBEEN = 0u;
<a name="l02546"></a>02546             <span class="keywordflow">break</span>;
<a name="l02547"></a>02547 <span class="preprocessor">    #endif        </span>
<a name="l02548"></a>02548 <span class="preprocessor"></span>        <span class="keywordflow">default</span>:
<a name="l02549"></a>02549             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02550"></a>02550     }
<a name="l02551"></a>02551     
<a name="l02552"></a>02552     <span class="keywordflow">return</span> Ok;
<a name="l02553"></a>02553 }
<a name="l02554"></a>02554 
<a name="l02587"></a><a class="code" href="group___mfs_group.html#gaf8c4ecf02e20602fc735e05ccbd3e347">02587</a> boolean_t <a class="code" href="group___mfs_group.html#gaf8c4ecf02e20602fc735e05ccbd3e347" title="Get status of CSIO according to status type.">Mfs_Csio_GetStatus</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio, 
<a name="l02588"></a>02588                                <a class="code" href="group___mfs_group.html#ga35b3706ef12dda12157dd6c3a4fc63a7" title="CSIO status types.">en_csio_status_t</a> enStatus)
<a name="l02589"></a>02589 {
<a name="l02590"></a>02590     boolean_t bRet = FALSE;
<a name="l02591"></a>02591       
<a name="l02592"></a>02592     <span class="keywordflow">switch</span>(enStatus)
<a name="l02593"></a>02593     {
<a name="l02594"></a>02594         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggad8ea69b95d03da5426adaf77a4cf67b9a4c7a0bd7d6263496cd96ef55b0944da6" title="CSIO overrun error.">CsioOverrunError</a>:
<a name="l02595"></a>02595             bRet = (1u == pstcCsio-&gt;SSR_f.ORE) ? TRUE : FALSE;
<a name="l02596"></a>02596             <span class="keywordflow">break</span>;
<a name="l02597"></a>02597         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggad8ea69b95d03da5426adaf77a4cf67b9a6045d3b23eb4734055249c1709944f6a" title="CSIO RX completion.">CsioRxFull</a>:
<a name="l02598"></a>02598             bRet = (1u == pstcCsio-&gt;SSR_f.RDRF) ? TRUE : FALSE;
<a name="l02599"></a>02599             <span class="keywordflow">break</span>;
<a name="l02600"></a>02600         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggad8ea69b95d03da5426adaf77a4cf67b9ad507b703400c0a29a1b16e05ff5ba025" title="CSIO TX buffer empty.">CsioTxEmpty</a>:
<a name="l02601"></a>02601             bRet = (1u == pstcCsio-&gt;SSR_f.TDRE) ? TRUE : FALSE;
<a name="l02602"></a>02602             <span class="keywordflow">break</span>;
<a name="l02603"></a>02603         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggad8ea69b95d03da5426adaf77a4cf67b9a23a6aa697ed85fb245a142018ae4e094" title="CSIO TX idle.">CsioTxIdle</a>:
<a name="l02604"></a>02604             bRet = (1u == pstcCsio-&gt;SSR_f.TBI) ? TRUE : FALSE;
<a name="l02605"></a>02605             <span class="keywordflow">break</span>;
<a name="l02606"></a>02606         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggad8ea69b95d03da5426adaf77a4cf67b9a177314955a16842c462554efb77d634c" title="CSIO TX FIFO request.">CsioTxFifoRequest</a>:
<a name="l02607"></a>02607             bRet = (1u == pstcCsio-&gt;FCR1_f.FDRQ) ? TRUE : FALSE;
<a name="l02608"></a>02608             <span class="keywordflow">break</span>;
<a name="l02609"></a>02609 <span class="preprocessor">    #if (PDL_MCU_CORE == PDL_FM4_CORE) || (PDL_MCU_CORE == PDL_FM0P_CORE)        </span>
<a name="l02610"></a>02610 <span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggad8ea69b95d03da5426adaf77a4cf67b9acf78f0cf39d207024b5921d8459cd14a" title="CSIO chip selection error occurrance.">CsioCsErrIntFlag</a>:
<a name="l02611"></a>02611             bRet = (1u == pstcCsio-&gt;SACSR_f.CSE) ? TRUE : FALSE;
<a name="l02612"></a>02612             <span class="keywordflow">break</span>;
<a name="l02613"></a>02613         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggad8ea69b95d03da5426adaf77a4cf67b9af0ea228ee02dc304491b40376f3c7078" title="CSIO serial timer interrupt.">CsioTimerIntFlag</a>:
<a name="l02614"></a>02614             bRet = (1u == pstcCsio-&gt;SACSR_f.TINT) ? TRUE : FALSE;
<a name="l02615"></a>02615             <span class="keywordflow">break</span>;
<a name="l02616"></a>02616 <span class="preprocessor">    #endif        </span>
<a name="l02617"></a>02617 <span class="preprocessor"></span>        <span class="keywordflow">default</span>:
<a name="l02618"></a>02618             <span class="keywordflow">break</span>;
<a name="l02619"></a>02619     }
<a name="l02620"></a>02620     
<a name="l02621"></a>02621     <span class="keywordflow">return</span> bRet;
<a name="l02622"></a>02622 }
<a name="l02623"></a>02623 
<a name="l02646"></a><a class="code" href="group___mfs_group.html#gaddc0585eb6243a98349bdd68460641b1">02646</a> en_result_t <a class="code" href="group___mfs_group.html#gaddc0585eb6243a98349bdd68460641b1" title="Clear status of CSIO according to status type.">Mfs_Csio_ClrStatus</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio,
<a name="l02647"></a>02647                                <a class="code" href="group___mfs_group.html#ga35b3706ef12dda12157dd6c3a4fc63a7" title="CSIO status types.">en_csio_status_t</a> enStatus)
<a name="l02648"></a>02648 {
<a name="l02649"></a>02649     <span class="keywordflow">if</span> (NULL == pstcCsio)
<a name="l02650"></a>02650     {
<a name="l02651"></a>02651         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02652"></a>02652     }
<a name="l02653"></a>02653     
<a name="l02654"></a>02654     <span class="keywordflow">switch</span>(enStatus)
<a name="l02655"></a>02655     {
<a name="l02656"></a>02656         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggad8ea69b95d03da5426adaf77a4cf67b9a4c7a0bd7d6263496cd96ef55b0944da6" title="CSIO overrun error.">CsioOverrunError</a>:
<a name="l02657"></a>02657             pstcCsio-&gt;SSR_f.REC = 1u;
<a name="l02658"></a>02658             <span class="keywordflow">break</span>;
<a name="l02659"></a>02659         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggad8ea69b95d03da5426adaf77a4cf67b9a6045d3b23eb4734055249c1709944f6a" title="CSIO RX completion.">CsioRxFull</a>:
<a name="l02660"></a>02660         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggad8ea69b95d03da5426adaf77a4cf67b9ad507b703400c0a29a1b16e05ff5ba025" title="CSIO TX buffer empty.">CsioTxEmpty</a>:
<a name="l02661"></a>02661         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggad8ea69b95d03da5426adaf77a4cf67b9a23a6aa697ed85fb245a142018ae4e094" title="CSIO TX idle.">CsioTxIdle</a>:
<a name="l02662"></a>02662             <span class="keywordflow">break</span>;
<a name="l02663"></a>02663         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggad8ea69b95d03da5426adaf77a4cf67b9a177314955a16842c462554efb77d634c" title="CSIO TX FIFO request.">CsioTxFifoRequest</a>:
<a name="l02664"></a>02664             pstcCsio-&gt;FCR1_f.FDRQ = 0u;
<a name="l02665"></a>02665             <span class="keywordflow">break</span>;
<a name="l02666"></a>02666 <span class="preprocessor">    #if (PDL_MCU_CORE == PDL_FM4_CORE) || (PDL_MCU_CORE == PDL_FM0P_CORE)        </span>
<a name="l02667"></a>02667 <span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggad8ea69b95d03da5426adaf77a4cf67b9acf78f0cf39d207024b5921d8459cd14a" title="CSIO chip selection error occurrance.">CsioCsErrIntFlag</a>:
<a name="l02668"></a>02668             pstcCsio-&gt;SACSR_f.CSE = 0u;
<a name="l02669"></a>02669             <span class="keywordflow">break</span>;
<a name="l02670"></a>02670         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggad8ea69b95d03da5426adaf77a4cf67b9af0ea228ee02dc304491b40376f3c7078" title="CSIO serial timer interrupt.">CsioTimerIntFlag</a>:
<a name="l02671"></a>02671             pstcCsio-&gt;SACSR_f.TINT = 0u;
<a name="l02672"></a>02672             <span class="keywordflow">break</span>;
<a name="l02673"></a>02673 <span class="preprocessor">    #endif        </span>
<a name="l02674"></a>02674 <span class="preprocessor"></span>        <span class="keywordflow">default</span>:
<a name="l02675"></a>02675             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02676"></a>02676     }
<a name="l02677"></a>02677     
<a name="l02678"></a>02678     <span class="keywordflow">return</span> Ok;
<a name="l02679"></a>02679 }
<a name="l02680"></a>02680 
<a name="l02696"></a><a class="code" href="group___mfs_group.html#ga297f01d7b93d8ec53e0e3f9b30bad319">02696</a> en_result_t <a class="code" href="group___mfs_group.html#ga297f01d7b93d8ec53e0e3f9b30bad319" title="Write CSIO data buffer.">Mfs_Csio_SendData</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio, 
<a name="l02697"></a>02697                               uint16_t u16Data,
<a name="l02698"></a>02698                               boolean_t bSotEn)
<a name="l02699"></a>02699 {
<a name="l02700"></a>02700     <span class="keywordflow">if</span> (NULL == pstcCsio)
<a name="l02701"></a>02701     {
<a name="l02702"></a>02702         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02703"></a>02703     }
<a name="l02704"></a>02704     
<a name="l02705"></a>02705     (TRUE == bSotEn) ? (pstcCsio-&gt;SMR_f.SOE = 1u) : (pstcCsio-&gt;SMR_f.SOE = 0u);
<a name="l02706"></a>02706     
<a name="l02707"></a>02707     pstcCsio-&gt;TDR = u16Data;
<a name="l02708"></a>02708     
<a name="l02709"></a>02709     <span class="keywordflow">return</span> Ok;
<a name="l02710"></a>02710 }
<a name="l02711"></a>02711 
<a name="l02721"></a><a class="code" href="group___mfs_group.html#ga848351c92073d02fd92837352469598d">02721</a> uint16_t <a class="code" href="group___mfs_group.html#ga848351c92073d02fd92837352469598d" title="Read CSIO data buffer.">Mfs_Csio_ReceiveData</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio)
<a name="l02722"></a>02722 {
<a name="l02723"></a>02723     <span class="keywordflow">return</span> pstcCsio-&gt;RDR;
<a name="l02724"></a>02724 }
<a name="l02725"></a>02725 
<a name="l02738"></a><a class="code" href="group___mfs_group.html#ga4849059a24019344caece674e243e401">02738</a> en_result_t <a class="code" href="group___mfs_group.html#ga4849059a24019344caece674e243e401" title="Reset CSIO FIFO.">Mfs_Csio_ResetFifo</a> (<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio, 
<a name="l02739"></a>02739                                 <a class="code" href="group___mfs_group.html#ga92c7220a4bea875ed8c044e89c63768d" title="Mfs FIFO Number.">en_mfs_fifo_t</a> enFifo)
<a name="l02740"></a>02740 {
<a name="l02741"></a>02741     <span class="keywordflow">if</span> (NULL == pstcCsio)
<a name="l02742"></a>02742     {
<a name="l02743"></a>02743         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02744"></a>02744     }
<a name="l02745"></a>02745     
<a name="l02746"></a>02746     <span class="keywordflow">switch</span>(enFifo)
<a name="l02747"></a>02747     {
<a name="l02748"></a>02748         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034a0ffddd198e226809429b23d9f32ef5f8" title="FIFO No.1.">MfsFifo1</a>:
<a name="l02749"></a>02749             pstcCsio-&gt;FCR0_f.FCL1 = 1u;
<a name="l02750"></a>02750             <span class="keywordflow">break</span>;
<a name="l02751"></a>02751         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034ac8a2b52ff2b3ab8b5e6c0be9e335b837" title="FIFO No.2.">MfsFifo2</a>:
<a name="l02752"></a>02752             pstcCsio-&gt;FCR0_f.FCL2 = 1u;
<a name="l02753"></a>02753             <span class="keywordflow">break</span>;
<a name="l02754"></a>02754         <span class="keywordflow">default</span>:
<a name="l02755"></a>02755             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02756"></a>02756     }
<a name="l02757"></a>02757     
<a name="l02758"></a>02758     <span class="keywordflow">return</span> Ok;
<a name="l02759"></a>02759 }
<a name="l02760"></a>02760 
<a name="l02774"></a><a class="code" href="group___mfs_group.html#ga3605d22db00962472560fe2952c46eb7">02774</a> en_result_t <a class="code" href="group___mfs_group.html#ga3605d22db00962472560fe2952c46eb7" title="Set CSIO FIFO count.">Mfs_Csio_SetFifoCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio,
<a name="l02775"></a>02775                                   <a class="code" href="group___mfs_group.html#ga92c7220a4bea875ed8c044e89c63768d" title="Mfs FIFO Number.">en_mfs_fifo_t</a> enFifo,
<a name="l02776"></a>02776                                   uint8_t u8Count)
<a name="l02777"></a>02777 {
<a name="l02778"></a>02778     <span class="keywordflow">if</span> (NULL == pstcCsio)
<a name="l02779"></a>02779     {
<a name="l02780"></a>02780         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02781"></a>02781     }
<a name="l02782"></a>02782     
<a name="l02783"></a>02783     <span class="keywordflow">switch</span>(enFifo)
<a name="l02784"></a>02784     {
<a name="l02785"></a>02785         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034a0ffddd198e226809429b23d9f32ef5f8" title="FIFO No.1.">MfsFifo1</a>:
<a name="l02786"></a>02786             pstcCsio-&gt;FBYTE1 = u8Count;
<a name="l02787"></a>02787             <span class="keywordflow">break</span>;
<a name="l02788"></a>02788         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034ac8a2b52ff2b3ab8b5e6c0be9e335b837" title="FIFO No.2.">MfsFifo2</a>:
<a name="l02789"></a>02789             pstcCsio-&gt;FBYTE2 = u8Count;
<a name="l02790"></a>02790             <span class="keywordflow">break</span>;
<a name="l02791"></a>02791         <span class="keywordflow">default</span>:
<a name="l02792"></a>02792            <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02793"></a>02793     }
<a name="l02794"></a>02794     
<a name="l02795"></a>02795     <span class="keywordflow">return</span> Ok;
<a name="l02796"></a>02796 }
<a name="l02797"></a>02797 
<a name="l02812"></a><a class="code" href="group___mfs_group.html#ga196099bc8717e8971a5bc9a1479b7dc5">02812</a> uint8_t <a class="code" href="group___mfs_group.html#ga196099bc8717e8971a5bc9a1479b7dc5" title="Get CSIO FIFO count.">Mfs_Csio_GetFifoCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaee513e0bfe408dc44dbe03b624b50a8c">stc_mfsn_csio_t</a>* pstcCsio,
<a name="l02813"></a>02813                               <a class="code" href="group___mfs_group.html#ga92c7220a4bea875ed8c044e89c63768d" title="Mfs FIFO Number.">en_mfs_fifo_t</a> enFifo)
<a name="l02814"></a>02814 {
<a name="l02815"></a>02815     uint8_t u8FifoCnt = 0xFFu;
<a name="l02816"></a>02816     
<a name="l02817"></a>02817     <span class="keywordflow">switch</span>(enFifo)
<a name="l02818"></a>02818     {
<a name="l02819"></a>02819         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034a0ffddd198e226809429b23d9f32ef5f8" title="FIFO No.1.">MfsFifo1</a>:
<a name="l02820"></a>02820             u8FifoCnt = pstcCsio-&gt;FBYTE1;
<a name="l02821"></a>02821             <span class="keywordflow">break</span>;
<a name="l02822"></a>02822         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034ac8a2b52ff2b3ab8b5e6c0be9e335b837" title="FIFO No.2.">MfsFifo2</a>:
<a name="l02823"></a>02823             u8FifoCnt = pstcCsio-&gt;FBYTE2;
<a name="l02824"></a>02824             <span class="keywordflow">break</span>;
<a name="l02825"></a>02825         <span class="keywordflow">default</span>:
<a name="l02826"></a>02826            <span class="keywordflow">break</span>;
<a name="l02827"></a>02827     }
<a name="l02828"></a>02828     
<a name="l02829"></a>02829     <span class="keywordflow">return</span> u8FifoCnt;
<a name="l02830"></a>02830 }
<a name="l02831"></a>02831 <span class="preprocessor">#endif</span>
<a name="l02832"></a>02832 <span class="preprocessor"></span>      
<a name="l02833"></a>02833 <span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS_I2C_MODE == PDL_ON)</span>
<a name="l02834"></a>02834 <span class="preprocessor"></span><span class="comment">/******************************************************************************</span>
<a name="l02835"></a>02835 <span class="comment"> * I2C driver functions</span>
<a name="l02836"></a>02836 <span class="comment"> ******************************************************************************/</span>
<a name="l02837"></a>02837 
<a name="l02847"></a><a class="code" href="group___mfs_group.html#gabe41825cea71550bd7b2f36b812cc681">02847</a> <span class="keyword">static</span> <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* <a class="code" href="group___mfs_group.html#gabe41825cea71550bd7b2f36b812cc681" title="Return the internal data for a certain I2C instance.">MfsI2cGetInternDataPtr</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>* pstcI2c)
<a name="l02848"></a>02848 {
<a name="l02849"></a>02849     <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcInternDataPtr = NULL;
<a name="l02850"></a>02850     uint32_t u32Instance;
<a name="l02851"></a>02851 
<a name="l02852"></a>02852     <span class="keywordflow">if</span> (NULL != pstcI2c)
<a name="l02853"></a>02853     {
<a name="l02854"></a>02854         <span class="keywordflow">for</span> (u32Instance = 0u; u32Instance &lt; (uint32_t)<a class="code" href="group___mfs_group.html#ggafce824c305ebb58476ef4b279447e35fa7851cc22d73d4df65b231cf9f35e824d">MfsInstanceIndexMax</a>; u32Instance++)
<a name="l02855"></a>02855         {
<a name="l02856"></a>02856             <span class="keywordflow">if</span> (pstcI2c == m_astcMfsInstanceDataLut[u32Instance].stcInstance.pstcI2cInstance)
<a name="l02857"></a>02857             {
<a name="l02858"></a>02858                 pstcInternDataPtr = &amp;m_astcMfsInstanceDataLut[u32Instance].<a class="code" href="structstc__mfs__instance__data.html#a7e848ba5739675221ced351df12957b3" title="module internal data of instance">stcInternData</a>;
<a name="l02859"></a>02859                 <span class="keywordflow">break</span>;
<a name="l02860"></a>02860             }
<a name="l02861"></a>02861         }
<a name="l02862"></a>02862             
<a name="l02863"></a>02863     }
<a name="l02864"></a>02864 
<a name="l02865"></a>02865     <span class="keywordflow">return</span> (pstcInternDataPtr);
<a name="l02866"></a>02866 } <span class="comment">/* MfsGetInternDataPtr */</span>
<a name="l02867"></a>02867 
<a name="l02868"></a>02868 
<a name="l02869"></a>02869 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_MFS0 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS8 == PDL_ON) ||  \</span>
<a name="l02870"></a>02870 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS1 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS9 == PDL_ON) ||  \</span>
<a name="l02871"></a>02871 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS2 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS10 == PDL_ON) || \</span>
<a name="l02872"></a>02872 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS3 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS11 == PDL_ON) || \</span>
<a name="l02873"></a>02873 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS4 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS12 == PDL_ON) || \</span>
<a name="l02874"></a>02874 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS5 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS13 == PDL_ON) || \</span>
<a name="l02875"></a>02875 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS6 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS14 == PDL_ON) || \</span>
<a name="l02876"></a>02876 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS7 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS15 == PDL_ON)     </span>
<a name="l02877"></a>02877 <span class="preprocessor"></span>
<a name="l02887"></a><a class="code" href="group___mfs_group.html#ga34d7ddb3e9d5fcf6038592221723475a">02887</a> <span class="keywordtype">void</span> <a class="code" href="group___mfs_group.html#ga34d7ddb3e9d5fcf6038592221723475a" title="I2C receive interrupt service routine.">MfsI2cIrqHandlerRx</a>( <span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>*   pstcI2c,
<a name="l02888"></a>02888                          <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData)
<a name="l02889"></a>02889 {
<a name="l02890"></a>02890     <span class="keywordflow">if</span> ((NULL != pstcI2c) &amp;&amp; (NULL != pstcMfsInternData))
<a name="l02891"></a>02891     {
<a name="l02892"></a>02892         <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#ad40109f285524938eaf8fb58f887d4e1" title="I2C RX interrupt callback function pointer.">pfnRxIrqCb</a>)
<a name="l02893"></a>02893         {
<a name="l02894"></a>02894             pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#ad40109f285524938eaf8fb58f887d4e1" title="I2C RX interrupt callback function pointer.">pfnRxIrqCb</a>();
<a name="l02895"></a>02895         }
<a name="l02896"></a>02896     }
<a name="l02897"></a>02897 } <span class="comment">/* MfsIrqHandlerRx */</span>
<a name="l02898"></a>02898 
<a name="l02909"></a><a class="code" href="group___mfs_group.html#ga00032cf95204ae4cb5066e0cd110f59a">02909</a> <span class="keywordtype">void</span> <a class="code" href="group___mfs_group.html#ga00032cf95204ae4cb5066e0cd110f59a" title="I2C transfer interrupt service routine.">MfsI2cIrqHandlerTx</a>( <span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>*   pstcI2c, 
<a name="l02910"></a>02910                          <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData)
<a name="l02911"></a>02911 {
<a name="l02912"></a>02912     <span class="keywordflow">if</span>(1u == pstcI2c-&gt;SSR_f.TDRE)
<a name="l02913"></a>02913     {
<a name="l02914"></a>02914         <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#a1b554fde91d5ebcef1a9b136ad28fd88" title="I2C TX interrupt callback function pointer.">pfnTxIrqCb</a>)
<a name="l02915"></a>02915         {
<a name="l02916"></a>02916             pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#a1b554fde91d5ebcef1a9b136ad28fd88" title="I2C TX interrupt callback function pointer.">pfnTxIrqCb</a>();
<a name="l02917"></a>02917         }
<a name="l02918"></a>02918     }
<a name="l02919"></a>02919     
<a name="l02920"></a>02920     <span class="keywordflow">if</span>(1u == pstcI2c-&gt;SSR_f.TBI)
<a name="l02921"></a>02921     {
<a name="l02922"></a>02922         <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#a182337a4324280aec65e2c88f507e538" title="I2C TX idle interrupt callback function pointer.">pfnTxIdleCb</a>)
<a name="l02923"></a>02923         {
<a name="l02924"></a>02924             pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#a182337a4324280aec65e2c88f507e538" title="I2C TX idle interrupt callback function pointer.">pfnTxIdleCb</a>();
<a name="l02925"></a>02925         }
<a name="l02926"></a>02926     }
<a name="l02927"></a>02927     
<a name="l02928"></a>02928     <span class="keywordflow">if</span>(1u == pstcI2c-&gt;FCR1_f.FDRQ)
<a name="l02929"></a>02929     {
<a name="l02930"></a>02930         <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#af6a48c32e9708772610ad4f9fd5720a6" title="I2C TX FIFO interrupt callback function pointer.">pfnTxFifoIrqCb</a>)
<a name="l02931"></a>02931         {
<a name="l02932"></a>02932             pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#af6a48c32e9708772610ad4f9fd5720a6" title="I2C TX FIFO interrupt callback function pointer.">pfnTxFifoIrqCb</a>();
<a name="l02933"></a>02933         }
<a name="l02934"></a>02934         
<a name="l02935"></a>02935         pstcI2c-&gt;FCR1_f.FDRQ = 0u;
<a name="l02936"></a>02936     }
<a name="l02937"></a>02937 } <span class="comment">/* MfsIrqHandlerTx */</span>
<a name="l02938"></a>02938           
<a name="l02949"></a><a class="code" href="group___mfs_group.html#ga4dc09486b34d035d7ba7d9bb1a865eab">02949</a> <span class="keywordtype">void</span> <a class="code" href="group___mfs_group.html#ga4dc09486b34d035d7ba7d9bb1a865eab" title="I2C status interrupt service routine.">MfsI2cIrqHandlerStatus</a>( <span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>*   pstcI2c, 
<a name="l02950"></a>02950                               <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData)
<a name="l02951"></a>02951 {
<a name="l02952"></a>02952     <span class="keywordflow">if</span> ((NULL != pstcI2c) &amp;&amp; (NULL != pstcMfsInternData))
<a name="l02953"></a>02953     {
<a name="l02954"></a>02954         <span class="keywordflow">if</span>(1u == pstcI2c-&gt;IBCR_f.INT)
<a name="l02955"></a>02955         {
<a name="l02956"></a>02956             <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#a711208428f9ac10cd8975bec9455607b" title="I2C TX and RX completion interrupt callback function.">pfnTxRxIrqCb</a>)
<a name="l02957"></a>02957             {
<a name="l02958"></a>02958                 pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#a711208428f9ac10cd8975bec9455607b" title="I2C TX and RX completion interrupt callback function.">pfnTxRxIrqCb</a>();
<a name="l02959"></a>02959             }
<a name="l02960"></a>02960             
<a name="l02961"></a>02961             <span class="comment">// pstcI2c-&gt;IBCR_f.INT = 0; /* It will be cleared in callback function */</span>
<a name="l02962"></a>02962         }
<a name="l02963"></a>02963         
<a name="l02964"></a>02964         <span class="keywordflow">if</span>(1u == pstcI2c-&gt;IBSR_f.SPC)
<a name="l02965"></a>02965         {
<a name="l02966"></a>02966             <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#a4c93c62681a1103d94be9761713b5e0a" title="I2C stop condition interrupt.">pfnStopDetectIrqCb</a>)
<a name="l02967"></a>02967             {
<a name="l02968"></a>02968                 pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#a4c93c62681a1103d94be9761713b5e0a" title="I2C stop condition interrupt.">pfnStopDetectIrqCb</a>();
<a name="l02969"></a>02969             }
<a name="l02970"></a>02970             
<a name="l02971"></a>02971             pstcI2c-&gt;IBSR_f.SPC = 0u;
<a name="l02972"></a>02972         }
<a name="l02973"></a>02973     }
<a name="l02974"></a>02974 }
<a name="l02975"></a>02975 
<a name="l02995"></a><a class="code" href="group___mfs_group.html#gaad2896bb19ac4016a3597d6d7c4f411b">02995</a> en_result_t <a class="code" href="group___mfs_group.html#gaad2896bb19ac4016a3597d6d7c4f411b" title="Enable I2C interrupts.">Mfs_I2c_EnableIrq</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>* pstcI2c, 
<a name="l02996"></a>02996                               <a class="code" href="group___mfs_group.html#ga35aa2d8db0368739d3a357ba4680b5f2" title="I2C interrupt selection.">en_i2c_irq_sel_t</a> enIrqSel)
<a name="l02997"></a>02997 {
<a name="l02998"></a>02998     <span class="keywordflow">if</span> (NULL == pstcI2c)
<a name="l02999"></a>02999     {
<a name="l03000"></a>03000         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l03001"></a>03001     }
<a name="l03002"></a>03002     
<a name="l03003"></a>03003     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l03004"></a>03004     {
<a name="l03005"></a>03005         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga924d450aa1eb4112f4b517addaa8448aa496436689d8067b0ce920174aba8191b" title="I2C TX interrupt.">I2cTxIrq</a>:
<a name="l03006"></a>03006             pstcI2c-&gt;SMR_f.TIE = 1u;
<a name="l03007"></a>03007             <span class="keywordflow">break</span>;
<a name="l03008"></a>03008         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga924d450aa1eb4112f4b517addaa8448aa26c8b71eb769d116a8fb118279771443" title="I2C RX interrupt.">I2cRxIrq</a>:
<a name="l03009"></a>03009             pstcI2c-&gt;SMR_f.RIE = 1u;
<a name="l03010"></a>03010             <span class="keywordflow">break</span>;
<a name="l03011"></a>03011         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga924d450aa1eb4112f4b517addaa8448aa52ec6923e8570872a7e8b4cab520b3a4" title="I2C TX idle interrupt.">I2cTxIdleIrq</a>:
<a name="l03012"></a>03012             pstcI2c-&gt;FCR1_f.FTIE = 1u;
<a name="l03013"></a>03013             <span class="keywordflow">break</span>;
<a name="l03014"></a>03014         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga924d450aa1eb4112f4b517addaa8448aa089e46258e5829db28f398d2a9813a04" title="I2C TX FIFO interrupt.">I2cTxFifoIrq</a>:
<a name="l03015"></a>03015             pstcI2c-&gt;SSR_f.TBIE = 1u;
<a name="l03016"></a>03016             <span class="keywordflow">break</span>;
<a name="l03017"></a>03017         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga924d450aa1eb4112f4b517addaa8448aa8f79b63874175264d4cf748db3f11c02" title="I2C TX and RX interrupt.">I2cTxRxIrq</a>:
<a name="l03018"></a>03018             pstcI2c-&gt;IBCR_f.INTE = 1u;
<a name="l03019"></a>03019             <span class="keywordflow">break</span>;
<a name="l03020"></a>03020         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga924d450aa1eb4112f4b517addaa8448aac1b8ea02717000c31f67980cced0aa51" title="I2C stop condition interrupt.">I2cStopDetectIrq</a>:
<a name="l03021"></a>03021             pstcI2c-&gt;IBCR_f.CNDE = 1u;
<a name="l03022"></a>03022             <span class="keywordflow">break</span>;  
<a name="l03023"></a>03023         <span class="keywordflow">default</span>:
<a name="l03024"></a>03024             <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l03025"></a>03025     }
<a name="l03026"></a>03026     
<a name="l03027"></a>03027     <span class="keywordflow">return</span> Ok;
<a name="l03028"></a>03028 }
<a name="l03029"></a>03029 
<a name="l03049"></a><a class="code" href="group___mfs_group.html#ga28a9afb2be613b0b288b43faab19a05e">03049</a> en_result_t <a class="code" href="group___mfs_group.html#ga28a9afb2be613b0b288b43faab19a05e" title="Disable I2C interrupts.">Mfs_I2c_DisableIrq</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>* pstcI2c, 
<a name="l03050"></a>03050                               <a class="code" href="group___mfs_group.html#ga35aa2d8db0368739d3a357ba4680b5f2" title="I2C interrupt selection.">en_i2c_irq_sel_t</a> enIrqSel)
<a name="l03051"></a>03051 {
<a name="l03052"></a>03052     <span class="keywordflow">if</span> (NULL == pstcI2c)
<a name="l03053"></a>03053     {
<a name="l03054"></a>03054         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l03055"></a>03055     }
<a name="l03056"></a>03056     
<a name="l03057"></a>03057     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l03058"></a>03058     {
<a name="l03059"></a>03059         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga924d450aa1eb4112f4b517addaa8448aa496436689d8067b0ce920174aba8191b" title="I2C TX interrupt.">I2cTxIrq</a>:
<a name="l03060"></a>03060             pstcI2c-&gt;SMR_f.TIE = 0u;
<a name="l03061"></a>03061             <span class="keywordflow">break</span>;
<a name="l03062"></a>03062         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga924d450aa1eb4112f4b517addaa8448aa26c8b71eb769d116a8fb118279771443" title="I2C RX interrupt.">I2cRxIrq</a>:
<a name="l03063"></a>03063             pstcI2c-&gt;SMR_f.RIE = 0u;
<a name="l03064"></a>03064             <span class="keywordflow">break</span>;
<a name="l03065"></a>03065         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga924d450aa1eb4112f4b517addaa8448aa52ec6923e8570872a7e8b4cab520b3a4" title="I2C TX idle interrupt.">I2cTxIdleIrq</a>:
<a name="l03066"></a>03066             pstcI2c-&gt;FCR1_f.FTIE = 0u;
<a name="l03067"></a>03067             <span class="keywordflow">break</span>;
<a name="l03068"></a>03068         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga924d450aa1eb4112f4b517addaa8448aa089e46258e5829db28f398d2a9813a04" title="I2C TX FIFO interrupt.">I2cTxFifoIrq</a>:
<a name="l03069"></a>03069             pstcI2c-&gt;SSR_f.TBIE = 0u;
<a name="l03070"></a>03070             <span class="keywordflow">break</span>;
<a name="l03071"></a>03071         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga924d450aa1eb4112f4b517addaa8448aa8f79b63874175264d4cf748db3f11c02" title="I2C TX and RX interrupt.">I2cTxRxIrq</a>:
<a name="l03072"></a>03072             pstcI2c-&gt;IBCR_f.INTE = 0u;
<a name="l03073"></a>03073             <span class="keywordflow">break</span>;
<a name="l03074"></a>03074         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga924d450aa1eb4112f4b517addaa8448aac1b8ea02717000c31f67980cced0aa51" title="I2C stop condition interrupt.">I2cStopDetectIrq</a>:
<a name="l03075"></a>03075             pstcI2c-&gt;IBCR_f.CNDE = 0u;
<a name="l03076"></a>03076             <span class="keywordflow">break</span>;  
<a name="l03077"></a>03077         <span class="keywordflow">default</span>:
<a name="l03078"></a>03078             <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l03079"></a>03079     }
<a name="l03080"></a>03080     
<a name="l03081"></a>03081     <span class="keywordflow">return</span> Ok;
<a name="l03082"></a>03082 }
<a name="l03083"></a>03083 
<a name="l03084"></a>03084 <span class="preprocessor">#endif   </span>
<a name="l03085"></a>03085 <span class="preprocessor"></span>
<a name="l03103"></a><a class="code" href="group___mfs_group.html#gaf43ed7024041f45ab83cd34e66384a05">03103</a> en_result_t <a class="code" href="group___mfs_group.html#gaf43ed7024041f45ab83cd34e66384a05" title="Initialization of a MFS module to activate as I2C.">Mfs_I2c_Init</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>*        pstcI2c, 
<a name="l03104"></a>03104                          <a class="code" href="structstc__mfs__i2c__config.html" title="I2C configuration structure.">stc_mfs_i2c_config_t</a>* pstcConfig)
<a name="l03105"></a>03105 {
<a name="l03106"></a>03106     <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData;
<a name="l03107"></a>03107     uint8_t u8Ch;
<a name="l03108"></a>03108     
<a name="l03109"></a>03109     <span class="comment">/* Preset local register variables to zero */</span>
<a name="l03110"></a>03110     stc_mfs_i2c_smr_field_t   stcSMR   = { 0u };
<a name="l03111"></a>03111     stc_mfs_i2c_ibcr_field_t  stcIBCR  = { 0u };
<a name="l03112"></a>03112     stc_mfs_i2c_isba_field_t  stcISBA  = { 0u };
<a name="l03113"></a>03113     stc_mfs_i2c_ismk_field_t  stcISMK  = { 0u };
<a name="l03114"></a>03114     
<a name="l03115"></a>03115     <span class="comment">/* Calculate the channel number */</span>
<a name="l03116"></a>03116     u8Ch = <a class="code" href="group___mfs_group.html#gafe613239d638d6d45ffff97fd5d1a6bb">I2cInstanceToIndex</a>(pstcI2c);
<a name="l03117"></a>03117     
<a name="l03118"></a>03118     <span class="keywordflow">if</span>(u8Ch &gt; 15u)
<a name="l03119"></a>03119     {
<a name="l03120"></a>03120         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l03121"></a>03121     }
<a name="l03122"></a>03122 
<a name="l03123"></a>03123     <span class="comment">/* Check for valid pointer and get pointer to internal data struct ... */</span>
<a name="l03124"></a>03124     pstcMfsInternData = <a class="code" href="group___mfs_group.html#gabe41825cea71550bd7b2f36b812cc681" title="Return the internal data for a certain I2C instance.">MfsI2cGetInternDataPtr</a>(pstcI2c);
<a name="l03125"></a>03125     
<a name="l03126"></a>03126     <span class="comment">/* Parameter check and get ptr to internal data struct */</span>
<a name="l03127"></a>03127     <span class="keywordflow">if</span> ((NULL == pstcMfsInternData)
<a name="l03128"></a>03128     ||  (NULL == pstcConfig)
<a name="l03129"></a>03129        )
<a name="l03130"></a>03130     {
<a name="l03131"></a>03131         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l03132"></a>03132     }
<a name="l03133"></a>03133     
<a name="l03134"></a>03134     <span class="comment">/* Set the MFS mode in the internal structure */</span>
<a name="l03135"></a>03135     pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a3efa9df8c4b18392bbb53070c40307ea" title="MFS mode.">enMode</a> = <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a75d22539af4b6f66afd6e724b649fc00" title="MFS I2C mode.">MfsI2cMode</a>;
<a name="l03136"></a>03136 
<a name="l03137"></a>03137     <span class="comment">/* Set I2C mode */</span>
<a name="l03138"></a>03138     <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#aca506c8f56dbe4875dd258575131b26c" title="I2C master mode or slave mode.">enMsMode</a>)
<a name="l03139"></a>03139     {
<a name="l03140"></a>03140         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga834329827ad1127990bead5f57c3e36ba7dd86e97b8b3a853ebc497555deedf12" title="I2C Master mode.">I2cMaster</a>:
<a name="l03141"></a>03141         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga834329827ad1127990bead5f57c3e36ba4e9ac3112f38bd8e171d44808cad2194" title="I2C Slave mode.">I2cSlave</a>:
<a name="l03142"></a>03142             stcSMR.MD = 4u;
<a name="l03143"></a>03143             <span class="keywordflow">break</span>;
<a name="l03144"></a>03144         <span class="keywordflow">default</span>:
<a name="l03145"></a>03145             <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l03146"></a>03146     }
<a name="l03147"></a>03147 
<a name="l03148"></a>03148     <span class="comment">/* Ack enable */</span>
<a name="l03149"></a>03149     stcIBCR.ACKE = TRUE;
<a name="l03150"></a>03150 
<a name="l03151"></a>03151     <span class="comment">/* Slave mode */</span>
<a name="l03152"></a>03152     <span class="keywordflow">if</span> (<a class="code" href="group___mfs_group.html#gga834329827ad1127990bead5f57c3e36ba4e9ac3112f38bd8e171d44808cad2194" title="I2C Slave mode.">I2cSlave</a> == pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#aca506c8f56dbe4875dd258575131b26c" title="I2C master mode or slave mode.">enMsMode</a>)
<a name="l03153"></a>03153     {
<a name="l03154"></a>03154         <span class="comment">/* Set slave address */</span>
<a name="l03155"></a>03155         stcISBA.SA = pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a371385b02ff45dce6a667fa0782c5af9" title="Slave address (This is effective on slave mode.)">u8SlaveAddr</a>;
<a name="l03156"></a>03156         <span class="comment">/* Enable slave address detection */</span>
<a name="l03157"></a>03157         stcISBA.SAEN = TRUE;
<a name="l03158"></a>03158         <span class="comment">/* Set slave address bit mask */</span>
<a name="l03159"></a>03159         stcISMK.SM = pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#afbd5da09f958a1b49ad4b8b20daa9e00" title="Slave Mask address (This is effective on slave mode.)">u8SlaveMaskAddr</a>;
<a name="l03160"></a>03160     }
<a name="l03161"></a>03161     
<a name="l03162"></a>03162     <span class="comment">/* Enable I2C*/</span>
<a name="l03163"></a>03163     stcISMK.EN = TRUE;
<a name="l03164"></a>03164 
<a name="l03165"></a>03165     <span class="comment">/* now setup hardware with correct mode first and then go on with */</span>
<a name="l03166"></a>03166     <span class="comment">/*   bit settings */</span>
<a name="l03167"></a>03167     pstcI2c-&gt;SMR_f = stcSMR;
<a name="l03168"></a>03168 
<a name="l03169"></a>03169     <span class="comment">/* I2C disable before other registers are set. */</span>
<a name="l03170"></a>03170     pstcI2c-&gt;ISMK  = 0u;
<a name="l03171"></a>03171 
<a name="l03172"></a>03172     <span class="comment">/* Use DMA or not */</span>
<a name="l03173"></a>03173     <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#ace73762071261e0aef725ad41e06a92d" title="FALSE: don&#39;t use DMA function, TRUE: use DMA function.">bDmaEnable</a>)
<a name="l03174"></a>03174     {
<a name="l03175"></a>03175         pstcI2c-&gt;SSR_f.DMA = 1u;
<a name="l03176"></a>03176     }
<a name="l03177"></a>03177     <span class="keywordflow">else</span>
<a name="l03178"></a>03178     {
<a name="l03179"></a>03179         pstcI2c-&gt;SSR_f.DMA = 0u;
<a name="l03180"></a>03180     }
<a name="l03181"></a>03181 
<a name="l03182"></a>03182     <span class="comment">/* Set baud rate generation */</span>
<a name="l03183"></a>03183     (void)<a class="code" href="group___mfs_group.html#gace28fbf6b0f58cd15acb06ab1f7d3181" title="Set the baudrate of I2C.">Mfs_I2c_SetBaudRate</a>(pstcI2c, pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a02de7678fcf4d4ee36160e20baefb31a" title="Baud rate (bps)">u32BaudRate</a>);
<a name="l03184"></a>03184 
<a name="l03185"></a>03185     <span class="comment">/* Set registers value */</span>
<a name="l03186"></a>03186     pstcI2c-&gt;IBCR_f  = stcIBCR;
<a name="l03187"></a>03187     pstcI2c-&gt;ISBA_f  = stcISBA;
<a name="l03188"></a>03188     pstcI2c-&gt;ISMK_f  = stcISMK;
<a name="l03189"></a>03189     
<a name="l03190"></a>03190     <span class="keywordflow">if</span>(NULL != pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#aa091c03d2eb888d3ffa4bb35a19d44f6" title="Pointer to FIFO configuration structure, if set to NULL, FIFO function will not be enabled...">pstcFifoConfig</a>) <span class="comment">/* Use FIFO function? */</span>
<a name="l03191"></a>03191     {
<a name="l03192"></a>03192         <span class="comment">/* Reset FIFO */</span>
<a name="l03193"></a>03193         pstcI2c-&gt;FCR0_f.FCL1 = 1u;
<a name="l03194"></a>03194         pstcI2c-&gt;FCR0_f.FCL2 = 1u;
<a name="l03195"></a>03195         <span class="comment">/* Enable FIFO receive Idle detection */</span>
<a name="l03196"></a>03196         pstcI2c-&gt;FCR1_f.FRIIE = 1;
<a name="l03197"></a>03197         <span class="comment">/* Selection TX and RX FIFO  */</span>
<a name="l03198"></a>03198         <span class="keywordflow">switch</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#aa091c03d2eb888d3ffa4bb35a19d44f6" title="Pointer to FIFO configuration structure, if set to NULL, FIFO function will not be enabled...">pstcFifoConfig</a>-&gt;<a class="code" href="structstc__mfs__fifo__config.html#a57522e8de00d79ae7f63cb81aedb9e5b" title="FIFO selection, see en_mfs_fifo_sel_t for details.">enFifoSel</a>)
<a name="l03199"></a>03199         {
<a name="l03200"></a>03200             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa75ef033bccb72dc698fbdde1559c580a3b86d2138912f3c9678856ac2a0dc56c" title="Transmit FIFO:FIFO1, Received FIFO:FIFO2.">MfsTxFifo1RxFifo2</a>:
<a name="l03201"></a>03201                 pstcI2c-&gt;FCR1_f.FSEL = 0u;
<a name="l03202"></a>03202                 <span class="keywordflow">break</span>;
<a name="l03203"></a>03203             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa75ef033bccb72dc698fbdde1559c580a71003bf541f6873ac786ea6b31b9a046" title="Transmit FIFO:FIFO2, Received FIFO:FIFO1.">MfsTxFifo2RxFifo1</a>:
<a name="l03204"></a>03204                 pstcI2c-&gt;FCR1_f.FSEL = 1u;
<a name="l03205"></a>03205                 <span class="keywordflow">break</span>;
<a name="l03206"></a>03206             <span class="keywordflow">default</span>:
<a name="l03207"></a>03207                <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l03208"></a>03208         }
<a name="l03209"></a>03209         <span class="comment">/* Set FIFO count */</span>
<a name="l03210"></a>03210         pstcI2c-&gt;FBYTE1 = pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#aa091c03d2eb888d3ffa4bb35a19d44f6" title="Pointer to FIFO configuration structure, if set to NULL, FIFO function will not be enabled...">pstcFifoConfig</a>-&gt;<a class="code" href="structstc__mfs__fifo__config.html#ac2b77d76431bbc7f1fdf7fc88d17a2f6" title="Transfer data count for FIFO1.">u8ByteCount1</a>;
<a name="l03211"></a>03211         pstcI2c-&gt;FBYTE2 = pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#aa091c03d2eb888d3ffa4bb35a19d44f6" title="Pointer to FIFO configuration structure, if set to NULL, FIFO function will not be enabled...">pstcFifoConfig</a>-&gt;<a class="code" href="structstc__mfs__fifo__config.html#a1252320650a64b39c87bfabfc1d420bd" title="Transfer data count for FIFO2.">u8ByteCount2</a>;
<a name="l03212"></a>03212         <span class="comment">/* Enable FIFO  */</span>
<a name="l03213"></a>03213         pstcI2c-&gt;FCR0_f.FE1 = 1;
<a name="l03214"></a>03214         pstcI2c-&gt;FCR0_f.FE2 = 1;
<a name="l03215"></a>03215     }
<a name="l03216"></a>03216 
<a name="l03217"></a>03217 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_MFS0 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS8 == PDL_ON) ||  \</span>
<a name="l03218"></a>03218 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS1 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS9 == PDL_ON) ||  \</span>
<a name="l03219"></a>03219 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS2 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS10 == PDL_ON) || \</span>
<a name="l03220"></a>03220 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS3 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS11 == PDL_ON) || \</span>
<a name="l03221"></a>03221 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS4 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS12 == PDL_ON) || \</span>
<a name="l03222"></a>03222 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS5 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS13 == PDL_ON) || \</span>
<a name="l03223"></a>03223 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS6 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS14 == PDL_ON) || \</span>
<a name="l03224"></a>03224 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS7 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS15 == PDL_ON)      </span>
<a name="l03225"></a>03225 <span class="preprocessor"></span>    <span class="comment">/* Configure interrupt */</span>
<a name="l03226"></a>03226     <span class="keywordflow">if</span>(NULL != pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a1f13ce458cda83299bfaf12db3402f62" title="Pointer to I2C interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>)
<a name="l03227"></a>03227     {
<a name="l03228"></a>03228         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a1f13ce458cda83299bfaf12db3402f62" title="Pointer to I2C interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__i2c__irq__en.html#a9225483d09ffac6ffd1a8efee3a27aaa" title="I2C TX interrupt.">bTxIrq</a>)
<a name="l03229"></a>03229         {
<a name="l03230"></a>03230             pstcI2c-&gt;SMR_f.TIE = 1u;
<a name="l03231"></a>03231         }
<a name="l03232"></a>03232         
<a name="l03233"></a>03233         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a1f13ce458cda83299bfaf12db3402f62" title="Pointer to I2C interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__i2c__irq__en.html#af045726c4197374f4d9ad38ba0c10da9" title="I2C RX interrupt.">bRxIrq</a>)
<a name="l03234"></a>03234         {
<a name="l03235"></a>03235             pstcI2c-&gt;SMR_f.RIE = 1u;
<a name="l03236"></a>03236         }
<a name="l03237"></a>03237         
<a name="l03238"></a>03238         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a1f13ce458cda83299bfaf12db3402f62" title="Pointer to I2C interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__i2c__irq__en.html#a9a54ea9dc253444060a1c09cbbcc6b16" title="I2C TX FIFO interrupt.">bTxFifoIrq</a>)
<a name="l03239"></a>03239         {
<a name="l03240"></a>03240             pstcI2c-&gt;FCR1_f.FTIE = 1u;
<a name="l03241"></a>03241         }
<a name="l03242"></a>03242         
<a name="l03243"></a>03243         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a1f13ce458cda83299bfaf12db3402f62" title="Pointer to I2C interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__i2c__irq__en.html#ab20055e6900c7bf9b89e28d7db325691" title="I2C TX idle interrupt.">bTxIdleIrq</a>)
<a name="l03244"></a>03244         {
<a name="l03245"></a>03245             pstcI2c-&gt;SSR_f.TBIE = 1u;
<a name="l03246"></a>03246         }
<a name="l03247"></a>03247         
<a name="l03248"></a>03248         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a1f13ce458cda83299bfaf12db3402f62" title="Pointer to I2C interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__i2c__irq__en.html#a912689c457ef2c391974401088dd55cd" title="I2C TX and RX interrupt.">bTxRxIrq</a>)
<a name="l03249"></a>03249         {
<a name="l03250"></a>03250             pstcI2c-&gt;IBCR_f.INTE = 1u;
<a name="l03251"></a>03251         }
<a name="l03252"></a>03252         
<a name="l03253"></a>03253         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a1f13ce458cda83299bfaf12db3402f62" title="Pointer to I2C interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__i2c__irq__en.html#ac03ea7010a113e2cd5a0f432342406b9" title="I2C stop condition interrupt.">bStopDetectIrq</a>)
<a name="l03254"></a>03254         {
<a name="l03255"></a>03255             pstcI2c-&gt;IBCR_f.CNDE = 1u;
<a name="l03256"></a>03256         }
<a name="l03257"></a>03257     }
<a name="l03258"></a>03258     
<a name="l03259"></a>03259     <span class="comment">/* Configure interrupt callback */</span>
<a name="l03260"></a>03260     <span class="keywordflow">if</span>(NULL != pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a60659f1d395a6654bb7a5b793c47d185" title="Pointer to I2C interrupt callback functions structurei, if set to NULL, no interrupt callback initial...">pstcIrqCb</a>)
<a name="l03261"></a>03261     {
<a name="l03262"></a>03262         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#a1b554fde91d5ebcef1a9b136ad28fd88" title="I2C TX interrupt callback function pointer.">pfnTxIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a60659f1d395a6654bb7a5b793c47d185" title="Pointer to I2C interrupt callback functions structurei, if set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__i2c__irq__cb.html#a1b554fde91d5ebcef1a9b136ad28fd88" title="I2C TX interrupt callback function pointer.">pfnTxIrqCb</a>;
<a name="l03263"></a>03263         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#ad40109f285524938eaf8fb58f887d4e1" title="I2C RX interrupt callback function pointer.">pfnRxIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a60659f1d395a6654bb7a5b793c47d185" title="Pointer to I2C interrupt callback functions structurei, if set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__i2c__irq__cb.html#ad40109f285524938eaf8fb58f887d4e1" title="I2C RX interrupt callback function pointer.">pfnRxIrqCb</a>;
<a name="l03264"></a>03264         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#af6a48c32e9708772610ad4f9fd5720a6" title="I2C TX FIFO interrupt callback function pointer.">pfnTxFifoIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a60659f1d395a6654bb7a5b793c47d185" title="Pointer to I2C interrupt callback functions structurei, if set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__i2c__irq__cb.html#af6a48c32e9708772610ad4f9fd5720a6" title="I2C TX FIFO interrupt callback function pointer.">pfnTxFifoIrqCb</a>;
<a name="l03265"></a>03265         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#a182337a4324280aec65e2c88f507e538" title="I2C TX idle interrupt callback function pointer.">pfnTxIdleCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a60659f1d395a6654bb7a5b793c47d185" title="Pointer to I2C interrupt callback functions structurei, if set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__i2c__irq__cb.html#a182337a4324280aec65e2c88f507e538" title="I2C TX idle interrupt callback function pointer.">pfnTxIdleCb</a>;
<a name="l03266"></a>03266         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#a711208428f9ac10cd8975bec9455607b" title="I2C TX and RX completion interrupt callback function.">pfnTxRxIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a60659f1d395a6654bb7a5b793c47d185" title="Pointer to I2C interrupt callback functions structurei, if set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__i2c__irq__cb.html#a711208428f9ac10cd8975bec9455607b" title="I2C TX and RX completion interrupt callback function.">pfnTxRxIrqCb</a>;
<a name="l03267"></a>03267         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#ae72595a4fa93db1f559edc4c93567032" title="I2C internal interrupt callback function.">stcI2cInternIrqCb</a>.<a class="code" href="structstc__i2c__irq__cb.html#a4c93c62681a1103d94be9761713b5e0a" title="I2C stop condition interrupt.">pfnStopDetectIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a60659f1d395a6654bb7a5b793c47d185" title="Pointer to I2C interrupt callback functions structurei, if set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__i2c__irq__cb.html#a4c93c62681a1103d94be9761713b5e0a" title="I2C stop condition interrupt.">pfnStopDetectIrqCb</a>;
<a name="l03268"></a>03268     }
<a name="l03269"></a>03269     
<a name="l03270"></a>03270     <span class="comment">/* Configure NVIC */</span>
<a name="l03271"></a>03271     <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__i2c__config.html#a18b9c6a82679466e066894a2b65f0d13" title="TRUE: enable NVIC, FALSE: don&#39;t enable NVIC.">bTouchNvic</a>)
<a name="l03272"></a>03272     {
<a name="l03273"></a>03273         <a class="code" href="group___mfs_group.html#ga8cf89127037324ffc519f97b5312be9c" title="Device dependent initialization of transmit interrupts according CMSIS with level defined in pdl...">MfsInitNvic</a>(u8Ch, FALSE);
<a name="l03274"></a>03274         <a class="code" href="group___mfs_group.html#ga8cf89127037324ffc519f97b5312be9c" title="Device dependent initialization of transmit interrupts according CMSIS with level defined in pdl...">MfsInitNvic</a>(u8Ch, TRUE);
<a name="l03275"></a>03275     }
<a name="l03276"></a>03276 
<a name="l03277"></a>03277 <span class="preprocessor">#endif</span>
<a name="l03278"></a>03278 <span class="preprocessor"></span>    
<a name="l03279"></a>03279     <span class="keywordflow">return</span> (Ok);
<a name="l03280"></a>03280 } <span class="comment">/* Mfs_I2c_Init */</span>
<a name="l03281"></a>03281 
<a name="l03298"></a><a class="code" href="group___mfs_group.html#gaa6f7d48003f8ed49e8f7e0fe3cbd46eb">03298</a> en_result_t <a class="code" href="group___mfs_group.html#gaa6f7d48003f8ed49e8f7e0fe3cbd46eb" title="Deinitialisation of a MFS module activating as I2C.">Mfs_I2c_DeInit</a>( <span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>* pstcI2c, boolean_t bTouchNvic)
<a name="l03299"></a>03299 {
<a name="l03300"></a>03300     en_result_t            enResult;
<a name="l03301"></a>03301     <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData;
<a name="l03302"></a>03302     uint8_t u8Ch;
<a name="l03303"></a>03303     
<a name="l03304"></a>03304     <span class="comment">/* Calculate the channel number */</span>
<a name="l03305"></a>03305     u8Ch = <a class="code" href="group___mfs_group.html#gafe613239d638d6d45ffff97fd5d1a6bb">I2cInstanceToIndex</a>(pstcI2c);
<a name="l03306"></a>03306     
<a name="l03307"></a>03307     <span class="keywordflow">if</span>(u8Ch &gt; 15u)
<a name="l03308"></a>03308     {
<a name="l03309"></a>03309         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l03310"></a>03310     }
<a name="l03311"></a>03311     <span class="comment">/* Check for valid pointer and get pointer to internal data struct ... */</span>
<a name="l03312"></a>03312     pstcMfsInternData = <a class="code" href="group___mfs_group.html#gabe41825cea71550bd7b2f36b812cc681" title="Return the internal data for a certain I2C instance.">MfsI2cGetInternDataPtr</a>(pstcI2c);
<a name="l03313"></a>03313     <span class="comment">/* ... and check */</span>
<a name="l03314"></a>03314     <span class="keywordflow">if</span> (NULL == pstcMfsInternData)
<a name="l03315"></a>03315     {
<a name="l03316"></a>03316         enResult = ErrorInvalidParameter;
<a name="l03317"></a>03317     }
<a name="l03318"></a>03318     <span class="keywordflow">else</span>
<a name="l03319"></a>03319     {
<a name="l03320"></a>03320         <span class="comment">/* Disable I2C */</span>
<a name="l03321"></a>03321         pstcI2c-&gt;ISMK_f.EN = FALSE;
<a name="l03322"></a>03322 
<a name="l03323"></a>03323         <span class="comment">/* Serial Mode Register clear all bits (valid in any mode) */</span>
<a name="l03324"></a>03324         pstcI2c-&gt;SMR = 0u;
<a name="l03325"></a>03325            
<a name="l03326"></a>03326         <span class="comment">/* Reset Mfs receive and transmit bit to default */</span>
<a name="l03327"></a>03327         <span class="comment">/* and clear all error flags */</span>
<a name="l03328"></a>03328         pstcI2c-&gt;IBCR = 0u;
<a name="l03329"></a>03329 
<a name="l03330"></a>03330         <span class="comment">/* Clear reception Errors */</span>
<a name="l03331"></a>03331         pstcI2c-&gt;SSR_f.REC = TRUE;
<a name="l03332"></a>03332 
<a name="l03333"></a>03333         <span class="comment">/* Reset all other used register to default value */</span>
<a name="l03334"></a>03334         pstcI2c-&gt;SSR  = 0u;
<a name="l03335"></a>03335         pstcI2c-&gt;IBSR = 0u;
<a name="l03336"></a>03336         pstcI2c-&gt;FCR0 = 0u;
<a name="l03337"></a>03337         pstcI2c-&gt;FCR1 = 0u;
<a name="l03338"></a>03338         
<a name="l03339"></a>03339 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_MFS0 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS8 == PDL_ON) ||  \</span>
<a name="l03340"></a>03340 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS1 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS9 == PDL_ON) ||  \</span>
<a name="l03341"></a>03341 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS2 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS10 == PDL_ON) || \</span>
<a name="l03342"></a>03342 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS3 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS11 == PDL_ON) || \</span>
<a name="l03343"></a>03343 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS4 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS12 == PDL_ON) || \</span>
<a name="l03344"></a>03344 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS5 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS13 == PDL_ON) || \</span>
<a name="l03345"></a>03345 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS6 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS14 == PDL_ON) || \</span>
<a name="l03346"></a>03346 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS7 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS15 == PDL_ON)          </span>
<a name="l03347"></a>03347 <span class="preprocessor"></span>        <span class="keywordflow">if</span>(TRUE == bTouchNvic)
<a name="l03348"></a>03348         {
<a name="l03349"></a>03349             <a class="code" href="group___mfs_group.html#gac25b5fe9f346727c4b883952c6cd8d9a" title="Device dependent de-initialization of interrupts according CMSIS.">MfsDeInitNvic</a>(u8Ch, FALSE);
<a name="l03350"></a>03350             <a class="code" href="group___mfs_group.html#gac25b5fe9f346727c4b883952c6cd8d9a" title="Device dependent de-initialization of interrupts according CMSIS.">MfsDeInitNvic</a>(u8Ch, TRUE);
<a name="l03351"></a>03351         }
<a name="l03352"></a>03352 <span class="preprocessor">#endif</span>
<a name="l03353"></a>03353 <span class="preprocessor"></span>        enResult = Ok;
<a name="l03354"></a>03354     }
<a name="l03355"></a>03355 
<a name="l03356"></a>03356     <span class="keywordflow">return</span> (enResult);
<a name="l03357"></a>03357 } <span class="comment">/* Mfs_I2c_DeInit */</span>
<a name="l03358"></a>03358 
<a name="l03375"></a><a class="code" href="group___mfs_group.html#gace28fbf6b0f58cd15acb06ab1f7d3181">03375</a> en_result_t <a class="code" href="group___mfs_group.html#gace28fbf6b0f58cd15acb06ab1f7d3181" title="Set the baudrate of I2C.">Mfs_I2c_SetBaudRate</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>* pstcI2c,
<a name="l03376"></a>03376                                 uint32_t u32BaudRate)
<a name="l03377"></a>03377 {
<a name="l03378"></a>03378     uint32_t u32Pclk1;
<a name="l03379"></a>03379     boolean_t bTempBit = FALSE;
<a name="l03380"></a>03380   
<a name="l03381"></a>03381     <span class="keywordflow">if</span> ((NULL == pstcI2c) || (u32BaudRate &gt; 400000u))
<a name="l03382"></a>03382     {
<a name="l03383"></a>03383         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l03384"></a>03384     }
<a name="l03385"></a>03385     
<a name="l03386"></a>03386     bTempBit = pstcI2c-&gt;ISMK_f.EN;
<a name="l03387"></a>03387     pstcI2c-&gt;ISMK_f.EN = 1u;
<a name="l03388"></a>03388 <span class="preprocessor">#if (PDL_MCU_CORE == PDL_FM0P_CORE)       </span>
<a name="l03389"></a>03389 <span class="preprocessor"></span>    u32Pclk1 = __HCLK/(1ul &lt;&lt; (APBC1_PSR_Val &amp; 0x03u)); <span class="comment">// MFS is attached on APB1 bus for FM0+</span>
<a name="l03390"></a>03390 <span class="preprocessor">#else</span>
<a name="l03391"></a>03391 <span class="preprocessor"></span>    u32Pclk1 = __HCLK/(1ul &lt;&lt; (APBC2_PSR_Val &amp; 0x03u)); <span class="comment">// MFS is attached on APB2 bus for FM3 and FM4</span>
<a name="l03392"></a>03392 <span class="preprocessor">#endif    </span>
<a name="l03393"></a>03393 <span class="preprocessor"></span>    pstcI2c-&gt;BGR_f.BGR = (u32Pclk1/u32BaudRate) - 1u;
<a name="l03394"></a>03394     pstcI2c-&gt;ISMK_f.EN = bTempBit;
<a name="l03395"></a>03395    
<a name="l03396"></a>03396     <span class="keywordflow">return</span> Ok;
<a name="l03397"></a>03397 }
<a name="l03398"></a>03398 
<a name="l03410"></a><a class="code" href="group___mfs_group.html#gad18db2b77c95a635996158f9e7ca8785">03410</a> en_result_t <a class="code" href="group___mfs_group.html#gad18db2b77c95a635996158f9e7ca8785" title="Generate start signal of I2C.">Mfs_I2c_GenerateStart</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>*        pstcI2c)
<a name="l03411"></a>03411 {
<a name="l03412"></a>03412     uint32_t u32TimeOut = SystemCoreClock;
<a name="l03413"></a>03413       
<a name="l03414"></a>03414     <span class="keywordflow">if</span> (NULL == pstcI2c)
<a name="l03415"></a>03415     {
<a name="l03416"></a>03416         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l03417"></a>03417     }
<a name="l03418"></a>03418     
<a name="l03419"></a>03419     pstcI2c-&gt;IBCR_f.MSS = 1u;
<a name="l03420"></a>03420     <span class="keywordflow">while</span>(u32TimeOut--)
<a name="l03421"></a>03421     {
<a name="l03422"></a>03422         <span class="keywordflow">if</span>((1u == pstcI2c-&gt;IBCR_f.MSS) &amp;&amp; (1u == pstcI2c-&gt;IBCR_f.ACT_SCC))
<a name="l03423"></a>03423         {
<a name="l03424"></a>03424             <span class="keywordflow">return</span> Ok;
<a name="l03425"></a>03425         }
<a name="l03426"></a>03426     }
<a name="l03427"></a>03427     
<a name="l03428"></a>03428     <span class="keywordflow">return</span>  ErrorTimeout;
<a name="l03429"></a>03429 }
<a name="l03430"></a>03430 
<a name="l03442"></a><a class="code" href="group___mfs_group.html#ga0d2af57200d9e825659425d7ede2a09f">03442</a> en_result_t <a class="code" href="group___mfs_group.html#ga0d2af57200d9e825659425d7ede2a09f" title="Generate restart signal of I2C.">Mfs_I2c_GenerateRestart</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>*      pstcI2c)
<a name="l03443"></a>03443 {
<a name="l03444"></a>03444     uint32_t u32TimeOut = SystemCoreClock;
<a name="l03445"></a>03445     
<a name="l03446"></a>03446     <span class="keywordflow">if</span> (NULL == pstcI2c)
<a name="l03447"></a>03447     {
<a name="l03448"></a>03448         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l03449"></a>03449     }
<a name="l03450"></a>03450     
<a name="l03451"></a>03451     pstcI2c-&gt;IBCR_f.ACT_SCC = 1u;
<a name="l03452"></a>03452     
<a name="l03453"></a>03453     <span class="keywordflow">while</span>(u32TimeOut--)
<a name="l03454"></a>03454     {
<a name="l03455"></a>03455         <span class="keywordflow">if</span>(1u == pstcI2c-&gt;IBSR_f.RSC)
<a name="l03456"></a>03456         {
<a name="l03457"></a>03457             <span class="keywordflow">return</span> Ok;
<a name="l03458"></a>03458         }
<a name="l03459"></a>03459     }
<a name="l03460"></a>03460     
<a name="l03461"></a>03461     <span class="keywordflow">return</span> ErrorTimeout;
<a name="l03462"></a>03462 }
<a name="l03463"></a>03463 
<a name="l03475"></a><a class="code" href="group___mfs_group.html#gafa6d6b4dad489dabe26237b2eedcf64a">03475</a> en_result_t <a class="code" href="group___mfs_group.html#gafa6d6b4dad489dabe26237b2eedcf64a" title="Generate stop signal of I2C.">Mfs_I2c_GenerateStop</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>*      pstcI2c)
<a name="l03476"></a>03476 {
<a name="l03477"></a>03477     uint32_t u32TimeOut = SystemCoreClock;
<a name="l03478"></a>03478     
<a name="l03479"></a>03479     <span class="keywordflow">if</span> (NULL == pstcI2c)
<a name="l03480"></a>03480     {
<a name="l03481"></a>03481         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l03482"></a>03482     }
<a name="l03483"></a>03483     
<a name="l03484"></a>03484     <span class="keywordflow">while</span>(u32TimeOut--)
<a name="l03485"></a>03485     {
<a name="l03486"></a>03486         pstcI2c-&gt;IBCR &amp;= ~0xc1u;
<a name="l03487"></a>03487         <span class="keywordflow">if</span>((0u == pstcI2c-&gt;IBCR_f.MSS) &amp;&amp; (0u == pstcI2c-&gt;IBCR_f.ACT_SCC))
<a name="l03488"></a>03488         {
<a name="l03489"></a>03489             <span class="keywordflow">return</span> Ok;
<a name="l03490"></a>03490         }
<a name="l03491"></a>03491     }
<a name="l03492"></a>03492     
<a name="l03493"></a>03493     <span class="keywordflow">return</span> ErrorTimeout;
<a name="l03494"></a>03494 }
<a name="l03495"></a>03495 
<a name="l03508"></a><a class="code" href="group___mfs_group.html#gac24c840e23b1977a7b6c45d83d257626">03508</a> en_result_t <a class="code" href="group___mfs_group.html#gac24c840e23b1977a7b6c45d83d257626" title="Write I2C data buffer.">Mfs_I2c_SendData</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>*      pstcI2c, uint8_t u8Data)
<a name="l03509"></a>03509 {
<a name="l03510"></a>03510     <span class="keywordflow">if</span> (NULL == pstcI2c)
<a name="l03511"></a>03511     {
<a name="l03512"></a>03512         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l03513"></a>03513     }
<a name="l03514"></a>03514     
<a name="l03515"></a>03515     pstcI2c-&gt;TDR = u8Data;
<a name="l03516"></a>03516     
<a name="l03517"></a>03517     <span class="keywordflow">return</span> Ok;
<a name="l03518"></a>03518 }
<a name="l03519"></a>03519 
<a name="l03529"></a><a class="code" href="group___mfs_group.html#ga1998275f616899a898e81aeea76d4b4f">03529</a> uint8_t <a class="code" href="group___mfs_group.html#ga1998275f616899a898e81aeea76d4b4f" title="Read I2C data buffer.">Mfs_I2c_ReceiveData</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>*      pstcI2c)
<a name="l03530"></a>03530 {
<a name="l03531"></a>03531     <span class="keywordflow">return</span> pstcI2c-&gt;RDR;
<a name="l03532"></a>03532 }
<a name="l03533"></a>03533 
<a name="l03550"></a><a class="code" href="group___mfs_group.html#ga3ed5fb4f2652fba2a53e4fb3a10d3506">03550</a> en_result_t <a class="code" href="group___mfs_group.html#ga3ed5fb4f2652fba2a53e4fb3a10d3506" title="Configure ACK signal sent to master.">Mfs_I2c_ConfigAck</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>* pstcI2c, <a class="code" href="group___mfs_group.html#gaae5fa1fe706847fe569ff3d97d748156" title="I2C ACK types.">en_i2c_ack_t</a> enAck)
<a name="l03551"></a>03551 {
<a name="l03552"></a>03552     stc_mfs_i2c_ibcr_field_t stcIbcr =  pstcI2c-&gt;IBCR_f; 
<a name="l03553"></a>03553   
<a name="l03554"></a>03554     <span class="keywordflow">if</span> (NULL == pstcI2c)
<a name="l03555"></a>03555     {
<a name="l03556"></a>03556         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l03557"></a>03557     }
<a name="l03558"></a>03558     
<a name="l03559"></a>03559     (<a class="code" href="group___mfs_group.html#gga61297c549abe7b45ddcfd9769d6713a2a2f4cd3d8402db1f893732c300380df04" title="I2C normal ACK.">I2cAck</a> == enAck) ?  (stcIbcr.ACKE = 1u) :  (stcIbcr.ACKE = 0u);
<a name="l03560"></a>03560     
<a name="l03561"></a>03561     stcIbcr.ACT_SCC = 0u; <span class="comment">// Set SCC = 0 to avoid generating a restart </span>
<a name="l03562"></a>03562     
<a name="l03563"></a>03563     pstcI2c-&gt;IBCR_f = stcIbcr;
<a name="l03564"></a>03564     
<a name="l03565"></a>03565     <span class="keywordflow">return</span> Ok;
<a name="l03566"></a>03566     
<a name="l03567"></a>03567 }
<a name="l03568"></a>03568 
<a name="l03581"></a><a class="code" href="group___mfs_group.html#gae97b2c3a780acdb0aa56c0337a6a6197">03581</a> <a class="code" href="group___mfs_group.html#gaae5fa1fe706847fe569ff3d97d748156" title="I2C ACK types.">en_i2c_ack_t</a>   <a class="code" href="group___mfs_group.html#gae97b2c3a780acdb0aa56c0337a6a6197" title="Get the ACK signal from slave.">Mfs_I2c_GetAck</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>*        pstcI2c)
<a name="l03582"></a>03582 {
<a name="l03583"></a>03583     <a class="code" href="group___mfs_group.html#gaae5fa1fe706847fe569ff3d97d748156" title="I2C ACK types.">en_i2c_ack_t</a> enRet;
<a name="l03584"></a>03584     
<a name="l03585"></a>03585     enRet = (0u == pstcI2c-&gt;IBSR_f.RACK) ? <a class="code" href="group___mfs_group.html#gga61297c549abe7b45ddcfd9769d6713a2a2f4cd3d8402db1f893732c300380df04" title="I2C normal ACK.">I2cAck</a> : <a class="code" href="group___mfs_group.html#gga61297c549abe7b45ddcfd9769d6713a2a6ecec4c160f870d763e86b24a0680d73" title="I2C NACK.">I2cNAck</a>;
<a name="l03586"></a>03586     
<a name="l03587"></a>03587     <span class="keywordflow">return</span> enRet; 
<a name="l03588"></a>03588 }
<a name="l03589"></a>03589 
<a name="l03635"></a><a class="code" href="group___mfs_group.html#ga84f81dc892dc9b0ec0052b09ef7c5484">03635</a> boolean_t <a class="code" href="group___mfs_group.html#ga84f81dc892dc9b0ec0052b09ef7c5484" title="Get status of I2C according to status type.">Mfs_I2c_GetStatus</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>* pstcI2c, 
<a name="l03636"></a>03636                             <a class="code" href="group___mfs_group.html#ga61d329144b09de8fa4f4e7080bd11d0f" title="I2C status types.">en_i2c_status_t</a> enStatus)
<a name="l03637"></a>03637 {
<a name="l03638"></a>03638     boolean_t bRet;
<a name="l03639"></a>03639     
<a name="l03640"></a>03640     <span class="keywordflow">switch</span>(enStatus)
<a name="l03641"></a>03641     {
<a name="l03642"></a>03642         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a174a417e08fcf77638c70fd18f84b07a" title="I2C overrun error.">I2cOverrunError</a>:
<a name="l03643"></a>03643             bRet = (1u == pstcI2c-&gt;SSR_f.ORE ) ? TRUE : FALSE;
<a name="l03644"></a>03644             <span class="keywordflow">break</span>;  
<a name="l03645"></a>03645         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a68e72ecbf674f4cd4e568554fd9ef95f" title="I2C RX buffer full.">I2cRxFull</a>:
<a name="l03646"></a>03646             bRet = (1u == pstcI2c-&gt;SSR_f.RDRF) ? TRUE : FALSE;
<a name="l03647"></a>03647             <span class="keywordflow">break</span>;  
<a name="l03648"></a>03648         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a0b8764aa5e80fecb0bca23feb074885d" title="I2C TX buffer empty.">I2cTxEmpty</a>:
<a name="l03649"></a>03649             bRet = (1u == pstcI2c-&gt;SSR_f.TDRE) ? TRUE : FALSE;
<a name="l03650"></a>03650             <span class="keywordflow">break</span>;  
<a name="l03651"></a>03651         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a74b13a16fde1f879dfe04048f1a88c59" title="I2C TX idle.">I2cTxIdle</a>:
<a name="l03652"></a>03652             bRet = (1u == pstcI2c-&gt;SSR_f.TBI) ? TRUE : FALSE;
<a name="l03653"></a>03653             <span class="keywordflow">break</span>;  
<a name="l03654"></a>03654         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3af7ac61fc745f91590ccfab735ed16f1c" title="I2C TX FIFO request.">I2cTxFifoRequest</a>:
<a name="l03655"></a>03655             bRet = (1u == pstcI2c-&gt;FCR1_f.FDRQ) ? TRUE : FALSE;
<a name="l03656"></a>03656             <span class="keywordflow">break</span>;  
<a name="l03657"></a>03657         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a8d6df4ac206fb4f8caad4c62c2e91d5c" title="I2C First byte detection.">I2cFirstByteDetect</a>:
<a name="l03658"></a>03658             bRet = (1u == pstcI2c-&gt;IBSR_f.FBT) ? TRUE : FALSE;
<a name="l03659"></a>03659             <span class="keywordflow">break</span>;  
<a name="l03660"></a>03660         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a41f2fe4a6b13af547ffd2dde8aeaa9b0" title="I2C reserved byte detection.">I2cReservedByteDetect</a>:
<a name="l03661"></a>03661             bRet = (1u == pstcI2c-&gt;IBSR_f.RSA ) ? TRUE : FALSE;
<a name="l03662"></a>03662             <span class="keywordflow">break</span>;  
<a name="l03663"></a>03663         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a8f6f602e4f57859c14a78a2557422534" title="I2C stop condition detection.">I2cStopDetect</a>:
<a name="l03664"></a>03664             bRet = (1u == pstcI2c-&gt;IBSR_f.SPC) ? TRUE : FALSE;
<a name="l03665"></a>03665             <span class="keywordflow">break</span>;  
<a name="l03666"></a>03666         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a5e3238cec2d05b7c5abc99b8cfc2809e" title="I2C Bus status.">I2cBusStatus</a>:
<a name="l03667"></a>03667             bRet = (1u == pstcI2c-&gt;IBSR_f.BB) ? TRUE : FALSE;
<a name="l03668"></a>03668             <span class="keywordflow">break</span>;  
<a name="l03669"></a>03669         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a5e14f6cd9fd817b846994083c2ed4fe4" title="I2C Bus error.">I2cBusErr</a>:
<a name="l03670"></a>03670             bRet = (1u == pstcI2c-&gt;IBCR_f.BER) ? TRUE : FALSE;
<a name="l03671"></a>03671             <span class="keywordflow">break</span>; 
<a name="l03672"></a>03672         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3ac94822bc9cf467e4df59b8397cd5e60d" title="I2C transimission or reception interrupt flag.">I2cRxTxIrq</a>:
<a name="l03673"></a>03673             bRet = (1u == pstcI2c-&gt;IBCR_f.INT) ? TRUE : FALSE;
<a name="l03674"></a>03674             <span class="keywordflow">break</span>;
<a name="l03675"></a>03675         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a79683dee7d5a866eba1d4795ba24f7b0" title="I2C received slave address matchs with pre-set address.">I2cDevAddrMatch</a>:
<a name="l03676"></a>03676             <span class="keywordflow">if</span>((0u == pstcI2c-&gt;IBCR_f.MSS) &amp;&amp; (1u == pstcI2c-&gt;IBCR_f.ACT_SCC))
<a name="l03677"></a>03677             {
<a name="l03678"></a>03678                 bRet = TRUE;
<a name="l03679"></a>03679             }
<a name="l03680"></a>03680             <span class="keywordflow">else</span>
<a name="l03681"></a>03681             {
<a name="l03682"></a>03682                 bRet = FALSE;
<a name="l03683"></a>03683             }
<a name="l03684"></a>03684             <span class="keywordflow">break</span>;
<a name="l03685"></a>03685         <span class="keywordflow">default</span>:
<a name="l03686"></a>03686             <span class="keywordflow">break</span>;  
<a name="l03687"></a>03687     }
<a name="l03688"></a>03688     
<a name="l03689"></a>03689     <span class="keywordflow">return</span> bRet;
<a name="l03690"></a>03690 }
<a name="l03691"></a>03691 
<a name="l03692"></a>03692 
<a name="l03724"></a><a class="code" href="group___mfs_group.html#ga301936fbe860355d8424af2dcf0f1ddc">03724</a> en_result_t <a class="code" href="group___mfs_group.html#ga301936fbe860355d8424af2dcf0f1ddc" title="Clear status of I2C according to status type.">Mfs_I2c_ClrStatus</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>* pstcI2c,
<a name="l03725"></a>03725                                <a class="code" href="group___mfs_group.html#ga61d329144b09de8fa4f4e7080bd11d0f" title="I2C status types.">en_i2c_status_t</a> enStatus)
<a name="l03726"></a>03726 {
<a name="l03727"></a>03727     <span class="keywordflow">if</span> (NULL == pstcI2c)
<a name="l03728"></a>03728     {
<a name="l03729"></a>03729         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l03730"></a>03730     }
<a name="l03731"></a>03731     
<a name="l03732"></a>03732     <span class="keywordflow">switch</span>(enStatus)
<a name="l03733"></a>03733     {
<a name="l03734"></a>03734         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a174a417e08fcf77638c70fd18f84b07a" title="I2C overrun error.">I2cOverrunError</a>:
<a name="l03735"></a>03735             pstcI2c-&gt;SSR_f.REC = 1u;
<a name="l03736"></a>03736             <span class="keywordflow">break</span>;  
<a name="l03737"></a>03737         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a68e72ecbf674f4cd4e568554fd9ef95f" title="I2C RX buffer full.">I2cRxFull</a>:
<a name="l03738"></a>03738         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a0b8764aa5e80fecb0bca23feb074885d" title="I2C TX buffer empty.">I2cTxEmpty</a>:
<a name="l03739"></a>03739         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a74b13a16fde1f879dfe04048f1a88c59" title="I2C TX idle.">I2cTxIdle</a>:
<a name="l03740"></a>03740         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a79683dee7d5a866eba1d4795ba24f7b0" title="I2C received slave address matchs with pre-set address.">I2cDevAddrMatch</a>:  
<a name="l03741"></a>03741             <span class="keywordflow">break</span>;  
<a name="l03742"></a>03742         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3af7ac61fc745f91590ccfab735ed16f1c" title="I2C TX FIFO request.">I2cTxFifoRequest</a>:
<a name="l03743"></a>03743             pstcI2c-&gt;FCR1_f.FDRQ = 0u;
<a name="l03744"></a>03744             <span class="keywordflow">break</span>;  
<a name="l03745"></a>03745         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a8d6df4ac206fb4f8caad4c62c2e91d5c" title="I2C First byte detection.">I2cFirstByteDetect</a>:
<a name="l03746"></a>03746             <span class="keywordflow">break</span>;  
<a name="l03747"></a>03747         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a41f2fe4a6b13af547ffd2dde8aeaa9b0" title="I2C reserved byte detection.">I2cReservedByteDetect</a>:
<a name="l03748"></a>03748             <span class="keywordflow">break</span>;  
<a name="l03749"></a>03749         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a8f6f602e4f57859c14a78a2557422534" title="I2C stop condition detection.">I2cStopDetect</a>:
<a name="l03750"></a>03750             pstcI2c-&gt;IBSR_f.SPC = 0u;
<a name="l03751"></a>03751             <span class="keywordflow">break</span>;  
<a name="l03752"></a>03752         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a5e3238cec2d05b7c5abc99b8cfc2809e" title="I2C Bus status.">I2cBusStatus</a>:
<a name="l03753"></a>03753             <span class="keywordflow">break</span>;  
<a name="l03754"></a>03754         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3a5e14f6cd9fd817b846994083c2ed4fe4" title="I2C Bus error.">I2cBusErr</a>:
<a name="l03755"></a>03755             <span class="keywordflow">break</span>;  
<a name="l03756"></a>03756         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga628f580fce4deea0b70b6b8a35efb1e3ac94822bc9cf467e4df59b8397cd5e60d" title="I2C transimission or reception interrupt flag.">I2cRxTxIrq</a>:
<a name="l03757"></a>03757             pstcI2c-&gt;IBCR &amp;= ~0x41u;
<a name="l03758"></a>03758             <span class="keywordflow">break</span>;
<a name="l03759"></a>03759         <span class="keywordflow">default</span>:
<a name="l03760"></a>03760             <span class="keywordflow">return</span> ErrorInvalidParameter;  
<a name="l03761"></a>03761     }
<a name="l03762"></a>03762     
<a name="l03763"></a>03763     <span class="keywordflow">return</span> Ok;
<a name="l03764"></a>03764 }
<a name="l03765"></a>03765 
<a name="l03779"></a><a class="code" href="group___mfs_group.html#ga13631f95d26e9406114941864a1cd5e5">03779</a> <a class="code" href="group___mfs_group.html#ga3fcab708bff8dc249d2538c572f192bd" title="I2C data direction(used in slave mode)">en_i2c_data_dir_t</a> <a class="code" href="group___mfs_group.html#ga13631f95d26e9406114941864a1cd5e5" title="Get direction of I2C data in slave mode.">Mfs_I2c_GetDataDir</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>* pstcI2c)
<a name="l03780"></a>03780 {
<a name="l03781"></a>03781     <a class="code" href="group___mfs_group.html#ga3fcab708bff8dc249d2538c572f192bd" title="I2C data direction(used in slave mode)">en_i2c_data_dir_t</a> enDir;
<a name="l03782"></a>03782     
<a name="l03783"></a>03783     (0u == pstcI2c-&gt;IBSR_f.TRX) ? (enDir = <a class="code" href="group___mfs_group.html#gga4fff08475dc769ca1252994d529ee906a4fb95556b35ad29515d2b8121390261c" title="Data from master to slave.">i2c_master_tx_slave_rx</a>) : (enDir = <a class="code" href="group___mfs_group.html#gga4fff08475dc769ca1252994d529ee906ad2d76c40eab2dfe19f70cbc49869a5c5" title="Data from slave to master.">i2c_slave_tx_master_rx</a>);
<a name="l03784"></a>03784     
<a name="l03785"></a>03785     <span class="keywordflow">return</span> enDir;
<a name="l03786"></a>03786 }
<a name="l03787"></a>03787 
<a name="l03800"></a><a class="code" href="group___mfs_group.html#ga1c8bdb90e24d5654aed708805ac81735">03800</a> en_result_t <a class="code" href="group___mfs_group.html#ga1c8bdb90e24d5654aed708805ac81735" title="Reset I2C FIFO.">Mfs_I2c_ResetFifo</a> (<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>* pstcI2c, 
<a name="l03801"></a>03801                                <a class="code" href="group___mfs_group.html#ga92c7220a4bea875ed8c044e89c63768d" title="Mfs FIFO Number.">en_mfs_fifo_t</a> enFifo)
<a name="l03802"></a>03802 {
<a name="l03803"></a>03803     <span class="keywordflow">if</span> (NULL == pstcI2c)
<a name="l03804"></a>03804     {
<a name="l03805"></a>03805         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l03806"></a>03806     }
<a name="l03807"></a>03807     
<a name="l03808"></a>03808     <span class="keywordflow">switch</span>(enFifo)
<a name="l03809"></a>03809     {
<a name="l03810"></a>03810         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034a0ffddd198e226809429b23d9f32ef5f8" title="FIFO No.1.">MfsFifo1</a>:
<a name="l03811"></a>03811             pstcI2c-&gt;FCR0_f.FCL1 = 1u;
<a name="l03812"></a>03812             <span class="keywordflow">break</span>;
<a name="l03813"></a>03813         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034ac8a2b52ff2b3ab8b5e6c0be9e335b837" title="FIFO No.2.">MfsFifo2</a>:
<a name="l03814"></a>03814             pstcI2c-&gt;FCR0_f.FCL2 = 1u;
<a name="l03815"></a>03815             <span class="keywordflow">break</span>;
<a name="l03816"></a>03816         <span class="keywordflow">default</span>:
<a name="l03817"></a>03817             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l03818"></a>03818     }
<a name="l03819"></a>03819     
<a name="l03820"></a>03820     <span class="keywordflow">return</span> Ok;
<a name="l03821"></a>03821 }
<a name="l03822"></a>03822 
<a name="l03836"></a><a class="code" href="group___mfs_group.html#gaeb48ed48e2889d0903278cd35b0c1cec">03836</a> en_result_t <a class="code" href="group___mfs_group.html#gaeb48ed48e2889d0903278cd35b0c1cec" title="Set I2C FIFO count.">Mfs_I2c_SetFifoCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>* pstcI2c,
<a name="l03837"></a>03837                                   <a class="code" href="group___mfs_group.html#ga92c7220a4bea875ed8c044e89c63768d" title="Mfs FIFO Number.">en_mfs_fifo_t</a> enFifo,
<a name="l03838"></a>03838                                   uint8_t u8Count)
<a name="l03839"></a>03839 {
<a name="l03840"></a>03840     <span class="keywordflow">if</span> (NULL == pstcI2c)
<a name="l03841"></a>03841     {
<a name="l03842"></a>03842         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l03843"></a>03843     }
<a name="l03844"></a>03844     
<a name="l03845"></a>03845     <span class="keywordflow">switch</span>(enFifo)
<a name="l03846"></a>03846     {
<a name="l03847"></a>03847         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034a0ffddd198e226809429b23d9f32ef5f8" title="FIFO No.1.">MfsFifo1</a>:
<a name="l03848"></a>03848             pstcI2c-&gt;FBYTE1 = u8Count;
<a name="l03849"></a>03849             <span class="keywordflow">break</span>;
<a name="l03850"></a>03850         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034ac8a2b52ff2b3ab8b5e6c0be9e335b837" title="FIFO No.2.">MfsFifo2</a>:
<a name="l03851"></a>03851             pstcI2c-&gt;FBYTE2 = u8Count;
<a name="l03852"></a>03852             <span class="keywordflow">break</span>;
<a name="l03853"></a>03853         <span class="keywordflow">default</span>:
<a name="l03854"></a>03854            <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l03855"></a>03855     }
<a name="l03856"></a>03856     
<a name="l03857"></a>03857     <span class="keywordflow">return</span> Ok;
<a name="l03858"></a>03858 }
<a name="l03859"></a>03859 
<a name="l03874"></a><a class="code" href="group___mfs_group.html#ga1883fccfcf9a2082373d9e764990e2ca">03874</a> uint8_t <a class="code" href="group___mfs_group.html#ga1883fccfcf9a2082373d9e764990e2ca" title="Get I2C FIFO count.">Mfs_I2c_GetFifoCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gac94910b9633361ed8a8ad2e816362fb7">stc_mfsn_i2c_t</a>* pstcI2c,
<a name="l03875"></a>03875                              <a class="code" href="group___mfs_group.html#ga92c7220a4bea875ed8c044e89c63768d" title="Mfs FIFO Number.">en_mfs_fifo_t</a> enFifo)
<a name="l03876"></a>03876 {
<a name="l03877"></a>03877     uint8_t u8FifoCnt = 0xFFu;
<a name="l03878"></a>03878     
<a name="l03879"></a>03879     <span class="keywordflow">switch</span>(enFifo)
<a name="l03880"></a>03880     {
<a name="l03881"></a>03881         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034a0ffddd198e226809429b23d9f32ef5f8" title="FIFO No.1.">MfsFifo1</a>:
<a name="l03882"></a>03882             u8FifoCnt = pstcI2c-&gt;FBYTE1;
<a name="l03883"></a>03883             <span class="keywordflow">break</span>;
<a name="l03884"></a>03884         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034ac8a2b52ff2b3ab8b5e6c0be9e335b837" title="FIFO No.2.">MfsFifo2</a>:
<a name="l03885"></a>03885             u8FifoCnt = pstcI2c-&gt;FBYTE2;
<a name="l03886"></a>03886             <span class="keywordflow">break</span>;
<a name="l03887"></a>03887         <span class="keywordflow">default</span>:
<a name="l03888"></a>03888            <span class="keywordflow">break</span>;
<a name="l03889"></a>03889     }
<a name="l03890"></a>03890     
<a name="l03891"></a>03891     <span class="keywordflow">return</span> u8FifoCnt;
<a name="l03892"></a>03892 }
<a name="l03893"></a>03893 <span class="preprocessor">#endif</span>
<a name="l03894"></a>03894 <span class="preprocessor"></span>
<a name="l03895"></a>03895 <span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_MFS_LIN_MODE == PDL_ON)</span>
<a name="l03896"></a>03896 <span class="preprocessor"></span><span class="comment">/******************************************************************************</span>
<a name="l03897"></a>03897 <span class="comment"> * LIN driver functions</span>
<a name="l03898"></a>03898 <span class="comment"> ******************************************************************************/</span>
<a name="l03899"></a>03899 
<a name="l03909"></a><a class="code" href="group___mfs_group.html#gafb06f7e35238637a0447924a15a25334">03909</a> <span class="keyword">static</span> <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* <a class="code" href="group___mfs_group.html#gafb06f7e35238637a0447924a15a25334" title="Return the internal data for a certain MFS instance.">MfsLinGetInternDataPtr</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>* pstcLin)
<a name="l03910"></a>03910 {
<a name="l03911"></a>03911     <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcInternDataPtr = NULL;
<a name="l03912"></a>03912     uint32_t u32Instance;
<a name="l03913"></a>03913 
<a name="l03914"></a>03914     <span class="keywordflow">if</span> (NULL != pstcLin)
<a name="l03915"></a>03915     {
<a name="l03916"></a>03916         <span class="keywordflow">for</span> (u32Instance = 0u; u32Instance &lt; (uint32_t)<a class="code" href="group___mfs_group.html#ggafce824c305ebb58476ef4b279447e35fa7851cc22d73d4df65b231cf9f35e824d">MfsInstanceIndexMax</a>; u32Instance++)
<a name="l03917"></a>03917         {
<a name="l03918"></a>03918             <span class="keywordflow">if</span> (pstcLin == m_astcMfsInstanceDataLut[u32Instance].stcInstance.pstcLinInstance)
<a name="l03919"></a>03919             {
<a name="l03920"></a>03920                 pstcInternDataPtr = &amp;m_astcMfsInstanceDataLut[u32Instance].<a class="code" href="structstc__mfs__instance__data.html#a7e848ba5739675221ced351df12957b3" title="module internal data of instance">stcInternData</a>;
<a name="l03921"></a>03921                 <span class="keywordflow">break</span>;
<a name="l03922"></a>03922             }
<a name="l03923"></a>03923         }
<a name="l03924"></a>03924             
<a name="l03925"></a>03925     }
<a name="l03926"></a>03926 
<a name="l03927"></a>03927     <span class="keywordflow">return</span> (pstcInternDataPtr);
<a name="l03928"></a>03928 } <span class="comment">/* MfsGetInternDataPtr */</span>
<a name="l03929"></a>03929 
<a name="l03930"></a>03930 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_MFS0 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS8 == PDL_ON)  ||  \</span>
<a name="l03931"></a>03931 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS1 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS9 == PDL_ON)  ||  \</span>
<a name="l03932"></a>03932 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS2 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS10 == PDL_ON) || \</span>
<a name="l03933"></a>03933 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS3 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS11 == PDL_ON) || \</span>
<a name="l03934"></a>03934 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS4 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS12 == PDL_ON) || \</span>
<a name="l03935"></a>03935 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS5 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS13 == PDL_ON) || \</span>
<a name="l03936"></a>03936 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS6 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS14 == PDL_ON) || \</span>
<a name="l03937"></a>03937 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS7 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS15 == PDL_ON)    </span>
<a name="l03938"></a>03938 <span class="preprocessor"></span>
<a name="l03948"></a><a class="code" href="group___mfs_group.html#ga0b34831ef4828a5cdc0807365b675ed4">03948</a> <span class="keywordtype">void</span> <a class="code" href="group___mfs_group.html#ga0b34831ef4828a5cdc0807365b675ed4" title="LIN receive interrupt service routine.">MfsLinIrqHandlerRx</a>( <span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>*   pstcLin,
<a name="l03949"></a>03949                          <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData)
<a name="l03950"></a>03950 {
<a name="l03951"></a>03951     <span class="keywordflow">if</span> ((NULL != pstcLin) &amp;&amp; (NULL != pstcMfsInternData))
<a name="l03952"></a>03952     {
<a name="l03953"></a>03953         <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a08369f64cd7ec06802ca45c674733a2b" title="LIN internal interrupt callback function.">stcLinInternIrqCb</a>.<a class="code" href="structstc__lin__irq__cb.html#ad40109f285524938eaf8fb58f887d4e1" title="LIN RX interrupt callback function.">pfnRxIrqCb</a>)
<a name="l03954"></a>03954         {
<a name="l03955"></a>03955             pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a08369f64cd7ec06802ca45c674733a2b" title="LIN internal interrupt callback function.">stcLinInternIrqCb</a>.<a class="code" href="structstc__lin__irq__cb.html#ad40109f285524938eaf8fb58f887d4e1" title="LIN RX interrupt callback function.">pfnRxIrqCb</a>();
<a name="l03956"></a>03956         }
<a name="l03957"></a>03957     }
<a name="l03958"></a>03958 } <span class="comment">/* MfsIrqHandlerRx */</span>
<a name="l03959"></a>03959 
<a name="l03970"></a><a class="code" href="group___mfs_group.html#ga29b5546a137351e5737390e2debfc39f">03970</a> <span class="keywordtype">void</span> <a class="code" href="group___mfs_group.html#ga29b5546a137351e5737390e2debfc39f" title="LIN transmit interrupt service routine.">MfsLinIrqHandlerTx</a>( <span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>*   pstcLin, 
<a name="l03971"></a>03971                          <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData)
<a name="l03972"></a>03972 {
<a name="l03973"></a>03973     <span class="keywordflow">if</span> ((NULL != pstcLin) &amp;&amp; (NULL != pstcMfsInternData))
<a name="l03974"></a>03974     {
<a name="l03975"></a>03975         <span class="keywordflow">if</span>(1u == pstcLin-&gt;SSR_f.TDRE)
<a name="l03976"></a>03976         {
<a name="l03977"></a>03977             <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a08369f64cd7ec06802ca45c674733a2b" title="LIN internal interrupt callback function.">stcLinInternIrqCb</a>.<a class="code" href="structstc__lin__irq__cb.html#a1b554fde91d5ebcef1a9b136ad28fd88" title="LIN TX interrupt callback function.">pfnTxIrqCb</a>)
<a name="l03978"></a>03978             {
<a name="l03979"></a>03979                 pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a08369f64cd7ec06802ca45c674733a2b" title="LIN internal interrupt callback function.">stcLinInternIrqCb</a>.<a class="code" href="structstc__lin__irq__cb.html#a1b554fde91d5ebcef1a9b136ad28fd88" title="LIN TX interrupt callback function.">pfnTxIrqCb</a>();
<a name="l03980"></a>03980             }
<a name="l03981"></a>03981         }
<a name="l03982"></a>03982         
<a name="l03983"></a>03983         <span class="keywordflow">if</span>(1u == pstcLin-&gt;SSR_f.TBI)
<a name="l03984"></a>03984         {
<a name="l03985"></a>03985             <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a08369f64cd7ec06802ca45c674733a2b" title="LIN internal interrupt callback function.">stcLinInternIrqCb</a>.<a class="code" href="structstc__lin__irq__cb.html#ae8872f16716692c7a0a5714a5263f05a" title="LIN TX idle interrupt callback function.">pfnTxIdleIrqCb</a>)
<a name="l03986"></a>03986             {
<a name="l03987"></a>03987                 pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a08369f64cd7ec06802ca45c674733a2b" title="LIN internal interrupt callback function.">stcLinInternIrqCb</a>.<a class="code" href="structstc__lin__irq__cb.html#ae8872f16716692c7a0a5714a5263f05a" title="LIN TX idle interrupt callback function.">pfnTxIdleIrqCb</a>();
<a name="l03988"></a>03988             }
<a name="l03989"></a>03989         }
<a name="l03990"></a>03990         
<a name="l03991"></a>03991         <span class="keywordflow">if</span>(1u == pstcLin-&gt;FCR1_f.FDRQ)
<a name="l03992"></a>03992         {
<a name="l03993"></a>03993             <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a08369f64cd7ec06802ca45c674733a2b" title="LIN internal interrupt callback function.">stcLinInternIrqCb</a>.<a class="code" href="structstc__lin__irq__cb.html#af6a48c32e9708772610ad4f9fd5720a6" title="LIN TX FIFO interrupt callback function.">pfnTxFifoIrqCb</a>)
<a name="l03994"></a>03994             {
<a name="l03995"></a>03995                 pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a08369f64cd7ec06802ca45c674733a2b" title="LIN internal interrupt callback function.">stcLinInternIrqCb</a>.<a class="code" href="structstc__lin__irq__cb.html#af6a48c32e9708772610ad4f9fd5720a6" title="LIN TX FIFO interrupt callback function.">pfnTxFifoIrqCb</a>();
<a name="l03996"></a>03996             }
<a name="l03997"></a>03997             
<a name="l03998"></a>03998             pstcLin-&gt;FCR1_f.FDRQ = 0u;
<a name="l03999"></a>03999         }
<a name="l04000"></a>04000         
<a name="l04001"></a>04001         
<a name="l04002"></a>04002     }
<a name="l04003"></a>04003 } <span class="comment">/* MfsIrqHandlerTx */</span>
<a name="l04004"></a>04004 
<a name="l04015"></a><a class="code" href="group___mfs_group.html#ga67552de8f9bac9d8cf6a93678712e06f">04015</a> <span class="keywordtype">void</span> <a class="code" href="group___mfs_group.html#ga67552de8f9bac9d8cf6a93678712e06f" title="LIN status interrupt service routine.">MfsLinIrqHandlerStatus</a>( <span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>*   pstcLin, 
<a name="l04016"></a>04016                              <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData)
<a name="l04017"></a>04017 {
<a name="l04018"></a>04018     <span class="keywordflow">if</span>(1u == pstcLin-&gt;SSR_f.LBD)
<a name="l04019"></a>04019     {
<a name="l04020"></a>04020         pstcLin-&gt;SSR_f.LBD = 0u;
<a name="l04021"></a>04021         <span class="keywordflow">if</span> (NULL != pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a08369f64cd7ec06802ca45c674733a2b" title="LIN internal interrupt callback function.">stcLinInternIrqCb</a>.<a class="code" href="structstc__lin__irq__cb.html#a617cec93188be28233626342da8b04e3" title="LIN break field interrupt callback function.">pfnLinBreakIrqCb</a>)
<a name="l04022"></a>04022         {
<a name="l04023"></a>04023             pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a08369f64cd7ec06802ca45c674733a2b" title="LIN internal interrupt callback function.">stcLinInternIrqCb</a>.<a class="code" href="structstc__lin__irq__cb.html#a617cec93188be28233626342da8b04e3" title="LIN break field interrupt callback function.">pfnLinBreakIrqCb</a>();
<a name="l04024"></a>04024         }
<a name="l04025"></a>04025     }
<a name="l04026"></a>04026 }
<a name="l04027"></a>04027 
<a name="l04045"></a><a class="code" href="group___mfs_group.html#gae370d97a6e83bb0541844a9277fe86d1">04045</a> en_result_t <a class="code" href="group___mfs_group.html#gae370d97a6e83bb0541844a9277fe86d1" title="Enable LIN interrupts.">Mfs_Lin_EnableIrq</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>* pstcLin, 
<a name="l04046"></a>04046                               <a class="code" href="group___mfs_group.html#ga2b386d527f6656a0d687550a2fa8d351" title="LIN interrupt enumeration.">en_lin_irq_sel_t</a> enIrqSel)
<a name="l04047"></a>04047 {
<a name="l04048"></a>04048     <span class="keywordflow">if</span> (NULL == pstcLin)
<a name="l04049"></a>04049     {
<a name="l04050"></a>04050         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l04051"></a>04051     }
<a name="l04052"></a>04052     
<a name="l04053"></a>04053     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l04054"></a>04054     {
<a name="l04055"></a>04055         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaf1f493034a21460bbe4931953fca4167a71910b1a19bd774346c549a16795502b" title="LIN TX interrupt.">LinTxIrq</a>:
<a name="l04056"></a>04056             pstcLin-&gt;SCR_f.TIE = 1u;
<a name="l04057"></a>04057             <span class="keywordflow">break</span>;
<a name="l04058"></a>04058         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaf1f493034a21460bbe4931953fca4167adadde146190dcf47b0e914ea976f289c" title="LIN RX interrupt.">LinRxIrq</a>:
<a name="l04059"></a>04059             pstcLin-&gt;SCR_f.RIE = 1u;
<a name="l04060"></a>04060             <span class="keywordflow">break</span>;
<a name="l04061"></a>04061         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaf1f493034a21460bbe4931953fca4167aa909b974b0a2424950fc6f51d835afb7" title="LIN break field interrupt.">LinBreakIrq</a>:
<a name="l04062"></a>04062             pstcLin-&gt;ESCR_f.LBIE = 1u;
<a name="l04063"></a>04063             <span class="keywordflow">break</span>;
<a name="l04064"></a>04064         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaf1f493034a21460bbe4931953fca4167a4bf5a01ef231016f000173b863d99d70" title="LIN TX idle interrupt.">LinTxIdleIrq</a>:
<a name="l04065"></a>04065             pstcLin-&gt;SCR_f.TBIE = 1u;
<a name="l04066"></a>04066             <span class="keywordflow">break</span>;
<a name="l04067"></a>04067         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaf1f493034a21460bbe4931953fca4167afb72cedcd1202562b3864d012bab485e" title="LIN TX FIFO interrupt.">LinTxFifoIrq</a>:
<a name="l04068"></a>04068             pstcLin-&gt;FCR1_f.FTIE = 1u;
<a name="l04069"></a>04069             <span class="keywordflow">break</span>;
<a name="l04070"></a>04070         <span class="keywordflow">default</span>:
<a name="l04071"></a>04071             <span class="keywordflow">return</span> (ErrorInvalidParameter);  
<a name="l04072"></a>04072     }
<a name="l04073"></a>04073     
<a name="l04074"></a>04074     <span class="keywordflow">return</span> Ok;
<a name="l04075"></a>04075 }
<a name="l04076"></a>04076 
<a name="l04094"></a><a class="code" href="group___mfs_group.html#ga6aecaafb9003cedd21aab9ef6652eb75">04094</a> en_result_t <a class="code" href="group___mfs_group.html#ga6aecaafb9003cedd21aab9ef6652eb75" title="Disable LIN interrupts.">Mfs_Lin_DisableIrq</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>* pstcLin, 
<a name="l04095"></a>04095                                <a class="code" href="group___mfs_group.html#ga2b386d527f6656a0d687550a2fa8d351" title="LIN interrupt enumeration.">en_lin_irq_sel_t</a> enIrqSel)
<a name="l04096"></a>04096 {
<a name="l04097"></a>04097     <span class="keywordflow">if</span> (NULL == pstcLin)
<a name="l04098"></a>04098     {
<a name="l04099"></a>04099         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l04100"></a>04100     }
<a name="l04101"></a>04101     
<a name="l04102"></a>04102     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l04103"></a>04103     {
<a name="l04104"></a>04104         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaf1f493034a21460bbe4931953fca4167a71910b1a19bd774346c549a16795502b" title="LIN TX interrupt.">LinTxIrq</a>:
<a name="l04105"></a>04105             pstcLin-&gt;SCR_f.TIE = 0u;
<a name="l04106"></a>04106             <span class="keywordflow">break</span>;
<a name="l04107"></a>04107         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaf1f493034a21460bbe4931953fca4167adadde146190dcf47b0e914ea976f289c" title="LIN RX interrupt.">LinRxIrq</a>:
<a name="l04108"></a>04108             pstcLin-&gt;SCR_f.RIE = 0u;
<a name="l04109"></a>04109             <span class="keywordflow">break</span>;
<a name="l04110"></a>04110         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaf1f493034a21460bbe4931953fca4167aa909b974b0a2424950fc6f51d835afb7" title="LIN break field interrupt.">LinBreakIrq</a>:
<a name="l04111"></a>04111             pstcLin-&gt;ESCR_f.LBIE = 0u;
<a name="l04112"></a>04112             <span class="keywordflow">break</span>;
<a name="l04113"></a>04113         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaf1f493034a21460bbe4931953fca4167a4bf5a01ef231016f000173b863d99d70" title="LIN TX idle interrupt.">LinTxIdleIrq</a>:
<a name="l04114"></a>04114             pstcLin-&gt;SCR_f.TBIE = 0u;
<a name="l04115"></a>04115             <span class="keywordflow">break</span>;
<a name="l04116"></a>04116         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaf1f493034a21460bbe4931953fca4167afb72cedcd1202562b3864d012bab485e" title="LIN TX FIFO interrupt.">LinTxFifoIrq</a>:
<a name="l04117"></a>04117             pstcLin-&gt;FCR1_f.FTIE = 0u;
<a name="l04118"></a>04118             <span class="keywordflow">break</span>;
<a name="l04119"></a>04119         <span class="keywordflow">default</span>:
<a name="l04120"></a>04120             <span class="keywordflow">return</span> (ErrorInvalidParameter);  
<a name="l04121"></a>04121     }
<a name="l04122"></a>04122     
<a name="l04123"></a>04123     <span class="keywordflow">return</span> Ok;
<a name="l04124"></a>04124 }
<a name="l04125"></a>04125 
<a name="l04126"></a>04126 <span class="preprocessor">#endif     </span>
<a name="l04127"></a>04127 <span class="preprocessor"></span>
<a name="l04145"></a><a class="code" href="group___mfs_group.html#ga22e56a5b3de4077a94dcd872da68d007">04145</a> en_result_t <a class="code" href="group___mfs_group.html#ga22e56a5b3de4077a94dcd872da68d007" title="Initialization of a MFS module to activate as LIN.">Mfs_Lin_Init</a>( <span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>*        pstcLin, 
<a name="l04146"></a>04146                           <a class="code" href="structstc__mfs__lin__config.html" title="LIN configuration structure.">stc_mfs_lin_config_t</a>* pstcConfig)
<a name="l04147"></a>04147 {
<a name="l04148"></a>04148     <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData;
<a name="l04149"></a>04149     uint32_t u32DummyCnt = 100u;
<a name="l04150"></a>04150     uint8_t u8Ch;
<a name="l04151"></a>04151     
<a name="l04152"></a>04152       <span class="comment">/* Preset local register variables to zero */</span>
<a name="l04153"></a>04153     stc_mfs_lin_smr_field_t  stcSMR  = { 0u };
<a name="l04154"></a>04154     stc_mfs_lin_scr_field_t  stcSCR  = { 0u };
<a name="l04155"></a>04155     stc_mfs_lin_escr_field_t stcESCR = { 0u };
<a name="l04156"></a>04156     
<a name="l04157"></a>04157     <span class="comment">/* Calculate the channel number */</span>
<a name="l04158"></a>04158     u8Ch = <a class="code" href="group___mfs_group.html#ga040818003f6dcfbfdd3e3195dfc36db4">LinInstanceToIndex</a>(pstcLin);
<a name="l04159"></a>04159     
<a name="l04160"></a>04160     <span class="keywordflow">if</span>(u8Ch &gt; 15u)
<a name="l04161"></a>04161     {
<a name="l04162"></a>04162         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l04163"></a>04163     }
<a name="l04164"></a>04164   
<a name="l04165"></a>04165     <span class="comment">/* Check for valid pointer and get pointer to internal data struct ... */</span>
<a name="l04166"></a>04166     pstcMfsInternData = <a class="code" href="group___mfs_group.html#gafb06f7e35238637a0447924a15a25334" title="Return the internal data for a certain MFS instance.">MfsLinGetInternDataPtr</a>(pstcLin);
<a name="l04167"></a>04167     
<a name="l04168"></a>04168     <span class="comment">/* Parameter check and get ptr to internal data struct */</span>
<a name="l04169"></a>04169     <span class="keywordflow">if</span> ((NULL == pstcMfsInternData)
<a name="l04170"></a>04170     ||  (NULL == pstcConfig)
<a name="l04171"></a>04171        )
<a name="l04172"></a>04172     {
<a name="l04173"></a>04173         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l04174"></a>04174     }
<a name="l04175"></a>04175     
<a name="l04176"></a>04176     <span class="comment">/* Set MFS mode in the internal structure */</span>
<a name="l04177"></a>04177     pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a3efa9df8c4b18392bbb53070c40307ea" title="MFS mode.">enMode</a> = <a class="code" href="group___mfs_group.html#ggac6ad60556f9ddc988ac3aead0df40a50a3d3c54262a95b543f913089fdf517c70" title="MFS LIN mode.">MfsLinMode</a>;
<a name="l04178"></a>04178 
<a name="l04179"></a>04179     <span class="comment">/* First of all set MFS to Asynchronous mode 0 */</span>
<a name="l04180"></a>04180     pstcLin-&gt;SMR = 0u;
<a name="l04181"></a>04181 
<a name="l04182"></a>04182     <span class="comment">/* Then we disable TX and RX for safe operation */</span>
<a name="l04183"></a>04183     pstcLin-&gt;SCR = 0u;
<a name="l04184"></a>04184 
<a name="l04185"></a>04185     <span class="comment">/* Clear MFS by setting the Software Reset bit */</span>
<a name="l04186"></a>04186     pstcLin-&gt;SCR_f.UPCL = TRUE;
<a name="l04187"></a>04187 
<a name="l04188"></a>04188     <span class="comment">/* Set LIN mode to HW and preset variable */</span>
<a name="l04189"></a>04189     stcSMR.MD = 3u;
<a name="l04190"></a>04190 
<a name="l04191"></a>04191     <span class="comment">/* Enable serial output */</span>
<a name="l04192"></a>04192     stcSMR.SOE = TRUE;
<a name="l04193"></a>04193 
<a name="l04194"></a>04194     <span class="comment">/* Operation Mode Selection */</span>
<a name="l04195"></a>04195     <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#a1cecba90af29020eea5927987954f9a9" title="LIN master or slave mode.">enMsMode</a>)
<a name="l04196"></a>04196     {
<a name="l04197"></a>04197         <span class="comment">/* Master */</span>
<a name="l04198"></a>04198         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga2ed96441d0ac8f5152dc80a6140c1425af3ea277189206fb5b8f1c801e80cfadf" title="LIN Master Mode.">LinMasterMode</a>:
<a name="l04199"></a>04199             stcSCR.MS = FALSE;
<a name="l04200"></a>04200             <span class="keywordflow">break</span>;
<a name="l04201"></a>04201         <span class="comment">/* Slave */</span>
<a name="l04202"></a>04202         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga2ed96441d0ac8f5152dc80a6140c1425a9623ff534bd026c2be086644692c2d6b" title="LIN Slave Mode.">LinSlaveMode</a>:
<a name="l04203"></a>04203             stcSCR.MS = TRUE;
<a name="l04204"></a>04204             <span class="keywordflow">break</span>;
<a name="l04205"></a>04205         <span class="keywordflow">default</span>:
<a name="l04206"></a>04206             <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l04207"></a>04207     }
<a name="l04208"></a>04208 
<a name="l04209"></a>04209     <span class="comment">/* Set LIN master configuration */</span>
<a name="l04210"></a>04210     <span class="keywordflow">if</span> (<a class="code" href="group___mfs_group.html#gga2ed96441d0ac8f5152dc80a6140c1425af3ea277189206fb5b8f1c801e80cfadf" title="LIN Master Mode.">LinMasterMode</a> == pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#a1cecba90af29020eea5927987954f9a9" title="LIN master or slave mode.">enMsMode</a>)
<a name="l04211"></a>04211     {
<a name="l04212"></a>04212         <span class="comment">/* Stop bits configuration */</span>
<a name="l04213"></a>04213         <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#a46057b728801ce78d80263d03535dfdf" title="Stop bits length.">enStopBits</a>)
<a name="l04214"></a>04214         {
<a name="l04215"></a>04215             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6c514c94d058629d37affe8c705abe58a85d8f507ad2c03d493aef224511b91ff" title="1 Stop Bit">LinOneStopBit</a>:
<a name="l04216"></a>04216                 stcSMR.SBL   = FALSE;
<a name="l04217"></a>04217                 stcESCR.ESBL = FALSE;
<a name="l04218"></a>04218                 <span class="keywordflow">break</span>;
<a name="l04219"></a>04219             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6c514c94d058629d37affe8c705abe58ac7fd005febdaf9ee3e738f653ab02da5" title="2 Stop Bits">LinTwoStopBits</a>:
<a name="l04220"></a>04220                 stcSMR.SBL   = TRUE;
<a name="l04221"></a>04221                 stcESCR.ESBL = FALSE;
<a name="l04222"></a>04222                 <span class="keywordflow">break</span>;
<a name="l04223"></a>04223             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6c514c94d058629d37affe8c705abe58ad50fc7de0745417b38f5a76cad1d07df" title="3 Stop Bits">LinThreeStopBits</a>:
<a name="l04224"></a>04224                 stcSMR.SBL   = FALSE;
<a name="l04225"></a>04225                 stcESCR.ESBL = TRUE;
<a name="l04226"></a>04226                 <span class="keywordflow">break</span>;
<a name="l04227"></a>04227             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6c514c94d058629d37affe8c705abe58a81900a58727ae2c2c368753e28fb14ab" title="4 Stop Bits">LinFourStopBits</a>:
<a name="l04228"></a>04228                 stcSMR.SBL   = TRUE;
<a name="l04229"></a>04229                 stcESCR.ESBL = TRUE;
<a name="l04230"></a>04230                 <span class="keywordflow">break</span>;
<a name="l04231"></a>04231             <span class="keywordflow">default</span>:
<a name="l04232"></a>04232                 <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l04233"></a>04233         }
<a name="l04234"></a>04234         <span class="comment">/* Break length configuration */</span>
<a name="l04235"></a>04235         <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#a1b9470f0e357b0dd48f1ec89dd4ba5fb" title="Break length.">enBreakLength</a>)
<a name="l04236"></a>04236         {
<a name="l04237"></a>04237             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga1c59e73ae04bc3f0fa926a1f4907e416aef2e580986bd76e078e39065e4d50a24" title="Lin Break Length 13 Bit Times.">LinBreakLength13</a>:
<a name="l04238"></a>04238                 stcESCR.LBL = 0u;
<a name="l04239"></a>04239                 <span class="keywordflow">break</span>;
<a name="l04240"></a>04240             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga1c59e73ae04bc3f0fa926a1f4907e416ac5f354210df15c944ca9db502d9f12b8" title="Lin Break Length 14 Bit Times.">LinBreakLength14</a>:
<a name="l04241"></a>04241                 stcESCR.LBL = 1u;
<a name="l04242"></a>04242                 <span class="keywordflow">break</span>;
<a name="l04243"></a>04243             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga1c59e73ae04bc3f0fa926a1f4907e416a46875f385a159a721c9910b35d7f57d5" title="Lin Break Length 15 Bit Times.">LinBreakLength15</a>:
<a name="l04244"></a>04244                 stcESCR.LBL = 2u;
<a name="l04245"></a>04245                 <span class="keywordflow">break</span>;
<a name="l04246"></a>04246             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga1c59e73ae04bc3f0fa926a1f4907e416a439d5ad526e22f12d8ae7f65dbf89ae7" title="Lin Break Length 16 Bit Times.">LinBreakLength16</a>:
<a name="l04247"></a>04247                 stcESCR.LBL = 3u;
<a name="l04248"></a>04248                 <span class="keywordflow">break</span>;
<a name="l04249"></a>04249             <span class="keywordflow">default</span>:
<a name="l04250"></a>04250                 <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l04251"></a>04251         }
<a name="l04252"></a>04252         <span class="comment">/* Delimiter length configuration */</span>
<a name="l04253"></a>04253         <span class="keywordflow">switch</span> (pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#a861c37c26f1a0ab4a00192681f01aeee" title="Delimiter length.">enDelimiterLength</a>)
<a name="l04254"></a>04254         {
<a name="l04255"></a>04255             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6d04fe14a10daa879513413c43ce7821a31f028d9328581e45b9511168e43e536" title="Lin Break Delimiter Length 1 Bit Time.">LinDelimiterLength1</a>:
<a name="l04256"></a>04256                 stcESCR.DEL = 0u;
<a name="l04257"></a>04257                 <span class="keywordflow">break</span>;
<a name="l04258"></a>04258             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6d04fe14a10daa879513413c43ce7821ad7a72eaa108e97b0719194df027ae178" title="Lin Break Delimiter Length 2 Bit Times.">LinDelimiterLength2</a>:
<a name="l04259"></a>04259                 stcESCR.DEL = 1u;
<a name="l04260"></a>04260                 <span class="keywordflow">break</span>;
<a name="l04261"></a>04261             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6d04fe14a10daa879513413c43ce7821a0a647a3fdcc92f78fd9da052d472641a" title="Lin Break Delimiter Length 3 Bit Times.">LinDelimiterLength3</a>:
<a name="l04262"></a>04262                 stcESCR.DEL = 2u;
<a name="l04263"></a>04263                 <span class="keywordflow">break</span>;
<a name="l04264"></a>04264             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6d04fe14a10daa879513413c43ce7821a31622dc9a172cbcb174f623e45fd48c5" title="Lin Break Delimiter Length 4 Bit Times.">LinDelimiterLength4</a>:
<a name="l04265"></a>04265                 stcESCR.DEL = 3u;
<a name="l04266"></a>04266                 <span class="keywordflow">break</span>;
<a name="l04267"></a>04267             <span class="keywordflow">default</span>:
<a name="l04268"></a>04268                 <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l04269"></a>04269         }
<a name="l04270"></a>04270     }
<a name="l04271"></a>04271 
<a name="l04272"></a>04272     <span class="comment">/* Set Baudrate */</span>
<a name="l04273"></a>04273     (void)<a class="code" href="group___mfs_group.html#gadc15116c5d4e631b9e82896986fa4b98" title="Set the baudrate of LIN.">Mfs_Lin_SetBaudRate</a>(pstcLin, pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#a02de7678fcf4d4ee36160e20baefb31a" title="Baud rate (bps)">u32BaudRate</a>);
<a name="l04274"></a>04274 
<a name="l04275"></a>04275     <span class="comment">/* Set registers value */</span>
<a name="l04276"></a>04276     pstcLin-&gt;SMR_f  = stcSMR;
<a name="l04277"></a>04277     pstcLin-&gt;SCR_f  = stcSCR;
<a name="l04278"></a>04278     pstcLin-&gt;ESCR_f = stcESCR;
<a name="l04279"></a>04279     
<a name="l04280"></a>04280     <span class="comment">/* Set external clock */</span>
<a name="l04281"></a>04281     pstcLin-&gt;BGR_f.EXT = ((pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#a220e4cdbc77c15033f3817da1232c277" title="FALSE: use internal clock, TRUE: use external clock which input via SCK pin.">bUseExtClk</a> == TRUE) ? 1u : 0u);
<a name="l04282"></a>04282     
<a name="l04283"></a>04283     <span class="keywordflow">while</span>(u32DummyCnt--)
<a name="l04284"></a>04284     {
<a name="l04285"></a>04285         pstcLin-&gt;SSR_f.LBD = 0u;
<a name="l04286"></a>04286     }
<a name="l04287"></a>04287    
<a name="l04288"></a>04288     <span class="keywordflow">if</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#aa091c03d2eb888d3ffa4bb35a19d44f6" title="Pointer to FIFO configuration structure, if set to NULL, FIFO function will not be enabled...">pstcFifoConfig</a> != NULL)
<a name="l04289"></a>04289     {
<a name="l04290"></a>04290         <span class="comment">/* Reset FIFO */</span>
<a name="l04291"></a>04291         pstcLin-&gt;FCR0_f.FCL1 = 1u;
<a name="l04292"></a>04292         pstcLin-&gt;FCR0_f.FCL2 = 1u;
<a name="l04293"></a>04293         <span class="comment">/* Enable FIFO receive Idle detection */</span>
<a name="l04294"></a>04294         pstcLin-&gt;FCR1_f.FRIIE = 1u;
<a name="l04295"></a>04295         <span class="comment">/* Selection TX and RX FIFO  */</span>
<a name="l04296"></a>04296         <span class="keywordflow">switch</span>(pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#aa091c03d2eb888d3ffa4bb35a19d44f6" title="Pointer to FIFO configuration structure, if set to NULL, FIFO function will not be enabled...">pstcFifoConfig</a>-&gt;<a class="code" href="structstc__mfs__fifo__config.html#a57522e8de00d79ae7f63cb81aedb9e5b" title="FIFO selection, see en_mfs_fifo_sel_t for details.">enFifoSel</a>)
<a name="l04297"></a>04297         {
<a name="l04298"></a>04298             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa75ef033bccb72dc698fbdde1559c580a3b86d2138912f3c9678856ac2a0dc56c" title="Transmit FIFO:FIFO1, Received FIFO:FIFO2.">MfsTxFifo1RxFifo2</a>:
<a name="l04299"></a>04299                 pstcLin-&gt;FCR1_f.FSEL = 0u;
<a name="l04300"></a>04300                 <span class="keywordflow">break</span>;
<a name="l04301"></a>04301             <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa75ef033bccb72dc698fbdde1559c580a71003bf541f6873ac786ea6b31b9a046" title="Transmit FIFO:FIFO2, Received FIFO:FIFO1.">MfsTxFifo2RxFifo1</a>:
<a name="l04302"></a>04302                 pstcLin-&gt;FCR1_f.FSEL = 1u;
<a name="l04303"></a>04303                 <span class="keywordflow">break</span>;
<a name="l04304"></a>04304             <span class="keywordflow">default</span>:
<a name="l04305"></a>04305                <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l04306"></a>04306         }
<a name="l04307"></a>04307         <span class="comment">/* Set FIFO count */</span>
<a name="l04308"></a>04308         pstcLin-&gt;FBYTE1 = pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#aa091c03d2eb888d3ffa4bb35a19d44f6" title="Pointer to FIFO configuration structure, if set to NULL, FIFO function will not be enabled...">pstcFifoConfig</a>-&gt;<a class="code" href="structstc__mfs__fifo__config.html#ac2b77d76431bbc7f1fdf7fc88d17a2f6" title="Transfer data count for FIFO1.">u8ByteCount1</a>;
<a name="l04309"></a>04309         pstcLin-&gt;FBYTE2 = pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#aa091c03d2eb888d3ffa4bb35a19d44f6" title="Pointer to FIFO configuration structure, if set to NULL, FIFO function will not be enabled...">pstcFifoConfig</a>-&gt;<a class="code" href="structstc__mfs__fifo__config.html#a1252320650a64b39c87bfabfc1d420bd" title="Transfer data count for FIFO2.">u8ByteCount2</a>;
<a name="l04310"></a>04310         <span class="comment">/* Enable FIFO  */</span>
<a name="l04311"></a>04311         pstcLin-&gt;FCR0_f.FE1 = 1u;
<a name="l04312"></a>04312         pstcLin-&gt;FCR0_f.FE2 = 1u;
<a name="l04313"></a>04313     }
<a name="l04314"></a>04314 
<a name="l04315"></a>04315 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_MFS0 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS8 == PDL_ON)  ||  \</span>
<a name="l04316"></a>04316 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS1 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS9 == PDL_ON)  ||  \</span>
<a name="l04317"></a>04317 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS2 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS10 == PDL_ON) || \</span>
<a name="l04318"></a>04318 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS3 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS11 == PDL_ON) || \</span>
<a name="l04319"></a>04319 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS4 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS12 == PDL_ON) || \</span>
<a name="l04320"></a>04320 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS5 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS13 == PDL_ON) || \</span>
<a name="l04321"></a>04321 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS6 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS14 == PDL_ON) || \</span>
<a name="l04322"></a>04322 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS7 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS15 == PDL_ON)     </span>
<a name="l04323"></a>04323 <span class="preprocessor"></span>    <span class="comment">/* Configure interrupt */</span>
<a name="l04324"></a>04324     <span class="keywordflow">if</span>(NULL != pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#aee90ba9b895dba6d52908dbfaface588" title="Pointer to LIN interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>)
<a name="l04325"></a>04325     {
<a name="l04326"></a>04326         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#aee90ba9b895dba6d52908dbfaface588" title="Pointer to LIN interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__lin__irq__en.html#a9225483d09ffac6ffd1a8efee3a27aaa" title="LIN TX interrupt.">bTxIrq</a>)
<a name="l04327"></a>04327         {
<a name="l04328"></a>04328             pstcLin-&gt;SCR_f.TIE = 1u;
<a name="l04329"></a>04329         }
<a name="l04330"></a>04330         
<a name="l04331"></a>04331         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#aee90ba9b895dba6d52908dbfaface588" title="Pointer to LIN interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__lin__irq__en.html#af045726c4197374f4d9ad38ba0c10da9" title="LIN RX interrupt.">bRxIrq</a>)
<a name="l04332"></a>04332         {
<a name="l04333"></a>04333             pstcLin-&gt;SCR_f.RIE = 1u;
<a name="l04334"></a>04334         }
<a name="l04335"></a>04335         
<a name="l04336"></a>04336         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#aee90ba9b895dba6d52908dbfaface588" title="Pointer to LIN interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__lin__irq__en.html#ab20055e6900c7bf9b89e28d7db325691" title="LIN TX idle interrupt.">bTxIdleIrq</a>)
<a name="l04337"></a>04337         {
<a name="l04338"></a>04338             pstcLin-&gt;SCR_f.TBIE = 1u;
<a name="l04339"></a>04339         }
<a name="l04340"></a>04340         
<a name="l04341"></a>04341         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#aee90ba9b895dba6d52908dbfaface588" title="Pointer to LIN interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__lin__irq__en.html#a9a54ea9dc253444060a1c09cbbcc6b16" title="LIN TX FIFO interrupt.">bTxFifoIrq</a>)
<a name="l04342"></a>04342         {
<a name="l04343"></a>04343             pstcLin-&gt;FCR1_f.FTIE = 1u;
<a name="l04344"></a>04344         }
<a name="l04345"></a>04345         
<a name="l04346"></a>04346         <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#aee90ba9b895dba6d52908dbfaface588" title="Pointer to LIN interrupt enable structure, if set to NULL, no interrupt enabled.">pstcIrqEn</a>-&gt;<a class="code" href="structstc__lin__irq__en.html#a561f16fb4b2885a778d0c5ea2109e5ce" title="LIN break field interrupt.">bLinBreakIrq</a>)
<a name="l04347"></a>04347         {
<a name="l04348"></a>04348             pstcLin-&gt;ESCR_f.LBIE = 1u;
<a name="l04349"></a>04349         }
<a name="l04350"></a>04350     }
<a name="l04351"></a>04351     
<a name="l04352"></a>04352     <span class="comment">/* Configure interrupt callback */</span>
<a name="l04353"></a>04353     <span class="keywordflow">if</span>(NULL != pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#a191339b9d15650c54e36ca3ae2a20834" title="Pointer to LIN interrupt callback functions structurei, if set to NULL, no interrupt callback initial...">pstcIrqCb</a>)
<a name="l04354"></a>04354     {
<a name="l04355"></a>04355         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a08369f64cd7ec06802ca45c674733a2b" title="LIN internal interrupt callback function.">stcLinInternIrqCb</a>.<a class="code" href="structstc__lin__irq__cb.html#ad40109f285524938eaf8fb58f887d4e1" title="LIN RX interrupt callback function.">pfnRxIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#a191339b9d15650c54e36ca3ae2a20834" title="Pointer to LIN interrupt callback functions structurei, if set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__lin__irq__cb.html#ad40109f285524938eaf8fb58f887d4e1" title="LIN RX interrupt callback function.">pfnRxIrqCb</a>;
<a name="l04356"></a>04356         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a08369f64cd7ec06802ca45c674733a2b" title="LIN internal interrupt callback function.">stcLinInternIrqCb</a>.<a class="code" href="structstc__lin__irq__cb.html#a1b554fde91d5ebcef1a9b136ad28fd88" title="LIN TX interrupt callback function.">pfnTxIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#a191339b9d15650c54e36ca3ae2a20834" title="Pointer to LIN interrupt callback functions structurei, if set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__lin__irq__cb.html#a1b554fde91d5ebcef1a9b136ad28fd88" title="LIN TX interrupt callback function.">pfnTxIrqCb</a>;
<a name="l04357"></a>04357         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a08369f64cd7ec06802ca45c674733a2b" title="LIN internal interrupt callback function.">stcLinInternIrqCb</a>.<a class="code" href="structstc__lin__irq__cb.html#ae8872f16716692c7a0a5714a5263f05a" title="LIN TX idle interrupt callback function.">pfnTxIdleIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#a191339b9d15650c54e36ca3ae2a20834" title="Pointer to LIN interrupt callback functions structurei, if set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__lin__irq__cb.html#ae8872f16716692c7a0a5714a5263f05a" title="LIN TX idle interrupt callback function.">pfnTxIdleIrqCb</a>;
<a name="l04358"></a>04358         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a08369f64cd7ec06802ca45c674733a2b" title="LIN internal interrupt callback function.">stcLinInternIrqCb</a>.<a class="code" href="structstc__lin__irq__cb.html#af6a48c32e9708772610ad4f9fd5720a6" title="LIN TX FIFO interrupt callback function.">pfnTxFifoIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#a191339b9d15650c54e36ca3ae2a20834" title="Pointer to LIN interrupt callback functions structurei, if set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__lin__irq__cb.html#af6a48c32e9708772610ad4f9fd5720a6" title="LIN TX FIFO interrupt callback function.">pfnTxFifoIrqCb</a>;
<a name="l04359"></a>04359         pstcMfsInternData-&gt;<a class="code" href="structstc__mfs__intern__data.html#a08369f64cd7ec06802ca45c674733a2b" title="LIN internal interrupt callback function.">stcLinInternIrqCb</a>.<a class="code" href="structstc__lin__irq__cb.html#a617cec93188be28233626342da8b04e3" title="LIN break field interrupt callback function.">pfnLinBreakIrqCb</a> = pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#a191339b9d15650c54e36ca3ae2a20834" title="Pointer to LIN interrupt callback functions structurei, if set to NULL, no interrupt callback initial...">pstcIrqCb</a>-&gt;<a class="code" href="structstc__lin__irq__cb.html#a617cec93188be28233626342da8b04e3" title="LIN break field interrupt callback function.">pfnLinBreakIrqCb</a>;
<a name="l04360"></a>04360     }
<a name="l04361"></a>04361     
<a name="l04362"></a>04362     <span class="comment">/* Configure NVIC */</span>
<a name="l04363"></a>04363     <span class="keywordflow">if</span>(TRUE == pstcConfig-&gt;<a class="code" href="structstc__mfs__lin__config.html#a18b9c6a82679466e066894a2b65f0d13" title="TRUE: enable NVIC, FALSE: don&#39;t enable NVIC.">bTouchNvic</a>)
<a name="l04364"></a>04364     {
<a name="l04365"></a>04365         <a class="code" href="group___mfs_group.html#ga8cf89127037324ffc519f97b5312be9c" title="Device dependent initialization of transmit interrupts according CMSIS with level defined in pdl...">MfsInitNvic</a>(u8Ch, FALSE);
<a name="l04366"></a>04366         <a class="code" href="group___mfs_group.html#ga8cf89127037324ffc519f97b5312be9c" title="Device dependent initialization of transmit interrupts according CMSIS with level defined in pdl...">MfsInitNvic</a>(u8Ch, TRUE);
<a name="l04367"></a>04367     }
<a name="l04368"></a>04368 <span class="preprocessor">#endif</span>
<a name="l04369"></a>04369 <span class="preprocessor"></span>    
<a name="l04370"></a>04370     <span class="keywordflow">return</span> (Ok);
<a name="l04371"></a>04371 } <span class="comment">/* Mfs_Lin_Init */</span>
<a name="l04372"></a>04372 
<a name="l04389"></a><a class="code" href="group___mfs_group.html#gaefac09e157efa56c6583eacbad448e0d">04389</a> en_result_t <a class="code" href="group___mfs_group.html#gaefac09e157efa56c6583eacbad448e0d" title="Deinitialisation of a MFS module activating as LIN.">Mfs_Lin_DeInit</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>* pstcLin, boolean_t bTouchNvic)
<a name="l04390"></a>04390 {
<a name="l04391"></a>04391     en_result_t            enResult;
<a name="l04392"></a>04392     <a class="code" href="structstc__mfs__intern__data.html" title="MFS module internal data, storing internal information for each enabled MFS instance.">stc_mfs_intern_data_t</a>* pstcMfsInternData;
<a name="l04393"></a>04393     uint8_t u8Ch;
<a name="l04394"></a>04394     
<a name="l04395"></a>04395     <span class="comment">/* Calculate the channel number */</span>
<a name="l04396"></a>04396     u8Ch = <a class="code" href="group___mfs_group.html#ga040818003f6dcfbfdd3e3195dfc36db4">LinInstanceToIndex</a>(pstcLin);
<a name="l04397"></a>04397     
<a name="l04398"></a>04398     <span class="keywordflow">if</span>(u8Ch &gt; 15u)
<a name="l04399"></a>04399     {
<a name="l04400"></a>04400         <span class="keywordflow">return</span> (ErrorInvalidParameter);
<a name="l04401"></a>04401     }
<a name="l04402"></a>04402 
<a name="l04403"></a>04403     <span class="comment">/* Check for valid pointer and get pointer to internal data struct ... */</span>
<a name="l04404"></a>04404     pstcMfsInternData = <a class="code" href="group___mfs_group.html#gafb06f7e35238637a0447924a15a25334" title="Return the internal data for a certain MFS instance.">MfsLinGetInternDataPtr</a>(pstcLin);
<a name="l04405"></a>04405     <span class="comment">/* ... and check */</span>
<a name="l04406"></a>04406     <span class="keywordflow">if</span> (NULL == pstcMfsInternData)
<a name="l04407"></a>04407     {
<a name="l04408"></a>04408         enResult = ErrorInvalidParameter;
<a name="l04409"></a>04409     }
<a name="l04410"></a>04410     <span class="keywordflow">else</span>
<a name="l04411"></a>04411     {
<a name="l04412"></a>04412         pstcLin-&gt;SCR_f.TXE = FALSE;
<a name="l04413"></a>04413         pstcLin-&gt;SCR_f.RXE = FALSE;
<a name="l04414"></a>04414 
<a name="l04415"></a>04415         <span class="comment">/* Baud Rate Generation Reload Reset */</span>
<a name="l04416"></a>04416         pstcLin-&gt;BGR = 0u;
<a name="l04417"></a>04417             
<a name="l04418"></a>04418         <span class="comment">/* Serial Mode Register clear all bits (valid in any mode) */</span>
<a name="l04419"></a>04419         pstcLin-&gt;SMR = 0u;
<a name="l04420"></a>04420            
<a name="l04421"></a>04421         <span class="comment">/* Reset Mfs receive and transmit bit to default */</span>
<a name="l04422"></a>04422         <span class="comment">/* and clear all error flags */</span>
<a name="l04423"></a>04423         pstcLin-&gt;SCR = 0u;
<a name="l04424"></a>04424 
<a name="l04425"></a>04425         <span class="comment">/* Clear reception Errors */</span>
<a name="l04426"></a>04426         pstcLin-&gt;SSR_f.REC = TRUE;
<a name="l04427"></a>04427            
<a name="l04428"></a>04428         <span class="comment">/* Reset all other used register to default value */</span>
<a name="l04429"></a>04429         pstcLin-&gt;SSR  = 0u;
<a name="l04430"></a>04430         pstcLin-&gt;ESCR = 0u;
<a name="l04431"></a>04431         pstcLin-&gt;FCR0 = 0u;
<a name="l04432"></a>04432         pstcLin-&gt;FCR1 = 0u;
<a name="l04433"></a>04433 
<a name="l04434"></a>04434         <span class="comment">/* Clear MFS by setting the Software Reset bit */</span>
<a name="l04435"></a>04435         pstcLin-&gt;SCR_f.UPCL = TRUE;
<a name="l04436"></a>04436 
<a name="l04437"></a>04437 <span class="preprocessor">#if (PDL_INTERRUPT_ENABLE_MFS0 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS8 == PDL_ON)  ||  \</span>
<a name="l04438"></a>04438 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS1 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS9 == PDL_ON)  ||  \</span>
<a name="l04439"></a>04439 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS2 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS10 == PDL_ON) || \</span>
<a name="l04440"></a>04440 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS3 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS11 == PDL_ON) || \</span>
<a name="l04441"></a>04441 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS4 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS12 == PDL_ON) || \</span>
<a name="l04442"></a>04442 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS5 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS13 == PDL_ON) || \</span>
<a name="l04443"></a>04443 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS6 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS14 == PDL_ON) || \</span>
<a name="l04444"></a>04444 <span class="preprocessor">    (PDL_INTERRUPT_ENABLE_MFS7 == PDL_ON) || (PDL_INTERRUPT_ENABLE_MFS15 == PDL_ON)         </span>
<a name="l04445"></a>04445 <span class="preprocessor"></span>        <span class="keywordflow">if</span>(TRUE == bTouchNvic)
<a name="l04446"></a>04446         {
<a name="l04447"></a>04447             <a class="code" href="group___mfs_group.html#gac25b5fe9f346727c4b883952c6cd8d9a" title="Device dependent de-initialization of interrupts according CMSIS.">MfsDeInitNvic</a>(u8Ch, FALSE);
<a name="l04448"></a>04448             <a class="code" href="group___mfs_group.html#gac25b5fe9f346727c4b883952c6cd8d9a" title="Device dependent de-initialization of interrupts according CMSIS.">MfsDeInitNvic</a>(u8Ch, TRUE);
<a name="l04449"></a>04449         }
<a name="l04450"></a>04450 <span class="preprocessor">#endif        </span>
<a name="l04451"></a>04451 <span class="preprocessor"></span>        enResult = Ok;
<a name="l04452"></a>04452     }
<a name="l04453"></a>04453 
<a name="l04454"></a>04454     <span class="keywordflow">return</span> (enResult);
<a name="l04455"></a>04455 } <span class="comment">/* Mfs_Lin_DeInit */</span>
<a name="l04456"></a>04456 
<a name="l04457"></a>04457 
<a name="l04474"></a><a class="code" href="group___mfs_group.html#gadc15116c5d4e631b9e82896986fa4b98">04474</a> en_result_t <a class="code" href="group___mfs_group.html#gadc15116c5d4e631b9e82896986fa4b98" title="Set the baudrate of LIN.">Mfs_Lin_SetBaudRate</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>* pstcLin,
<a name="l04475"></a>04475                                 uint32_t u32BaudRate)
<a name="l04476"></a>04476 {
<a name="l04477"></a>04477     uint32_t u32Pclk1;
<a name="l04478"></a>04478   
<a name="l04479"></a>04479     <span class="keywordflow">if</span> ((NULL == pstcLin) || (u32BaudRate &lt; 3u))
<a name="l04480"></a>04480     {
<a name="l04481"></a>04481         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l04482"></a>04482     }
<a name="l04483"></a>04483 <span class="preprocessor">#if (PDL_MCU_CORE == PDL_FM0P_CORE)       </span>
<a name="l04484"></a>04484 <span class="preprocessor"></span>    u32Pclk1 = __HCLK/(1ul &lt;&lt; (APBC1_PSR_Val &amp; 0x03u)); <span class="comment">/* MFS is attached on APB1 bus for FM0+ */</span>
<a name="l04485"></a>04485 <span class="preprocessor">#else</span>
<a name="l04486"></a>04486 <span class="preprocessor"></span>    u32Pclk1 = __HCLK/(1ul &lt;&lt; (APBC2_PSR_Val &amp; 0x03u)); <span class="comment">/* MFS is attached on APB2 bus for FM3 and FM4 */</span>
<a name="l04487"></a>04487 <span class="preprocessor">#endif    </span>
<a name="l04488"></a>04488 <span class="preprocessor"></span>    pstcLin-&gt;BGR_f.BGR = (u32Pclk1/u32BaudRate) - 1u;
<a name="l04489"></a>04489     
<a name="l04490"></a>04490     <span class="keywordflow">return</span> Ok;
<a name="l04491"></a>04491 }
<a name="l04492"></a>04492 
<a name="l04504"></a><a class="code" href="group___mfs_group.html#ga20d242c73d9d7dac7cca3d1eb5b90ee9">04504</a> en_result_t <a class="code" href="group___mfs_group.html#ga20d242c73d9d7dac7cca3d1eb5b90ee9" title="Generate LIN break filed.">Mfs_Lin_GenerateBreakField</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>* pstcLin)
<a name="l04505"></a>04505 {
<a name="l04506"></a>04506     <span class="keywordflow">if</span> (NULL == pstcLin)
<a name="l04507"></a>04507     {
<a name="l04508"></a>04508         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l04509"></a>04509     }
<a name="l04510"></a>04510     
<a name="l04511"></a>04511     pstcLin-&gt;SCR_f.LBR = 1u;
<a name="l04512"></a>04512     
<a name="l04513"></a>04513     <span class="keywordflow">return</span> Ok;
<a name="l04514"></a>04514 }
<a name="l04515"></a>04515 
<a name="l04530"></a><a class="code" href="group___mfs_group.html#gaa6ea56dc633108ca77371f0c8f0d194f">04530</a> en_result_t <a class="code" href="group___mfs_group.html#gaa6ea56dc633108ca77371f0c8f0d194f" title="Enable LIN functions.">Mfs_Lin_EnableFunc</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>* pstcLin, <a class="code" href="group___mfs_group.html#ga98dbd4c706c53306ca6e1af7a1927f02" title="LIN function.">en_lin_func_t</a> enFunc)
<a name="l04531"></a>04531 {
<a name="l04532"></a>04532     <span class="keywordflow">if</span> (NULL == pstcLin)
<a name="l04533"></a>04533     {
<a name="l04534"></a>04534         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l04535"></a>04535     }
<a name="l04536"></a>04536     
<a name="l04537"></a>04537     <span class="keywordflow">switch</span>(enFunc)
<a name="l04538"></a>04538     {
<a name="l04539"></a>04539         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga1b9bc5c7f77689869247581b794e2edeaaea2dc8b6019e46ba6605b3f22581942" title="Lin TX.">LinTx</a>:
<a name="l04540"></a>04540             pstcLin-&gt;SCR_f.TXE = 1u;
<a name="l04541"></a>04541             <span class="keywordflow">break</span>;
<a name="l04542"></a>04542         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga1b9bc5c7f77689869247581b794e2edea0353a09dda1c99ed8aa2816ddd9c3ef3" title="Lin RX.">LinRx</a>:
<a name="l04543"></a>04543             pstcLin-&gt;SCR_f.RXE = 1u;
<a name="l04544"></a>04544             <span class="keywordflow">break</span>;
<a name="l04545"></a>04545         <span class="keywordflow">default</span>:
<a name="l04546"></a>04546             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l04547"></a>04547     }
<a name="l04548"></a>04548     
<a name="l04549"></a>04549     <span class="keywordflow">return</span> Ok;
<a name="l04550"></a>04550 }
<a name="l04551"></a>04551 
<a name="l04566"></a><a class="code" href="group___mfs_group.html#ga99a0db29aa90bede31ae5a2d17d29a1f">04566</a> en_result_t <a class="code" href="group___mfs_group.html#ga99a0db29aa90bede31ae5a2d17d29a1f" title="Disable LIN functions.">Mfs_Lin_DisableFunc</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>* pstcLin, <a class="code" href="group___mfs_group.html#ga98dbd4c706c53306ca6e1af7a1927f02" title="LIN function.">en_lin_func_t</a> enFunc)
<a name="l04567"></a>04567 {
<a name="l04568"></a>04568     <span class="keywordflow">if</span> (NULL == pstcLin)
<a name="l04569"></a>04569     {
<a name="l04570"></a>04570         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l04571"></a>04571     }
<a name="l04572"></a>04572     
<a name="l04573"></a>04573     <span class="keywordflow">switch</span>(enFunc)
<a name="l04574"></a>04574     {
<a name="l04575"></a>04575         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga1b9bc5c7f77689869247581b794e2edeaaea2dc8b6019e46ba6605b3f22581942" title="Lin TX.">LinTx</a>:
<a name="l04576"></a>04576             pstcLin-&gt;SCR_f.TXE = 0u;
<a name="l04577"></a>04577             <span class="keywordflow">break</span>;
<a name="l04578"></a>04578         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga1b9bc5c7f77689869247581b794e2edea0353a09dda1c99ed8aa2816ddd9c3ef3" title="Lin RX.">LinRx</a>:
<a name="l04579"></a>04579             pstcLin-&gt;SCR_f.RXE = 0u;
<a name="l04580"></a>04580             <span class="keywordflow">break</span>;
<a name="l04581"></a>04581         <span class="keywordflow">default</span>:
<a name="l04582"></a>04582             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l04583"></a>04583     }
<a name="l04584"></a>04584     
<a name="l04585"></a>04585     <span class="keywordflow">return</span> Ok;
<a name="l04586"></a>04586 }
<a name="l04587"></a>04587 
<a name="l04620"></a><a class="code" href="group___mfs_group.html#ga78a63037d74096c6aa59c37266951a71">04620</a> boolean_t <a class="code" href="group___mfs_group.html#ga78a63037d74096c6aa59c37266951a71" title="Get status of LIN according to status type.">Mfs_Lin_GetStatus</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>* pstcLin, 
<a name="l04621"></a>04621                             <a class="code" href="group___mfs_group.html#gae7c6af8f4fb666ded593d97dddb846c6" title="LIN status types.">en_lin_status_t</a> enStatus)
<a name="l04622"></a>04622 {
<a name="l04623"></a>04623     boolean_t bResult = FALSE;
<a name="l04624"></a>04624     
<a name="l04625"></a>04625     <span class="keywordflow">switch</span>(enStatus)
<a name="l04626"></a>04626     {
<a name="l04627"></a>04627         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6e2521c234fb18bd15d25a70adbcce7ea80e3f06b4a75ae81b5608079ebb72bd8" title="LIN Frame error.">LinFrameError</a>:
<a name="l04628"></a>04628             bResult = (1u == pstcLin-&gt;SSR_f.FRE) ? TRUE : FALSE;
<a name="l04629"></a>04629             <span class="keywordflow">break</span>;  
<a name="l04630"></a>04630         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6e2521c234fb18bd15d25a70adbcce7eadf664c08de66e7fcacb22e44a48939d4" title="LIN overrun error.">LinOverrunError</a>:
<a name="l04631"></a>04631             bResult = (1u == pstcLin-&gt;SSR_f.ORE) ? TRUE : FALSE;
<a name="l04632"></a>04632             <span class="keywordflow">break</span>;  
<a name="l04633"></a>04633         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6e2521c234fb18bd15d25a70adbcce7eab64907df16b65a36692c1682266a17b4" title="LIN RX buffer full.">LinRxFull</a>:
<a name="l04634"></a>04634             bResult = (1u == pstcLin-&gt;SSR_f.RDRF) ? TRUE : FALSE;
<a name="l04635"></a>04635             <span class="keywordflow">break</span>;  
<a name="l04636"></a>04636         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6e2521c234fb18bd15d25a70adbcce7ea4a8991aff0baab4e75f4153507690878" title="LIN TX buffer empty.">LinTxEmpty</a>:
<a name="l04637"></a>04637             bResult = (1u == pstcLin-&gt;SSR_f.TDRE) ? TRUE : FALSE;
<a name="l04638"></a>04638             <span class="keywordflow">break</span>;  
<a name="l04639"></a>04639         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6e2521c234fb18bd15d25a70adbcce7ea32597d6df6b97bd5f28f0e8d2af13d0a" title="LIN TX idle.">LinTxIdle</a>:
<a name="l04640"></a>04640             bResult = (1u == pstcLin-&gt;SSR_f.TBI) ? TRUE : FALSE;
<a name="l04641"></a>04641             <span class="keywordflow">break</span>;  
<a name="l04642"></a>04642         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6e2521c234fb18bd15d25a70adbcce7eacf9d393b2197687bb45d6be71059aa43" title="LIN break field detection flag.">LinBreakFlag</a>:
<a name="l04643"></a>04643             bResult = (1u == pstcLin-&gt;SSR_f.LBD) ? TRUE : FALSE;
<a name="l04644"></a>04644             <span class="keywordflow">break</span>;
<a name="l04645"></a>04645         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6e2521c234fb18bd15d25a70adbcce7ea54236884061182b8076f9af11e4439ab" title="LIN FIFO request.">LinTxFifoRequest</a>:
<a name="l04646"></a>04646             bResult = (1u == pstcLin-&gt;FCR1_f.FDRQ) ? TRUE : FALSE;
<a name="l04647"></a>04647             <span class="keywordflow">break</span>;  
<a name="l04648"></a>04648         <span class="keywordflow">default</span>:
<a name="l04649"></a>04649             <span class="keywordflow">break</span>;  
<a name="l04650"></a>04650     }
<a name="l04651"></a>04651     
<a name="l04652"></a>04652     <span class="keywordflow">return</span> bResult;
<a name="l04653"></a>04653 }
<a name="l04654"></a>04654 
<a name="l04678"></a><a class="code" href="group___mfs_group.html#gaca05fa79d3dad016552f460676182045">04678</a> en_result_t <a class="code" href="group___mfs_group.html#gaca05fa79d3dad016552f460676182045" title="Clear status of LIN according to status type.">Mfs_Lin_ClrStatus</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>* pstcLin,
<a name="l04679"></a>04679                               <a class="code" href="group___mfs_group.html#gae7c6af8f4fb666ded593d97dddb846c6" title="LIN status types.">en_lin_status_t</a> enStatus)
<a name="l04680"></a>04680 {
<a name="l04681"></a>04681     <span class="keywordflow">if</span> (NULL == pstcLin)
<a name="l04682"></a>04682     {
<a name="l04683"></a>04683         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l04684"></a>04684     }
<a name="l04685"></a>04685     
<a name="l04686"></a>04686     <span class="keywordflow">switch</span>(enStatus)
<a name="l04687"></a>04687     {
<a name="l04688"></a>04688         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6e2521c234fb18bd15d25a70adbcce7ea80e3f06b4a75ae81b5608079ebb72bd8" title="LIN Frame error.">LinFrameError</a>:
<a name="l04689"></a>04689         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6e2521c234fb18bd15d25a70adbcce7eadf664c08de66e7fcacb22e44a48939d4" title="LIN overrun error.">LinOverrunError</a>:
<a name="l04690"></a>04690             pstcLin-&gt;SSR_f.REC = 1u;
<a name="l04691"></a>04691             <span class="keywordflow">break</span>;  
<a name="l04692"></a>04692         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6e2521c234fb18bd15d25a70adbcce7eab64907df16b65a36692c1682266a17b4" title="LIN RX buffer full.">LinRxFull</a>:
<a name="l04693"></a>04693         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6e2521c234fb18bd15d25a70adbcce7ea4a8991aff0baab4e75f4153507690878" title="LIN TX buffer empty.">LinTxEmpty</a>:
<a name="l04694"></a>04694         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6e2521c234fb18bd15d25a70adbcce7ea32597d6df6b97bd5f28f0e8d2af13d0a" title="LIN TX idle.">LinTxIdle</a>:
<a name="l04695"></a>04695             <span class="keywordflow">break</span>;  
<a name="l04696"></a>04696         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6e2521c234fb18bd15d25a70adbcce7eacf9d393b2197687bb45d6be71059aa43" title="LIN break field detection flag.">LinBreakFlag</a>:
<a name="l04697"></a>04697             pstcLin-&gt;SSR_f.LBD = 0u;
<a name="l04698"></a>04698             <span class="keywordflow">break</span>;
<a name="l04699"></a>04699         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#gga6e2521c234fb18bd15d25a70adbcce7ea54236884061182b8076f9af11e4439ab" title="LIN FIFO request.">LinTxFifoRequest</a>:
<a name="l04700"></a>04700             pstcLin-&gt;FCR1_f.FDRQ = 0u;
<a name="l04701"></a>04701             <span class="keywordflow">break</span>;  
<a name="l04702"></a>04702         <span class="keywordflow">default</span>:
<a name="l04703"></a>04703             <span class="keywordflow">return</span> ErrorInvalidParameter;  
<a name="l04704"></a>04704     }
<a name="l04705"></a>04705     
<a name="l04706"></a>04706     <span class="keywordflow">return</span> Ok;
<a name="l04707"></a>04707 }
<a name="l04708"></a>04708 
<a name="l04721"></a><a class="code" href="group___mfs_group.html#ga25d59aee3ac8a2ffd2f655846ecc735f">04721</a> en_result_t <a class="code" href="group___mfs_group.html#ga25d59aee3ac8a2ffd2f655846ecc735f" title="Write LIN data buffer.">Mfs_Lin_SendData</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>* pstcLin, uint8_t Data)
<a name="l04722"></a>04722 {
<a name="l04723"></a>04723     <span class="keywordflow">if</span> (NULL == pstcLin)
<a name="l04724"></a>04724     {
<a name="l04725"></a>04725         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l04726"></a>04726     }
<a name="l04727"></a>04727     
<a name="l04728"></a>04728     pstcLin-&gt;TDR = Data;
<a name="l04729"></a>04729     
<a name="l04730"></a>04730     <span class="keywordflow">return</span> Ok;
<a name="l04731"></a>04731 }
<a name="l04732"></a>04732 
<a name="l04742"></a><a class="code" href="group___mfs_group.html#gacf639d6b5071c9b3d21c5e1dae8e44fc">04742</a> uint8_t <a class="code" href="group___mfs_group.html#gacf639d6b5071c9b3d21c5e1dae8e44fc" title="Read LIN data buffer.">Mfs_Lin_ReceiveData</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>* pstcLin)
<a name="l04743"></a>04743 {    
<a name="l04744"></a>04744     <span class="keywordflow">return</span> (pstcLin-&gt;RDR);
<a name="l04745"></a>04745 }
<a name="l04746"></a>04746 
<a name="l04759"></a><a class="code" href="group___mfs_group.html#gadc0e20ffc38018a1f442cff7a5332009">04759</a> en_result_t <a class="code" href="group___mfs_group.html#gadc0e20ffc38018a1f442cff7a5332009" title="Reset LIN FIFO.">Mfs_Lin_ResetFifo</a> (<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>* pstcLin, 
<a name="l04760"></a>04760                                <a class="code" href="group___mfs_group.html#ga92c7220a4bea875ed8c044e89c63768d" title="Mfs FIFO Number.">en_mfs_fifo_t</a> enFifo)
<a name="l04761"></a>04761 {
<a name="l04762"></a>04762     <span class="keywordflow">if</span> (NULL == pstcLin)
<a name="l04763"></a>04763     {
<a name="l04764"></a>04764         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l04765"></a>04765     }
<a name="l04766"></a>04766     
<a name="l04767"></a>04767     <span class="keywordflow">switch</span>(enFifo)
<a name="l04768"></a>04768     {
<a name="l04769"></a>04769         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034a0ffddd198e226809429b23d9f32ef5f8" title="FIFO No.1.">MfsFifo1</a>:
<a name="l04770"></a>04770             pstcLin-&gt;FCR0_f.FCL1 = 1u;
<a name="l04771"></a>04771             <span class="keywordflow">break</span>;
<a name="l04772"></a>04772         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034ac8a2b52ff2b3ab8b5e6c0be9e335b837" title="FIFO No.2.">MfsFifo2</a>:
<a name="l04773"></a>04773             pstcLin-&gt;FCR0_f.FCL2 = 1u;
<a name="l04774"></a>04774             <span class="keywordflow">break</span>;
<a name="l04775"></a>04775         <span class="keywordflow">default</span>:
<a name="l04776"></a>04776             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l04777"></a>04777     }
<a name="l04778"></a>04778     
<a name="l04779"></a>04779     <span class="keywordflow">return</span> Ok;
<a name="l04780"></a>04780 }
<a name="l04781"></a>04781 
<a name="l04795"></a><a class="code" href="group___mfs_group.html#ga87300acd08f5f4c2946b2b36adb0c8c7">04795</a> en_result_t <a class="code" href="group___mfs_group.html#ga87300acd08f5f4c2946b2b36adb0c8c7" title="Set LIN FIFO count.">Mfs_Lin_SetFifoCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>* pstcLin,
<a name="l04796"></a>04796                                  <a class="code" href="group___mfs_group.html#ga92c7220a4bea875ed8c044e89c63768d" title="Mfs FIFO Number.">en_mfs_fifo_t</a> enFifo,
<a name="l04797"></a>04797                                  uint8_t u8Count)
<a name="l04798"></a>04798 {
<a name="l04799"></a>04799     <span class="keywordflow">if</span> (NULL == pstcLin)
<a name="l04800"></a>04800     {
<a name="l04801"></a>04801         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l04802"></a>04802     }
<a name="l04803"></a>04803     
<a name="l04804"></a>04804     <span class="keywordflow">switch</span>(enFifo)
<a name="l04805"></a>04805     {
<a name="l04806"></a>04806         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034a0ffddd198e226809429b23d9f32ef5f8" title="FIFO No.1.">MfsFifo1</a>:
<a name="l04807"></a>04807             pstcLin-&gt;FBYTE1 = u8Count;
<a name="l04808"></a>04808             <span class="keywordflow">break</span>;
<a name="l04809"></a>04809         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034ac8a2b52ff2b3ab8b5e6c0be9e335b837" title="FIFO No.2.">MfsFifo2</a>:
<a name="l04810"></a>04810             pstcLin-&gt;FBYTE2 = u8Count;
<a name="l04811"></a>04811             <span class="keywordflow">break</span>;
<a name="l04812"></a>04812         <span class="keywordflow">default</span>:
<a name="l04813"></a>04813            <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l04814"></a>04814     }
<a name="l04815"></a>04815     
<a name="l04816"></a>04816     <span class="keywordflow">return</span> Ok;
<a name="l04817"></a>04817 }
<a name="l04818"></a>04818 
<a name="l04833"></a><a class="code" href="group___mfs_group.html#ga177e27061c085578fad8b71defb331fa">04833</a> uint8_t <a class="code" href="group___mfs_group.html#ga177e27061c085578fad8b71defb331fa" title="Get LIN FIFO count.">Mfs_Lin_GetFifoCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___mfs_group.html#gaf031267d39cf39708ced008ec5cbd78e">stc_mfsn_lin_t</a>* pstcLin,
<a name="l04834"></a>04834                              <a class="code" href="group___mfs_group.html#ga92c7220a4bea875ed8c044e89c63768d" title="Mfs FIFO Number.">en_mfs_fifo_t</a> enFifo)
<a name="l04835"></a>04835 {
<a name="l04836"></a>04836     uint8_t u8FifoCnt = 0xFFu;
<a name="l04837"></a>04837     
<a name="l04838"></a>04838     <span class="keywordflow">switch</span>(enFifo)
<a name="l04839"></a>04839     {
<a name="l04840"></a>04840         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034a0ffddd198e226809429b23d9f32ef5f8" title="FIFO No.1.">MfsFifo1</a>:
<a name="l04841"></a>04841             u8FifoCnt = pstcLin-&gt;FBYTE1;
<a name="l04842"></a>04842             <span class="keywordflow">break</span>;
<a name="l04843"></a>04843         <span class="keywordflow">case</span> <a class="code" href="group___mfs_group.html#ggaa790c1bd268e04a49f891a121f220034ac8a2b52ff2b3ab8b5e6c0be9e335b837" title="FIFO No.2.">MfsFifo2</a>:
<a name="l04844"></a>04844             u8FifoCnt = pstcLin-&gt;FBYTE2;
<a name="l04845"></a>04845             <span class="keywordflow">break</span>;
<a name="l04846"></a>04846         <span class="keywordflow">default</span>:
<a name="l04847"></a>04847            <span class="keywordflow">break</span>;
<a name="l04848"></a>04848     }
<a name="l04849"></a>04849     
<a name="l04850"></a>04850     <span class="keywordflow">return</span> u8FifoCnt;
<a name="l04851"></a>04851 }
<a name="l04852"></a>04852 
<a name="l04853"></a>04853 <span class="preprocessor">#endif                             </span>
<a name="l04854"></a>04854 <span class="preprocessor"></span>                             
<a name="l04856"></a>04856 
<a name="l04857"></a>04857 <span class="preprocessor">#endif </span><span class="comment">/* #if (defined(PDL_PERIPHERAL_MFS_ACTIVE)) */</span>
<a name="l04858"></a>04858 <span class="comment">/******************************************************************************/</span>
<a name="l04859"></a>04859 <span class="comment">/* EOF (not truncated)                                                        */</span>
<a name="l04860"></a>04860 <span class="comment">/******************************************************************************/</span>
</pre></div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="mfs_8c.html">mfs.c</a>      </li>

    <li class="footer">Generated on Tue Sep 29 2015 15:06:43 for PDL for FM Family by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
