<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>PDL for FM Family: C:/Users/chzhang/Desktop/FM0 MCU/universial PDL/release_v11f_doxy/driver/bt/bt.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="products_site_image.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">PDL for FM Family
   &#160;<span id="projectnumber">Version2.0.0</span>
   </div>
   <div id="projectbrief">FM Peripheral Driver Library</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('bt_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">C:/Users/chzhang/Desktop/FM0 MCU/universial PDL/release_v11f_doxy/driver/bt/bt.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="bt_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*******************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (C) 2013 Spansion LLC. All Rights Reserved. </span>
<a name="l00003"></a>00003 <span class="comment">*</span>
<a name="l00004"></a>00004 <span class="comment">* This software is owned and published by: </span>
<a name="l00005"></a>00005 <span class="comment">* Spansion LLC, 915 DeGuigne Dr. Sunnyvale, CA  94088-3453 (&quot;Spansion&quot;).</span>
<a name="l00006"></a>00006 <span class="comment">*</span>
<a name="l00007"></a>00007 <span class="comment">* BY DOWNLOADING, INSTALLING OR USING THIS SOFTWARE, YOU AGREE TO BE BOUND </span>
<a name="l00008"></a>00008 <span class="comment">* BY ALL THE TERMS AND CONDITIONS OF THIS AGREEMENT.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* This software contains source code for use with Spansion </span>
<a name="l00011"></a>00011 <span class="comment">* components. This software is licensed by Spansion to be adapted only </span>
<a name="l00012"></a>00012 <span class="comment">* for use in systems utilizing Spansion components. Spansion shall not be </span>
<a name="l00013"></a>00013 <span class="comment">* responsible for misuse or illegal use of this software for devices not </span>
<a name="l00014"></a>00014 <span class="comment">* supported herein.  Spansion is providing this software &quot;AS IS&quot; and will </span>
<a name="l00015"></a>00015 <span class="comment">* not be responsible for issues arising from incorrect user implementation </span>
<a name="l00016"></a>00016 <span class="comment">* of the software.  </span>
<a name="l00017"></a>00017 <span class="comment">*</span>
<a name="l00018"></a>00018 <span class="comment">* SPANSION MAKES NO WARRANTY, EXPRESS OR IMPLIED, ARISING BY LAW OR OTHERWISE,</span>
<a name="l00019"></a>00019 <span class="comment">* REGARDING THE SOFTWARE (INCLUDING ANY ACOOMPANYING WRITTEN MATERIALS), </span>
<a name="l00020"></a>00020 <span class="comment">* ITS PERFORMANCE OR SUITABILITY FOR YOUR INTENDED USE, INCLUDING, </span>
<a name="l00021"></a>00021 <span class="comment">* WITHOUT LIMITATION, THE IMPLIED WARRANTY OF MERCHANTABILITY, THE IMPLIED </span>
<a name="l00022"></a>00022 <span class="comment">* WARRANTY OF FITNESS FOR A PARTICULAR PURPOSE OR USE, AND THE IMPLIED </span>
<a name="l00023"></a>00023 <span class="comment">* WARRANTY OF NONINFRINGEMENT.  </span>
<a name="l00024"></a>00024 <span class="comment">* SPANSION SHALL HAVE NO LIABILITY (WHETHER IN CONTRACT, WARRANTY, TORT, </span>
<a name="l00025"></a>00025 <span class="comment">* NEGLIGENCE OR OTHERWISE) FOR ANY DAMAGES WHATSOEVER (INCLUDING, WITHOUT </span>
<a name="l00026"></a>00026 <span class="comment">* LIMITATION, DAMAGES FOR LOSS OF BUSINESS PROFITS, BUSINESS INTERRUPTION, </span>
<a name="l00027"></a>00027 <span class="comment">* LOSS OF BUSINESS INFORMATION, OR OTHER PECUNIARY LOSS) ARISING FROM USE OR </span>
<a name="l00028"></a>00028 <span class="comment">* INABILITY TO USE THE SOFTWARE, INCLUDING, WITHOUT LIMITATION, ANY DIRECT, </span>
<a name="l00029"></a>00029 <span class="comment">* INDIRECT, INCIDENTAL, SPECIAL OR CONSEQUENTIAL DAMAGES OR LOSS OF DATA, </span>
<a name="l00030"></a>00030 <span class="comment">* SAVINGS OR PROFITS, </span>
<a name="l00031"></a>00031 <span class="comment">* EVEN IF SPANSION HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. </span>
<a name="l00032"></a>00032 <span class="comment">* YOU ASSUME ALL RESPONSIBILITIES FOR SELECTION OF THE SOFTWARE TO ACHIEVE YOUR</span>
<a name="l00033"></a>00033 <span class="comment">* INTENDED RESULTS, AND FOR THE INSTALLATION OF, USE OF, AND RESULTS OBTAINED </span>
<a name="l00034"></a>00034 <span class="comment">* FROM, THE SOFTWARE.  </span>
<a name="l00035"></a>00035 <span class="comment">*</span>
<a name="l00036"></a>00036 <span class="comment">* This software may be replicated in part or whole for the licensed use, </span>
<a name="l00037"></a>00037 <span class="comment">* with the restriction that this Disclaimer and Copyright notice must be </span>
<a name="l00038"></a>00038 <span class="comment">* included with each copy of this software, whether used in part or whole, </span>
<a name="l00039"></a>00039 <span class="comment">* at all times.  </span>
<a name="l00040"></a>00040 <span class="comment">*/</span>
<a name="l00041"></a>00041 <span class="comment">/******************************************************************************/</span>
<a name="l00052"></a>00052 <span class="comment">/******************************************************************************/</span>
<a name="l00053"></a>00053 <span class="comment">/* Include files                                                              */</span>
<a name="l00054"></a>00054 <span class="comment">/******************************************************************************/</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="bt_8h.html">bt.h</a>&quot;</span>
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 <span class="preprocessor">#if (defined(PDL_PERIPHERAL_BT_ACTIVE))</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span>
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="comment">/******************************************************************************/</span>
<a name="l00066"></a>00066 <span class="comment">/* Global variable definitions (declared in header file with &#39;extern&#39;)        */</span>
<a name="l00067"></a>00067 <span class="comment">/******************************************************************************/</span>
<a name="l00069"></a><a class="code" href="group___bt_group.html#gaba4177c64456d3aa3eb00f90ec2495c0">00069</a> <a class="code" href="structstc__bt__instance__data.html" title="BT instance data.">stc_bt_instance_data_t</a> <a class="code" href="group___bt_group.html#gaba4177c64456d3aa3eb00f90ec2495c0" title="Look-up table for all enabled BT instances and their internal data.">m_astcBtInstanceDataLut</a>[<a class="code" href="group___bt_group.html#ga6c95d4121718f8f692f4c3b86cc66d48">BT_INSTANCE_COUNT</a>] =
<a name="l00070"></a>00070 {
<a name="l00071"></a>00071 <span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT0 == PDL_ON)</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span>    { 
<a name="l00073"></a>00073         &amp;<a class="code" href="group___bt_group.html#ga33be19454e0e430eb9b3e840a0571c88">BT0</a>,                 <span class="comment">// pstcInstance</span>
<a name="l00074"></a>00074         {0u, 0u, 0u}          <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00075"></a>00075     },
<a name="l00076"></a>00076 <span class="preprocessor">#endif</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT1 == PDL_ON)</span>
<a name="l00078"></a>00078 <span class="preprocessor"></span>    { 
<a name="l00079"></a>00079         &amp;<a class="code" href="group___bt_group.html#ga29a78fdd5ef3840c2319b2adabc6b819">BT1</a>,                 <span class="comment">// pstcInstance</span>
<a name="l00080"></a>00080         {0u, 0u, 0u}          <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00081"></a>00081     },
<a name="l00082"></a>00082 <span class="preprocessor">#endif</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT2 == PDL_ON)</span>
<a name="l00084"></a>00084 <span class="preprocessor"></span>    { 
<a name="l00085"></a>00085         &amp;<a class="code" href="group___bt_group.html#ga4de0c6bcc0da6cca1d83d9c97a26d1d7">BT2</a>,                 <span class="comment">// pstcInstance</span>
<a name="l00086"></a>00086         {0u, 0u, 0u}          <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00087"></a>00087     },
<a name="l00088"></a>00088 <span class="preprocessor">#endif</span>
<a name="l00089"></a>00089 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT3 == PDL_ON)</span>
<a name="l00090"></a>00090 <span class="preprocessor"></span>    { 
<a name="l00091"></a>00091         &amp;<a class="code" href="group___bt_group.html#gaaad4c84b9ae22e88c2a51bb967708c18">BT3</a>,                 <span class="comment">// pstcInstance</span>
<a name="l00092"></a>00092         {0u, 0u, 0u}          <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00093"></a>00093     },
<a name="l00094"></a>00094 <span class="preprocessor">#endif</span>
<a name="l00095"></a>00095 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT4 == PDL_ON)</span>
<a name="l00096"></a>00096 <span class="preprocessor"></span>    { 
<a name="l00097"></a>00097         &amp;<a class="code" href="group___bt_group.html#gaee6c9bc609bd4ca84f05c371a89a4779">BT4</a>,                 <span class="comment">// pstcInstance</span>
<a name="l00098"></a>00098         {0u, 0u, 0u}          <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00099"></a>00099     },
<a name="l00100"></a>00100 <span class="preprocessor">#endif</span>
<a name="l00101"></a>00101 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT5 == PDL_ON)</span>
<a name="l00102"></a>00102 <span class="preprocessor"></span>    { 
<a name="l00103"></a>00103         &amp;<a class="code" href="group___bt_group.html#gaf1560e7066d8f375429a34a1a2b6c0d4">BT5</a>,                 <span class="comment">// pstcInstance</span>
<a name="l00104"></a>00104         {0u, 0u, 0u}          <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00105"></a>00105     },
<a name="l00106"></a>00106 <span class="preprocessor">#endif</span>
<a name="l00107"></a>00107 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT6 == PDL_ON)</span>
<a name="l00108"></a>00108 <span class="preprocessor"></span>    { 
<a name="l00109"></a>00109         &amp;<a class="code" href="group___bt_group.html#ga0100ff2e637ec5e5d76b9e25b09545f9">BT6</a>,                 <span class="comment">// pstcInstance</span>
<a name="l00110"></a>00110         {0u, 0u, 0u}          <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00111"></a>00111     },
<a name="l00112"></a>00112 <span class="preprocessor">#endif</span>
<a name="l00113"></a>00113 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT7 == PDL_ON)</span>
<a name="l00114"></a>00114 <span class="preprocessor"></span>    { 
<a name="l00115"></a>00115         &amp;<a class="code" href="group___bt_group.html#ga4310148344ebd0d2e78d77139c921403">BT7</a>,                 <span class="comment">// pstcInstance</span>
<a name="l00116"></a>00116         {0u, 0u, 0u}          <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00117"></a>00117     },
<a name="l00118"></a>00118 <span class="preprocessor">#endif</span>
<a name="l00119"></a>00119 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT8 == PDL_ON)</span>
<a name="l00120"></a>00120 <span class="preprocessor"></span>    { 
<a name="l00121"></a>00121         &amp;<a class="code" href="group___bt_group.html#ga3a85bd5b0d71d98d18f402247c6779cb">BT8</a>,                 <span class="comment">// pstcInstance</span>
<a name="l00122"></a>00122         {0u, 0u, 0u}          <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00123"></a>00123     },
<a name="l00124"></a>00124 <span class="preprocessor">#endif</span>
<a name="l00125"></a>00125 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT9 == PDL_ON)</span>
<a name="l00126"></a>00126 <span class="preprocessor"></span>    { 
<a name="l00127"></a>00127         &amp;<a class="code" href="group___bt_group.html#gacfe281d6acca044e3e56bb822930b63e">BT9</a>,                 <span class="comment">// pstcInstance</span>
<a name="l00128"></a>00128         {0u, 0u, 0u}          <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00129"></a>00129     },
<a name="l00130"></a>00130 <span class="preprocessor">#endif</span>
<a name="l00131"></a>00131 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT10 == PDL_ON)</span>
<a name="l00132"></a>00132 <span class="preprocessor"></span>    { 
<a name="l00133"></a>00133         &amp;<a class="code" href="group___bt_group.html#ga5a541eb5f729939db2223bad3c4c8c92">BT10</a>,                <span class="comment">// pstcInstance</span>
<a name="l00134"></a>00134         {0u, 0u, 0u}          <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00135"></a>00135     },
<a name="l00136"></a>00136 <span class="preprocessor">#endif</span>
<a name="l00137"></a>00137 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT11 == PDL_ON)</span>
<a name="l00138"></a>00138 <span class="preprocessor"></span>    { 
<a name="l00139"></a>00139         &amp;<a class="code" href="group___bt_group.html#ga60c29c8a18bca130fc6f0ec88385e5b0">BT11</a>,                <span class="comment">// pstcInstance</span>
<a name="l00140"></a>00140         {0u, 0u, 0u}          <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00141"></a>00141     },
<a name="l00142"></a>00142 <span class="preprocessor">#endif</span>
<a name="l00143"></a>00143 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT12 == PDL_ON)</span>
<a name="l00144"></a>00144 <span class="preprocessor"></span>    { 
<a name="l00145"></a>00145         &amp;<a class="code" href="group___bt_group.html#gabfdc45be297a5b7b9436252c9d999fbe">BT12</a>,                <span class="comment">// pstcInstance</span>
<a name="l00146"></a>00146         {0u, 0u, 0u}          <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00147"></a>00147     },
<a name="l00148"></a>00148 <span class="preprocessor">#endif</span>
<a name="l00149"></a>00149 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT13 == PDL_ON)</span>
<a name="l00150"></a>00150 <span class="preprocessor"></span>    { 
<a name="l00151"></a>00151         &amp;<a class="code" href="group___bt_group.html#gad16e9b5b80875374db704e6d76f2dad7">BT13</a>,                <span class="comment">// pstcInstance</span>
<a name="l00152"></a>00152         {0u, 0u, 0u}          <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00153"></a>00153     },
<a name="l00154"></a>00154 <span class="preprocessor">#endif</span>
<a name="l00155"></a>00155 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT14 == PDL_ON)</span>
<a name="l00156"></a>00156 <span class="preprocessor"></span>    { 
<a name="l00157"></a>00157         &amp;<a class="code" href="group___bt_group.html#ga4b03065c99742f59ab520d7e82213472">BT14</a>,                <span class="comment">// pstcInstance</span>
<a name="l00158"></a>00158         {0u, 0u, 0u}          <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00159"></a>00159     },
<a name="l00160"></a>00160 <span class="preprocessor">#endif</span>
<a name="l00161"></a>00161 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT15 == PDL_ON)</span>
<a name="l00162"></a>00162 <span class="preprocessor"></span>    { 
<a name="l00163"></a>00163         &amp;<a class="code" href="group___bt_group.html#ga11966239dd1bbf95b625f698b21adb88">BT15</a>,                <span class="comment">// pstcInstance</span>
<a name="l00164"></a>00164         {0u, 0u, 0u}          <span class="comment">// stcInternData (not initialized yet)</span>
<a name="l00165"></a>00165     },
<a name="l00166"></a>00166 <span class="preprocessor">#endif   </span>
<a name="l00167"></a>00167 <span class="preprocessor"></span>};
<a name="l00168"></a>00168 
<a name="l00178"></a><a class="code" href="group___bt_group.html#ga8454181c55fc0672c41cbd9d76eb5cbe">00178</a> <span class="keyword">static</span> <a class="code" href="structstc__bt__intern__data.html" title="BT internal data.">stc_bt_intern_data_t</a>* <a class="code" href="group___bt_group.html#ga8454181c55fc0672c41cbd9d76eb5cbe" title="Return the internal data for a certain BT instance.">BtGetInternDataPtr</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt) 
<a name="l00179"></a>00179 {
<a name="l00180"></a>00180     uint32_t u32Instance;
<a name="l00181"></a>00181    
<a name="l00182"></a>00182     <span class="keywordflow">for</span> (u32Instance = 0u; u32Instance &lt; <a class="code" href="group___bt_group.html#ga6c95d4121718f8f692f4c3b86cc66d48">BT_INSTANCE_COUNT</a>; u32Instance++)
<a name="l00183"></a>00183     {
<a name="l00184"></a>00184         <span class="keywordflow">if</span> (pstcBt == m_astcBtInstanceDataLut[u32Instance].pstcInstance)
<a name="l00185"></a>00185         {
<a name="l00186"></a>00186             <span class="keywordflow">return</span> &amp;m_astcBtInstanceDataLut[u32Instance].<a class="code" href="structstc__bt__instance__data.html#abd94109b35d56c09f2b8385e31d0166c" title="module internal data of instance">stcInternData</a>;
<a name="l00187"></a>00187         }
<a name="l00188"></a>00188     }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190     <span class="keywordflow">return</span> NULL;
<a name="l00191"></a>00191 }
<a name="l00192"></a>00192 
<a name="l00193"></a>00193 <span class="preprocessor">#if defined(PDL_INTERRUPT_BT_ACTIVE)  </span>
<a name="l00194"></a>00194 <span class="preprocessor"></span>
<a name="l00202"></a><a class="code" href="group___bt_group.html#gab7c2327457cc306f8b01012493617828">00202</a> <span class="keywordtype">void</span> <a class="code" href="group___bt_group.html#gab7c2327457cc306f8b01012493617828" title="BT interrupt service routine.">Bt_IrqHandler</a>( <span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt,
<a name="l00203"></a>00203                     <a class="code" href="structstc__bt__intern__data.html" title="BT internal data.">stc_bt_intern_data_t</a>* pstcBtInternData) 
<a name="l00204"></a>00204 {
<a name="l00205"></a>00205     uint8_t u8Irq;
<a name="l00206"></a>00206     
<a name="l00207"></a>00207     <span class="comment">// Get Interrupt Request</span>
<a name="l00208"></a>00208     u8Irq = pstcBt-&gt;STC; 
<a name="l00209"></a>00209      <span class="comment">/*</span>
<a name="l00210"></a>00210 <span class="comment">      * Trigger Interrupt (PWM,PPG,Reload timer)</span>
<a name="l00211"></a>00211 <span class="comment">      * Measurement completion Interrupt (PWC)</span>
<a name="l00212"></a>00212 <span class="comment">      */</span>
<a name="l00213"></a>00213     <span class="keywordflow">if</span> ((1ul &lt;&lt; 2u) == (u8Irq &amp; (1ul &lt;&lt; 2u))) 
<a name="l00214"></a>00214     {
<a name="l00215"></a>00215         <span class="comment">//  Clear Interrupt  </span>
<a name="l00216"></a>00216         pstcBt-&gt;STC &amp;= ~(1ul &lt;&lt; 2u); 
<a name="l00217"></a>00217 
<a name="l00218"></a>00218         <span class="keywordflow">if</span> (pstcBtInternData-&gt;<a class="code" href="structstc__bt__intern__data.html#a56cbd589fb03177b713afae78a901915" title="Pointer to callback function the interrupt reflected by bit2 of STC.">pfnBit2IrqCb</a> != NULL) 
<a name="l00219"></a>00219         {
<a name="l00220"></a>00220             <span class="comment">// Call CallBackIrq </span>
<a name="l00221"></a>00221             pstcBtInternData-&gt;<a class="code" href="structstc__bt__intern__data.html#a56cbd589fb03177b713afae78a901915" title="Pointer to callback function the interrupt reflected by bit2 of STC.">pfnBit2IrqCb</a>();
<a name="l00222"></a>00222         }
<a name="l00223"></a>00223     }
<a name="l00224"></a>00224     
<a name="l00225"></a>00225     <span class="comment">// Duty Match Interrupt (PWM)   </span>
<a name="l00226"></a>00226     <span class="keywordflow">if</span> ((1ul &lt;&lt; 1u) == (u8Irq &amp; (1ul &lt;&lt; 1u))) 
<a name="l00227"></a>00227     {
<a name="l00228"></a>00228         <span class="comment">// Clear Interrupt </span>
<a name="l00229"></a>00229         pstcBt-&gt;STC &amp;= ~(1ul &lt;&lt; 1u); 
<a name="l00230"></a>00230 
<a name="l00231"></a>00231         <span class="keywordflow">if</span> (pstcBtInternData-&gt;<a class="code" href="structstc__bt__intern__data.html#a7da174f3445005ab4dfd55ece9d25d02" title="Pointer to callback function the interrupt reflected by bit1 of STC.">pfnBit1IrqCb</a> != NULL) 
<a name="l00232"></a>00232         {
<a name="l00233"></a>00233             <span class="comment">// Call CallBackIrq</span>
<a name="l00234"></a>00234             pstcBtInternData-&gt;<a class="code" href="structstc__bt__intern__data.html#a7da174f3445005ab4dfd55ece9d25d02" title="Pointer to callback function the interrupt reflected by bit1 of STC.">pfnBit1IrqCb</a>();
<a name="l00235"></a>00235         }
<a name="l00236"></a>00236     }
<a name="l00237"></a>00237   
<a name="l00238"></a>00238     <span class="comment">/* </span>
<a name="l00239"></a>00239 <span class="comment">     * Underflow Interrupt (PWM,PPG,Reload timer)</span>
<a name="l00240"></a>00240 <span class="comment">     * Overflow Interrupt (PWC) </span>
<a name="l00241"></a>00241 <span class="comment">     */</span>
<a name="l00242"></a>00242     <span class="keywordflow">if</span> (1ul == (u8Irq &amp; 1ul)) 
<a name="l00243"></a>00243     {
<a name="l00244"></a>00244         <span class="comment">// Clear Interrupt </span>
<a name="l00245"></a>00245         pstcBt-&gt;STC &amp;= ~1ul;
<a name="l00246"></a>00246 
<a name="l00247"></a>00247         <span class="keywordflow">if</span> (pstcBtInternData-&gt;<a class="code" href="structstc__bt__intern__data.html#aaa6ceef70eb51a7c930d755412aa1704" title="Pointer to callback function the interrupt reflected by bit0 of STC.">pfnBit0IrqCb</a> != NULL) 
<a name="l00248"></a>00248         {
<a name="l00249"></a>00249             <span class="comment">// Call CallBackIrq</span>
<a name="l00250"></a>00250             pstcBtInternData-&gt;<a class="code" href="structstc__bt__intern__data.html#aaa6ceef70eb51a7c930d755412aa1704" title="Pointer to callback function the interrupt reflected by bit0 of STC.">pfnBit0IrqCb</a>();
<a name="l00251"></a>00251         }
<a name="l00252"></a>00252     }   
<a name="l00253"></a>00253 
<a name="l00254"></a>00254 }      
<a name="l00255"></a>00255   
<a name="l00263"></a><a class="code" href="group___bt_group.html#gae2ce4557f2439d8300b80b8a575e3f46">00263</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="group___bt_group.html#gae2ce4557f2439d8300b80b8a575e3f46" title="Set NVIC Interrupt depending on BT instance.">BtInitNvic</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l00264"></a>00264 {
<a name="l00265"></a>00265 <span class="preprocessor">#if (PDL_MCU_CORE == PDL_FM0P_CORE)</span>
<a name="l00266"></a>00266 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_MCU_TYPE == PDL_FM0P_TYPE3)</span>
<a name="l00267"></a>00267 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT0 == PDL_ON) || (PDL_INTERRUPT_ENABLE_BT4 == PDL_ON)   </span>
<a name="l00268"></a>00268 <span class="preprocessor"></span>    <span class="keywordflow">if</span>((pstcBt == &amp;<a class="code" href="group___bt_group.html#ga33be19454e0e430eb9b3e840a0571c88">BT0</a>) || (pstcBt == &amp;<a class="code" href="group___bt_group.html#gaee6c9bc609bd4ca84f05c371a89a4779">BT4</a>))
<a name="l00269"></a>00269     {
<a name="l00270"></a>00270         NVIC_ClearPendingIRQ(BTIM0_4_IRQn); 
<a name="l00271"></a>00271         NVIC_EnableIRQ(BTIM0_4_IRQn); 
<a name="l00272"></a>00272         NVIC_SetPriority(BTIM0_4_IRQn, <a class="code" href="pdl__user_8h.html#a9f6e2d2b991eb1806d1a327ad90e3f1a">PDL_IRQ_LEVEL_BT0_4</a>);
<a name="l00273"></a>00273     }
<a name="l00274"></a>00274 <span class="preprocessor">  #endif</span>
<a name="l00275"></a>00275 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT1 == PDL_ON) || (PDL_INTERRUPT_ENABLE_BT5 == PDL_ON)   </span>
<a name="l00276"></a>00276 <span class="preprocessor"></span>    <span class="keywordflow">if</span>((pstcBt == &amp;<a class="code" href="group___bt_group.html#ga29a78fdd5ef3840c2319b2adabc6b819">BT1</a>) || (pstcBt == &amp;<a class="code" href="group___bt_group.html#gaf1560e7066d8f375429a34a1a2b6c0d4">BT5</a>))
<a name="l00277"></a>00277     {
<a name="l00278"></a>00278         NVIC_ClearPendingIRQ(BTIM1_5_IRQn); 
<a name="l00279"></a>00279         NVIC_EnableIRQ(BTIM1_5_IRQn); 
<a name="l00280"></a>00280         NVIC_SetPriority(BTIM1_5_IRQn, <a class="code" href="pdl__user_8h.html#a0a71132307da82ecd50fc831bc344925">PDL_IRQ_LEVEL_BT1_5</a>);
<a name="l00281"></a>00281     }
<a name="l00282"></a>00282 <span class="preprocessor">  #endif</span>
<a name="l00283"></a>00283 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT2 == PDL_ON) || (PDL_INTERRUPT_ENABLE_BT6 == PDL_ON)   </span>
<a name="l00284"></a>00284 <span class="preprocessor"></span>    <span class="keywordflow">if</span>((pstcBt == &amp;<a class="code" href="group___bt_group.html#ga4de0c6bcc0da6cca1d83d9c97a26d1d7">BT2</a>) || (pstcBt == &amp;<a class="code" href="group___bt_group.html#ga0100ff2e637ec5e5d76b9e25b09545f9">BT6</a>))
<a name="l00285"></a>00285     {
<a name="l00286"></a>00286         NVIC_ClearPendingIRQ(BTIM2_6_IRQn); 
<a name="l00287"></a>00287         NVIC_EnableIRQ(BTIM2_6_IRQn); 
<a name="l00288"></a>00288         NVIC_SetPriority(BTIM2_6_IRQn, <a class="code" href="pdl__user_8h.html#a942c6986bab1ef15b7cfb7a1af0acaf3">PDL_IRQ_LEVEL_BT2_6</a>);
<a name="l00289"></a>00289     }
<a name="l00290"></a>00290 <span class="preprocessor">  #endif</span>
<a name="l00291"></a>00291 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT3 == PDL_ON) || (PDL_INTERRUPT_ENABLE_BT7 == PDL_ON)   </span>
<a name="l00292"></a>00292 <span class="preprocessor"></span>    <span class="keywordflow">if</span>((pstcBt == &amp;<a class="code" href="group___bt_group.html#gaaad4c84b9ae22e88c2a51bb967708c18">BT3</a>) || (pstcBt == &amp;<a class="code" href="group___bt_group.html#ga4310148344ebd0d2e78d77139c921403">BT7</a>))
<a name="l00293"></a>00293     {
<a name="l00294"></a>00294         NVIC_ClearPendingIRQ(BTIM3_7_IRQn); 
<a name="l00295"></a>00295         NVIC_EnableIRQ(BTIM3_7_IRQn); 
<a name="l00296"></a>00296         NVIC_SetPriority(BTIM3_7_IRQn, <a class="code" href="pdl__user_8h.html#afb88ed2b54a220757a8b71cbbb52678e">PDL_IRQ_LEVEL_BT3_7</a>);
<a name="l00297"></a>00297     }
<a name="l00298"></a>00298 <span class="preprocessor">  #endif     </span>
<a name="l00299"></a>00299 <span class="preprocessor"></span><span class="preprocessor">#else  </span>
<a name="l00300"></a>00300 <span class="preprocessor"></span>    NVIC_ClearPendingIRQ(BTIM0_7_FLASH_IRQn); 
<a name="l00301"></a>00301     NVIC_EnableIRQ(BTIM0_7_FLASH_IRQn); 
<a name="l00302"></a>00302     NVIC_SetPriority(BTIM0_7_FLASH_IRQn, PDL_IRQ_LEVEL_BT0_7_FLASH);
<a name="l00303"></a>00303 <span class="preprocessor">#endif    </span>
<a name="l00304"></a>00304 <span class="preprocessor"></span><span class="preprocessor">#elif (PDL_MCU_CORE == PDL_FM3_CORE)</span>
<a name="l00305"></a>00305 <span class="preprocessor"></span>    NVIC_ClearPendingIRQ(BTIM0_7_IRQn); 
<a name="l00306"></a>00306     NVIC_EnableIRQ(BTIM0_7_IRQn); 
<a name="l00307"></a>00307     NVIC_SetPriority(BTIM0_7_IRQn, PDL_IRQ_LEVEL_BT0_7);
<a name="l00308"></a>00308 <span class="preprocessor">#elif (PDL_MCU_CORE == PDL_FM4_CORE)    </span>
<a name="l00309"></a>00309 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT0 == PDL_ON)  </span>
<a name="l00310"></a>00310 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(pstcBt == &amp;<a class="code" href="group___bt_group.html#ga33be19454e0e430eb9b3e840a0571c88">BT0</a>)
<a name="l00311"></a>00311     {
<a name="l00312"></a>00312         NVIC_ClearPendingIRQ(BT0_IRQn); 
<a name="l00313"></a>00313         NVIC_EnableIRQ(BT0_IRQn); 
<a name="l00314"></a>00314         NVIC_SetPriority(BT0_IRQn, PDL_IRQ_LEVEL_BT0);
<a name="l00315"></a>00315     }
<a name="l00316"></a>00316 <span class="preprocessor">  #endif</span>
<a name="l00317"></a>00317 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT1 == PDL_ON)         </span>
<a name="l00318"></a>00318 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(pstcBt == &amp;<a class="code" href="group___bt_group.html#ga29a78fdd5ef3840c2319b2adabc6b819">BT1</a>)
<a name="l00319"></a>00319     {
<a name="l00320"></a>00320         NVIC_ClearPendingIRQ(BT1_IRQn); 
<a name="l00321"></a>00321         NVIC_EnableIRQ(BT1_IRQn); 
<a name="l00322"></a>00322         NVIC_SetPriority(BT1_IRQn, PDL_IRQ_LEVEL_BT1);
<a name="l00323"></a>00323     }
<a name="l00324"></a>00324 <span class="preprocessor">  #endif</span>
<a name="l00325"></a>00325 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT2 == PDL_ON)        </span>
<a name="l00326"></a>00326 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(pstcBt == &amp;<a class="code" href="group___bt_group.html#ga4de0c6bcc0da6cca1d83d9c97a26d1d7">BT2</a>)
<a name="l00327"></a>00327     {
<a name="l00328"></a>00328         NVIC_ClearPendingIRQ(BT2_IRQn); 
<a name="l00329"></a>00329         NVIC_EnableIRQ(BT2_IRQn); 
<a name="l00330"></a>00330         NVIC_SetPriority(BT2_IRQn, PDL_IRQ_LEVEL_BT2);
<a name="l00331"></a>00331     }
<a name="l00332"></a>00332 <span class="preprocessor">  #endif </span>
<a name="l00333"></a>00333 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT3 == PDL_ON)        </span>
<a name="l00334"></a>00334 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(pstcBt == &amp;<a class="code" href="group___bt_group.html#gaaad4c84b9ae22e88c2a51bb967708c18">BT3</a>)
<a name="l00335"></a>00335     {
<a name="l00336"></a>00336         NVIC_ClearPendingIRQ(BT3_IRQn); 
<a name="l00337"></a>00337         NVIC_EnableIRQ(BT3_IRQn); 
<a name="l00338"></a>00338         NVIC_SetPriority(BT3_IRQn, PDL_IRQ_LEVEL_BT3);
<a name="l00339"></a>00339     }
<a name="l00340"></a>00340 <span class="preprocessor">  #endif</span>
<a name="l00341"></a>00341 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT4 == PDL_ON)         </span>
<a name="l00342"></a>00342 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(pstcBt == &amp;<a class="code" href="group___bt_group.html#gaee6c9bc609bd4ca84f05c371a89a4779">BT4</a>)
<a name="l00343"></a>00343     {
<a name="l00344"></a>00344         NVIC_ClearPendingIRQ(BT4_IRQn); 
<a name="l00345"></a>00345         NVIC_EnableIRQ(BT4_IRQn); 
<a name="l00346"></a>00346         NVIC_SetPriority(BT4_IRQn, PDL_IRQ_LEVEL_BT4);
<a name="l00347"></a>00347     }
<a name="l00348"></a>00348 <span class="preprocessor">  #endif</span>
<a name="l00349"></a>00349 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT5 == PDL_ON)          </span>
<a name="l00350"></a>00350 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(pstcBt == &amp;<a class="code" href="group___bt_group.html#gaf1560e7066d8f375429a34a1a2b6c0d4">BT5</a>)
<a name="l00351"></a>00351     {
<a name="l00352"></a>00352         NVIC_ClearPendingIRQ(BT5_IRQn); 
<a name="l00353"></a>00353         NVIC_EnableIRQ(BT5_IRQn); 
<a name="l00354"></a>00354         NVIC_SetPriority(BT5_IRQn, PDL_IRQ_LEVEL_BT5);
<a name="l00355"></a>00355     }
<a name="l00356"></a>00356 <span class="preprocessor">  #endif</span>
<a name="l00357"></a>00357 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT6 == PDL_ON)             </span>
<a name="l00358"></a>00358 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(pstcBt == &amp;<a class="code" href="group___bt_group.html#ga0100ff2e637ec5e5d76b9e25b09545f9">BT6</a>)
<a name="l00359"></a>00359     {
<a name="l00360"></a>00360         NVIC_ClearPendingIRQ(BT6_IRQn); 
<a name="l00361"></a>00361         NVIC_EnableIRQ(BT6_IRQn); 
<a name="l00362"></a>00362         NVIC_SetPriority(BT6_IRQn, PDL_IRQ_LEVEL_BT6);
<a name="l00363"></a>00363     }
<a name="l00364"></a>00364 <span class="preprocessor">  #endif</span>
<a name="l00365"></a>00365 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT7 == PDL_ON)        </span>
<a name="l00366"></a>00366 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(pstcBt == &amp;<a class="code" href="group___bt_group.html#ga4310148344ebd0d2e78d77139c921403">BT7</a>)
<a name="l00367"></a>00367     {
<a name="l00368"></a>00368         NVIC_ClearPendingIRQ(BT7_IRQn); 
<a name="l00369"></a>00369         NVIC_EnableIRQ(BT7_IRQn); 
<a name="l00370"></a>00370         NVIC_SetPriority(BT7_IRQn, PDL_IRQ_LEVEL_BT7);
<a name="l00371"></a>00371     }
<a name="l00372"></a>00372 <span class="preprocessor">  #endif</span>
<a name="l00373"></a>00373 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT8 == PDL_ON)        </span>
<a name="l00374"></a>00374 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(pstcBt == &amp;<a class="code" href="group___bt_group.html#ga3a85bd5b0d71d98d18f402247c6779cb">BT8</a>)
<a name="l00375"></a>00375     {
<a name="l00376"></a>00376         NVIC_ClearPendingIRQ(BT8_IRQn); 
<a name="l00377"></a>00377         NVIC_EnableIRQ(BT8_IRQn); 
<a name="l00378"></a>00378         NVIC_SetPriority(BT8_IRQn, PDL_IRQ_LEVEL_BT8);
<a name="l00379"></a>00379     }
<a name="l00380"></a>00380 <span class="preprocessor">  #endif</span>
<a name="l00381"></a>00381 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT9 == PDL_ON)         </span>
<a name="l00382"></a>00382 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(pstcBt == &amp;<a class="code" href="group___bt_group.html#gacfe281d6acca044e3e56bb822930b63e">BT9</a>)
<a name="l00383"></a>00383     {
<a name="l00384"></a>00384         NVIC_ClearPendingIRQ(BT9_IRQn); 
<a name="l00385"></a>00385         NVIC_EnableIRQ(BT9_IRQn); 
<a name="l00386"></a>00386         NVIC_SetPriority(BT9_IRQn, PDL_IRQ_LEVEL_BT9);
<a name="l00387"></a>00387     }
<a name="l00388"></a>00388 <span class="preprocessor">  #endif</span>
<a name="l00389"></a>00389 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT10 == PDL_ON)          </span>
<a name="l00390"></a>00390 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(pstcBt == &amp;<a class="code" href="group___bt_group.html#ga5a541eb5f729939db2223bad3c4c8c92">BT10</a>)
<a name="l00391"></a>00391     {
<a name="l00392"></a>00392         NVIC_ClearPendingIRQ(BT10_IRQn); 
<a name="l00393"></a>00393         NVIC_EnableIRQ(BT10_IRQn); 
<a name="l00394"></a>00394         NVIC_SetPriority(BT10_IRQn, PDL_IRQ_LEVEL_BT10);
<a name="l00395"></a>00395     }
<a name="l00396"></a>00396 <span class="preprocessor">  #endif</span>
<a name="l00397"></a>00397 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT11 == PDL_ON)            </span>
<a name="l00398"></a>00398 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(pstcBt == &amp;<a class="code" href="group___bt_group.html#ga60c29c8a18bca130fc6f0ec88385e5b0">BT11</a>)
<a name="l00399"></a>00399     {
<a name="l00400"></a>00400         NVIC_ClearPendingIRQ(BT11_IRQn); 
<a name="l00401"></a>00401         NVIC_EnableIRQ(BT11_IRQn); 
<a name="l00402"></a>00402         NVIC_SetPriority(BT11_IRQn, PDL_IRQ_LEVEL_BT11);
<a name="l00403"></a>00403     }
<a name="l00404"></a>00404 <span class="preprocessor">  #endif</span>
<a name="l00405"></a>00405 <span class="preprocessor"></span><span class="preprocessor">  #if   (PDL_INTERRUPT_ENABLE_BT12 == PDL_ON) || \</span>
<a name="l00406"></a>00406 <span class="preprocessor">        (PDL_INTERRUPT_ENABLE_BT13 == PDL_ON) || \</span>
<a name="l00407"></a>00407 <span class="preprocessor">        (PDL_INTERRUPT_ENABLE_BT14 == PDL_ON) || \</span>
<a name="l00408"></a>00408 <span class="preprocessor">        (PDL_INTERRUPT_ENABLE_BT15 == PDL_ON)  </span>
<a name="l00409"></a>00409 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(pstcBt == &amp;<a class="code" href="group___bt_group.html#gabfdc45be297a5b7b9436252c9d999fbe">BT12</a>) || (pstcBt == &amp;<a class="code" href="group___bt_group.html#gad16e9b5b80875374db704e6d76f2dad7">BT13</a>) || (pstcBt == &amp;<a class="code" href="group___bt_group.html#ga4b03065c99742f59ab520d7e82213472">BT14</a>) || (pstcBt == &amp;<a class="code" href="group___bt_group.html#ga11966239dd1bbf95b625f698b21adb88">BT15</a>) 
<a name="l00410"></a>00410     {
<a name="l00411"></a>00411         NVIC_ClearPendingIRQ(BT12_13_14_15_IRQn); 
<a name="l00412"></a>00412         NVIC_EnableIRQ(BT12_13_14_15_IRQn); 
<a name="l00413"></a>00413         NVIC_SetPriority(BT12_13_14_15_IRQn, PDL_IRQ_LEVEL_BT12_13_14_15);      
<a name="l00414"></a>00414     }
<a name="l00415"></a>00415 <span class="preprocessor">  #endif        </span>
<a name="l00416"></a>00416 <span class="preprocessor"></span>
<a name="l00417"></a>00417 <span class="preprocessor">#endif    </span>
<a name="l00418"></a>00418 <span class="preprocessor"></span>} 
<a name="l00419"></a>00419 
<a name="l00427"></a><a class="code" href="group___bt_group.html#ga738b2175e812a14e18b72bcfea6a7a89">00427</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="group___bt_group.html#ga738b2175e812a14e18b72bcfea6a7a89" title="Clear NVIC Interrupt depending on BT instance.">BtDeInitNvic</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l00428"></a>00428 {        
<a name="l00429"></a>00429 <span class="preprocessor">#if (PDL_MCU_CORE == PDL_FM0P_CORE)</span>
<a name="l00430"></a>00430 <span class="preprocessor"></span><span class="preprocessor">#if (PDL_MCU_TYPE == PDL_FM0P_TYPE3)</span>
<a name="l00431"></a>00431 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT0 == PDL_ON) || (PDL_INTERRUPT_ENABLE_BT4 == PDL_ON)  </span>
<a name="l00432"></a>00432 <span class="preprocessor"></span>    NVIC_ClearPendingIRQ(BTIM0_4_IRQn); 
<a name="l00433"></a>00433     NVIC_DisableIRQ(BTIM0_4_IRQn); 
<a name="l00434"></a>00434     NVIC_SetPriority(BTIM0_4_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00435"></a>00435 <span class="preprocessor">  #endif </span>
<a name="l00436"></a>00436 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT1 == PDL_ON) || (PDL_INTERRUPT_ENABLE_BT5 == PDL_ON)  </span>
<a name="l00437"></a>00437 <span class="preprocessor"></span>    NVIC_ClearPendingIRQ(BTIM1_5_IRQn); 
<a name="l00438"></a>00438     NVIC_DisableIRQ(BTIM1_5_IRQn); 
<a name="l00439"></a>00439     NVIC_SetPriority(BTIM1_5_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00440"></a>00440 <span class="preprocessor">  #endif</span>
<a name="l00441"></a>00441 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT2 == PDL_ON) || (PDL_INTERRUPT_ENABLE_BT6 == PDL_ON)  </span>
<a name="l00442"></a>00442 <span class="preprocessor"></span>    NVIC_ClearPendingIRQ(BTIM2_6_IRQn); 
<a name="l00443"></a>00443     NVIC_DisableIRQ(BTIM2_6_IRQn); 
<a name="l00444"></a>00444     NVIC_SetPriority(BTIM2_6_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00445"></a>00445 <span class="preprocessor">  #endif</span>
<a name="l00446"></a>00446 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT3 == PDL_ON) || (PDL_INTERRUPT_ENABLE_BT7 == PDL_ON)  </span>
<a name="l00447"></a>00447 <span class="preprocessor"></span>    NVIC_ClearPendingIRQ(BTIM3_7_IRQn); 
<a name="l00448"></a>00448     NVIC_DisableIRQ(BTIM3_7_IRQn); 
<a name="l00449"></a>00449     NVIC_SetPriority(BTIM3_7_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00450"></a>00450 <span class="preprocessor">  #endif  </span>
<a name="l00451"></a>00451 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00452"></a>00452 <span class="preprocessor"></span>    NVIC_ClearPendingIRQ(BTIM0_7_FLASH_IRQn); 
<a name="l00453"></a>00453     NVIC_DisableIRQ(BTIM0_7_FLASH_IRQn); 
<a name="l00454"></a>00454     NVIC_SetPriority(BTIM0_7_FLASH_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00455"></a>00455 <span class="preprocessor">#endif    </span>
<a name="l00456"></a>00456 <span class="preprocessor"></span><span class="preprocessor">#elif (PDL_MCU_CORE == PDL_FM3_CORE)</span>
<a name="l00457"></a>00457 <span class="preprocessor"></span>    NVIC_ClearPendingIRQ(BTIM0_7_IRQn); 
<a name="l00458"></a>00458     NVIC_DisableIRQ(BTIM0_7_IRQn); 
<a name="l00459"></a>00459     NVIC_SetPriority(BTIM0_7_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00460"></a>00460 <span class="preprocessor">#elif (PDL_MCU_CORE == PDL_FM4_CORE)    </span>
<a name="l00461"></a>00461 <span class="preprocessor"></span><span class="preprocessor">      #if (PDL_INTERRUPT_ENABLE_BT0 == PDL_ON)  </span>
<a name="l00462"></a>00462 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(&amp;<a class="code" href="group___bt_group.html#ga33be19454e0e430eb9b3e840a0571c88">BT0</a> == pstcBt)
<a name="l00463"></a>00463     {
<a name="l00464"></a>00464         NVIC_ClearPendingIRQ(BT0_IRQn); 
<a name="l00465"></a>00465         NVIC_DisableIRQ(BT0_IRQn); 
<a name="l00466"></a>00466         NVIC_SetPriority(BT0_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00467"></a>00467     }
<a name="l00468"></a>00468 <span class="preprocessor">  #endif</span>
<a name="l00469"></a>00469 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT1 == PDL_ON)         </span>
<a name="l00470"></a>00470 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(&amp;<a class="code" href="group___bt_group.html#ga29a78fdd5ef3840c2319b2adabc6b819">BT1</a> == pstcBt)
<a name="l00471"></a>00471     {
<a name="l00472"></a>00472         NVIC_ClearPendingIRQ(BT1_IRQn); 
<a name="l00473"></a>00473         NVIC_DisableIRQ(BT1_IRQn); 
<a name="l00474"></a>00474         NVIC_SetPriority(BT1_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00475"></a>00475     }
<a name="l00476"></a>00476 <span class="preprocessor">  #endif</span>
<a name="l00477"></a>00477 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT2 == PDL_ON)        </span>
<a name="l00478"></a>00478 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(&amp;<a class="code" href="group___bt_group.html#ga4de0c6bcc0da6cca1d83d9c97a26d1d7">BT2</a> == pstcBt)
<a name="l00479"></a>00479     {
<a name="l00480"></a>00480         NVIC_ClearPendingIRQ(BT2_IRQn); 
<a name="l00481"></a>00481         NVIC_DisableIRQ(BT2_IRQn); 
<a name="l00482"></a>00482         NVIC_SetPriority(BT2_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00483"></a>00483     }
<a name="l00484"></a>00484 <span class="preprocessor">  #endif </span>
<a name="l00485"></a>00485 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT3 == PDL_ON)        </span>
<a name="l00486"></a>00486 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(&amp;<a class="code" href="group___bt_group.html#gaaad4c84b9ae22e88c2a51bb967708c18">BT3</a> == pstcBt)
<a name="l00487"></a>00487     {
<a name="l00488"></a>00488         NVIC_ClearPendingIRQ(BT3_IRQn); 
<a name="l00489"></a>00489         NVIC_DisableIRQ(BT3_IRQn); 
<a name="l00490"></a>00490         NVIC_SetPriority(BT3_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00491"></a>00491     }
<a name="l00492"></a>00492 <span class="preprocessor">  #endif</span>
<a name="l00493"></a>00493 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT4 == PDL_ON)         </span>
<a name="l00494"></a>00494 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(&amp;<a class="code" href="group___bt_group.html#gaee6c9bc609bd4ca84f05c371a89a4779">BT4</a> == pstcBt)
<a name="l00495"></a>00495     {
<a name="l00496"></a>00496         NVIC_ClearPendingIRQ(BT4_IRQn); 
<a name="l00497"></a>00497         NVIC_DisableIRQ(BT4_IRQn); 
<a name="l00498"></a>00498         NVIC_SetPriority(BT4_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00499"></a>00499     }
<a name="l00500"></a>00500 <span class="preprocessor">  #endif</span>
<a name="l00501"></a>00501 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT5 == PDL_ON)          </span>
<a name="l00502"></a>00502 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(&amp;<a class="code" href="group___bt_group.html#gaf1560e7066d8f375429a34a1a2b6c0d4">BT5</a> == pstcBt)
<a name="l00503"></a>00503     {
<a name="l00504"></a>00504         NVIC_ClearPendingIRQ(BT5_IRQn); 
<a name="l00505"></a>00505         NVIC_DisableIRQ(BT5_IRQn); 
<a name="l00506"></a>00506         NVIC_SetPriority(BT5_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00507"></a>00507     }
<a name="l00508"></a>00508 <span class="preprocessor">  #endif</span>
<a name="l00509"></a>00509 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT6 == PDL_ON)             </span>
<a name="l00510"></a>00510 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(&amp;<a class="code" href="group___bt_group.html#ga0100ff2e637ec5e5d76b9e25b09545f9">BT6</a> == pstcBt)
<a name="l00511"></a>00511     {
<a name="l00512"></a>00512         NVIC_ClearPendingIRQ(BT6_IRQn); 
<a name="l00513"></a>00513         NVIC_DisableIRQ(BT6_IRQn); 
<a name="l00514"></a>00514         NVIC_SetPriority(BT6_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00515"></a>00515     }
<a name="l00516"></a>00516 <span class="preprocessor">  #endif</span>
<a name="l00517"></a>00517 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT7 == PDL_ON)        </span>
<a name="l00518"></a>00518 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(&amp;<a class="code" href="group___bt_group.html#ga4310148344ebd0d2e78d77139c921403">BT7</a> == pstcBt)
<a name="l00519"></a>00519     {
<a name="l00520"></a>00520         NVIC_ClearPendingIRQ(BT7_IRQn); 
<a name="l00521"></a>00521         NVIC_DisableIRQ(BT7_IRQn); 
<a name="l00522"></a>00522         NVIC_SetPriority(BT7_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00523"></a>00523     }
<a name="l00524"></a>00524 <span class="preprocessor">  #endif</span>
<a name="l00525"></a>00525 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT8 == PDL_ON)        </span>
<a name="l00526"></a>00526 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(&amp;<a class="code" href="group___bt_group.html#ga3a85bd5b0d71d98d18f402247c6779cb">BT8</a> == pstcBt)
<a name="l00527"></a>00527     {
<a name="l00528"></a>00528         NVIC_ClearPendingIRQ(BT8_IRQn); 
<a name="l00529"></a>00529         NVIC_DisableIRQ(BT8_IRQn); 
<a name="l00530"></a>00530         NVIC_SetPriority(BT8_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00531"></a>00531     }
<a name="l00532"></a>00532 <span class="preprocessor">  #endif</span>
<a name="l00533"></a>00533 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT9 == PDL_ON)         </span>
<a name="l00534"></a>00534 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(&amp;<a class="code" href="group___bt_group.html#gacfe281d6acca044e3e56bb822930b63e">BT9</a> == pstcBt)
<a name="l00535"></a>00535     {
<a name="l00536"></a>00536         NVIC_ClearPendingIRQ(BT9_IRQn); 
<a name="l00537"></a>00537         NVIC_DisableIRQ(BT9_IRQn); 
<a name="l00538"></a>00538         NVIC_SetPriority(BT9_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00539"></a>00539     }
<a name="l00540"></a>00540 <span class="preprocessor">  #endif</span>
<a name="l00541"></a>00541 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT10 == PDL_ON)          </span>
<a name="l00542"></a>00542 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(&amp;<a class="code" href="group___bt_group.html#ga5a541eb5f729939db2223bad3c4c8c92">BT10</a> == pstcBt)
<a name="l00543"></a>00543     {
<a name="l00544"></a>00544         NVIC_ClearPendingIRQ(BT10_IRQn); 
<a name="l00545"></a>00545         NVIC_DisableIRQ(BT10_IRQn); 
<a name="l00546"></a>00546         NVIC_SetPriority(BT10_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00547"></a>00547     }
<a name="l00548"></a>00548 <span class="preprocessor">  #endif</span>
<a name="l00549"></a>00549 <span class="preprocessor"></span><span class="preprocessor">  #if (PDL_INTERRUPT_ENABLE_BT11 == PDL_ON)            </span>
<a name="l00550"></a>00550 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(&amp;<a class="code" href="group___bt_group.html#ga60c29c8a18bca130fc6f0ec88385e5b0">BT11</a> == pstcBt)
<a name="l00551"></a>00551     {
<a name="l00552"></a>00552         NVIC_ClearPendingIRQ(BT11_IRQn); 
<a name="l00553"></a>00553         NVIC_DisableIRQ(BT11_IRQn); 
<a name="l00554"></a>00554         NVIC_SetPriority(BT11_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);
<a name="l00555"></a>00555     }
<a name="l00556"></a>00556 <span class="preprocessor">  #endif</span>
<a name="l00557"></a>00557 <span class="preprocessor"></span><span class="preprocessor">  #if   (PDL_INTERRUPT_ENABLE_BT12 == PDL_ON) || \</span>
<a name="l00558"></a>00558 <span class="preprocessor">        (PDL_INTERRUPT_ENABLE_BT13 == PDL_ON) || \</span>
<a name="l00559"></a>00559 <span class="preprocessor">        (PDL_INTERRUPT_ENABLE_BT14 == PDL_ON) || \</span>
<a name="l00560"></a>00560 <span class="preprocessor">        (PDL_INTERRUPT_ENABLE_BT15 == PDL_ON)  </span>
<a name="l00561"></a>00561 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ((&amp;<a class="code" href="group___bt_group.html#gabfdc45be297a5b7b9436252c9d999fbe">BT12</a> == pstcBt) || (&amp;<a class="code" href="group___bt_group.html#gad16e9b5b80875374db704e6d76f2dad7">BT13</a> == pstcBt) || (&amp;<a class="code" href="group___bt_group.html#ga4b03065c99742f59ab520d7e82213472">BT14</a> == pstcBt) || (&amp;<a class="code" href="group___bt_group.html#ga11966239dd1bbf95b625f698b21adb88">BT15</a> == pstcBt)) 
<a name="l00562"></a>00562     {
<a name="l00563"></a>00563         NVIC_ClearPendingIRQ(BT12_13_14_15_IRQn); 
<a name="l00564"></a>00564         NVIC_DisableIRQ(BT12_13_14_15_IRQn); 
<a name="l00565"></a>00565         NVIC_SetPriority(BT12_13_14_15_IRQn, <a class="code" href="pdl_8h.html#a5faedaab7538fc630225149e4427453d">PDL_DEFAULT_INTERRUPT_LEVEL</a>);      
<a name="l00566"></a>00566     }
<a name="l00567"></a>00567 <span class="preprocessor">  #endif   </span>
<a name="l00568"></a>00568 <span class="preprocessor"></span><span class="preprocessor">#endif    </span>
<a name="l00569"></a>00569 <span class="preprocessor"></span>  
<a name="l00570"></a>00570     <span class="keywordflow">return</span>;
<a name="l00571"></a>00571 } 
<a name="l00572"></a>00572 
<a name="l00573"></a>00573 <span class="preprocessor">#endif </span>
<a name="l00574"></a>00574 <span class="preprocessor"></span>
<a name="l00596"></a><a class="code" href="group___bt_group.html#ga583a7b40cd194032aa10592b816d531b">00596</a> en_result_t <a class="code" href="group___bt_group.html#ga583a7b40cd194032aa10592b816d531b" title="Configure BT IO mode.">Bt_ConfigIOMode</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#gafc61f385186bb5c2d2a168019d76b0d4" title="Enumeration to define BT IO mode.">en_bt_io_mode_t</a> enIoMode)
<a name="l00597"></a>00597 {
<a name="l00598"></a>00598     <span class="comment">// Pointer to internal data</span>
<a name="l00599"></a>00599     <a class="code" href="structstc__bt__intern__data.html" title="BT internal data.">stc_bt_intern_data_t</a>* pstcBtInternData ;
<a name="l00600"></a>00600     <span class="comment">// Check for NULL pointer</span>
<a name="l00601"></a>00601     <span class="keywordflow">if</span> ((NULL == pstcBt) || (enIoMode &gt; <a class="code" href="group___bt_group.html#ggac462f467003f05bd34c5f26d62fa01c3a8cd24fea2c1c2b48b61765ae5419aef8" title="BT IO mode 8.">BtIoMode8</a>))
<a name="l00602"></a>00602     {
<a name="l00603"></a>00603         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00604"></a>00604     }  
<a name="l00605"></a>00605     
<a name="l00606"></a>00606     <span class="comment">// Get pointer to internal data structure ...</span>
<a name="l00607"></a>00607     pstcBtInternData = <a class="code" href="group___bt_group.html#ga8454181c55fc0672c41cbd9d76eb5cbe" title="Return the internal data for a certain BT instance.">BtGetInternDataPtr</a>( pstcBt ) ;
<a name="l00608"></a>00608     
<a name="l00609"></a>00609     <span class="keywordflow">if</span>(NULL == pstcBtInternData)
<a name="l00610"></a>00610     {
<a name="l00611"></a>00611         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00612"></a>00612     }
<a name="l00613"></a>00613     
<a name="l00614"></a>00614     <span class="keywordflow">if</span>((&amp;<a class="code" href="group___bt_group.html#ga33be19454e0e430eb9b3e840a0571c88">BT0</a> == pstcBt) || (&amp;<a class="code" href="group___bt_group.html#ga29a78fdd5ef3840c2319b2adabc6b819">BT1</a> == pstcBt))
<a name="l00615"></a>00615     {
<a name="l00616"></a>00616         FM_BTIOSEL03-&gt;BTSEL0123_f.SEL01 = (uint8_t)enIoMode; 
<a name="l00617"></a>00617     }
<a name="l00618"></a>00618     <span class="keywordflow">else</span> <span class="keywordflow">if</span>((&amp;<a class="code" href="group___bt_group.html#ga4de0c6bcc0da6cca1d83d9c97a26d1d7">BT2</a> == pstcBt) || (&amp;<a class="code" href="group___bt_group.html#gaaad4c84b9ae22e88c2a51bb967708c18">BT3</a> == pstcBt))
<a name="l00619"></a>00619     {
<a name="l00620"></a>00620         FM_BTIOSEL03-&gt;BTSEL0123_f.SEL23 = (uint8_t)enIoMode; 
<a name="l00621"></a>00621     }
<a name="l00622"></a>00622     <span class="keywordflow">else</span> <span class="keywordflow">if</span>((&amp;<a class="code" href="group___bt_group.html#gaee6c9bc609bd4ca84f05c371a89a4779">BT4</a> == pstcBt) || (&amp;<a class="code" href="group___bt_group.html#gaf1560e7066d8f375429a34a1a2b6c0d4">BT5</a> == pstcBt))
<a name="l00623"></a>00623     {
<a name="l00624"></a>00624         FM_BTIOSEL47-&gt;BTSEL4567_f.SEL45 = (uint8_t)enIoMode;
<a name="l00625"></a>00625     }
<a name="l00626"></a>00626     <span class="keywordflow">else</span> <span class="keywordflow">if</span>((&amp;<a class="code" href="group___bt_group.html#ga0100ff2e637ec5e5d76b9e25b09545f9">BT6</a> == pstcBt) || (&amp;<a class="code" href="group___bt_group.html#ga4310148344ebd0d2e78d77139c921403">BT7</a> == pstcBt))
<a name="l00627"></a>00627     {
<a name="l00628"></a>00628         FM_BTIOSEL47-&gt;BTSEL4567_f.SEL67 = (uint8_t)enIoMode;
<a name="l00629"></a>00629     }
<a name="l00630"></a>00630     
<a name="l00631"></a>00631     <span class="keywordflow">return</span> Ok;
<a name="l00632"></a>00632 }
<a name="l00633"></a>00633 
<a name="l00634"></a>00634 <span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT_PWM_MODE == PDL_ON)</span>
<a name="l00635"></a>00635 <span class="preprocessor"></span>
<a name="l00647"></a><a class="code" href="group___bt_group.html#ga99b5d7599e2109cc43549287c803f526">00647</a> en_result_t <a class="code" href="group___bt_group.html#ga99b5d7599e2109cc43549287c803f526" title="Initialize PWM function of BT.">Bt_Pwm_Init</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="structstc__bt__pwm__config.html" title="Structure of PWM configuration.">stc_bt_pwm_config_t</a>* pstcPwmConfig)
<a name="l00648"></a>00648 {
<a name="l00649"></a>00649     <span class="keyword">volatile</span> FM_BT_PWM_TypeDef* pRegBt = (<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt;
<a name="l00650"></a>00650     <span class="comment">// Pointer to internal data</span>
<a name="l00651"></a>00651     <a class="code" href="structstc__bt__intern__data.html" title="BT internal data.">stc_bt_intern_data_t</a>* pstcBtInternData ;
<a name="l00652"></a>00652     uint16_t u16Pres;
<a name="l00653"></a>00653     <span class="comment">// Check for NULL pointer</span>
<a name="l00654"></a>00654     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l00655"></a>00655     {
<a name="l00656"></a>00656         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00657"></a>00657     }  
<a name="l00658"></a>00658     
<a name="l00659"></a>00659     <span class="comment">// Get pointer to internal data structure ...</span>
<a name="l00660"></a>00660     pstcBtInternData = <a class="code" href="group___bt_group.html#ga8454181c55fc0672c41cbd9d76eb5cbe" title="Return the internal data for a certain BT instance.">BtGetInternDataPtr</a>( pstcBt ) ;
<a name="l00661"></a>00661     
<a name="l00662"></a>00662     <span class="keywordflow">if</span>(NULL == pstcBtInternData)
<a name="l00663"></a>00663     {
<a name="l00664"></a>00664         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00665"></a>00665     }
<a name="l00666"></a>00666     
<a name="l00667"></a>00667     <span class="comment">// Reset Base Timer mode</span>
<a name="l00668"></a>00668     pRegBt-&gt;TMCR_f.FMD = <a class="code" href="group___bt_group.html#ggad5e995baecd927106fe1163974b13fa9aeb5164872b16ae8ec1fb91b83e59a4d8" title="Reset mode.">BtResetMode</a>;
<a name="l00669"></a>00669     <span class="comment">// Set Base Timer to PWM mode</span>
<a name="l00670"></a>00670     pRegBt-&gt;TMCR_f.FMD = <a class="code" href="group___bt_group.html#ggad5e995baecd927106fe1163974b13fa9ad494aeb2169cec8428e13aa42f0972ca" title="PWM timer mode.">BtPwmMode</a>;
<a name="l00671"></a>00671     
<a name="l00672"></a>00672     <span class="comment">// Clock prescaler setting</span>
<a name="l00673"></a>00673     u16Pres = pstcPwmConfig-&gt;<a class="code" href="structstc__bt__pwm__config.html#ad699d7def641eb7a0d930ddd5fc565dc" title="Clock prescaler.">enPres</a>;  <span class="comment">// Workaround for MISRA-C 2004 rule 12.7</span>
<a name="l00674"></a>00674     <span class="keywordflow">switch</span> (pstcPwmConfig-&gt;<a class="code" href="structstc__bt__pwm__config.html#ad699d7def641eb7a0d930ddd5fc565dc" title="Clock prescaler.">enPres</a>)
<a name="l00675"></a>00675     {
<a name="l00676"></a>00676         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggab4bda7e3d94ac0b573460c1c8ea5c471aca311ff54a16015f4916063876ac5f2c" title="PWM prescaler clock: no division.">PwmPresNone</a>:
<a name="l00677"></a>00677         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggab4bda7e3d94ac0b573460c1c8ea5c471a9ccfc2ac2bf4f1fda8ecc8ae63d6cf97" title="PWM prescaler clock: 1/4.">PwmPres1Div4</a>:
<a name="l00678"></a>00678         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggab4bda7e3d94ac0b573460c1c8ea5c471a3d4c93fc3234e7d8db47fc3a9bfcf7df" title="PWM prescaler clock: 1/16.">PwmPres1Div16</a>:
<a name="l00679"></a>00679         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggab4bda7e3d94ac0b573460c1c8ea5c471a70f8726b6fc15862945a087399fb30b1" title="PWM prescaler clock: 1/128.">PwmPres1Div128</a>:
<a name="l00680"></a>00680         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggab4bda7e3d94ac0b573460c1c8ea5c471ab6591a7bb151596a66e738e4fe904e83" title="PWM prescaler clock: 1/256.">PwmPres1Div256</a>:
<a name="l00681"></a>00681         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggab4bda7e3d94ac0b573460c1c8ea5c471a1c63f4e0b9ccb6ec5ef27458b5ba9b8d" title="Use external clock and count at rising edge.">PwmPres1ExtClkRising</a>:
<a name="l00682"></a>00682         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggab4bda7e3d94ac0b573460c1c8ea5c471a872f5e5f021c5d87ef54ebe2dea066f3" title="Use external clock and count at falling edge.">PwmPres1ExtClkFalling</a>:
<a name="l00683"></a>00683         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggab4bda7e3d94ac0b573460c1c8ea5c471af69ed7caf7c8b2a2eee470178e3cf923" title="Use external clock and count at both edge.">PwmPres1ExtClkBoth</a>: 
<a name="l00684"></a>00684             pRegBt-&gt;TMCR2_f.CKS3 = 0u;
<a name="l00685"></a>00685             pRegBt-&gt;TMCR_f.CKS = u16Pres;
<a name="l00686"></a>00686             <span class="keywordflow">break</span>;
<a name="l00687"></a>00687         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggab4bda7e3d94ac0b573460c1c8ea5c471a050d388ab4c062b06f713a110b7394e3" title="PWM prescaler clock: 1/512.">PwmPres1Div512</a>:
<a name="l00688"></a>00688         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggab4bda7e3d94ac0b573460c1c8ea5c471abad76b6184e58d60b702e7337c44a56d" title="PWM prescaler clock: 1/1024.">PwmPres1Div1024</a>:
<a name="l00689"></a>00689         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggab4bda7e3d94ac0b573460c1c8ea5c471a6be3250e494f3ffeabac48647b3d8299" title="PWM prescaler clock: 1/2048.">PwmPres1Div2048</a>:
<a name="l00690"></a>00690             pRegBt-&gt;TMCR2_f.CKS3 = 1u;
<a name="l00691"></a>00691             pRegBt-&gt;TMCR_f.CKS = (u16Pres &amp; 0x07u);
<a name="l00692"></a>00692             <span class="keywordflow">break</span>;
<a name="l00693"></a>00693     }
<a name="l00694"></a>00694     <span class="comment">// Restart enable setting</span>
<a name="l00695"></a>00695     <span class="keywordflow">switch</span> (pstcPwmConfig-&gt;<a class="code" href="structstc__bt__pwm__config.html#a7bf3efce6b5361a80c7e52d74879ac10" title="Restart enable setting.">enRestartEn</a>)
<a name="l00696"></a>00696     {
<a name="l00697"></a>00697         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggacb5614865996ada9a9c11da87ab354a8ac7b6a5208b0bc94c14c11523d467d53e" title="Disable PWM restart.">PwmRestartDisable</a>:
<a name="l00698"></a>00698             pRegBt-&gt;TMCR_f.RTGEN = 0u;
<a name="l00699"></a>00699             <span class="keywordflow">break</span>;
<a name="l00700"></a>00700         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggacb5614865996ada9a9c11da87ab354a8af032de9d3cc232db3686f1538ca88517" title="Enable PWM restart.">PwmRestartEnable</a>:
<a name="l00701"></a>00701             pRegBt-&gt;TMCR_f.RTGEN = 1u;
<a name="l00702"></a>00702             <span class="keywordflow">break</span>;
<a name="l00703"></a>00703         <span class="keywordflow">default</span>:
<a name="l00704"></a>00704             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l00705"></a>00705     }
<a name="l00706"></a>00706     <span class="comment">// Output Mask setting</span>
<a name="l00707"></a>00707     <span class="keywordflow">switch</span> (pstcPwmConfig-&gt;<a class="code" href="structstc__bt__pwm__config.html#a1d67bbbe4acfa35af731c7ff0d00b9f6" title="PWM output mask setting.">enOutputMask</a>)
<a name="l00708"></a>00708     {
<a name="l00709"></a>00709         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga5a2ecc0ff7154be347ac179148ed5350ab889af5da404a0c3512cb015f8097549" title="Output normal PWM wave.">PwmOutputNormal</a>:
<a name="l00710"></a>00710             pRegBt-&gt;TMCR_f.PMSK = 0u;
<a name="l00711"></a>00711             <span class="keywordflow">break</span>;
<a name="l00712"></a>00712         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga5a2ecc0ff7154be347ac179148ed5350a420233e4fe7e98027df6927fb326d152" title="Mask PWM wave.">PwmOutputMask</a>:
<a name="l00713"></a>00713             pRegBt-&gt;TMCR_f.PMSK = 1u;
<a name="l00714"></a>00714             <span class="keywordflow">break</span>;
<a name="l00715"></a>00715         <span class="keywordflow">default</span>:
<a name="l00716"></a>00716             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l00717"></a>00717     }
<a name="l00718"></a>00718     <span class="comment">// Output polarity setting</span>
<a name="l00719"></a>00719     <span class="keywordflow">switch</span> (pstcPwmConfig-&gt;<a class="code" href="structstc__bt__pwm__config.html#ae550c82b2c11cae664a08f5da9518fa3" title="PWM output polarity setting.">enOutputPolarity</a>)
<a name="l00720"></a>00720     {
<a name="l00721"></a>00721         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga5d281bd06cd974ec8f4b04cdf5931a94a7b54c8357de68543cda0d770cb38b7ca" title="Initial polarity: low.">PwmPolarityLow</a>:
<a name="l00722"></a>00722             pRegBt-&gt;TMCR_f.OSEL = 0u;
<a name="l00723"></a>00723             <span class="keywordflow">break</span>;
<a name="l00724"></a>00724         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga5d281bd06cd974ec8f4b04cdf5931a94a4c6909912bc563c37fe066745da40f53" title="Initial polarity: high.">PwmPolarityHigh</a>:
<a name="l00725"></a>00725             pRegBt-&gt;TMCR_f.OSEL = 1u;
<a name="l00726"></a>00726             <span class="keywordflow">break</span>;
<a name="l00727"></a>00727         <span class="keywordflow">default</span>:
<a name="l00728"></a>00728             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l00729"></a>00729     }
<a name="l00730"></a>00730     <span class="comment">// External trigger setting</span>
<a name="l00731"></a>00731     <span class="keywordflow">switch</span> (pstcPwmConfig-&gt;<a class="code" href="structstc__bt__pwm__config.html#aa4e92e407f8d666fe317a4f9e130615b" title="PWM external trigger setting.">enExtTrig</a>)
<a name="l00732"></a>00732     {
<a name="l00733"></a>00733         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga0e9e3a6816dcb5a086afad451fa6a290abfe0b986d6f0df3276d05bb2ec2eda10" title="Disable external trigger.">PwmExtTrigDisable</a>:
<a name="l00734"></a>00734             pRegBt-&gt;TMCR_f.EGS =  0u;
<a name="l00735"></a>00735             <span class="keywordflow">break</span>;
<a name="l00736"></a>00736         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga0e9e3a6816dcb5a086afad451fa6a290a3c7dae73348a7606c6b31e9f9dfc7253" title="Enable external trigger with rising edge.">PwmExtTrigRising</a>:
<a name="l00737"></a>00737             pRegBt-&gt;TMCR_f.EGS = 1u;
<a name="l00738"></a>00738             <span class="keywordflow">break</span>;
<a name="l00739"></a>00739         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga0e9e3a6816dcb5a086afad451fa6a290a5c83a7996f5016b8432e38cefebe63ff" title="Enable external trigger with falling edge.">PwmExtTrigFalling</a>:
<a name="l00740"></a>00740             pRegBt-&gt;TMCR_f.EGS = 2u;
<a name="l00741"></a>00741             <span class="keywordflow">break</span>;
<a name="l00742"></a>00742         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga0e9e3a6816dcb5a086afad451fa6a290a6c2c3960fa8b36e4dd27c576366b655d" title="Enable external trigger with both edge.">PwmExtTrigBoth</a>:
<a name="l00743"></a>00743             pRegBt-&gt;TMCR_f.EGS = 3u;
<a name="l00744"></a>00744             <span class="keywordflow">break</span>;
<a name="l00745"></a>00745         <span class="keywordflow">default</span>:
<a name="l00746"></a>00746             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l00747"></a>00747     }
<a name="l00748"></a>00748     <span class="comment">// Mode setting</span>
<a name="l00749"></a>00749     <span class="keywordflow">switch</span> (pstcPwmConfig-&gt;<a class="code" href="structstc__bt__pwm__config.html#a1f7e397d3cd82a5f99db81aed5c4c0b8" title="Continuous mode or one-shot mode.">enMode</a>)
<a name="l00750"></a>00750     {
<a name="l00751"></a>00751         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga1823583c80025b14c76e9651f99c75b7afcb36165931c4218c78ca7c476cc162e" title="Continuous mode.">PwmContinuous</a>:
<a name="l00752"></a>00752             pRegBt-&gt;TMCR_f.MDSE = 0u;
<a name="l00753"></a>00753             <span class="keywordflow">break</span>;
<a name="l00754"></a>00754         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga1823583c80025b14c76e9651f99c75b7a0312b1269a375bffa226f3bad4f8cfd0" title="One-shot mode.">PwmOneshot</a>:
<a name="l00755"></a>00755             pRegBt-&gt;TMCR_f.MDSE = 1u;
<a name="l00756"></a>00756             <span class="keywordflow">break</span>;
<a name="l00757"></a>00757         <span class="keywordflow">default</span>:
<a name="l00758"></a>00758             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l00759"></a>00759     }   
<a name="l00760"></a>00760     
<a name="l00761"></a>00761 <span class="preprocessor">#if defined(PDL_INTERRUPT_BT_ACTIVE)      </span>
<a name="l00762"></a>00762 <span class="preprocessor"></span>    <span class="comment">// Interrupt enable setting</span>
<a name="l00763"></a>00763     <span class="keywordflow">if</span>(NULL != pstcPwmConfig-&gt;<a class="code" href="structstc__bt__pwm__config.html#ade9941d99b244597cd28b5fe41702981" title="Pointer to interrupt request enable setting structure of Base Timer with PWM mode.">pstcPwmIrqEn</a>)
<a name="l00764"></a>00764     {
<a name="l00765"></a>00765         <span class="keywordflow">if</span>(TRUE == pstcPwmConfig-&gt;<a class="code" href="structstc__bt__pwm__config.html#ade9941d99b244597cd28b5fe41702981" title="Pointer to interrupt request enable setting structure of Base Timer with PWM mode.">pstcPwmIrqEn</a>-&gt;<a class="code" href="structstc__pwm__irq__en.html#a147de3041711bba0261f8728b4ebd304" title="Trigger interrupt selection.">bPwmTrigIrq</a>)
<a name="l00766"></a>00766         { 
<a name="l00767"></a>00767             pRegBt-&gt;STC_f.TGIE = 1u;
<a name="l00768"></a>00768         }
<a name="l00769"></a>00769         
<a name="l00770"></a>00770         <span class="keywordflow">if</span>(TRUE == pstcPwmConfig-&gt;<a class="code" href="structstc__bt__pwm__config.html#ade9941d99b244597cd28b5fe41702981" title="Pointer to interrupt request enable setting structure of Base Timer with PWM mode.">pstcPwmIrqEn</a>-&gt;<a class="code" href="structstc__pwm__irq__en.html#a8c0da069b547587f88bca539baf73f0e" title="Duty match interrupt selection.">bPwmDutyMatchIrq</a>)
<a name="l00771"></a>00771         {
<a name="l00772"></a>00772             pRegBt-&gt;STC_f.DTIE = 1u;
<a name="l00773"></a>00773         }
<a name="l00774"></a>00774         
<a name="l00775"></a>00775         <span class="keywordflow">if</span>(TRUE == pstcPwmConfig-&gt;<a class="code" href="structstc__bt__pwm__config.html#ade9941d99b244597cd28b5fe41702981" title="Pointer to interrupt request enable setting structure of Base Timer with PWM mode.">pstcPwmIrqEn</a>-&gt;<a class="code" href="structstc__pwm__irq__en.html#a4031a5d5219fc1927d134152080df412" title="Underflow interrupt selection.">bPwmUnderflowIrq</a>)
<a name="l00776"></a>00776         {
<a name="l00777"></a>00777             pRegBt-&gt;STC_f.UDIE = 1u;
<a name="l00778"></a>00778         }
<a name="l00779"></a>00779     }
<a name="l00780"></a>00780     
<a name="l00781"></a>00781     <span class="comment">// Interrupt callback functions</span>
<a name="l00782"></a>00782     <span class="keywordflow">if</span>(NULL != pstcPwmConfig-&gt;<a class="code" href="structstc__bt__pwm__config.html#a8a42aa602378561b1ee696ef1f49b947" title="Pointer to interrupt request callback functions structure of Base Timer with PWM mode.">pstcPwmIrqCb</a>)
<a name="l00783"></a>00783     {
<a name="l00784"></a>00784         pstcBtInternData-&gt;<a class="code" href="structstc__bt__intern__data.html#a56cbd589fb03177b713afae78a901915" title="Pointer to callback function the interrupt reflected by bit2 of STC.">pfnBit2IrqCb</a> = pstcPwmConfig-&gt;<a class="code" href="structstc__bt__pwm__config.html#a8a42aa602378561b1ee696ef1f49b947" title="Pointer to interrupt request callback functions structure of Base Timer with PWM mode.">pstcPwmIrqCb</a>-&gt;<a class="code" href="structstc__pwm__int__cb.html#a6b37d196d7f84b179c29783224606d58" title="Pointer to trigger interrupt callback function.">pfnPwmTrigIrqCb</a>;
<a name="l00785"></a>00785         pstcBtInternData-&gt;<a class="code" href="structstc__bt__intern__data.html#a7da174f3445005ab4dfd55ece9d25d02" title="Pointer to callback function the interrupt reflected by bit1 of STC.">pfnBit1IrqCb</a> = pstcPwmConfig-&gt;<a class="code" href="structstc__bt__pwm__config.html#a8a42aa602378561b1ee696ef1f49b947" title="Pointer to interrupt request callback functions structure of Base Timer with PWM mode.">pstcPwmIrqCb</a>-&gt;<a class="code" href="structstc__pwm__int__cb.html#a91a7c546eb2073639cdcca537db515b3" title="Pointer to duty match interrupt callback function.">pfnPwmDutyMatchIrqCb</a>;
<a name="l00786"></a>00786         pstcBtInternData-&gt;<a class="code" href="structstc__bt__intern__data.html#aaa6ceef70eb51a7c930d755412aa1704" title="Pointer to callback function the interrupt reflected by bit0 of STC.">pfnBit0IrqCb</a> = pstcPwmConfig-&gt;<a class="code" href="structstc__bt__pwm__config.html#a8a42aa602378561b1ee696ef1f49b947" title="Pointer to interrupt request callback functions structure of Base Timer with PWM mode.">pstcPwmIrqCb</a>-&gt;<a class="code" href="structstc__pwm__int__cb.html#a2c24d59eecad489e9b16f28ace9b06dc" title="Pointer to underflow interrupt callback function.">pfnPwmUnderflowIrqCb</a>;
<a name="l00787"></a>00787     }
<a name="l00788"></a>00788     
<a name="l00789"></a>00789     <span class="comment">// NVIC setting</span>
<a name="l00790"></a>00790     <span class="keywordflow">if</span>(TRUE == pstcPwmConfig-&gt;<a class="code" href="structstc__bt__pwm__config.html#a18b9c6a82679466e066894a2b65f0d13" title="TRUE: enable NVIC, FALSE: don&#39;t enable NVIC.">bTouchNvic</a>)
<a name="l00791"></a>00791     {
<a name="l00792"></a>00792         <a class="code" href="group___bt_group.html#gae2ce4557f2439d8300b80b8a575e3f46" title="Set NVIC Interrupt depending on BT instance.">BtInitNvic</a>(pstcBt);
<a name="l00793"></a>00793     }
<a name="l00794"></a>00794 <span class="preprocessor">#endif    </span>
<a name="l00795"></a>00795 <span class="preprocessor"></span>    
<a name="l00796"></a>00796     <span class="keywordflow">return</span> Ok;
<a name="l00797"></a>00797 }
<a name="l00798"></a>00798 
<a name="l00811"></a><a class="code" href="group___bt_group.html#ga7de1c0d7d05f0c479cece39272534baa">00811</a> en_result_t <a class="code" href="group___bt_group.html#ga7de1c0d7d05f0c479cece39272534baa" title="De-Initialize PWM function of BT.">Bt_Pwm_DeInit</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, boolean_t bTouchNvic)
<a name="l00812"></a>00812 {
<a name="l00813"></a>00813     <span class="keyword">volatile</span> FM_BT_PWM_TypeDef* pRegBt = (<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt;
<a name="l00814"></a>00814     <span class="comment">// Pointer to internal data</span>
<a name="l00815"></a>00815     <a class="code" href="structstc__bt__intern__data.html" title="BT internal data.">stc_bt_intern_data_t</a>* pstcBtInternData ;
<a name="l00816"></a>00816     <span class="comment">// Check for NULL pointer</span>
<a name="l00817"></a>00817     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l00818"></a>00818     {
<a name="l00819"></a>00819         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00820"></a>00820     }  
<a name="l00821"></a>00821     
<a name="l00822"></a>00822     <span class="comment">// Get pointer to internal data structure ...</span>
<a name="l00823"></a>00823     pstcBtInternData = <a class="code" href="group___bt_group.html#ga8454181c55fc0672c41cbd9d76eb5cbe" title="Return the internal data for a certain BT instance.">BtGetInternDataPtr</a>( pstcBt ) ;
<a name="l00824"></a>00824     
<a name="l00825"></a>00825     <span class="keywordflow">if</span>(NULL == pstcBtInternData)
<a name="l00826"></a>00826     {
<a name="l00827"></a>00827         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00828"></a>00828     }
<a name="l00829"></a>00829     
<a name="l00830"></a>00830     pRegBt-&gt;TMCR = 0x0000u;
<a name="l00831"></a>00831     pRegBt-&gt;TMCR2 = 0x0000u;
<a name="l00832"></a>00832     pRegBt-&gt;PCSR = 0x0000u;
<a name="l00833"></a>00833     pRegBt-&gt;STC = 0x0000u;
<a name="l00834"></a>00834     pRegBt-&gt;PDUT = 0x0000u;
<a name="l00835"></a>00835 <span class="preprocessor">#if defined(PDL_INTERRUPT_BT_ACTIVE)   </span>
<a name="l00836"></a>00836 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(TRUE == bTouchNvic)
<a name="l00837"></a>00837     {
<a name="l00838"></a>00838         <a class="code" href="group___bt_group.html#ga738b2175e812a14e18b72bcfea6a7a89" title="Clear NVIC Interrupt depending on BT instance.">BtDeInitNvic</a>(pstcBt);
<a name="l00839"></a>00839     }
<a name="l00840"></a>00840 <span class="preprocessor">#endif    </span>
<a name="l00841"></a>00841 <span class="preprocessor"></span>    
<a name="l00842"></a>00842     <span class="keywordflow">return</span> Ok;
<a name="l00843"></a>00843 }
<a name="l00844"></a>00844 
<a name="l00854"></a><a class="code" href="group___bt_group.html#ga2db3ca9ba33b2bdbbe0005fcc26e9295">00854</a> en_result_t <a class="code" href="group___bt_group.html#ga2db3ca9ba33b2bdbbe0005fcc26e9295" title="Enable PWM timer counting.">Bt_Pwm_EnableCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l00855"></a>00855 {
<a name="l00856"></a>00856     <span class="comment">// Check for NULL pointer</span>
<a name="l00857"></a>00857     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l00858"></a>00858     {
<a name="l00859"></a>00859         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00860"></a>00860     }  
<a name="l00861"></a>00861     
<a name="l00862"></a>00862     ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;TMCR_f.CTEN = 1u;
<a name="l00863"></a>00863     <span class="keywordflow">return</span> Ok;
<a name="l00864"></a>00864 }
<a name="l00865"></a>00865 
<a name="l00875"></a><a class="code" href="group___bt_group.html#ga3206d60c168f7f4d57f59b0dc9141f61">00875</a> en_result_t <a class="code" href="group___bt_group.html#ga3206d60c168f7f4d57f59b0dc9141f61" title="Disable PWM timer counting.">Bt_Pwm_DisableCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l00876"></a>00876 {
<a name="l00877"></a>00877     <span class="comment">// Check for NULL pointer</span>
<a name="l00878"></a>00878     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l00879"></a>00879     {
<a name="l00880"></a>00880         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00881"></a>00881     }  
<a name="l00882"></a>00882     
<a name="l00883"></a>00883     ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;TMCR_f.CTEN = 0u;
<a name="l00884"></a>00884     <span class="keywordflow">return</span> Ok;
<a name="l00885"></a>00885 }
<a name="l00886"></a>00886 
<a name="l00896"></a><a class="code" href="group___bt_group.html#ga97b5100663740f144e5d0edd91c8b639">00896</a> en_result_t <a class="code" href="group___bt_group.html#ga97b5100663740f144e5d0edd91c8b639" title="Start PWM timer by software.">Bt_Pwm_EnableSwTrig</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l00897"></a>00897 {
<a name="l00898"></a>00898     <span class="comment">// Check for NULL pointer</span>
<a name="l00899"></a>00899     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l00900"></a>00900     {
<a name="l00901"></a>00901         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00902"></a>00902     }  
<a name="l00903"></a>00903     
<a name="l00904"></a>00904     ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;TMCR_f.STRG = 1u;
<a name="l00905"></a>00905     <span class="keywordflow">return</span> Ok;
<a name="l00906"></a>00906 }
<a name="l00907"></a>00907 
<a name="l00908"></a>00908 <span class="preprocessor">#if defined(PDL_INTERRUPT_BT_ACTIVE)  </span>
<a name="l00909"></a>00909 <span class="preprocessor"></span>
<a name="l00924"></a><a class="code" href="group___bt_group.html#ga0ae14e40c3c006e758aa5be4b0392e1b">00924</a> en_result_t <a class="code" href="group___bt_group.html#ga0ae14e40c3c006e758aa5be4b0392e1b" title="Enable PWM timer interrupt.">Bt_Pwm_EnableIrq</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#gaef9db1c9de1a604d51db4daed9afe7b4" title="enumeration to select the PWM interrupt">en_pwm_irq_sel_t</a> enIrqSel)
<a name="l00925"></a>00925 {
<a name="l00926"></a>00926     <span class="comment">// Check parameter</span>
<a name="l00927"></a>00927     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l00928"></a>00928     {
<a name="l00929"></a>00929         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00930"></a>00930     }  
<a name="l00931"></a>00931     
<a name="l00932"></a>00932     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l00933"></a>00933     {
<a name="l00934"></a>00934         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga4d2d041f72bf1a68c46f95f3374692abaaa24c096d4b7c10b9790844659ca309f" title="PWM trigger interrupt.">PwmTrigIrq</a>:
<a name="l00935"></a>00935             ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;STC_f.TGIE = 1u;
<a name="l00936"></a>00936             <span class="keywordflow">break</span>;
<a name="l00937"></a>00937         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga4d2d041f72bf1a68c46f95f3374692aba5bfa4b6b780042e702f1c92ee0fcfb94" title="PWM duty match interrupt.">PwmDutyMatchIrq</a>:
<a name="l00938"></a>00938             ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;STC_f.DTIE = 1u;
<a name="l00939"></a>00939             <span class="keywordflow">break</span>;
<a name="l00940"></a>00940         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga4d2d041f72bf1a68c46f95f3374692abae040cbf0be78f81f9cb2b914e641d597" title="PWM underflow interrupt.">PwmUnderflowIrq</a>:
<a name="l00941"></a>00941             ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;STC_f.UDIE = 1u;
<a name="l00942"></a>00942             <span class="keywordflow">break</span>;
<a name="l00943"></a>00943         <span class="keywordflow">default</span>:
<a name="l00944"></a>00944             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00945"></a>00945     }
<a name="l00946"></a>00946     
<a name="l00947"></a>00947     <span class="keywordflow">return</span> Ok;
<a name="l00948"></a>00948 }
<a name="l00949"></a>00949 
<a name="l00965"></a><a class="code" href="group___bt_group.html#ga96924d3f6bc5156c40b0c63d765c1d53">00965</a> en_result_t <a class="code" href="group___bt_group.html#ga96924d3f6bc5156c40b0c63d765c1d53" title="Disable PWM timer interrupt.">Bt_Pwm_DisableIrq</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#gaef9db1c9de1a604d51db4daed9afe7b4" title="enumeration to select the PWM interrupt">en_pwm_irq_sel_t</a> enIrqSel)
<a name="l00966"></a>00966 {
<a name="l00967"></a>00967     <span class="comment">// Check parameter</span>
<a name="l00968"></a>00968     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l00969"></a>00969     {
<a name="l00970"></a>00970         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00971"></a>00971     }  
<a name="l00972"></a>00972     
<a name="l00973"></a>00973     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l00974"></a>00974     {
<a name="l00975"></a>00975         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga4d2d041f72bf1a68c46f95f3374692abaaa24c096d4b7c10b9790844659ca309f" title="PWM trigger interrupt.">PwmTrigIrq</a>:
<a name="l00976"></a>00976             ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;STC_f.TGIE = 0u;
<a name="l00977"></a>00977             <span class="keywordflow">break</span>;
<a name="l00978"></a>00978         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga4d2d041f72bf1a68c46f95f3374692aba5bfa4b6b780042e702f1c92ee0fcfb94" title="PWM duty match interrupt.">PwmDutyMatchIrq</a>:
<a name="l00979"></a>00979             ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;STC_f.DTIE = 0u;
<a name="l00980"></a>00980             <span class="keywordflow">break</span>;
<a name="l00981"></a>00981         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga4d2d041f72bf1a68c46f95f3374692abae040cbf0be78f81f9cb2b914e641d597" title="PWM underflow interrupt.">PwmUnderflowIrq</a>:
<a name="l00982"></a>00982             ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;STC_f.UDIE = 0u;
<a name="l00983"></a>00983             <span class="keywordflow">break</span>;
<a name="l00984"></a>00984         <span class="keywordflow">default</span>:
<a name="l00985"></a>00985             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l00986"></a>00986     }
<a name="l00987"></a>00987 
<a name="l00988"></a>00988     <span class="keywordflow">return</span> Ok;
<a name="l00989"></a>00989 }
<a name="l00990"></a>00990 
<a name="l00991"></a>00991 <span class="preprocessor">#endif  </span>
<a name="l00992"></a>00992 <span class="preprocessor"></span>
<a name="l01006"></a><a class="code" href="group___bt_group.html#ga2b10bdde3bfdb761577dd8f480fe923e">01006</a> <a class="code" href="pdl_8h.html#a96065793ad0b302b28c5ccdee2253418">en_irq_flag_t</a> <a class="code" href="group___bt_group.html#ga2b10bdde3bfdb761577dd8f480fe923e" title="Get interrupt flag of PWM timer.">Bt_Pwm_GetIrqFlag</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#gaef9db1c9de1a604d51db4daed9afe7b4" title="enumeration to select the PWM interrupt">en_pwm_irq_sel_t</a> enIrqSel)
<a name="l01007"></a>01007 {
<a name="l01008"></a>01008     <a class="code" href="pdl_8h.html#a96065793ad0b302b28c5ccdee2253418">en_irq_flag_t</a> enFlag; 
<a name="l01009"></a>01009     
<a name="l01010"></a>01010     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l01011"></a>01011     {
<a name="l01012"></a>01012         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga4d2d041f72bf1a68c46f95f3374692abaaa24c096d4b7c10b9790844659ca309f" title="PWM trigger interrupt.">PwmTrigIrq</a>:
<a name="l01013"></a>01013             enFlag = ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;STC_f.TGIR ? <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40faf92d27fee3a9901962a3571a496f5229" title="Flag set &#39;1&#39;.">PdlSet</a> : <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40fa441c7b7046867e503a40d3c52a237e6b" title="Flag clr &#39;0&#39;.">PdlClr</a>;
<a name="l01014"></a>01014             <span class="keywordflow">break</span>;
<a name="l01015"></a>01015         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga4d2d041f72bf1a68c46f95f3374692aba5bfa4b6b780042e702f1c92ee0fcfb94" title="PWM duty match interrupt.">PwmDutyMatchIrq</a>:
<a name="l01016"></a>01016             enFlag = ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;STC_f.DTIR ? <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40faf92d27fee3a9901962a3571a496f5229" title="Flag set &#39;1&#39;.">PdlSet</a> : <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40fa441c7b7046867e503a40d3c52a237e6b" title="Flag clr &#39;0&#39;.">PdlClr</a>;
<a name="l01017"></a>01017             <span class="keywordflow">break</span>;
<a name="l01018"></a>01018         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga4d2d041f72bf1a68c46f95f3374692abae040cbf0be78f81f9cb2b914e641d597" title="PWM underflow interrupt.">PwmUnderflowIrq</a>:
<a name="l01019"></a>01019             enFlag = ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;STC_f.UDIR ? <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40faf92d27fee3a9901962a3571a496f5229" title="Flag set &#39;1&#39;.">PdlSet</a> : <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40fa441c7b7046867e503a40d3c52a237e6b" title="Flag clr &#39;0&#39;.">PdlClr</a>;
<a name="l01020"></a>01020             <span class="keywordflow">break</span>;
<a name="l01021"></a>01021         <span class="keywordflow">default</span>:
<a name="l01022"></a>01022             <span class="keywordflow">break</span>;
<a name="l01023"></a>01023     }
<a name="l01024"></a>01024     
<a name="l01025"></a>01025     <span class="keywordflow">return</span> enFlag;
<a name="l01026"></a>01026 }
<a name="l01027"></a>01027 
<a name="l01043"></a><a class="code" href="group___bt_group.html#ga1b0072092a901a00a4c8f2369e803b73">01043</a> en_result_t <a class="code" href="group___bt_group.html#ga1b0072092a901a00a4c8f2369e803b73" title="Clear interrupt flag of PWM timer.">Bt_Pwm_ClrIrqFlag</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#gaef9db1c9de1a604d51db4daed9afe7b4" title="enumeration to select the PWM interrupt">en_pwm_irq_sel_t</a> enIrqSel)
<a name="l01044"></a>01044 {
<a name="l01045"></a>01045     <span class="keywordflow">if</span>(NULL == pstcBt)
<a name="l01046"></a>01046     {
<a name="l01047"></a>01047         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01048"></a>01048     }
<a name="l01049"></a>01049   
<a name="l01050"></a>01050     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l01051"></a>01051     {
<a name="l01052"></a>01052         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga4d2d041f72bf1a68c46f95f3374692abaaa24c096d4b7c10b9790844659ca309f" title="PWM trigger interrupt.">PwmTrigIrq</a>:
<a name="l01053"></a>01053             ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;STC_f.TGIR = 0u;
<a name="l01054"></a>01054             <span class="keywordflow">break</span>;
<a name="l01055"></a>01055         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga4d2d041f72bf1a68c46f95f3374692aba5bfa4b6b780042e702f1c92ee0fcfb94" title="PWM duty match interrupt.">PwmDutyMatchIrq</a>:
<a name="l01056"></a>01056             ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;STC_f.DTIR = 0u;
<a name="l01057"></a>01057             <span class="keywordflow">break</span>;
<a name="l01058"></a>01058         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga4d2d041f72bf1a68c46f95f3374692abae040cbf0be78f81f9cb2b914e641d597" title="PWM underflow interrupt.">PwmUnderflowIrq</a>:
<a name="l01059"></a>01059             ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;STC_f.UDIR = 0u;
<a name="l01060"></a>01060             <span class="keywordflow">break</span>;
<a name="l01061"></a>01061         <span class="keywordflow">default</span>:
<a name="l01062"></a>01062             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01063"></a>01063     }
<a name="l01064"></a>01064     
<a name="l01065"></a>01065     <span class="keywordflow">return</span> Ok;
<a name="l01066"></a>01066 }
<a name="l01067"></a>01067 
<a name="l01078"></a><a class="code" href="group___bt_group.html#ga3fee5c75beefcd97866d417855f54131">01078</a> en_result_t <a class="code" href="group___bt_group.html#ga3fee5c75beefcd97866d417855f54131" title="Write Cycle value of PWM timer.">Bt_Pwm_WriteCycleVal</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, uint16_t u16Cycle)
<a name="l01079"></a>01079 {
<a name="l01080"></a>01080     <span class="comment">// Check parameter</span>
<a name="l01081"></a>01081     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01082"></a>01082     {
<a name="l01083"></a>01083         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01084"></a>01084     }  
<a name="l01085"></a>01085     
<a name="l01086"></a>01086     ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;PCSR = u16Cycle;
<a name="l01087"></a>01087     <span class="keywordflow">return</span> Ok;
<a name="l01088"></a>01088 }
<a name="l01089"></a>01089 
<a name="l01100"></a><a class="code" href="group___bt_group.html#gad6775aa2fdb913a7bb3f56b23aa50120">01100</a> en_result_t <a class="code" href="group___bt_group.html#gad6775aa2fdb913a7bb3f56b23aa50120" title="Write duty value of PWM timer.">Bt_Pwm_WriteDutyVal</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, uint16_t u16Duty)
<a name="l01101"></a>01101 {
<a name="l01102"></a>01102     <span class="comment">// Check parameter</span>
<a name="l01103"></a>01103     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01104"></a>01104     {
<a name="l01105"></a>01105         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01106"></a>01106     }  
<a name="l01107"></a>01107     
<a name="l01108"></a>01108     ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;PDUT = u16Duty;
<a name="l01109"></a>01109     <span class="keywordflow">return</span> Ok;
<a name="l01110"></a>01110 }
<a name="l01111"></a>01111 
<a name="l01120"></a><a class="code" href="group___bt_group.html#gade78f897962c16cb12270e1f64f94b18">01120</a> uint16_t <a class="code" href="group___bt_group.html#gade78f897962c16cb12270e1f64f94b18" title="Read current count value of PWM timer.">Bt_Pwm_ReadCurCnt</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l01121"></a>01121 { 
<a name="l01122"></a>01122     <span class="keywordflow">return</span> ((<span class="keyword">volatile</span> FM_BT_PWM_TypeDef*)pstcBt)-&gt;TMR;
<a name="l01123"></a>01123 }
<a name="l01124"></a>01124 <span class="preprocessor">#endif</span>
<a name="l01125"></a>01125 <span class="preprocessor"></span>
<a name="l01126"></a>01126 <span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT_PPG_MODE == PDL_ON)</span>
<a name="l01127"></a>01127 <span class="preprocessor"></span>
<a name="l01139"></a><a class="code" href="group___bt_group.html#ga4925c4677ce009e6aced48039d7d8fee">01139</a> en_result_t <a class="code" href="group___bt_group.html#ga4925c4677ce009e6aced48039d7d8fee" title="Initialize PPG function of BT.">Bt_Ppg_Init</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="structstc__bt__ppg__config.html" title="Structure of PPG configuration.">stc_bt_ppg_config_t</a>* pstcPpgConfig)
<a name="l01140"></a>01140 {
<a name="l01141"></a>01141     <span class="keyword">volatile</span> FM_BT_PPG_TypeDef* pRegBt = (<span class="keyword">volatile</span> FM_BT_PPG_TypeDef*)pstcBt;
<a name="l01142"></a>01142     <span class="comment">// Pointer to internal data</span>
<a name="l01143"></a>01143     <a class="code" href="structstc__bt__intern__data.html" title="BT internal data.">stc_bt_intern_data_t</a>* pstcBtInternData ;
<a name="l01144"></a>01144     uint16_t u16Pres;
<a name="l01145"></a>01145     <span class="comment">// Check for NULL pointer</span>
<a name="l01146"></a>01146     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01147"></a>01147     {
<a name="l01148"></a>01148         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01149"></a>01149     }  
<a name="l01150"></a>01150     
<a name="l01151"></a>01151     <span class="comment">// Get pointer to internal data structure ...</span>
<a name="l01152"></a>01152     pstcBtInternData = <a class="code" href="group___bt_group.html#ga8454181c55fc0672c41cbd9d76eb5cbe" title="Return the internal data for a certain BT instance.">BtGetInternDataPtr</a>( pstcBt ) ;
<a name="l01153"></a>01153     
<a name="l01154"></a>01154     <span class="keywordflow">if</span>(NULL == pstcBtInternData)
<a name="l01155"></a>01155     {
<a name="l01156"></a>01156         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01157"></a>01157     }
<a name="l01158"></a>01158     
<a name="l01159"></a>01159     <span class="comment">// Reset Base Timer mode</span>
<a name="l01160"></a>01160     pRegBt-&gt;TMCR_f.FMD = <a class="code" href="group___bt_group.html#ggad5e995baecd927106fe1163974b13fa9aeb5164872b16ae8ec1fb91b83e59a4d8" title="Reset mode.">BtResetMode</a>;
<a name="l01161"></a>01161     <span class="comment">// Set Base Timer to PPG mode</span>
<a name="l01162"></a>01162     pRegBt-&gt;TMCR_f.FMD = <a class="code" href="group___bt_group.html#ggad5e995baecd927106fe1163974b13fa9af43b81d5b91837538bf9180653dc3404" title="PPG timer mode.">BtPpgMode</a>;
<a name="l01163"></a>01163     
<a name="l01164"></a>01164     <span class="comment">// Clock prescaler setting</span>
<a name="l01165"></a>01165     u16Pres = pstcPpgConfig-&gt;<a class="code" href="structstc__bt__ppg__config.html#aa929963e0bdcde3119679a0c8bac99f1" title="Clock prescaler.">enPres</a>; <span class="comment">// Workaround for MISRA-C 2004 rule 12.7</span>
<a name="l01166"></a>01166     <span class="keywordflow">switch</span> (pstcPpgConfig-&gt;<a class="code" href="structstc__bt__ppg__config.html#aa929963e0bdcde3119679a0c8bac99f1" title="Clock prescaler.">enPres</a>)
<a name="l01167"></a>01167     {
<a name="l01168"></a>01168         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga8c4979780063bf04ad01024c631e9625a5a8bb0fa69dec29c0eafe486d32f57fc" title="PPG prescaler clock: no division.">PpgPresNone</a>:
<a name="l01169"></a>01169         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga8c4979780063bf04ad01024c631e9625a261d85e1f9808004aa19d103b295f791" title="PPG prescaler clock: 1/4.">PpgPres1Div4</a>:
<a name="l01170"></a>01170         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga8c4979780063bf04ad01024c631e9625ab4bdfa4d62ab30e567361f2b600ec87a" title="PPG prescaler clock: 1/16.">PpgPres1Div16</a>:
<a name="l01171"></a>01171         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga8c4979780063bf04ad01024c631e9625a2300c8fece6b92bd3b2ce5f69f7c468b" title="PPG prescaler clock: 1/128.">PpgPres1Div128</a>:
<a name="l01172"></a>01172         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga8c4979780063bf04ad01024c631e9625a7df3f3112b63060bf6ab775b2e3c587a" title="PPG prescaler clock: 1/256.">PpgPres1Div256</a>:
<a name="l01173"></a>01173         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga8c4979780063bf04ad01024c631e9625af6660ea310ad9036c8171c3ee3209b2c" title="Use external clock and count at rising edge.">PpgPres1ExtClkRising</a>:
<a name="l01174"></a>01174         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga8c4979780063bf04ad01024c631e9625aafc43f496cfa3850e90f84e05e77f508" title="Use external clock and count at falling edge.">PpgPres1ExtClkFalling</a>:
<a name="l01175"></a>01175         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga8c4979780063bf04ad01024c631e9625a848d61a7314ff03b97943b2ca94728e3" title="Use external clock and count at both edge.">PpgPres1ExtClkBoth</a>:
<a name="l01176"></a>01176             pRegBt-&gt;TMCR2_f.CKS3 = 0u;
<a name="l01177"></a>01177             pRegBt-&gt;TMCR_f.CKS = u16Pres;
<a name="l01178"></a>01178             <span class="keywordflow">break</span>;  
<a name="l01179"></a>01179         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga8c4979780063bf04ad01024c631e9625a14e1de0e185d13b42283a1dea5c249ef" title="PPG prescaler clock: 1/512.">PpgPres1Div512</a>:
<a name="l01180"></a>01180         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga8c4979780063bf04ad01024c631e9625a1b6d721f42553f4a45f9bcccb7ed75fe" title="PPG prescaler clock: 1/1024.">PpgPres1Div1024</a>:
<a name="l01181"></a>01181         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga8c4979780063bf04ad01024c631e9625a24b7565b1f23891efdf422df42aa3598" title="PPG prescaler clock: 1/2048.">PpgPres1Div2048</a>:
<a name="l01182"></a>01182             pRegBt-&gt;TMCR2_f.CKS3 = 1u;
<a name="l01183"></a>01183             pRegBt-&gt;TMCR_f.CKS = (u16Pres &amp; 0x7u);
<a name="l01184"></a>01184             <span class="keywordflow">break</span>;
<a name="l01185"></a>01185         <span class="keywordflow">default</span>:
<a name="l01186"></a>01186             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01187"></a>01187     }
<a name="l01188"></a>01188     <span class="comment">// Restart enable setting</span>
<a name="l01189"></a>01189     <span class="keywordflow">switch</span> (pstcPpgConfig-&gt;<a class="code" href="structstc__bt__ppg__config.html#ac80e0c4968f113672739161cace6ec7a" title="Restart enable setting.">enRestartEn</a>)
<a name="l01190"></a>01190     {
<a name="l01191"></a>01191         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga6002efbb3f84b59b28e28c018d0870a6a18fe80ba11717b8fffa1be0b55d13732" title="Disable PPG restart.">PpgRestartDisable</a>:
<a name="l01192"></a>01192             pRegBt-&gt;TMCR_f.RTGEN = 0u;
<a name="l01193"></a>01193             <span class="keywordflow">break</span>;
<a name="l01194"></a>01194         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga6002efbb3f84b59b28e28c018d0870a6a3aced2c7a2bb63cbea90bf9853d8729a" title="Enable PPG restart.">PpgRestartEnable</a>:
<a name="l01195"></a>01195             pRegBt-&gt;TMCR_f.RTGEN = 1u;
<a name="l01196"></a>01196             <span class="keywordflow">break</span>;
<a name="l01197"></a>01197         <span class="keywordflow">default</span>:
<a name="l01198"></a>01198             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01199"></a>01199     }
<a name="l01200"></a>01200     <span class="comment">// Output Mask setting</span>
<a name="l01201"></a>01201     pRegBt-&gt;TMCR_f.PMSK = (uint8_t)pstcPpgConfig-&gt;<a class="code" href="structstc__bt__ppg__config.html#a2950370689456654fd8545dcbffe187d" title="PPG output mask setting.">enOutputMask</a>;
<a name="l01202"></a>01202     switch (pstcPpgConfig-&gt;<a class="code" href="structstc__bt__ppg__config.html#a2950370689456654fd8545dcbffe187d" title="PPG output mask setting.">enOutputMask</a>)
<a name="l01203"></a>01203     {
<a name="l01204"></a>01204         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga3e3bc1a313f0e1bd3c8b94570b5253a3acd35dedf5c271f5794cb4b342e9e627e" title="Output normal PPG wave.">PpgOutputNormal</a>:
<a name="l01205"></a>01205             pRegBt-&gt;TMCR_f.PMSK = 0u;
<a name="l01206"></a>01206             <span class="keywordflow">break</span>;
<a name="l01207"></a>01207         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga3e3bc1a313f0e1bd3c8b94570b5253a3a753990846716af74859c65a312a24646" title="Mask PPG wave.">PpgOutputMask</a>:
<a name="l01208"></a>01208             pRegBt-&gt;TMCR_f.PMSK = 1u;
<a name="l01209"></a>01209             <span class="keywordflow">break</span>;
<a name="l01210"></a>01210         <span class="keywordflow">default</span>:   
<a name="l01211"></a>01211             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01212"></a>01212     }       
<a name="l01213"></a>01213     <span class="comment">// Output polarity setting</span>
<a name="l01214"></a>01214     <span class="keywordflow">switch</span> (pstcPpgConfig-&gt;<a class="code" href="structstc__bt__ppg__config.html#a8a8e880004ee7bc27601ca88069c77ab" title="PPG output polarity setting.">enOutputPolarity</a>)
<a name="l01215"></a>01215     {
<a name="l01216"></a>01216         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga95ebc10c04eef1aac24221a5b0f6f6a2aa102c56b9c1bd3954c31043b91fad9c2" title="Initial polarity: low.">PpgPolarityLow</a>:
<a name="l01217"></a>01217             pRegBt-&gt;TMCR_f.OSEL = 0u;
<a name="l01218"></a>01218             <span class="keywordflow">break</span>;
<a name="l01219"></a>01219         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga95ebc10c04eef1aac24221a5b0f6f6a2a4a023fa169b82e0aa96966874a5f79ab" title="Initial polarity: high.">PpgPolarityHigh</a>:
<a name="l01220"></a>01220             pRegBt-&gt;TMCR_f.OSEL = 1u;
<a name="l01221"></a>01221             <span class="keywordflow">break</span>;
<a name="l01222"></a>01222         <span class="keywordflow">default</span>:
<a name="l01223"></a>01223             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01224"></a>01224     }
<a name="l01225"></a>01225     <span class="comment">// External trigger setting    </span>
<a name="l01226"></a>01226     <span class="keywordflow">switch</span> (pstcPpgConfig-&gt;<a class="code" href="structstc__bt__ppg__config.html#ae036afd815f690cd6779d7a163f27a2f" title="PPG external trigger setting.">enExtTrig</a>)
<a name="l01227"></a>01227     {
<a name="l01228"></a>01228         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggad45d1f8e8f4647588f992d783a91a030a95e87e6b44a946834196de7544c12e79" title="Disable external trigger.">PpgExtTrigDisable</a>:
<a name="l01229"></a>01229             pRegBt-&gt;TMCR_f.EGS = 0u;
<a name="l01230"></a>01230             <span class="keywordflow">break</span>;
<a name="l01231"></a>01231         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggad45d1f8e8f4647588f992d783a91a030acb03792fac2b4d03561f77b3a5ba3f8a" title="Enable external trigger with rising edge.">PpgExtTrigRising</a>:
<a name="l01232"></a>01232             pRegBt-&gt;TMCR_f.EGS = 1u;
<a name="l01233"></a>01233             <span class="keywordflow">break</span>;
<a name="l01234"></a>01234         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggad45d1f8e8f4647588f992d783a91a030a0765d2eddc6239a57e41c94c8e54e362" title="Enable external trigger with falling edge.">PpgExtTrigFalling</a>:
<a name="l01235"></a>01235             pRegBt-&gt;TMCR_f.EGS = 2u;
<a name="l01236"></a>01236             <span class="keywordflow">break</span>;
<a name="l01237"></a>01237         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggad45d1f8e8f4647588f992d783a91a030a42c8d8292a58edd5c0411df2d4434b24" title="Enable external trigger with both edge.">PpgExtTrigBoth</a>:
<a name="l01238"></a>01238             pRegBt-&gt;TMCR_f.EGS = 3u;
<a name="l01239"></a>01239             <span class="keywordflow">break</span>;
<a name="l01240"></a>01240         <span class="keywordflow">default</span>:
<a name="l01241"></a>01241             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01242"></a>01242     }
<a name="l01243"></a>01243     <span class="comment">// Mode setting</span>
<a name="l01244"></a>01244     <span class="keywordflow">switch</span> (pstcPpgConfig-&gt;<a class="code" href="structstc__bt__ppg__config.html#ab9603631a8f769e870484a2ceb28920b" title="Continuous mode or one-shot mode.">enMode</a>)
<a name="l01245"></a>01245     {
<a name="l01246"></a>01246         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga5c8234e13ff337fd1e9dd23d3ecfcc27aa75622a9a61b1c14a986676d21a4ead7" title="Continuous mode.">PpgContinuous</a>:
<a name="l01247"></a>01247             pRegBt-&gt;TMCR_f.MDSE = 0u;
<a name="l01248"></a>01248             <span class="keywordflow">break</span>;  
<a name="l01249"></a>01249         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga5c8234e13ff337fd1e9dd23d3ecfcc27a7ee781ceee929247c7cbc196acd47c43" title="One-shot mode.">PpgOneshot</a>:
<a name="l01250"></a>01250             pRegBt-&gt;TMCR_f.MDSE = 1u;
<a name="l01251"></a>01251             <span class="keywordflow">break</span>;
<a name="l01252"></a>01252         <span class="keywordflow">default</span>:
<a name="l01253"></a>01253             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01254"></a>01254     }
<a name="l01255"></a>01255     
<a name="l01256"></a>01256 <span class="preprocessor">#if defined(PDL_INTERRUPT_BT_ACTIVE)      </span>
<a name="l01257"></a>01257 <span class="preprocessor"></span>    <span class="comment">// Interrupt enable setting</span>
<a name="l01258"></a>01258     <span class="keywordflow">if</span> (NULL != pstcPpgConfig-&gt;<a class="code" href="structstc__bt__ppg__config.html#a52350bbc8c954380236eae4ced0072a5" title="Pointer to interrupt request enable setting structure of Base Timer with PPG mode.">pstcPpgIrqEn</a>)
<a name="l01259"></a>01259     {
<a name="l01260"></a>01260         <span class="keywordflow">if</span>(pstcPpgConfig-&gt;<a class="code" href="structstc__bt__ppg__config.html#a52350bbc8c954380236eae4ced0072a5" title="Pointer to interrupt request enable setting structure of Base Timer with PPG mode.">pstcPpgIrqEn</a>-&gt;<a class="code" href="structstc__ppg__irq__en.html#a143fd5fb6ad18cdb0fc4fc2f83d961a3" title="PPG trigger interrupt selection.">bPpgTrigIrq</a> == TRUE)
<a name="l01261"></a>01261         {
<a name="l01262"></a>01262             pRegBt-&gt;STC_f.TGIE = 1;   
<a name="l01263"></a>01263         } 
<a name="l01264"></a>01264         <span class="keywordflow">if</span>(pstcPpgConfig-&gt;<a class="code" href="structstc__bt__ppg__config.html#a52350bbc8c954380236eae4ced0072a5" title="Pointer to interrupt request enable setting structure of Base Timer with PPG mode.">pstcPpgIrqEn</a>-&gt;<a class="code" href="structstc__ppg__irq__en.html#acd7411c8b8626dcbdded5f848d9e825b" title="PPG underflow interrupt selection.">bPpgUnderflowIrq</a> == TRUE)
<a name="l01265"></a>01265         {
<a name="l01266"></a>01266             pRegBt-&gt;STC_f.UDIE = 1;   
<a name="l01267"></a>01267         }
<a name="l01268"></a>01268     }
<a name="l01269"></a>01269     
<a name="l01270"></a>01270     <span class="comment">// Interrupt callback functions</span>
<a name="l01271"></a>01271     <span class="keywordflow">if</span> (NULL != pstcPpgConfig-&gt;<a class="code" href="structstc__bt__ppg__config.html#a6c8ea057d4bf94da34db1137afc454c1" title="Pointer to interrupt request callback functions structure of Base Timer with PPG mode.">pstcPpgIrqCb</a>)
<a name="l01272"></a>01272     {
<a name="l01273"></a>01273         pstcBtInternData-&gt;<a class="code" href="structstc__bt__intern__data.html#a56cbd589fb03177b713afae78a901915" title="Pointer to callback function the interrupt reflected by bit2 of STC.">pfnBit2IrqCb</a> = pstcPpgConfig-&gt;<a class="code" href="structstc__bt__ppg__config.html#a6c8ea057d4bf94da34db1137afc454c1" title="Pointer to interrupt request callback functions structure of Base Timer with PPG mode.">pstcPpgIrqCb</a>-&gt;<a class="code" href="structstc__ppg__int__cb.html#a63fe0c634483c6d68421cf9102a46024" title="Pointer to PPG trigger interrupt callback function.">pfnPpgTrigIrqCb</a>;
<a name="l01274"></a>01274         pstcBtInternData-&gt;<a class="code" href="structstc__bt__intern__data.html#aaa6ceef70eb51a7c930d755412aa1704" title="Pointer to callback function the interrupt reflected by bit0 of STC.">pfnBit0IrqCb</a> = pstcPpgConfig-&gt;<a class="code" href="structstc__bt__ppg__config.html#a6c8ea057d4bf94da34db1137afc454c1" title="Pointer to interrupt request callback functions structure of Base Timer with PPG mode.">pstcPpgIrqCb</a>-&gt;<a class="code" href="structstc__ppg__int__cb.html#aad0b61d965ccb7ddfa0a399dd29dda26" title="Pointer to PPG underflow interrupt callback function.">pfnPpgUnderflowIrqCb</a>;
<a name="l01275"></a>01275     }
<a name="l01276"></a>01276     <span class="comment">// NVIC setting</span>
<a name="l01277"></a>01277     <span class="keywordflow">if</span>(pstcPpgConfig-&gt;<a class="code" href="structstc__bt__ppg__config.html#a18b9c6a82679466e066894a2b65f0d13" title="TRUE: enable NVIC, FALSE: don&#39;t enable NVIC.">bTouchNvic</a> == TRUE)
<a name="l01278"></a>01278     {
<a name="l01279"></a>01279         <a class="code" href="group___bt_group.html#gae2ce4557f2439d8300b80b8a575e3f46" title="Set NVIC Interrupt depending on BT instance.">BtInitNvic</a>(pstcBt);
<a name="l01280"></a>01280     }
<a name="l01281"></a>01281 <span class="preprocessor">#endif     </span>
<a name="l01282"></a>01282 <span class="preprocessor"></span>    
<a name="l01283"></a>01283     <span class="keywordflow">return</span> Ok;
<a name="l01284"></a>01284 }
<a name="l01285"></a>01285 
<a name="l01298"></a><a class="code" href="group___bt_group.html#gac133ce57d4b664e2c05d16adbc95e777">01298</a> en_result_t <a class="code" href="group___bt_group.html#gac133ce57d4b664e2c05d16adbc95e777" title="De-Initialize PPG function of BT.">Bt_Ppg_DeInit</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, boolean_t bTouchNvic)
<a name="l01299"></a>01299 {
<a name="l01300"></a>01300     <span class="keyword">volatile</span> FM_BT_PPG_TypeDef* pRegBt = (<span class="keyword">volatile</span> FM_BT_PPG_TypeDef*)pstcBt;
<a name="l01301"></a>01301     <span class="comment">// Pointer to internal data</span>
<a name="l01302"></a>01302     <a class="code" href="structstc__bt__intern__data.html" title="BT internal data.">stc_bt_intern_data_t</a>* pstcBtInternData ;
<a name="l01303"></a>01303     <span class="comment">// Check for NULL pointer</span>
<a name="l01304"></a>01304     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01305"></a>01305     {
<a name="l01306"></a>01306         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01307"></a>01307     }  
<a name="l01308"></a>01308     
<a name="l01309"></a>01309     <span class="comment">// Get pointer to internal data structure ...</span>
<a name="l01310"></a>01310     pstcBtInternData = <a class="code" href="group___bt_group.html#ga8454181c55fc0672c41cbd9d76eb5cbe" title="Return the internal data for a certain BT instance.">BtGetInternDataPtr</a>( pstcBt ) ;
<a name="l01311"></a>01311     
<a name="l01312"></a>01312     <span class="keywordflow">if</span>(NULL == pstcBtInternData)
<a name="l01313"></a>01313     {
<a name="l01314"></a>01314         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01315"></a>01315     }
<a name="l01316"></a>01316     
<a name="l01317"></a>01317     pRegBt-&gt;TMCR = 0x0000u;
<a name="l01318"></a>01318     pRegBt-&gt;TMCR2 = 0x0000u;
<a name="l01319"></a>01319     pRegBt-&gt;STC = 0x0000u;
<a name="l01320"></a>01320     pRegBt-&gt;PRLL = 0x0000u;
<a name="l01321"></a>01321     pRegBt-&gt;PRLH = 0x0000u;
<a name="l01322"></a>01322     
<a name="l01323"></a>01323 <span class="preprocessor">#if defined(PDL_INTERRUPT_BT_ACTIVE)   </span>
<a name="l01324"></a>01324 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(TRUE == bTouchNvic)
<a name="l01325"></a>01325     {
<a name="l01326"></a>01326         <a class="code" href="group___bt_group.html#ga738b2175e812a14e18b72bcfea6a7a89" title="Clear NVIC Interrupt depending on BT instance.">BtDeInitNvic</a>(pstcBt);
<a name="l01327"></a>01327     }
<a name="l01328"></a>01328 <span class="preprocessor">#endif    </span>
<a name="l01329"></a>01329 <span class="preprocessor"></span>    <span class="keywordflow">return</span> Ok;
<a name="l01330"></a>01330 }
<a name="l01331"></a>01331 
<a name="l01341"></a><a class="code" href="group___bt_group.html#ga4cfd9f12cbee0e8a9abc3975367ed7a4">01341</a> en_result_t <a class="code" href="group___bt_group.html#ga4cfd9f12cbee0e8a9abc3975367ed7a4" title="Enable PPG timer counting.">Bt_Ppg_EnableCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l01342"></a>01342 {
<a name="l01343"></a>01343     <span class="comment">// Check for NULL pointer</span>
<a name="l01344"></a>01344     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01345"></a>01345     {
<a name="l01346"></a>01346         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01347"></a>01347     }  
<a name="l01348"></a>01348     
<a name="l01349"></a>01349     ((<span class="keyword">volatile</span> FM_BT_PPG_TypeDef*)pstcBt)-&gt;TMCR_f.CTEN = 1u;
<a name="l01350"></a>01350     <span class="keywordflow">return</span> Ok;
<a name="l01351"></a>01351 }
<a name="l01352"></a>01352 
<a name="l01362"></a><a class="code" href="group___bt_group.html#ga8d630a20c7cb0fb80346515ffe58b14f">01362</a> en_result_t <a class="code" href="group___bt_group.html#ga8d630a20c7cb0fb80346515ffe58b14f" title="Disable PPG timer counting.">Bt_Ppg_DisableCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l01363"></a>01363 {
<a name="l01364"></a>01364     <span class="comment">// Check for NULL pointer</span>
<a name="l01365"></a>01365     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01366"></a>01366     {
<a name="l01367"></a>01367         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01368"></a>01368     }  
<a name="l01369"></a>01369     
<a name="l01370"></a>01370     ((<span class="keyword">volatile</span> FM_BT_PPG_TypeDef*)pstcBt)-&gt;TMCR_f.CTEN = 0u;
<a name="l01371"></a>01371     <span class="keywordflow">return</span> Ok;
<a name="l01372"></a>01372 }
<a name="l01373"></a>01373 
<a name="l01383"></a><a class="code" href="group___bt_group.html#ga883e0417b1c30ce5053c32bced360d41">01383</a> en_result_t <a class="code" href="group___bt_group.html#ga883e0417b1c30ce5053c32bced360d41" title="Start PPG timer by software.">Bt_Ppg_EnableSwTrig</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l01384"></a>01384 {
<a name="l01385"></a>01385     <span class="comment">// Check for NULL pointer</span>
<a name="l01386"></a>01386     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01387"></a>01387     {
<a name="l01388"></a>01388         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01389"></a>01389     }  
<a name="l01390"></a>01390     
<a name="l01391"></a>01391     ((<span class="keyword">volatile</span> FM_BT_PPG_TypeDef*)pstcBt)-&gt;TMCR_f.STRG = 1u;
<a name="l01392"></a>01392     <span class="keywordflow">return</span> Ok;
<a name="l01393"></a>01393 }
<a name="l01394"></a>01394 
<a name="l01395"></a>01395 <span class="preprocessor">#if defined(PDL_INTERRUPT_BT_ACTIVE)   </span>
<a name="l01396"></a>01396 <span class="preprocessor"></span>
<a name="l01410"></a><a class="code" href="group___bt_group.html#ga00765c7d5219ec8254bff14f6b958caf">01410</a> en_result_t <a class="code" href="group___bt_group.html#ga00765c7d5219ec8254bff14f6b958caf" title="Enable PPG timer interrupt.">Bt_Ppg_EnableIrq</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#gab919f1561512ada6528ca7fe4acc52fb" title="enumeration to select the PPG interrupt">en_ppg_irq_sel_t</a> enIrqSel)
<a name="l01411"></a>01411 {
<a name="l01412"></a>01412     <span class="comment">// Pointer to internal data</span>
<a name="l01413"></a>01413     <a class="code" href="structstc__bt__intern__data.html" title="BT internal data.">stc_bt_intern_data_t</a>* pstcBtInternData ;
<a name="l01414"></a>01414     <span class="comment">// Check parameter</span>
<a name="l01415"></a>01415     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01416"></a>01416     {
<a name="l01417"></a>01417         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01418"></a>01418     }  
<a name="l01419"></a>01419     
<a name="l01420"></a>01420     <span class="comment">// Get pointer to internal data structure ...</span>
<a name="l01421"></a>01421     pstcBtInternData = <a class="code" href="group___bt_group.html#ga8454181c55fc0672c41cbd9d76eb5cbe" title="Return the internal data for a certain BT instance.">BtGetInternDataPtr</a>( pstcBt ) ;
<a name="l01422"></a>01422     
<a name="l01423"></a>01423     <span class="keywordflow">if</span>(NULL == pstcBtInternData)
<a name="l01424"></a>01424     {
<a name="l01425"></a>01425         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01426"></a>01426     }
<a name="l01427"></a>01427     
<a name="l01428"></a>01428     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l01429"></a>01429     {
<a name="l01430"></a>01430         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaef51fb66fd1956bf018bb8d4ad7eb46ba694d26917fd481efdb9f8c9285e75fdf" title="PPG trigger interrupt.">PpgTrigIrq</a>:
<a name="l01431"></a>01431             ((<span class="keyword">volatile</span> FM_BT_PPG_TypeDef*)pstcBt)-&gt;STC_f.TGIE = 1u;
<a name="l01432"></a>01432             <span class="keywordflow">break</span>;
<a name="l01433"></a>01433         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaef51fb66fd1956bf018bb8d4ad7eb46ba5ac05c92cadab279095ab3254efdf35a" title="PPG underflow interrupt.">PpgUnderflowIrq</a>:
<a name="l01434"></a>01434             ((<span class="keyword">volatile</span> FM_BT_PPG_TypeDef*)pstcBt)-&gt;STC_f.UDIE = 1u;
<a name="l01435"></a>01435             <span class="keywordflow">break</span>;
<a name="l01436"></a>01436         <span class="keywordflow">default</span>:
<a name="l01437"></a>01437             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01438"></a>01438     }
<a name="l01439"></a>01439     
<a name="l01440"></a>01440     <span class="keywordflow">return</span> Ok;
<a name="l01441"></a>01441 }
<a name="l01442"></a>01442 
<a name="l01457"></a><a class="code" href="group___bt_group.html#ga4c6219ee07ae2fb436f37009fa30cda2">01457</a> en_result_t <a class="code" href="group___bt_group.html#ga4c6219ee07ae2fb436f37009fa30cda2" title="Disable PPG timer interrupt.">Bt_Ppg_DisableIrq</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#gab919f1561512ada6528ca7fe4acc52fb" title="enumeration to select the PPG interrupt">en_ppg_irq_sel_t</a> enIrqSel)
<a name="l01458"></a>01458 {
<a name="l01459"></a>01459     <span class="comment">// Check parameter</span>
<a name="l01460"></a>01460     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01461"></a>01461     {
<a name="l01462"></a>01462         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01463"></a>01463     }  
<a name="l01464"></a>01464     
<a name="l01465"></a>01465     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l01466"></a>01466     {
<a name="l01467"></a>01467         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaef51fb66fd1956bf018bb8d4ad7eb46ba694d26917fd481efdb9f8c9285e75fdf" title="PPG trigger interrupt.">PpgTrigIrq</a>:
<a name="l01468"></a>01468             ((<span class="keyword">volatile</span> FM_BT_PPG_TypeDef*)pstcBt)-&gt;STC_f.TGIE = 0u;
<a name="l01469"></a>01469             <span class="keywordflow">break</span>;
<a name="l01470"></a>01470         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaef51fb66fd1956bf018bb8d4ad7eb46ba5ac05c92cadab279095ab3254efdf35a" title="PPG underflow interrupt.">PpgUnderflowIrq</a>:
<a name="l01471"></a>01471             ((<span class="keyword">volatile</span> FM_BT_PPG_TypeDef*)pstcBt)-&gt;STC_f.UDIE = 0u;
<a name="l01472"></a>01472             <span class="keywordflow">break</span>;
<a name="l01473"></a>01473         <span class="keywordflow">default</span>:
<a name="l01474"></a>01474             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01475"></a>01475     }
<a name="l01476"></a>01476      
<a name="l01477"></a>01477     <span class="keywordflow">return</span> Ok;
<a name="l01478"></a>01478 }
<a name="l01479"></a>01479 
<a name="l01480"></a>01480 <span class="preprocessor">#endif</span>
<a name="l01481"></a>01481 <span class="preprocessor"></span>
<a name="l01494"></a><a class="code" href="group___bt_group.html#ga292f29181e4a9ea6792fa0b2d209398c">01494</a> <a class="code" href="pdl_8h.html#a96065793ad0b302b28c5ccdee2253418">en_irq_flag_t</a> <a class="code" href="group___bt_group.html#ga292f29181e4a9ea6792fa0b2d209398c" title="Get interrupt flag of PPG timer.">Bt_Ppg_GetIrqFlag</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#gab919f1561512ada6528ca7fe4acc52fb" title="enumeration to select the PPG interrupt">en_ppg_irq_sel_t</a> enIrqSel)
<a name="l01495"></a>01495 {
<a name="l01496"></a>01496     <a class="code" href="pdl_8h.html#a96065793ad0b302b28c5ccdee2253418">en_irq_flag_t</a> enFlag; 
<a name="l01497"></a>01497     
<a name="l01498"></a>01498     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l01499"></a>01499     {
<a name="l01500"></a>01500         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaef51fb66fd1956bf018bb8d4ad7eb46ba694d26917fd481efdb9f8c9285e75fdf" title="PPG trigger interrupt.">PpgTrigIrq</a>:
<a name="l01501"></a>01501             enFlag = ((<span class="keyword">volatile</span> FM_BT_PPG_TypeDef*)pstcBt)-&gt;STC_f.TGIR ? <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40faf92d27fee3a9901962a3571a496f5229" title="Flag set &#39;1&#39;.">PdlSet</a> : <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40fa441c7b7046867e503a40d3c52a237e6b" title="Flag clr &#39;0&#39;.">PdlClr</a>;
<a name="l01502"></a>01502             <span class="keywordflow">break</span>;
<a name="l01503"></a>01503         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaef51fb66fd1956bf018bb8d4ad7eb46ba5ac05c92cadab279095ab3254efdf35a" title="PPG underflow interrupt.">PpgUnderflowIrq</a>:
<a name="l01504"></a>01504             enFlag = ((<span class="keyword">volatile</span> FM_BT_PPG_TypeDef*)pstcBt)-&gt;STC_f.UDIR ? <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40faf92d27fee3a9901962a3571a496f5229" title="Flag set &#39;1&#39;.">PdlSet</a> : <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40fa441c7b7046867e503a40d3c52a237e6b" title="Flag clr &#39;0&#39;.">PdlClr</a>;
<a name="l01505"></a>01505             <span class="keywordflow">break</span>;
<a name="l01506"></a>01506         <span class="keywordflow">default</span>:
<a name="l01507"></a>01507             <span class="keywordflow">break</span>;
<a name="l01508"></a>01508     }
<a name="l01509"></a>01509     
<a name="l01510"></a>01510     <span class="keywordflow">return</span> enFlag;
<a name="l01511"></a>01511 }
<a name="l01512"></a>01512 
<a name="l01527"></a><a class="code" href="group___bt_group.html#ga93fd2bd73748d86e4d498188995d928d">01527</a> en_result_t <a class="code" href="group___bt_group.html#ga93fd2bd73748d86e4d498188995d928d" title="Clear interrupt flag of PPG timer.">Bt_Ppg_ClrIrqFlag</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#gab919f1561512ada6528ca7fe4acc52fb" title="enumeration to select the PPG interrupt">en_ppg_irq_sel_t</a> enIrqSel)
<a name="l01528"></a>01528 {
<a name="l01529"></a>01529     <span class="keywordflow">if</span>(NULL == pstcBt)
<a name="l01530"></a>01530     {
<a name="l01531"></a>01531         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01532"></a>01532     }
<a name="l01533"></a>01533   
<a name="l01534"></a>01534     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l01535"></a>01535     {
<a name="l01536"></a>01536         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaef51fb66fd1956bf018bb8d4ad7eb46ba694d26917fd481efdb9f8c9285e75fdf" title="PPG trigger interrupt.">PpgTrigIrq</a>:
<a name="l01537"></a>01537             ((<span class="keyword">volatile</span> FM_BT_PPG_TypeDef*)pstcBt)-&gt;STC_f.TGIR = 0u;
<a name="l01538"></a>01538             <span class="keywordflow">break</span>;
<a name="l01539"></a>01539         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaef51fb66fd1956bf018bb8d4ad7eb46ba5ac05c92cadab279095ab3254efdf35a" title="PPG underflow interrupt.">PpgUnderflowIrq</a>:
<a name="l01540"></a>01540             ((<span class="keyword">volatile</span> FM_BT_PPG_TypeDef*)pstcBt)-&gt;STC_f.UDIR = 0u;
<a name="l01541"></a>01541             <span class="keywordflow">break</span>;
<a name="l01542"></a>01542         <span class="keywordflow">default</span>:
<a name="l01543"></a>01543             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01544"></a>01544     }
<a name="l01545"></a>01545     
<a name="l01546"></a>01546     <span class="keywordflow">return</span> Ok;
<a name="l01547"></a>01547 }
<a name="l01548"></a>01548                     
<a name="l01559"></a><a class="code" href="group___bt_group.html#gaf32ed5ebff061c7b364517f812025708">01559</a> en_result_t <a class="code" href="group___bt_group.html#gaf32ed5ebff061c7b364517f812025708" title="Write low width count value of PPG timer.">Bt_Ppg_WriteLowWidthVal</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, uint16_t u16Val)
<a name="l01560"></a>01560 {
<a name="l01561"></a>01561     <span class="comment">// Check parameter</span>
<a name="l01562"></a>01562     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01563"></a>01563     {
<a name="l01564"></a>01564         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01565"></a>01565     }  
<a name="l01566"></a>01566     
<a name="l01567"></a>01567     ((<span class="keyword">volatile</span> FM_BT_PPG_TypeDef*)pstcBt)-&gt;PRLL = u16Val;
<a name="l01568"></a>01568     <span class="keywordflow">return</span> Ok;
<a name="l01569"></a>01569 }
<a name="l01570"></a>01570 
<a name="l01581"></a><a class="code" href="group___bt_group.html#ga7983e7e762da6058a47b3f1adf08f100">01581</a> en_result_t <a class="code" href="group___bt_group.html#ga7983e7e762da6058a47b3f1adf08f100" title="Write high width count value of PPG timer.">Bt_Ppg_WriteHighWidthVal</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, uint16_t u16Val)
<a name="l01582"></a>01582 {
<a name="l01583"></a>01583     <span class="comment">// Check parameter</span>
<a name="l01584"></a>01584     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01585"></a>01585     {
<a name="l01586"></a>01586         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01587"></a>01587     }  
<a name="l01588"></a>01588     
<a name="l01589"></a>01589     ((<span class="keyword">volatile</span> FM_BT_PPG_TypeDef*)pstcBt)-&gt;PRLH = u16Val;
<a name="l01590"></a>01590     <span class="keywordflow">return</span> Ok;
<a name="l01591"></a>01591 }
<a name="l01592"></a>01592 
<a name="l01601"></a><a class="code" href="group___bt_group.html#ga0657c8f24aedde59ebc478742788185b">01601</a> uint16_t <a class="code" href="group___bt_group.html#ga0657c8f24aedde59ebc478742788185b" title="Read current count value of PPG timer.">Bt_Ppg_ReadCurCnt</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l01602"></a>01602 { 
<a name="l01603"></a>01603     <span class="keywordflow">return</span> ((<span class="keyword">volatile</span> FM_BT_PPG_TypeDef*)pstcBt)-&gt;TMR;
<a name="l01604"></a>01604 }
<a name="l01605"></a>01605 <span class="preprocessor">#endif</span>
<a name="l01606"></a>01606 <span class="preprocessor"></span>
<a name="l01607"></a>01607 <span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT_RT_MODE == PDL_ON)</span>
<a name="l01608"></a>01608 <span class="preprocessor"></span>
<a name="l01620"></a><a class="code" href="group___bt_group.html#ga14f6708b69b0e4980a3e82900d581ba9">01620</a> en_result_t <a class="code" href="group___bt_group.html#ga14f6708b69b0e4980a3e82900d581ba9" title="Initialize RT function of BT.">Bt_Rt_Init</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="structstc__bt__rt__config.html" title="Structure of Reload timer configuration.">stc_bt_rt_config_t</a>* pstcRtConfig)
<a name="l01621"></a>01621 {
<a name="l01622"></a>01622     <span class="keyword">volatile</span> FM_BT_RT_TypeDef* pRegBt = (<span class="keyword">volatile</span> FM_BT_RT_TypeDef*) pstcBt;
<a name="l01623"></a>01623     <span class="comment">// Pointer to internal data</span>
<a name="l01624"></a>01624     <a class="code" href="structstc__bt__intern__data.html" title="BT internal data.">stc_bt_intern_data_t</a>* pstcBtInternData ;
<a name="l01625"></a>01625     uint16_t u16Pres, u16ExtTrig;
<a name="l01626"></a>01626     <span class="comment">// Check for NULL pointer</span>
<a name="l01627"></a>01627     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01628"></a>01628     {
<a name="l01629"></a>01629         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01630"></a>01630     }  
<a name="l01631"></a>01631 
<a name="l01632"></a>01632     <span class="comment">// Get pointer to internal data structure ...</span>
<a name="l01633"></a>01633     pstcBtInternData = <a class="code" href="group___bt_group.html#ga8454181c55fc0672c41cbd9d76eb5cbe" title="Return the internal data for a certain BT instance.">BtGetInternDataPtr</a>( pstcBt ) ;
<a name="l01634"></a>01634     
<a name="l01635"></a>01635     <span class="keywordflow">if</span>(NULL == pstcBtInternData)
<a name="l01636"></a>01636     {
<a name="l01637"></a>01637         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01638"></a>01638     }
<a name="l01639"></a>01639     
<a name="l01640"></a>01640     <span class="comment">// Reset Base Timer mode</span>
<a name="l01641"></a>01641     pRegBt-&gt;TMCR_f.FMD = <a class="code" href="group___bt_group.html#ggad5e995baecd927106fe1163974b13fa9aeb5164872b16ae8ec1fb91b83e59a4d8" title="Reset mode.">BtResetMode</a>;
<a name="l01642"></a>01642     <span class="comment">// Set Base Timer to Reload Timer mode</span>
<a name="l01643"></a>01643     pRegBt-&gt;TMCR_f.FMD = <a class="code" href="group___bt_group.html#ggad5e995baecd927106fe1163974b13fa9ab5fbb1469eb67e7590aad0056651d82f" title="Reload timer mode.">BtRtMode</a>;
<a name="l01644"></a>01644     
<a name="l01645"></a>01645     <span class="comment">// Clock prescaler setting</span>
<a name="l01646"></a>01646     u16Pres = pstcRtConfig-&gt;<a class="code" href="structstc__bt__rt__config.html#a9a2d5ef3d291df71d6425b89c87f988f" title="Clock prescaler.">enPres</a>; <span class="comment">// Workaround for MISRA-C 2004 rule 12.7</span>
<a name="l01647"></a>01647     <span class="keywordflow">switch</span> (pstcRtConfig-&gt;<a class="code" href="structstc__bt__rt__config.html#a9a2d5ef3d291df71d6425b89c87f988f" title="Clock prescaler.">enPres</a>)
<a name="l01648"></a>01648     {
<a name="l01649"></a>01649         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggae8d33ce9fecd2e0d38d28e829ae73dbcae44ca0a79cdeb51fbf5264db65a43f0d" title="Reload timer prescaler clock: no division.">RtPresNone</a>:
<a name="l01650"></a>01650         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggae8d33ce9fecd2e0d38d28e829ae73dbca1e2637a6352870879ccca186a97d074c" title="Reload timer prescaler clock: 1/4.">RtPres1Div4</a>:
<a name="l01651"></a>01651         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggae8d33ce9fecd2e0d38d28e829ae73dbca6aff234164e653b2d5a9e0ec725e226e" title="Reload timer prescaler clock: 1/16.">RtPres1Div16</a>:
<a name="l01652"></a>01652         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggae8d33ce9fecd2e0d38d28e829ae73dbca42f5fd574bdbe28d26eea0f7964b2f42" title="Reload timer prescaler clock: 1/128.">RtPres1Div128</a>:
<a name="l01653"></a>01653         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggae8d33ce9fecd2e0d38d28e829ae73dbcae1130176e87eb1bc69cc0406e2210dbc" title="Reload timer prescaler clock: 1/256.">RtPres1Div256</a>:
<a name="l01654"></a>01654         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggae8d33ce9fecd2e0d38d28e829ae73dbca55be746aafb5dc6d92aa908b9613500d" title="Use external clock and count at rising edge.">RtPres1ExtClkRising</a>:
<a name="l01655"></a>01655         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggae8d33ce9fecd2e0d38d28e829ae73dbca44fb3174c08ae78b41ab4dd2374d8be0" title="Use external clock and count at falling edge.">RtPres1ExtClkFalling</a>:
<a name="l01656"></a>01656         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggae8d33ce9fecd2e0d38d28e829ae73dbcadc1d9d4b77de45f3eb765611680e0a8d" title="Use external clock and count at both edge.">RtPres1ExtClkBoth</a>:
<a name="l01657"></a>01657             pRegBt-&gt;TMCR2_f.CKS3 = 0u;
<a name="l01658"></a>01658             pRegBt-&gt;TMCR_f.CKS = u16Pres;
<a name="l01659"></a>01659             <span class="keywordflow">break</span>;  
<a name="l01660"></a>01660         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggae8d33ce9fecd2e0d38d28e829ae73dbcabed7c6f278ce4b0aef2191fc28e4c392" title="Reload timer prescaler clock: 1/512.">RtPres1Div512</a>:
<a name="l01661"></a>01661         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggae8d33ce9fecd2e0d38d28e829ae73dbca8b89fc911c1c6a4f00d2cf954ddd96c7" title="Reload timer prescaler clock: 1/1024.">RtPres1Div1024</a>:
<a name="l01662"></a>01662         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggae8d33ce9fecd2e0d38d28e829ae73dbca8cc0d671282911de683fdcda2b0897cc" title="Reload timer prescaler clock: 1/2048.">RtPres1Div2048</a>:
<a name="l01663"></a>01663             pRegBt-&gt;TMCR2_f.CKS3 = 1u;
<a name="l01664"></a>01664             pRegBt-&gt;TMCR_f.CKS = (u16Pres &amp; 0x7u);
<a name="l01665"></a>01665             <span class="keywordflow">break</span>;
<a name="l01666"></a>01666         <span class="keywordflow">default</span>:
<a name="l01667"></a>01667             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01668"></a>01668     }
<a name="l01669"></a>01669     <span class="comment">// Timer size setting</span>
<a name="l01670"></a>01670     <span class="keywordflow">switch</span> (pstcRtConfig-&gt;<a class="code" href="structstc__bt__rt__config.html#a9dc9e541a93ffe18a248c7ee0d3bde5c" title="16-bit or 32-bit">enSize</a>)
<a name="l01671"></a>01671     {
<a name="l01672"></a>01672         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggafde54eecc2b447775d167a81c4bf895fae936c134d781c9d709adc7ec4a70cfc6" title="16-bit mode">RtSize16Bit</a>:
<a name="l01673"></a>01673             pRegBt-&gt;TMCR_f.T32 = 0u;
<a name="l01674"></a>01674             <span class="keywordflow">break</span>;
<a name="l01675"></a>01675         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggafde54eecc2b447775d167a81c4bf895fa23035774c353e555f575064639096083" title="32-bit mode">RtSize32Bit</a>:
<a name="l01676"></a>01676             pRegBt-&gt;TMCR_f.T32 = 1u;
<a name="l01677"></a>01677             <span class="keywordflow">break</span>;
<a name="l01678"></a>01678         <span class="keywordflow">default</span>:
<a name="l01679"></a>01679             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01680"></a>01680     }
<a name="l01681"></a>01681     <span class="comment">// Output polarity setting</span>
<a name="l01682"></a>01682     <span class="keywordflow">switch</span> (pstcRtConfig-&gt;<a class="code" href="structstc__bt__rt__config.html#a966761ed829d7cf176a9ede521081915" title="Output polarity setting.">enOutputPolarity</a>)
<a name="l01683"></a>01683     {
<a name="l01684"></a>01684         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga4e16df057fec946ee8051c33dbae5a5aa4ce24d1b949a94ea4c9db315972aec5a" title="Initial polarity: low.">RtPolarityLow</a>:
<a name="l01685"></a>01685             pRegBt-&gt;TMCR_f.OSEL = 0u;
<a name="l01686"></a>01686             <span class="keywordflow">break</span>;
<a name="l01687"></a>01687         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga4e16df057fec946ee8051c33dbae5a5aa064865c57e31976be50955ca8f44d2b7" title="Initial polarity: high.">RtPolarityHigh</a>:
<a name="l01688"></a>01688             pRegBt-&gt;TMCR_f.OSEL = 1u;
<a name="l01689"></a>01689             <span class="keywordflow">break</span>;
<a name="l01690"></a>01690         <span class="keywordflow">default</span>:
<a name="l01691"></a>01691             <span class="keywordflow">return</span> ErrorInvalidParameter ;  
<a name="l01692"></a>01692     }
<a name="l01693"></a>01693     
<a name="l01694"></a>01694     <span class="comment">// External trigger setting</span>
<a name="l01695"></a>01695     u16ExtTrig = pstcRtConfig-&gt;<a class="code" href="structstc__bt__rt__config.html#a366b22b509b604a3f9069ff1c08ef435" title="External trigger setting.">enExtTrig</a>; <span class="comment">// Workaround for MISRA-C 2004 rule 12.7</span>
<a name="l01696"></a>01696     <span class="keywordflow">switch</span> (pstcRtConfig-&gt;<a class="code" href="structstc__bt__rt__config.html#a366b22b509b604a3f9069ff1c08ef435" title="External trigger setting.">enExtTrig</a>)
<a name="l01697"></a>01697     {
<a name="l01698"></a>01698         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaa63afb1c33ee52c514bc9e98ac3fdeb4a2b9fbac9e44368a596a400ab06d31e9c" title="Disable external trigger.">RtExtTiggerDisable</a>:
<a name="l01699"></a>01699         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaa63afb1c33ee52c514bc9e98ac3fdeb4a4a6629240eeef0f5bc81b0057522c01c" title="Enable external trigger with rising edge.">RtExtTiggerRisingEdge</a>:
<a name="l01700"></a>01700         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaa63afb1c33ee52c514bc9e98ac3fdeb4a24d0d38b663ffb1748b42e44100e9789" title="Enable external trigger with falling edge.">RtExtTiggerFallingEdge</a>:
<a name="l01701"></a>01701             pRegBt-&gt;TMCR_f.EGS = u16ExtTrig;
<a name="l01702"></a>01702             <span class="keywordflow">break</span>;
<a name="l01703"></a>01703 <span class="preprocessor">    #if (PDL_MCU_CORE == PDL_FM4_CORE) || (PDL_MCU_CORE == PDL_FM0P_CORE)             </span>
<a name="l01704"></a>01704 <span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaa63afb1c33ee52c514bc9e98ac3fdeb4a7a508edda00051ea3ce22d081e03235b" title="Enable external trigger with both edge.">RtExtTiggerBothEdge</a>:
<a name="l01705"></a>01705             pRegBt-&gt;TMCR2_f.GATE = 0u;        
<a name="l01706"></a>01706             pRegBt-&gt;TMCR_f.EGS = u16ExtTrig;
<a name="l01707"></a>01707             <span class="keywordflow">break</span>;
<a name="l01708"></a>01708         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaa63afb1c33ee52c514bc9e98ac3fdeb4af091dbfd181519530dd9d543c75c5e2b" title="Enable external trigger with low level.">RtExtTiggerLowLevel</a>:
<a name="l01709"></a>01709             pRegBt-&gt;TMCR2_f.GATE = 1u;        
<a name="l01710"></a>01710             pRegBt-&gt;TMCR_f.EGS = 0u;
<a name="l01711"></a>01711             <span class="keywordflow">break</span>;
<a name="l01712"></a>01712         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaa63afb1c33ee52c514bc9e98ac3fdeb4acc71059cd9919dd255ed3b907fa51724" title="Enable external trigger with high level.">RtExtTiggerHighLevel</a>:
<a name="l01713"></a>01713             pRegBt-&gt;TMCR2_f.GATE = 1u;
<a name="l01714"></a>01714             pRegBt-&gt;TMCR_f.EGS = 1u; 
<a name="l01715"></a>01715             <span class="keywordflow">break</span>;
<a name="l01716"></a>01716 <span class="preprocessor">    #endif        </span>
<a name="l01717"></a>01717 <span class="preprocessor"></span>        <span class="keywordflow">default</span>:
<a name="l01718"></a>01718             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01719"></a>01719     }
<a name="l01720"></a>01720    
<a name="l01721"></a>01721     <span class="comment">// Mode setting</span>
<a name="l01722"></a>01722     <span class="keywordflow">switch</span> (pstcRtConfig-&gt;<a class="code" href="structstc__bt__rt__config.html#a6d70a2033b57bae3b05b853e2abd2d72" title="Reload mode or one-shot mode.">enMode</a>)
<a name="l01723"></a>01723     {
<a name="l01724"></a>01724         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaa0090391bc7edcce60819f0ec88e75bca4d3aaccf0478aa3999d0453d6a079da1" title="Reload mode.">RtReload</a>:
<a name="l01725"></a>01725             pRegBt-&gt;TMCR_f.MDSE = 0u;
<a name="l01726"></a>01726             <span class="keywordflow">break</span>;
<a name="l01727"></a>01727         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaa0090391bc7edcce60819f0ec88e75bca50d9ddf9bfb8ee6219352a99f2331cd1" title="One-shot mode.">RtOneshot</a>:
<a name="l01728"></a>01728             pRegBt-&gt;TMCR_f.MDSE = 1u;
<a name="l01729"></a>01729             <span class="keywordflow">break</span>;
<a name="l01730"></a>01730         <span class="keywordflow">default</span>:
<a name="l01731"></a>01731             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l01732"></a>01732     }
<a name="l01733"></a>01733     
<a name="l01734"></a>01734 <span class="preprocessor">#if defined(PDL_INTERRUPT_BT_ACTIVE)      </span>
<a name="l01735"></a>01735 <span class="preprocessor"></span>    <span class="comment">// Interrupt enable setting</span>
<a name="l01736"></a>01736     <span class="keywordflow">if</span>(NULL != pstcRtConfig-&gt;<a class="code" href="structstc__bt__rt__config.html#ae460652e485cab574b2dad8324e4e248" title="Pointer to interrupt request enable setting structure of Base Timer with Reload TImer mode...">pstcRtIrqEn</a>)
<a name="l01737"></a>01737     {
<a name="l01738"></a>01738         <span class="keywordflow">if</span>(pstcRtConfig-&gt;<a class="code" href="structstc__bt__rt__config.html#ae460652e485cab574b2dad8324e4e248" title="Pointer to interrupt request enable setting structure of Base Timer with Reload TImer mode...">pstcRtIrqEn</a>-&gt;<a class="code" href="structstc__rt__irq__en.html#a609940921a1e453c762be341f925ae3c" title="Trigger interrupt selection.">bRtTrigIrq</a> == TRUE)
<a name="l01739"></a>01739         {
<a name="l01740"></a>01740             pRegBt-&gt;STC_f.TGIE = 1u;
<a name="l01741"></a>01741         }
<a name="l01742"></a>01742         
<a name="l01743"></a>01743         <span class="keywordflow">if</span>(pstcRtConfig-&gt;<a class="code" href="structstc__bt__rt__config.html#ae460652e485cab574b2dad8324e4e248" title="Pointer to interrupt request enable setting structure of Base Timer with Reload TImer mode...">pstcRtIrqEn</a>-&gt;<a class="code" href="structstc__rt__irq__en.html#a2b4cc7351246753acf44e42f280b2c60" title="Underflow interrupt selection.">bRtUnderflowIrq</a> == TRUE)
<a name="l01744"></a>01744         {
<a name="l01745"></a>01745             pRegBt-&gt;STC_f.UDIE = 1u;
<a name="l01746"></a>01746         }
<a name="l01747"></a>01747     }
<a name="l01748"></a>01748     <span class="comment">// Interrupt callback functions setting</span>
<a name="l01749"></a>01749     <span class="keywordflow">if</span>(NULL != pstcRtConfig-&gt;<a class="code" href="structstc__bt__rt__config.html#aa911d43445315c8e0f8ae6f1ef33fc62" title="Pointer to interrupt request callback functions structure of Base Timer with Reload TImer mode...">pstcRtIrqCb</a>)
<a name="l01750"></a>01750     {
<a name="l01751"></a>01751         pstcBtInternData-&gt;<a class="code" href="structstc__bt__intern__data.html#a56cbd589fb03177b713afae78a901915" title="Pointer to callback function the interrupt reflected by bit2 of STC.">pfnBit2IrqCb</a> = pstcRtConfig-&gt;<a class="code" href="structstc__bt__rt__config.html#aa911d43445315c8e0f8ae6f1ef33fc62" title="Pointer to interrupt request callback functions structure of Base Timer with Reload TImer mode...">pstcRtIrqCb</a>-&gt;<a class="code" href="structstc__rt__irq__cb.html#abbd1d62486c271138737bc0846774147" title="Pointer to trigger interrupt callback function.">pfnRtTrigIrqCb</a>;
<a name="l01752"></a>01752         pstcBtInternData-&gt;<a class="code" href="structstc__bt__intern__data.html#aaa6ceef70eb51a7c930d755412aa1704" title="Pointer to callback function the interrupt reflected by bit0 of STC.">pfnBit0IrqCb</a> = pstcRtConfig-&gt;<a class="code" href="structstc__bt__rt__config.html#aa911d43445315c8e0f8ae6f1ef33fc62" title="Pointer to interrupt request callback functions structure of Base Timer with Reload TImer mode...">pstcRtIrqCb</a>-&gt;<a class="code" href="structstc__rt__irq__cb.html#a28b8c3eb871feb5f2481720c591d3c83" title="Pointer to underflow interrupt callback function.">pfnRtUnderflowIrqCb</a>;
<a name="l01753"></a>01753     }
<a name="l01754"></a>01754     <span class="comment">// NVIC setting</span>
<a name="l01755"></a>01755     <span class="keywordflow">if</span>(TRUE == pstcRtConfig-&gt;<a class="code" href="structstc__bt__rt__config.html#a18b9c6a82679466e066894a2b65f0d13" title="TRUE: enable NVIC, FALSE: don&#39;t enable NVIC.">bTouchNvic</a>)
<a name="l01756"></a>01756     {
<a name="l01757"></a>01757         <a class="code" href="group___bt_group.html#gae2ce4557f2439d8300b80b8a575e3f46" title="Set NVIC Interrupt depending on BT instance.">BtInitNvic</a>(pstcBt);
<a name="l01758"></a>01758     }
<a name="l01759"></a>01759 <span class="preprocessor">#endif </span>
<a name="l01760"></a>01760 <span class="preprocessor"></span>    
<a name="l01761"></a>01761     <span class="keywordflow">return</span> Ok;
<a name="l01762"></a>01762 }
<a name="l01763"></a>01763 
<a name="l01776"></a><a class="code" href="group___bt_group.html#ga91e987c4beb1b77a17672f9379fc2aef">01776</a> en_result_t <a class="code" href="group___bt_group.html#ga91e987c4beb1b77a17672f9379fc2aef" title="De-Initialize RT function of BT.">Bt_Rt_DeInit</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, boolean_t bTouchNvic)
<a name="l01777"></a>01777 {
<a name="l01778"></a>01778     <span class="keyword">volatile</span> FM_BT_RT_TypeDef* pRegBt = (<span class="keyword">volatile</span> FM_BT_RT_TypeDef*)pstcBt;
<a name="l01779"></a>01779     <span class="comment">// Pointer to internal data</span>
<a name="l01780"></a>01780     <a class="code" href="structstc__bt__intern__data.html" title="BT internal data.">stc_bt_intern_data_t</a>* pstcBtInternData ;
<a name="l01781"></a>01781     <span class="comment">// Check for NULL pointer</span>
<a name="l01782"></a>01782     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01783"></a>01783     {
<a name="l01784"></a>01784         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01785"></a>01785     }  
<a name="l01786"></a>01786     
<a name="l01787"></a>01787     <span class="comment">// Get pointer to internal data structure ...</span>
<a name="l01788"></a>01788     pstcBtInternData = <a class="code" href="group___bt_group.html#ga8454181c55fc0672c41cbd9d76eb5cbe" title="Return the internal data for a certain BT instance.">BtGetInternDataPtr</a>( pstcBt ) ;
<a name="l01789"></a>01789     
<a name="l01790"></a>01790     <span class="keywordflow">if</span>(NULL == pstcBtInternData)
<a name="l01791"></a>01791     {
<a name="l01792"></a>01792         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01793"></a>01793     }
<a name="l01794"></a>01794     
<a name="l01795"></a>01795     pRegBt-&gt;TMCR = 0x0000u;
<a name="l01796"></a>01796     pRegBt-&gt;TMCR2 = 0x0000u;
<a name="l01797"></a>01797     pRegBt-&gt;STC = 0x0000u;
<a name="l01798"></a>01798     pRegBt-&gt;PCSR = 0x0000u;
<a name="l01799"></a>01799     
<a name="l01800"></a>01800 <span class="preprocessor">#if defined(PDL_INTERRUPT_BT_ACTIVE)  </span>
<a name="l01801"></a>01801 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(TRUE == bTouchNvic)
<a name="l01802"></a>01802     {
<a name="l01803"></a>01803         <a class="code" href="group___bt_group.html#ga738b2175e812a14e18b72bcfea6a7a89" title="Clear NVIC Interrupt depending on BT instance.">BtDeInitNvic</a>(pstcBt);
<a name="l01804"></a>01804     }
<a name="l01805"></a>01805 <span class="preprocessor">#endif    </span>
<a name="l01806"></a>01806 <span class="preprocessor"></span>    <span class="keywordflow">return</span> Ok;
<a name="l01807"></a>01807 }
<a name="l01808"></a>01808         
<a name="l01809"></a>01809         
<a name="l01819"></a><a class="code" href="group___bt_group.html#gab31468e2daa02485002afde84100467b">01819</a> en_result_t <a class="code" href="group___bt_group.html#gab31468e2daa02485002afde84100467b" title="Enable Reload timer counting.">Bt_Rt_EnableCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l01820"></a>01820 {
<a name="l01821"></a>01821     <span class="comment">// Check for NULL pointer</span>
<a name="l01822"></a>01822     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01823"></a>01823     {
<a name="l01824"></a>01824         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01825"></a>01825     }  
<a name="l01826"></a>01826     
<a name="l01827"></a>01827     ((<span class="keyword">volatile</span> FM_BT_RT_TypeDef*)pstcBt)-&gt;TMCR_f.CTEN = 1u;
<a name="l01828"></a>01828     <span class="keywordflow">return</span> Ok;
<a name="l01829"></a>01829 }
<a name="l01830"></a>01830 
<a name="l01840"></a><a class="code" href="group___bt_group.html#ga6d0687b41c6bf01e8641675297adadd0">01840</a> en_result_t <a class="code" href="group___bt_group.html#ga6d0687b41c6bf01e8641675297adadd0" title="Disable Reload timer counting.">Bt_Rt_DisableCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l01841"></a>01841 {
<a name="l01842"></a>01842     <span class="comment">// Check for NULL pointer</span>
<a name="l01843"></a>01843     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01844"></a>01844     {
<a name="l01845"></a>01845         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01846"></a>01846     }  
<a name="l01847"></a>01847     
<a name="l01848"></a>01848     ((<span class="keyword">volatile</span> FM_BT_RT_TypeDef*)pstcBt)-&gt;TMCR_f.CTEN = 0u;
<a name="l01849"></a>01849     <span class="keywordflow">return</span> Ok;
<a name="l01850"></a>01850 }
<a name="l01851"></a>01851 
<a name="l01861"></a><a class="code" href="group___bt_group.html#gac75d1c6390738159125250919286f19f">01861</a> en_result_t <a class="code" href="group___bt_group.html#gac75d1c6390738159125250919286f19f" title="Start Reload timer by software.">Bt_Rt_EnableSwTrig</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l01862"></a>01862 {
<a name="l01863"></a>01863     <span class="comment">// Check for NULL pointer</span>
<a name="l01864"></a>01864     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01865"></a>01865     {
<a name="l01866"></a>01866         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01867"></a>01867     }  
<a name="l01868"></a>01868     
<a name="l01869"></a>01869     ((<span class="keyword">volatile</span> FM_BT_RT_TypeDef*)pstcBt)-&gt;TMCR_f.STRG = 1u;
<a name="l01870"></a>01870     <span class="keywordflow">return</span> Ok;
<a name="l01871"></a>01871 }
<a name="l01872"></a>01872 
<a name="l01873"></a>01873 <span class="preprocessor">#if defined(PDL_INTERRUPT_BT_ACTIVE)   </span>
<a name="l01874"></a>01874 <span class="preprocessor"></span>
<a name="l01888"></a><a class="code" href="group___bt_group.html#ga38c98d2ec7bf83494e48e3676aa172ac">01888</a> en_result_t <a class="code" href="group___bt_group.html#ga38c98d2ec7bf83494e48e3676aa172ac" title="Enable Reload timer interrupt.">Bt_Rt_EnableIrq</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#ga456486f28ac6efe88d4b66bbf5cde9fe" title="enumeration to select the Reload timer interrupt">en_rt_irq_sel_t</a> enIrqSel)
<a name="l01889"></a>01889 {
<a name="l01890"></a>01890     <span class="comment">// Check parameter</span>
<a name="l01891"></a>01891     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01892"></a>01892     {
<a name="l01893"></a>01893         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01894"></a>01894     } 
<a name="l01895"></a>01895 
<a name="l01896"></a>01896     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l01897"></a>01897     {
<a name="l01898"></a>01898         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga2b850b6b38f5823e6b2b25b60271b5e5a73bed9854d9b9470daad9af7bfd20c9f" title="Reload Timer trigger interrupt.">RtTrigIrq</a>:
<a name="l01899"></a>01899             ((<span class="keyword">volatile</span> FM_BT_RT_TypeDef*)pstcBt)-&gt;STC_f.TGIE = 1u;
<a name="l01900"></a>01900             <span class="keywordflow">break</span>;
<a name="l01901"></a>01901         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga2b850b6b38f5823e6b2b25b60271b5e5adc7348a956ae33665cac142da7661c39" title="Reload Timer underflow interrupt.">RtUnderflowIrq</a>:
<a name="l01902"></a>01902             ((<span class="keyword">volatile</span> FM_BT_RT_TypeDef*)pstcBt)-&gt;STC_f.UDIE = 1u;
<a name="l01903"></a>01903             <span class="keywordflow">break</span>;
<a name="l01904"></a>01904         <span class="keywordflow">default</span>:
<a name="l01905"></a>01905             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01906"></a>01906     }
<a name="l01907"></a>01907     
<a name="l01908"></a>01908     <span class="keywordflow">return</span> Ok;
<a name="l01909"></a>01909 }
<a name="l01910"></a>01910 
<a name="l01925"></a><a class="code" href="group___bt_group.html#ga2dde2b09d2837fd559121e2b62174b87">01925</a> en_result_t <a class="code" href="group___bt_group.html#ga2dde2b09d2837fd559121e2b62174b87" title="Disable Reload timer interrupt.">Bt_Rt_DisableIrq</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#ga456486f28ac6efe88d4b66bbf5cde9fe" title="enumeration to select the Reload timer interrupt">en_rt_irq_sel_t</a> enIrqSel)
<a name="l01926"></a>01926 {
<a name="l01927"></a>01927     <span class="comment">// Check parameter</span>
<a name="l01928"></a>01928     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l01929"></a>01929     {
<a name="l01930"></a>01930         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01931"></a>01931     } 
<a name="l01932"></a>01932     
<a name="l01933"></a>01933     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l01934"></a>01934     {
<a name="l01935"></a>01935         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga2b850b6b38f5823e6b2b25b60271b5e5a73bed9854d9b9470daad9af7bfd20c9f" title="Reload Timer trigger interrupt.">RtTrigIrq</a>:
<a name="l01936"></a>01936             ((<span class="keyword">volatile</span> FM_BT_RT_TypeDef*)pstcBt)-&gt;STC_f.TGIE = 0u;
<a name="l01937"></a>01937             <span class="keywordflow">break</span>;
<a name="l01938"></a>01938         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga2b850b6b38f5823e6b2b25b60271b5e5adc7348a956ae33665cac142da7661c39" title="Reload Timer underflow interrupt.">RtUnderflowIrq</a>:
<a name="l01939"></a>01939             ((<span class="keyword">volatile</span> FM_BT_RT_TypeDef*)pstcBt)-&gt;STC_f.UDIE = 0u;
<a name="l01940"></a>01940             <span class="keywordflow">break</span>;
<a name="l01941"></a>01941         <span class="keywordflow">default</span>:
<a name="l01942"></a>01942             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l01943"></a>01943     }
<a name="l01944"></a>01944     
<a name="l01945"></a>01945     <span class="keywordflow">return</span> Ok;
<a name="l01946"></a>01946 }
<a name="l01947"></a>01947 
<a name="l01948"></a>01948 <span class="preprocessor">#endif</span>
<a name="l01949"></a>01949 <span class="preprocessor"></span>
<a name="l01962"></a><a class="code" href="group___bt_group.html#ga6630a07d347cac234457c3a43f3be1bd">01962</a> <a class="code" href="pdl_8h.html#a96065793ad0b302b28c5ccdee2253418">en_irq_flag_t</a> <a class="code" href="group___bt_group.html#ga6630a07d347cac234457c3a43f3be1bd" title="Get interrupt flag of Reload timer.">Bt_Rt_GetIrqFlag</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#ga456486f28ac6efe88d4b66bbf5cde9fe" title="enumeration to select the Reload timer interrupt">en_rt_irq_sel_t</a> enIrqSel)
<a name="l01963"></a>01963 {
<a name="l01964"></a>01964     <a class="code" href="pdl_8h.html#a96065793ad0b302b28c5ccdee2253418">en_irq_flag_t</a> enFlag; 
<a name="l01965"></a>01965     
<a name="l01966"></a>01966     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l01967"></a>01967     {
<a name="l01968"></a>01968         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga2b850b6b38f5823e6b2b25b60271b5e5a73bed9854d9b9470daad9af7bfd20c9f" title="Reload Timer trigger interrupt.">RtTrigIrq</a>:
<a name="l01969"></a>01969             enFlag = ((<span class="keyword">volatile</span> FM_BT_RT_TypeDef*)pstcBt)-&gt;STC_f.TGIR ? <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40faf92d27fee3a9901962a3571a496f5229" title="Flag set &#39;1&#39;.">PdlSet</a> : <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40fa441c7b7046867e503a40d3c52a237e6b" title="Flag clr &#39;0&#39;.">PdlClr</a>;
<a name="l01970"></a>01970             <span class="keywordflow">break</span>;
<a name="l01971"></a>01971         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga2b850b6b38f5823e6b2b25b60271b5e5adc7348a956ae33665cac142da7661c39" title="Reload Timer underflow interrupt.">RtUnderflowIrq</a>:
<a name="l01972"></a>01972             enFlag = ((<span class="keyword">volatile</span> FM_BT_RT_TypeDef*)pstcBt)-&gt;STC_f.UDIR ? <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40faf92d27fee3a9901962a3571a496f5229" title="Flag set &#39;1&#39;.">PdlSet</a> : <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40fa441c7b7046867e503a40d3c52a237e6b" title="Flag clr &#39;0&#39;.">PdlClr</a>;
<a name="l01973"></a>01973             <span class="keywordflow">break</span>;
<a name="l01974"></a>01974         <span class="keywordflow">default</span>:
<a name="l01975"></a>01975             <span class="keywordflow">break</span>;
<a name="l01976"></a>01976     }
<a name="l01977"></a>01977     
<a name="l01978"></a>01978     <span class="keywordflow">return</span> enFlag;
<a name="l01979"></a>01979 }
<a name="l01980"></a>01980 
<a name="l01995"></a><a class="code" href="group___bt_group.html#ga9e953913f774d4422cba39590f342b96">01995</a> en_result_t <a class="code" href="group___bt_group.html#ga9e953913f774d4422cba39590f342b96" title="Clear interrupt flag of Reload timer.">Bt_Rt_ClrIrqFlag</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#ga456486f28ac6efe88d4b66bbf5cde9fe" title="enumeration to select the Reload timer interrupt">en_rt_irq_sel_t</a> enIrqSel)
<a name="l01996"></a>01996 {
<a name="l01997"></a>01997     <span class="keywordflow">if</span>(NULL == pstcBt)
<a name="l01998"></a>01998     {
<a name="l01999"></a>01999         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02000"></a>02000     }
<a name="l02001"></a>02001     
<a name="l02002"></a>02002     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l02003"></a>02003     {
<a name="l02004"></a>02004         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga2b850b6b38f5823e6b2b25b60271b5e5a73bed9854d9b9470daad9af7bfd20c9f" title="Reload Timer trigger interrupt.">RtTrigIrq</a>:
<a name="l02005"></a>02005             ((<span class="keyword">volatile</span> FM_BT_RT_TypeDef*)pstcBt)-&gt;STC_f.TGIR = 0u;
<a name="l02006"></a>02006             <span class="keywordflow">break</span>;
<a name="l02007"></a>02007         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga2b850b6b38f5823e6b2b25b60271b5e5adc7348a956ae33665cac142da7661c39" title="Reload Timer underflow interrupt.">RtUnderflowIrq</a>:
<a name="l02008"></a>02008             ((<span class="keyword">volatile</span> FM_BT_RT_TypeDef*)pstcBt)-&gt;STC_f.UDIR = 0u;
<a name="l02009"></a>02009             <span class="keywordflow">break</span>;
<a name="l02010"></a>02010         <span class="keywordflow">default</span>:
<a name="l02011"></a>02011             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02012"></a>02012     }
<a name="l02013"></a>02013     
<a name="l02014"></a>02014     <span class="keywordflow">return</span> Ok;
<a name="l02015"></a>02015 }
<a name="l02026"></a><a class="code" href="group___bt_group.html#ga7231d2376c715b91a257efddb6f6328a">02026</a> en_result_t <a class="code" href="group___bt_group.html#ga7231d2376c715b91a257efddb6f6328a" title="Write count cycle of Reload timer.">Bt_Rt_WriteCycleVal</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, uint16_t u16Val)
<a name="l02027"></a>02027 {
<a name="l02028"></a>02028     <span class="comment">// Check parameter</span>
<a name="l02029"></a>02029     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l02030"></a>02030     {
<a name="l02031"></a>02031         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l02032"></a>02032     }  
<a name="l02033"></a>02033     
<a name="l02034"></a>02034     ((<span class="keyword">volatile</span> FM_BT_RT_TypeDef*)pstcBt)-&gt;PCSR = u16Val;
<a name="l02035"></a>02035     <span class="keywordflow">return</span> Ok;
<a name="l02036"></a>02036 }
<a name="l02037"></a>02037 
<a name="l02046"></a><a class="code" href="group___bt_group.html#ga254506bce9f55b4637bb5e70d1d7fb48">02046</a> uint16_t <a class="code" href="group___bt_group.html#ga254506bce9f55b4637bb5e70d1d7fb48" title="Read current count value of Reload timer.">Bt_Rt_ReadCurCnt</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l02047"></a>02047 { 
<a name="l02048"></a>02048     <span class="keywordflow">return</span> ((<span class="keyword">volatile</span> FM_BT_RT_TypeDef*)pstcBt)-&gt;TMR;
<a name="l02049"></a>02049 }
<a name="l02050"></a>02050 <span class="preprocessor">#endif</span>
<a name="l02051"></a>02051 <span class="preprocessor"></span>
<a name="l02052"></a>02052 <span class="preprocessor">#if (PDL_PERIPHERAL_ENABLE_BT_PWC_MODE == PDL_ON)</span>
<a name="l02053"></a>02053 <span class="preprocessor"></span>
<a name="l02065"></a><a class="code" href="group___bt_group.html#ga77a730eaba43b62a12132b6ae9ad6645">02065</a> en_result_t <a class="code" href="group___bt_group.html#ga77a730eaba43b62a12132b6ae9ad6645" title="Initialize PWC function of BT.">Bt_Pwc_Init</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="structstc__bt__pwc__config.html" title="Structure of PWC timer configuration.">stc_bt_pwc_config_t</a>* pstcPwcConfig)
<a name="l02066"></a>02066 {
<a name="l02067"></a>02067     <span class="keyword">volatile</span> FM_BT_PWC_TypeDef* pRegBt = (<span class="keyword">volatile</span> FM_BT_PWC_TypeDef*) pstcBt;
<a name="l02068"></a>02068     <span class="comment">// Pointer to internal data</span>
<a name="l02069"></a>02069     <a class="code" href="structstc__bt__intern__data.html" title="BT internal data.">stc_bt_intern_data_t</a>* pstcBtInternData ;
<a name="l02070"></a>02070     uint16_t u16Pres;
<a name="l02071"></a>02071     <span class="comment">// Check for NULL pointer</span>
<a name="l02072"></a>02072     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l02073"></a>02073     {
<a name="l02074"></a>02074         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l02075"></a>02075     }  
<a name="l02076"></a>02076     
<a name="l02077"></a>02077     <span class="comment">// Get pointer to internal data structure ...</span>
<a name="l02078"></a>02078     pstcBtInternData = <a class="code" href="group___bt_group.html#ga8454181c55fc0672c41cbd9d76eb5cbe" title="Return the internal data for a certain BT instance.">BtGetInternDataPtr</a>( pstcBt ) ;
<a name="l02079"></a>02079     
<a name="l02080"></a>02080     <span class="keywordflow">if</span>(NULL == pstcBtInternData)
<a name="l02081"></a>02081     {
<a name="l02082"></a>02082         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l02083"></a>02083     }
<a name="l02084"></a>02084     
<a name="l02085"></a>02085     <span class="comment">// Reset Base Timer mode</span>
<a name="l02086"></a>02086     pRegBt-&gt;TMCR_f.FMD = <a class="code" href="group___bt_group.html#ggad5e995baecd927106fe1163974b13fa9aeb5164872b16ae8ec1fb91b83e59a4d8" title="Reset mode.">BtResetMode</a>;
<a name="l02087"></a>02087     <span class="comment">// Set Base Timer to Reload Timer mode</span>
<a name="l02088"></a>02088     pRegBt-&gt;TMCR_f.FMD = <a class="code" href="group___bt_group.html#ggad5e995baecd927106fe1163974b13fa9ab3b8b1bed6599259e149e5731d17307f" title="PWC timer mode.">BtPwcMode</a>;
<a name="l02089"></a>02089     
<a name="l02090"></a>02090     <span class="comment">// Clock prescaler setting</span>
<a name="l02091"></a>02091     u16Pres = pstcPwcConfig-&gt;<a class="code" href="structstc__bt__pwc__config.html#adf76dac817b430922b7460cae07a62fa" title="Clock prescaler.">enPres</a>; <span class="comment">// workaround for MISRA-C 2004 rule 12.7</span>
<a name="l02092"></a>02092     <span class="keywordflow">switch</span> (pstcPwcConfig-&gt;<a class="code" href="structstc__bt__pwc__config.html#adf76dac817b430922b7460cae07a62fa" title="Clock prescaler.">enPres</a>)
<a name="l02093"></a>02093     {
<a name="l02094"></a>02094         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga9d7f19ea22ed5a9d623b56f3a741af19ae8ede76962cc1a2e3a2841baf710873d" title="PWC timer prescaler clock: no division.">PwcPresNone</a>:
<a name="l02095"></a>02095         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga9d7f19ea22ed5a9d623b56f3a741af19af06e988e25367f6e1cafca36e8e50a69" title="PWC timer prescaler clock: 1/4.">PwcPres1Div4</a>:
<a name="l02096"></a>02096         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga9d7f19ea22ed5a9d623b56f3a741af19a032fbdb30277c3246981f35ec508c12e" title="PWC timer prescaler clock: 1/16.">PwcPres1Div16</a>:
<a name="l02097"></a>02097         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga9d7f19ea22ed5a9d623b56f3a741af19a91438809349e4f7d0731d9c0a24c744e" title="PWC timer prescaler clock: 1/128.">PwcPres1Div128</a>:
<a name="l02098"></a>02098         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga9d7f19ea22ed5a9d623b56f3a741af19a908fd0dedfa334c813011379d1d67412" title="PWC timer prescaler clock: 1/256.">PwcPres1Div256</a>:
<a name="l02099"></a>02099             pRegBt-&gt;TMCR2_f.CKS3 = 0u;
<a name="l02100"></a>02100             pRegBt-&gt;TMCR_f.CKS = u16Pres;
<a name="l02101"></a>02101             <span class="keywordflow">break</span>;
<a name="l02102"></a>02102         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga9d7f19ea22ed5a9d623b56f3a741af19aeb8f6eb6086671fe34b27c38deb860eb" title="PWC timer prescaler clock: 1/512.">PwcPres1Div512</a>:
<a name="l02103"></a>02103         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga9d7f19ea22ed5a9d623b56f3a741af19ac7c462824c6f4c81f1486e57dfff8537" title="PWC timer prescaler clock: 1/1024.">PwcPres1Div1024</a>:
<a name="l02104"></a>02104         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga9d7f19ea22ed5a9d623b56f3a741af19a1c7d5bb2d020a4f162b79b6335dcdf76" title="PWC timer prescaler clock: 1/2048.">PwcPres1Div2048</a>:
<a name="l02105"></a>02105             pRegBt-&gt;TMCR2_f.CKS3 = 1u;
<a name="l02106"></a>02106             pRegBt-&gt;TMCR_f.CKS = (u16Pres &amp; 0x07u);
<a name="l02107"></a>02107             <span class="keywordflow">break</span>;
<a name="l02108"></a>02108         <span class="keywordflow">default</span>:
<a name="l02109"></a>02109             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l02110"></a>02110     }
<a name="l02111"></a>02111     <span class="comment">// Timer size setting</span>
<a name="l02112"></a>02112     <span class="keywordflow">switch</span> (pstcPwcConfig-&gt;<a class="code" href="structstc__bt__pwc__config.html#a20a2d68fe2eb73221452925c679eeb53" title="16-bit or 32-bit">enSize</a>)
<a name="l02113"></a>02113     {
<a name="l02114"></a>02114         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga889cb8ad72662d897cf9d9da72425beba9684c0dcc522907a7857f68f092359cb" title="16-bit mode">PwcSize16Bit</a>:
<a name="l02115"></a>02115             pRegBt-&gt;TMCR_f.T32 = 0u;
<a name="l02116"></a>02116             <span class="keywordflow">break</span>;
<a name="l02117"></a>02117         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga889cb8ad72662d897cf9d9da72425bebacf89bce54321e03ea5b4717c9f6832c9" title="32-bit mode">PwcSize32Bit</a>:
<a name="l02118"></a>02118             pRegBt-&gt;TMCR_f.T32 = 1u;
<a name="l02119"></a>02119             <span class="keywordflow">break</span>;
<a name="l02120"></a>02120         <span class="keywordflow">default</span>:
<a name="l02121"></a>02121             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l02122"></a>02122     }
<a name="l02123"></a>02123     <span class="comment">// Measurement mode setting</span>
<a name="l02124"></a>02124     <span class="keywordflow">switch</span> (pstcPwcConfig-&gt;<a class="code" href="structstc__bt__pwc__config.html#aa80fe44dc201e7996cfd4deb916859c7" title="Measure mode setting.">enMeasureEdge</a>)
<a name="l02125"></a>02125     {
<a name="l02126"></a>02126         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga6369b0a7f3944fc436ac6038784d170da3e81025710cbd3c04da8374afadb9dfd" title="Measure between rising edge with falling edge.">PwcMeasureRisingToFalling</a>:
<a name="l02127"></a>02127             pRegBt-&gt;TMCR_f.EGS = 0u;
<a name="l02128"></a>02128             <span class="keywordflow">break</span>;  
<a name="l02129"></a>02129         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga6369b0a7f3944fc436ac6038784d170da8a23799516b1a39fbf66890f57388149" title="Measure between rising edge with rising edge.">PwcMeasureRisingToRising</a>:
<a name="l02130"></a>02130             pRegBt-&gt;TMCR_f.EGS = 1u;
<a name="l02131"></a>02131             <span class="keywordflow">break</span>;
<a name="l02132"></a>02132         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga6369b0a7f3944fc436ac6038784d170dab4eb3d5c518f10e287452cc80abf064b" title="Measure between falling edge with falling edge.">PwcMeasureFallingToFalling</a>:
<a name="l02133"></a>02133             pRegBt-&gt;TMCR_f.EGS = 2u;
<a name="l02134"></a>02134             <span class="keywordflow">break</span>;
<a name="l02135"></a>02135         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga6369b0a7f3944fc436ac6038784d170da8e50f907f0ca0e73e70e1277ae790c4b" title="Measure between either edge with either edge.">PwcMeasureEitherToEither</a>:
<a name="l02136"></a>02136             pRegBt-&gt;TMCR_f.EGS = 3u;
<a name="l02137"></a>02137             <span class="keywordflow">break</span>;
<a name="l02138"></a>02138         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#gga6369b0a7f3944fc436ac6038784d170dadcd18dc20ef51861f06d07c7179e543c" title="Measure between falling edge with falling edge.">PwcMeasureFallingToRising</a>:
<a name="l02139"></a>02139             pRegBt-&gt;TMCR_f.EGS = 4u;
<a name="l02140"></a>02140             <span class="keywordflow">break</span>;
<a name="l02141"></a>02141         <span class="keywordflow">default</span>:
<a name="l02142"></a>02142             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l02143"></a>02143     }
<a name="l02144"></a>02144     <span class="comment">// Mode setting</span>
<a name="l02145"></a>02145     <span class="keywordflow">switch</span> (pstcPwcConfig-&gt;<a class="code" href="structstc__bt__pwc__config.html#a2eb42aa7bc414f17b3b48b300a76c0ff" title="Continuous mode or one-shot mode.">enMode</a>)
<a name="l02146"></a>02146     {
<a name="l02147"></a>02147         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaba4f9982a4e2fbe25eaf105cdc2b3b32a3bc547f499f704d30c2fa7aad6f8927f" title="Continuous mode.">PwcContinuous</a>:
<a name="l02148"></a>02148             pRegBt-&gt;TMCR_f.MDSE = 0u;
<a name="l02149"></a>02149             <span class="keywordflow">break</span>;
<a name="l02150"></a>02150         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaba4f9982a4e2fbe25eaf105cdc2b3b32ad16dd53cfa4823249ab900826b0c83eb" title="One-shot mode.">PwcOneshot</a>:
<a name="l02151"></a>02151             pRegBt-&gt;TMCR_f.MDSE = 1u;
<a name="l02152"></a>02152             <span class="keywordflow">break</span>;
<a name="l02153"></a>02153         <span class="keywordflow">default</span>:
<a name="l02154"></a>02154             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l02155"></a>02155     }
<a name="l02156"></a>02156     
<a name="l02157"></a>02157 <span class="preprocessor">#if defined(PDL_INTERRUPT_BT_ACTIVE)      </span>
<a name="l02158"></a>02158 <span class="preprocessor"></span>    <span class="comment">// Interrupt enable setting</span>
<a name="l02159"></a>02159     <span class="keywordflow">if</span>(NULL != pstcPwcConfig-&gt;<a class="code" href="structstc__bt__pwc__config.html#afca3121b99f76b38f33259b233d080f1" title="Pointer to interrupt request enable setting structure of Base Timer with PWC mode.">pstcPwcIrqEn</a>)
<a name="l02160"></a>02160     {
<a name="l02161"></a>02161         <span class="keywordflow">if</span>(pstcPwcConfig-&gt;<a class="code" href="structstc__bt__pwc__config.html#afca3121b99f76b38f33259b233d080f1" title="Pointer to interrupt request enable setting structure of Base Timer with PWC mode.">pstcPwcIrqEn</a>-&gt;<a class="code" href="structstc__pwc__irq__en.html#ac8ac316c3a99a9c6e970a4f2f3001867" title="PWC measure completion IRQ.">bPwcMeasureCompleteIrq</a> == TRUE)
<a name="l02162"></a>02162         {
<a name="l02163"></a>02163             pRegBt-&gt;STC_f.EDIE = 1u;
<a name="l02164"></a>02164         }
<a name="l02165"></a>02165         
<a name="l02166"></a>02166         <span class="keywordflow">if</span>(pstcPwcConfig-&gt;<a class="code" href="structstc__bt__pwc__config.html#afca3121b99f76b38f33259b233d080f1" title="Pointer to interrupt request enable setting structure of Base Timer with PWC mode.">pstcPwcIrqEn</a>-&gt;<a class="code" href="structstc__pwc__irq__en.html#a32a4ca2396b6185679d29d3563d8f157" title="PWC measure overflow IRQ.">bPwcMeasureOverflowIrq</a> == TRUE)
<a name="l02167"></a>02167         {
<a name="l02168"></a>02168             pRegBt-&gt;STC_f.OVIE = 1u;
<a name="l02169"></a>02169         }
<a name="l02170"></a>02170     }
<a name="l02171"></a>02171     
<a name="l02172"></a>02172     <span class="comment">// Interrupt callback functions</span>
<a name="l02173"></a>02173     <span class="keywordflow">if</span> (NULL != pstcPwcConfig-&gt;<a class="code" href="structstc__bt__pwc__config.html#aab74dee51de146ed42490f82b2d38195" title="Pointer to interrupt request callback functions structure of Base Timer with PWC mode.">pstcPwcIrqCb</a>)
<a name="l02174"></a>02174     {
<a name="l02175"></a>02175         pstcBtInternData-&gt;<a class="code" href="structstc__bt__intern__data.html#a56cbd589fb03177b713afae78a901915" title="Pointer to callback function the interrupt reflected by bit2 of STC.">pfnBit2IrqCb</a> = pstcPwcConfig-&gt;<a class="code" href="structstc__bt__pwc__config.html#aab74dee51de146ed42490f82b2d38195" title="Pointer to interrupt request callback functions structure of Base Timer with PWC mode.">pstcPwcIrqCb</a>-&gt;<a class="code" href="structstc__pwc__int__cb.html#af9dab100a326a0d1433a42c0e06174a1" title="Poiter to PWC measure completion callback function.">pfnPwcMeasureCompleteIrqCb</a>;
<a name="l02176"></a>02176         pstcBtInternData-&gt;<a class="code" href="structstc__bt__intern__data.html#aaa6ceef70eb51a7c930d755412aa1704" title="Pointer to callback function the interrupt reflected by bit0 of STC.">pfnBit0IrqCb</a> = pstcPwcConfig-&gt;<a class="code" href="structstc__bt__pwc__config.html#aab74dee51de146ed42490f82b2d38195" title="Pointer to interrupt request callback functions structure of Base Timer with PWC mode.">pstcPwcIrqCb</a>-&gt;<a class="code" href="structstc__pwc__int__cb.html#ab16752ab2f6e890ebedad4846a3e6993" title="Poiter to PWC measure overflow callback function.">pfnPwcMeasureOverflowIrqCb</a>;
<a name="l02177"></a>02177     }
<a name="l02178"></a>02178     
<a name="l02179"></a>02179     <span class="comment">// NVIC setting</span>
<a name="l02180"></a>02180     <span class="keywordflow">if</span>(pstcPwcConfig-&gt;<a class="code" href="structstc__bt__pwc__config.html#a18b9c6a82679466e066894a2b65f0d13" title="TRUE: enable NVIC, FALSE: don&#39;t enable NVIC.">bTouchNvic</a> == TRUE)
<a name="l02181"></a>02181     {
<a name="l02182"></a>02182         <a class="code" href="group___bt_group.html#gae2ce4557f2439d8300b80b8a575e3f46" title="Set NVIC Interrupt depending on BT instance.">BtInitNvic</a>(pstcBt);
<a name="l02183"></a>02183     }
<a name="l02184"></a>02184 <span class="preprocessor">#endif     </span>
<a name="l02185"></a>02185 <span class="preprocessor"></span>    
<a name="l02186"></a>02186     <span class="keywordflow">return</span> Ok;
<a name="l02187"></a>02187 }
<a name="l02188"></a>02188 
<a name="l02201"></a><a class="code" href="group___bt_group.html#ga4a1065d36503f333e07c0681fa5e6ed3">02201</a> en_result_t <a class="code" href="group___bt_group.html#ga4a1065d36503f333e07c0681fa5e6ed3" title="De-Initialize PWC function of BT.">Bt_Pwc_DeInit</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, boolean_t bTouchNvic)
<a name="l02202"></a>02202 {
<a name="l02203"></a>02203     <span class="keyword">volatile</span> FM_BT_PWC_TypeDef* pRegBt = (<span class="keyword">volatile</span> FM_BT_PWC_TypeDef*)pstcBt;
<a name="l02204"></a>02204     <span class="comment">// Pointer to internal data</span>
<a name="l02205"></a>02205     <a class="code" href="structstc__bt__intern__data.html" title="BT internal data.">stc_bt_intern_data_t</a>* pstcBtInternData ;
<a name="l02206"></a>02206     <span class="comment">// Check for NULL pointer</span>
<a name="l02207"></a>02207     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l02208"></a>02208     {
<a name="l02209"></a>02209         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l02210"></a>02210     }  
<a name="l02211"></a>02211     
<a name="l02212"></a>02212     <span class="comment">// Get pointer to internal data structure ...</span>
<a name="l02213"></a>02213     pstcBtInternData = <a class="code" href="group___bt_group.html#ga8454181c55fc0672c41cbd9d76eb5cbe" title="Return the internal data for a certain BT instance.">BtGetInternDataPtr</a>( pstcBt ) ;
<a name="l02214"></a>02214     
<a name="l02215"></a>02215     <span class="keywordflow">if</span>(NULL == pstcBtInternData)
<a name="l02216"></a>02216     {
<a name="l02217"></a>02217         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l02218"></a>02218     }
<a name="l02219"></a>02219     
<a name="l02220"></a>02220     pRegBt-&gt;TMCR = 0x0000u;
<a name="l02221"></a>02221     pRegBt-&gt;TMCR2 = 0x0000u;
<a name="l02222"></a>02222     pRegBt-&gt;STC = 0x0000u;
<a name="l02223"></a>02223     
<a name="l02224"></a>02224 <span class="preprocessor">#if defined(PDL_INTERRUPT_BT_ACTIVE)  </span>
<a name="l02225"></a>02225 <span class="preprocessor"></span>    <span class="keywordflow">if</span>(TRUE == bTouchNvic)
<a name="l02226"></a>02226     {
<a name="l02227"></a>02227         <a class="code" href="group___bt_group.html#ga738b2175e812a14e18b72bcfea6a7a89" title="Clear NVIC Interrupt depending on BT instance.">BtDeInitNvic</a>(pstcBt);
<a name="l02228"></a>02228     }
<a name="l02229"></a>02229 <span class="preprocessor">#endif    </span>
<a name="l02230"></a>02230 <span class="preprocessor"></span>    <span class="keywordflow">return</span> Ok;
<a name="l02231"></a>02231 }
<a name="l02232"></a>02232 
<a name="l02242"></a><a class="code" href="group___bt_group.html#gac936a675d9c16dda0d6e9fc9d7e3cdea">02242</a> en_result_t <a class="code" href="group___bt_group.html#gac936a675d9c16dda0d6e9fc9d7e3cdea" title="Enable PWC timer counting.">Bt_Pwc_EnableCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l02243"></a>02243 {
<a name="l02244"></a>02244     <span class="comment">// Check for NULL pointer</span>
<a name="l02245"></a>02245     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l02246"></a>02246     {
<a name="l02247"></a>02247         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l02248"></a>02248     }  
<a name="l02249"></a>02249     
<a name="l02250"></a>02250     ((<span class="keyword">volatile</span> FM_BT_PWC_TypeDef*)pstcBt)-&gt;TMCR_f.CTEN = 1u;
<a name="l02251"></a>02251     <span class="keywordflow">return</span> Ok;
<a name="l02252"></a>02252 }
<a name="l02253"></a>02253 
<a name="l02263"></a><a class="code" href="group___bt_group.html#ga65e84eb3d3015d5992fe22237086c6d4">02263</a> en_result_t <a class="code" href="group___bt_group.html#ga65e84eb3d3015d5992fe22237086c6d4" title="Disable PWC timer counting.">Bt_Pwc_DisableCount</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l02264"></a>02264 {
<a name="l02265"></a>02265     <span class="comment">// Check for NULL pointer</span>
<a name="l02266"></a>02266     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l02267"></a>02267     {
<a name="l02268"></a>02268         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l02269"></a>02269     }  
<a name="l02270"></a>02270     
<a name="l02271"></a>02271     ((<span class="keyword">volatile</span> FM_BT_PWC_TypeDef*)pstcBt)-&gt;TMCR_f.CTEN = 0u;
<a name="l02272"></a>02272     <span class="keywordflow">return</span> Ok;
<a name="l02273"></a>02273 }
<a name="l02274"></a>02274 
<a name="l02275"></a>02275 <span class="preprocessor">#if defined(PDL_INTERRUPT_BT_ACTIVE)   </span>
<a name="l02276"></a>02276 <span class="preprocessor"></span>
<a name="l02290"></a><a class="code" href="group___bt_group.html#ga061eb2d28c468d1044fc4b567b5c77fd">02290</a> en_result_t <a class="code" href="group___bt_group.html#ga061eb2d28c468d1044fc4b567b5c77fd" title="Enable PWC timer interrupt.">Bt_Pwc_EnableIrq</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#gae9aadb9d5ac55c397dc22970fba7e296" title="structure to select the PWC timer interrupt">en_pwc_irq_sel_t</a> enIrqSel)
<a name="l02291"></a>02291 {
<a name="l02292"></a>02292     <span class="comment">// Check parameter</span>
<a name="l02293"></a>02293     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l02294"></a>02294     {
<a name="l02295"></a>02295         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l02296"></a>02296     }  
<a name="l02297"></a>02297 
<a name="l02298"></a>02298     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l02299"></a>02299     {
<a name="l02300"></a>02300         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaf76bdb8f5978d628654e8c0a04f811f6ad5491bc2bc922895ea00ed381dc0ed56" title="PWC measure completion IRQ.">PwcMeasureCompleteIrq</a>:
<a name="l02301"></a>02301             ((<span class="keyword">volatile</span> FM_BT_PWC_TypeDef*)pstcBt)-&gt;STC_f.EDIE = 1u;
<a name="l02302"></a>02302             <span class="keywordflow">break</span>;
<a name="l02303"></a>02303         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaf76bdb8f5978d628654e8c0a04f811f6a12298bd93f3b3e75f5b690ba00aa463f" title="PWC measure overflow IRQ.">PwcMeasureOverflowIrq</a>:
<a name="l02304"></a>02304             ((<span class="keyword">volatile</span> FM_BT_PWC_TypeDef*)pstcBt)-&gt;STC_f.OVIE = 1u;
<a name="l02305"></a>02305             <span class="keywordflow">break</span>;
<a name="l02306"></a>02306         <span class="keywordflow">default</span>:    
<a name="l02307"></a>02307             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l02308"></a>02308     }
<a name="l02309"></a>02309     
<a name="l02310"></a>02310     <span class="keywordflow">return</span> Ok;
<a name="l02311"></a>02311 }
<a name="l02312"></a>02312 
<a name="l02327"></a><a class="code" href="group___bt_group.html#ga366d2b4ac632ba62e2372c4889386033">02327</a> en_result_t <a class="code" href="group___bt_group.html#ga366d2b4ac632ba62e2372c4889386033" title="Disable PWC timer interrupt.">Bt_Pwc_DisableIrq</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#gae9aadb9d5ac55c397dc22970fba7e296" title="structure to select the PWC timer interrupt">en_pwc_irq_sel_t</a> enIrqSel)
<a name="l02328"></a>02328 {
<a name="l02329"></a>02329     <span class="comment">// Check parameter</span>
<a name="l02330"></a>02330     <span class="keywordflow">if</span> (NULL == pstcBt)
<a name="l02331"></a>02331     {
<a name="l02332"></a>02332         <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l02333"></a>02333     }  
<a name="l02334"></a>02334     
<a name="l02335"></a>02335     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l02336"></a>02336     {
<a name="l02337"></a>02337         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaf76bdb8f5978d628654e8c0a04f811f6ad5491bc2bc922895ea00ed381dc0ed56" title="PWC measure completion IRQ.">PwcMeasureCompleteIrq</a>:
<a name="l02338"></a>02338             ((<span class="keyword">volatile</span> FM_BT_PWC_TypeDef*)pstcBt)-&gt;STC_f.EDIE = 0u;
<a name="l02339"></a>02339             <span class="keywordflow">break</span>;
<a name="l02340"></a>02340         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaf76bdb8f5978d628654e8c0a04f811f6a12298bd93f3b3e75f5b690ba00aa463f" title="PWC measure overflow IRQ.">PwcMeasureOverflowIrq</a>:
<a name="l02341"></a>02341             ((<span class="keyword">volatile</span> FM_BT_PWC_TypeDef*)pstcBt)-&gt;STC_f.OVIE = 0u;
<a name="l02342"></a>02342             <span class="keywordflow">break</span>;
<a name="l02343"></a>02343         <span class="keywordflow">default</span>:    
<a name="l02344"></a>02344             <span class="keywordflow">return</span> ErrorInvalidParameter ;
<a name="l02345"></a>02345     }
<a name="l02346"></a>02346     
<a name="l02347"></a>02347     <span class="keywordflow">return</span> Ok;
<a name="l02348"></a>02348 }
<a name="l02349"></a>02349 <span class="preprocessor">#endif</span>
<a name="l02350"></a>02350 <span class="preprocessor"></span>
<a name="l02363"></a><a class="code" href="group___bt_group.html#ga3c149b9a641337269bed26d13f5b1c59">02363</a> <a class="code" href="pdl_8h.html#a96065793ad0b302b28c5ccdee2253418">en_irq_flag_t</a> <a class="code" href="group___bt_group.html#ga3c149b9a641337269bed26d13f5b1c59" title="Get interrupt flag of PWC timer.">Bt_Pwc_GetIrqFlag</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#gae9aadb9d5ac55c397dc22970fba7e296" title="structure to select the PWC timer interrupt">en_pwc_irq_sel_t</a> enIrqSel)
<a name="l02364"></a>02364 {
<a name="l02365"></a>02365     <a class="code" href="pdl_8h.html#a96065793ad0b302b28c5ccdee2253418">en_irq_flag_t</a> enFlag; 
<a name="l02366"></a>02366     
<a name="l02367"></a>02367     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l02368"></a>02368     {
<a name="l02369"></a>02369         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaf76bdb8f5978d628654e8c0a04f811f6ad5491bc2bc922895ea00ed381dc0ed56" title="PWC measure completion IRQ.">PwcMeasureCompleteIrq</a>:
<a name="l02370"></a>02370             enFlag = ((<span class="keyword">volatile</span> FM_BT_PWC_TypeDef*)pstcBt)-&gt;STC_f.EDIR ? <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40faf92d27fee3a9901962a3571a496f5229" title="Flag set &#39;1&#39;.">PdlSet</a> : <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40fa441c7b7046867e503a40d3c52a237e6b" title="Flag clr &#39;0&#39;.">PdlClr</a>;
<a name="l02371"></a>02371             <span class="keywordflow">break</span>;
<a name="l02372"></a>02372         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaf76bdb8f5978d628654e8c0a04f811f6a12298bd93f3b3e75f5b690ba00aa463f" title="PWC measure overflow IRQ.">PwcMeasureOverflowIrq</a>:
<a name="l02373"></a>02373             enFlag = ((<span class="keyword">volatile</span> FM_BT_PWC_TypeDef*)pstcBt)-&gt;STC_f.OVIR ? <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40faf92d27fee3a9901962a3571a496f5229" title="Flag set &#39;1&#39;.">PdlSet</a> : <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40fa441c7b7046867e503a40d3c52a237e6b" title="Flag clr &#39;0&#39;.">PdlClr</a>;
<a name="l02374"></a>02374             <span class="keywordflow">break</span>;
<a name="l02375"></a>02375         <span class="keywordflow">default</span>:
<a name="l02376"></a>02376             <span class="keywordflow">break</span>;
<a name="l02377"></a>02377     }
<a name="l02378"></a>02378     
<a name="l02379"></a>02379     <span class="keywordflow">return</span> enFlag;
<a name="l02380"></a>02380 }
<a name="l02381"></a>02381 
<a name="l02396"></a><a class="code" href="group___bt_group.html#gaa4e8561c668394331e376396b2efbb0c">02396</a> en_result_t <a class="code" href="group___bt_group.html#gaa4e8561c668394331e376396b2efbb0c" title="Clear interrupt flag of PWC timer.">Bt_Pwc_ClrIrqFlag</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt, <a class="code" href="group___bt_group.html#gae9aadb9d5ac55c397dc22970fba7e296" title="structure to select the PWC timer interrupt">en_pwc_irq_sel_t</a> enIrqSel)
<a name="l02397"></a>02397 {
<a name="l02398"></a>02398     <span class="keywordflow">if</span>(NULL == pstcBt) 
<a name="l02399"></a>02399     {
<a name="l02400"></a>02400         <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02401"></a>02401     }
<a name="l02402"></a>02402   
<a name="l02403"></a>02403     <span class="keywordflow">switch</span> (enIrqSel)
<a name="l02404"></a>02404     {
<a name="l02405"></a>02405         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaf76bdb8f5978d628654e8c0a04f811f6ad5491bc2bc922895ea00ed381dc0ed56" title="PWC measure completion IRQ.">PwcMeasureCompleteIrq</a>:
<a name="l02406"></a>02406             <span class="keywordflow">break</span>;
<a name="l02407"></a>02407         <span class="keywordflow">case</span> <a class="code" href="group___bt_group.html#ggaf76bdb8f5978d628654e8c0a04f811f6a12298bd93f3b3e75f5b690ba00aa463f" title="PWC measure overflow IRQ.">PwcMeasureOverflowIrq</a>:
<a name="l02408"></a>02408             ((<span class="keyword">volatile</span> FM_BT_PWC_TypeDef*)pstcBt)-&gt;STC_f.OVIR = 0u;
<a name="l02409"></a>02409             <span class="keywordflow">break</span>;
<a name="l02410"></a>02410         <span class="keywordflow">default</span>:
<a name="l02411"></a>02411             <span class="keywordflow">return</span> ErrorInvalidParameter;
<a name="l02412"></a>02412     }
<a name="l02413"></a>02413     
<a name="l02414"></a>02414     <span class="keywordflow">return</span> Ok;
<a name="l02415"></a>02415 }
<a name="l02416"></a>02416 
<a name="l02429"></a><a class="code" href="group___bt_group.html#ga3318214b25a6e408b84b30fec0a90084">02429</a> <a class="code" href="pdl_8h.html#a0a606b7a8836c8e5b0ef0626fd0413fe" title="Generic Flag Code.">en_stat_flag_t</a> <a class="code" href="group___bt_group.html#ga3318214b25a6e408b84b30fec0a90084" title="Get error flag of PWC timer.">Bt_Pwc_GetErrorFlag</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l02430"></a>02430 {
<a name="l02431"></a>02431     <a class="code" href="pdl_8h.html#a96065793ad0b302b28c5ccdee2253418">en_irq_flag_t</a> enFlag; 
<a name="l02432"></a>02432     
<a name="l02433"></a>02433     enFlag = ((<span class="keyword">volatile</span> FM_BT_PWC_TypeDef*)pstcBt)-&gt;STC_f.ERR ? <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40faf92d27fee3a9901962a3571a496f5229" title="Flag set &#39;1&#39;.">PdlSet</a> : <a class="code" href="pdl_8h.html#a897c4a0a9fbeb0d575a3585ea356c40fa441c7b7046867e503a40d3c52a237e6b" title="Flag clr &#39;0&#39;.">PdlClr</a>;
<a name="l02434"></a>02434     
<a name="l02435"></a>02435     <span class="keywordflow">return</span> enFlag;
<a name="l02436"></a>02436 }
<a name="l02437"></a>02437 
<a name="l02448"></a><a class="code" href="group___bt_group.html#ga53fc21c7a894495c6e1518558efad1ce">02448</a> uint16_t <a class="code" href="group___bt_group.html#ga53fc21c7a894495c6e1518558efad1ce" title="Get 16 bits measure data of PWC timer.">Bt_Pwc_Get16BitMeasureData</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l02449"></a>02449 { 
<a name="l02450"></a>02450     uint16_t u16RegDtbf;
<a name="l02451"></a>02451     u16RegDtbf = ((<span class="keyword">volatile</span> FM_BT_PWC_TypeDef*)pstcBt)-&gt;DTBF;
<a name="l02452"></a>02452     <span class="keywordflow">return</span> u16RegDtbf;
<a name="l02453"></a>02453 }
<a name="l02454"></a>02454 
<a name="l02466"></a><a class="code" href="group___bt_group.html#gabf8625d52c0a8ceb7cea39d294c7d27a">02466</a> uint32_t <a class="code" href="group___bt_group.html#gabf8625d52c0a8ceb7cea39d294c7d27a" title="Get 32 bits measure data of PWC timer.">Bt_Pwc_Get32BitMeasureData</a>(<span class="keyword">volatile</span> <a class="code" href="group___bt_group.html#ga9c0d273848742c900f2a0cf358cfd9fa">stc_btn_t</a>* pstcBt)
<a name="l02467"></a>02467 { 
<a name="l02468"></a>02468     uint16_t u16RegLow, u16RegHigh;
<a name="l02469"></a>02469     
<a name="l02470"></a>02470     <span class="keywordflow">if</span>((&amp;<a class="code" href="group___bt_group.html#ga29a78fdd5ef3840c2319b2adabc6b819">BT1</a> == pstcBt) || (&amp;<a class="code" href="group___bt_group.html#gaaad4c84b9ae22e88c2a51bb967708c18">BT3</a> == pstcBt) || (&amp;<a class="code" href="group___bt_group.html#gaf1560e7066d8f375429a34a1a2b6c0d4">BT5</a> == pstcBt) || (&amp;<a class="code" href="group___bt_group.html#ga4310148344ebd0d2e78d77139c921403">BT7</a> == pstcBt))
<a name="l02471"></a>02471     {
<a name="l02472"></a>02472         <span class="keywordflow">return</span> 0ul;
<a name="l02473"></a>02473     }
<a name="l02474"></a>02474     u16RegLow = ((<span class="keyword">volatile</span> FM_BT_PWC_TypeDef*)pstcBt)-&gt;DTBF;
<a name="l02475"></a>02475     u16RegHigh = ((<span class="keyword">volatile</span> FM_BT_PWC_TypeDef*)((<span class="keyword">volatile</span> uint8_t*)pstcBt + 0x40u))-&gt;DTBF;
<a name="l02476"></a>02476     <span class="keywordflow">return</span> (((uint32_t)u16RegHigh&lt;&lt;16) | (uint32_t)u16RegLow);
<a name="l02477"></a>02477 }
<a name="l02478"></a>02478 <span class="preprocessor">#endif</span>
<a name="l02479"></a>02479 <span class="preprocessor"></span>
<a name="l02480"></a>02480 <span class="preprocessor">#if (PDL_MCU_CORE == PDL_FM4_CORE) || (PDL_MCU_CORE == PDL_FM0P_CORE)</span>
<a name="l02481"></a>02481 <span class="preprocessor"></span>
<a name="l02495"></a><a class="code" href="group___bt_group.html#ga6659297cbdda11711126899e07d8cd6c">02495</a> <span class="keywordtype">void</span> <a class="code" href="group___bt_group.html#ga6659297cbdda11711126899e07d8cd6c" title="Set the Simultaneous Start register of Base timer.">Bt_SetSimultaneousStart</a>(uint16_t u16Value)
<a name="l02496"></a>02496 {
<a name="l02497"></a>02497     FM_SBSSR-&gt;BTSSSR = u16Value;
<a name="l02498"></a>02498 }
<a name="l02499"></a>02499 <span class="preprocessor">#endif</span>
<a name="l02500"></a>02500 <span class="preprocessor"></span>
<a name="l02502"></a>02502 
<a name="l02503"></a>02503 <span class="preprocessor">#endif</span>
</pre></div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="bt_8c.html">bt.c</a>      </li>

    <li class="footer">Generated on Tue Sep 29 2015 15:06:35 for PDL for FM Family by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
